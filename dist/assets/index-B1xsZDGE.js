(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Bf={exports:{}},jo={},zf={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ws=Symbol.for("react.element"),py=Symbol.for("react.portal"),my=Symbol.for("react.fragment"),gy=Symbol.for("react.strict_mode"),yy=Symbol.for("react.profiler"),vy=Symbol.for("react.provider"),wy=Symbol.for("react.context"),xy=Symbol.for("react.forward_ref"),ky=Symbol.for("react.suspense"),Sy=Symbol.for("react.memo"),_y=Symbol.for("react.lazy"),nd=Symbol.iterator;function by(e){return e===null||typeof e!="object"?null:(e=nd&&e[nd]||e["@@iterator"],typeof e=="function"?e:null)}var Wf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gf=Object.assign,Kf={};function Dr(e,t,n){this.props=e,this.context=t,this.refs=Kf,this.updater=n||Wf}Dr.prototype.isReactComponent={};Dr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hf(){}Hf.prototype=Dr.prototype;function wu(e,t,n){this.props=e,this.context=t,this.refs=Kf,this.updater=n||Wf}var xu=wu.prototype=new Hf;xu.constructor=wu;Gf(xu,Dr.prototype);xu.isPureReactComponent=!0;var rd=Array.isArray,qf=Object.prototype.hasOwnProperty,ku={current:null},Yf={key:!0,ref:!0,__self:!0,__source:!0};function Qf(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)qf.call(t,r)&&!Yf.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ws,type:e,key:i,ref:o,props:s,_owner:ku.current}}function Ty(e,t){return{$$typeof:Ws,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Su(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ws}function jy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var sd=/\/+/g;function Jo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jy(""+e.key):t.toString(36)}function Ai(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ws:case py:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Jo(o,0):r,rd(s)?(n="",e!=null&&(n=e.replace(sd,"$&/")+"/"),Ai(s,t,n,"",function(u){return u})):s!=null&&(Su(s)&&(s=Ty(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",rd(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Jo(i,a);o+=Ai(i,t,n,l,s)}else if(l=by(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Jo(i,a++),o+=Ai(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ii(e,t,n){if(e==null)return e;var r=[],s=0;return Ai(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Cy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Re={current:null},Ni={transition:null},Ey={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:Ni,ReactCurrentOwner:ku};function Xf(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:ii,forEach:function(e,t,n){ii(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ii(e,function(){t++}),t},toArray:function(e){return ii(e,function(t){return t})||[]},only:function(e){if(!Su(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=Dr;W.Fragment=my;W.Profiler=yy;W.PureComponent=wu;W.StrictMode=gy;W.Suspense=ky;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ey;W.act=Xf;W.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Gf({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=ku.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)qf.call(t,l)&&!Yf.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ws,type:e.type,key:s,ref:i,props:r,_owner:o}};W.createContext=function(e){return e={$$typeof:wy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vy,_context:e},e.Consumer=e};W.createElement=Qf;W.createFactory=function(e){var t=Qf.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:xy,render:e}};W.isValidElement=Su;W.lazy=function(e){return{$$typeof:_y,_payload:{_status:-1,_result:e},_init:Cy}};W.memo=function(e,t){return{$$typeof:Sy,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=Ni.transition;Ni.transition={};try{e()}finally{Ni.transition=t}};W.unstable_act=Xf;W.useCallback=function(e,t){return Re.current.useCallback(e,t)};W.useContext=function(e){return Re.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return Re.current.useDeferredValue(e)};W.useEffect=function(e,t){return Re.current.useEffect(e,t)};W.useId=function(){return Re.current.useId()};W.useImperativeHandle=function(e,t,n){return Re.current.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return Re.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return Re.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return Re.current.useMemo(e,t)};W.useReducer=function(e,t,n){return Re.current.useReducer(e,t,n)};W.useRef=function(e){return Re.current.useRef(e)};W.useState=function(e){return Re.current.useState(e)};W.useSyncExternalStore=function(e,t,n){return Re.current.useSyncExternalStore(e,t,n)};W.useTransition=function(){return Re.current.useTransition()};W.version="18.3.1";zf.exports=W;var S=zf.exports;const Jf=Vf(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py=S,Ay=Symbol.for("react.element"),Ny=Symbol.for("react.fragment"),Ry=Object.prototype.hasOwnProperty,Dy=Py.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ly={key:!0,ref:!0,__self:!0,__source:!0};function Zf(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Ry.call(t,r)&&!Ly.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Ay,type:e,key:i,ref:o,props:s,_owner:Dy.current}}jo.Fragment=Ny;jo.jsx=Zf;jo.jsxs=Zf;Bf.exports=jo;var d=Bf.exports,qa={},ep={exports:{}},Ke={},tp={exports:{}},np={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,I){var F=C.length;C.push(I);e:for(;0<F;){var H=F-1>>>1,Z=C[H];if(0<s(Z,I))C[H]=I,C[F]=Z,F=H;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var I=C[0],F=C.pop();if(F!==I){C[0]=F;e:for(var H=0,Z=C.length,ri=Z>>>1;H<ri;){var pn=2*(H+1)-1,Xo=C[pn],mn=pn+1,si=C[mn];if(0>s(Xo,F))mn<Z&&0>s(si,Xo)?(C[H]=si,C[mn]=F,H=mn):(C[H]=Xo,C[pn]=F,H=pn);else if(mn<Z&&0>s(si,F))C[H]=si,C[mn]=F,H=mn;else break e}}return I}function s(C,I){var F=C.sortIndex-I.sortIndex;return F!==0?F:C.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,y=!1,v=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(C){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=C)r(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(u)}}function k(C){if(w=!1,m(C),!v)if(n(l)!==null)v=!0,B(b);else{var I=n(u);I!==null&&U(k,I.startTime-C)}}function b(C,I){v=!1,w&&(w=!1,g(_),_=-1),y=!0;var F=f;try{for(m(I),h=n(l);h!==null&&(!(h.expirationTime>I)||C&&!A());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var Z=H(h.expirationTime<=I);I=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(l)&&r(l),m(I)}else r(l);h=n(l)}if(h!==null)var ri=!0;else{var pn=n(u);pn!==null&&U(k,pn.startTime-I),ri=!1}return ri}finally{h=null,f=F,y=!1}}var T=!1,j=null,_=-1,M=5,R=-1;function A(){return!(e.unstable_now()-R<M)}function O(){if(j!==null){var C=e.unstable_now();R=C;var I=!0;try{I=j(!0,C)}finally{I?P():(T=!1,j=null)}}else T=!1}var P;if(typeof p=="function")P=function(){p(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,G=L.port2;L.port1.onmessage=O,P=function(){G.postMessage(null)}}else P=function(){x(O,0)};function B(C){j=C,T||(T=!0,P())}function U(C,I){_=x(function(){C(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,B(b))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(C){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var F=f;f=I;try{return C()}finally{f=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,I){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var F=f;f=C;try{return I()}finally{f=F}},e.unstable_scheduleCallback=function(C,I,F){var H=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?H+F:H):F=H,C){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=F+Z,C={id:c++,callback:I,priorityLevel:C,startTime:F,expirationTime:Z,sortIndex:-1},F>H?(C.sortIndex=F,t(u,C),n(l)===null&&C===n(u)&&(w?(g(_),_=-1):w=!0,U(k,F-H))):(C.sortIndex=Z,t(l,C),v||y||(v=!0,B(b))),C},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(C){var I=f;return function(){var F=f;f=I;try{return C.apply(this,arguments)}finally{f=F}}}})(np);tp.exports=np;var Oy=tp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My=S,We=Oy;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rp=new Set,xs={};function Un(e,t){Sr(e,t),Sr(e+"Capture",t)}function Sr(e,t){for(xs[e]=t,e=0;e<t.length;e++)rp.add(t[e])}var Nt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=Object.prototype.hasOwnProperty,Iy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,id={},od={};function Fy(e){return Ya.call(od,e)?!0:Ya.call(id,e)?!1:Iy.test(e)?od[e]=!0:(id[e]=!0,!1)}function $y(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Uy(e,t,n,r){if(t===null||typeof t>"u"||$y(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function De(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Se[e]=new De(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Se[t]=new De(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Se[e]=new De(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Se[e]=new De(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Se[e]=new De(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Se[e]=new De(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Se[e]=new De(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Se[e]=new De(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Se[e]=new De(e,5,!1,e.toLowerCase(),null,!1,!1)});var _u=/[\-:]([a-z])/g;function bu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_u,bu);Se[t]=new De(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_u,bu);Se[t]=new De(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_u,bu);Se[t]=new De(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Se[e]=new De(e,1,!1,e.toLowerCase(),null,!1,!1)});Se.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Se[e]=new De(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tu(e,t,n,r){var s=Se.hasOwnProperty(t)?Se[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Uy(t,n,s,r)&&(n=null),r||s===null?Fy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var It=My.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oi=Symbol.for("react.element"),Jn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),ju=Symbol.for("react.strict_mode"),Qa=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),ip=Symbol.for("react.context"),Cu=Symbol.for("react.forward_ref"),Xa=Symbol.for("react.suspense"),Ja=Symbol.for("react.suspense_list"),Eu=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),op=Symbol.for("react.offscreen"),ad=Symbol.iterator;function Vr(e){return e===null||typeof e!="object"?null:(e=ad&&e[ad]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Object.assign,Zo;function Xr(e){if(Zo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zo=t&&t[1]||""}return`
`+Zo+e}var ea=!1;function ta(e,t){if(!e||ea)return"";ea=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{ea=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Xr(e):""}function Vy(e){switch(e.tag){case 5:return Xr(e.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 2:case 15:return e=ta(e.type,!1),e;case 11:return e=ta(e.type.render,!1),e;case 1:return e=ta(e.type,!0),e;default:return""}}function Za(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zn:return"Fragment";case Jn:return"Portal";case Qa:return"Profiler";case ju:return"StrictMode";case Xa:return"Suspense";case Ja:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ip:return(e.displayName||"Context")+".Consumer";case sp:return(e._context.displayName||"Context")+".Provider";case Cu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Eu:return t=e.displayName||null,t!==null?t:Za(e.type)||"Memo";case Bt:t=e._payload,e=e._init;try{return Za(e(t))}catch{}}return null}function By(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Za(t);case 8:return t===ju?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function rn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ap(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zy(e){var t=ap(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ai(e){e._valueTracker||(e._valueTracker=zy(e))}function lp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ap(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Hi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function el(e,t){var n=t.checked;return oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ld(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=rn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function up(e,t){t=t.checked,t!=null&&Tu(e,"checked",t,!1)}function tl(e,t){up(e,t);var n=rn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nl(e,t.type,n):t.hasOwnProperty("defaultValue")&&nl(e,t.type,rn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ud(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function nl(e,t,n){(t!=="number"||Hi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Jr=Array.isArray;function mr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+rn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function rl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(E(91));return oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(E(92));if(Jr(n)){if(1<n.length)throw Error(E(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:rn(n)}}function cp(e,t){var n=rn(t.value),r=rn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function dd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var li,hp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(li=li||document.createElement("div"),li.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=li.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ks(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wy=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(e){Wy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rs[t]=rs[e]})});function fp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||rs.hasOwnProperty(e)&&rs[e]?(""+t).trim():t+"px"}function pp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=fp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Gy=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function il(e,t){if(t){if(Gy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(E(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(E(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(E(61))}if(t.style!=null&&typeof t.style!="object")throw Error(E(62))}}function ol(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var al=null;function Pu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ll=null,gr=null,yr=null;function hd(e){if(e=Hs(e)){if(typeof ll!="function")throw Error(E(280));var t=e.stateNode;t&&(t=No(t),ll(e.stateNode,e.type,t))}}function mp(e){gr?yr?yr.push(e):yr=[e]:gr=e}function gp(){if(gr){var e=gr,t=yr;if(yr=gr=null,hd(e),t)for(e=0;e<t.length;e++)hd(t[e])}}function yp(e,t){return e(t)}function vp(){}var na=!1;function wp(e,t,n){if(na)return e(t,n);na=!0;try{return yp(e,t,n)}finally{na=!1,(gr!==null||yr!==null)&&(vp(),gp())}}function Ss(e,t){var n=e.stateNode;if(n===null)return null;var r=No(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(E(231,t,typeof n));return n}var ul=!1;if(Nt)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){ul=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{ul=!1}function Ky(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var ss=!1,qi=null,Yi=!1,cl=null,Hy={onError:function(e){ss=!0,qi=e}};function qy(e,t,n,r,s,i,o,a,l){ss=!1,qi=null,Ky.apply(Hy,arguments)}function Yy(e,t,n,r,s,i,o,a,l){if(qy.apply(this,arguments),ss){if(ss){var u=qi;ss=!1,qi=null}else throw Error(E(198));Yi||(Yi=!0,cl=u)}}function Vn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fd(e){if(Vn(e)!==e)throw Error(E(188))}function Qy(e){var t=e.alternate;if(!t){if(t=Vn(e),t===null)throw Error(E(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fd(s),e;if(i===r)return fd(s),t;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?e:t}function kp(e){return e=Qy(e),e!==null?Sp(e):null}function Sp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sp(e);if(t!==null)return t;e=e.sibling}return null}var _p=We.unstable_scheduleCallback,pd=We.unstable_cancelCallback,Xy=We.unstable_shouldYield,Jy=We.unstable_requestPaint,ce=We.unstable_now,Zy=We.unstable_getCurrentPriorityLevel,Au=We.unstable_ImmediatePriority,bp=We.unstable_UserBlockingPriority,Qi=We.unstable_NormalPriority,ev=We.unstable_LowPriority,Tp=We.unstable_IdlePriority,Co=null,wt=null;function tv(e){if(wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Co,e,void 0,(e.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:sv,nv=Math.log,rv=Math.LN2;function sv(e){return e>>>=0,e===0?32:31-(nv(e)/rv|0)|0}var ui=64,ci=4194304;function Zr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Zr(a):(i&=o,i!==0&&(r=Zr(i)))}else o=n&~s,o!==0?r=Zr(o):i!==0&&(r=Zr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ht(t),s=1<<n,r|=e[n],t&=~s;return r}function iv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ov(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ht(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=iv(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function dl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jp(){var e=ui;return ui<<=1,!(ui&4194240)&&(ui=64),e}function ra(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ht(t),e[t]=n}function av(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ht(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Nu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ht(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var q=0;function Cp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ep,Ru,Pp,Ap,Np,hl=!1,di=[],Yt=null,Qt=null,Xt=null,_s=new Map,bs=new Map,Wt=[],lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function md(e,t){switch(e){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":_s.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(t.pointerId)}}function zr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Hs(t),t!==null&&Ru(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function uv(e,t,n,r,s){switch(t){case"focusin":return Yt=zr(Yt,e,t,n,r,s),!0;case"dragenter":return Qt=zr(Qt,e,t,n,r,s),!0;case"mouseover":return Xt=zr(Xt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return _s.set(i,zr(_s.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bs.set(i,zr(bs.get(i)||null,e,t,n,r,s)),!0}return!1}function Rp(e){var t=bn(e.target);if(t!==null){var n=Vn(t);if(n!==null){if(t=n.tag,t===13){if(t=xp(n),t!==null){e.blockedOn=t,Np(e.priority,function(){Pp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ri(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);al=r,n.target.dispatchEvent(r),al=null}else return t=Hs(n),t!==null&&Ru(t),e.blockedOn=n,!1;t.shift()}return!0}function gd(e,t,n){Ri(e)&&n.delete(t)}function cv(){hl=!1,Yt!==null&&Ri(Yt)&&(Yt=null),Qt!==null&&Ri(Qt)&&(Qt=null),Xt!==null&&Ri(Xt)&&(Xt=null),_s.forEach(gd),bs.forEach(gd)}function Wr(e,t){e.blockedOn===t&&(e.blockedOn=null,hl||(hl=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,cv)))}function Ts(e){function t(s){return Wr(s,e)}if(0<di.length){Wr(di[0],e);for(var n=1;n<di.length;n++){var r=di[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Yt!==null&&Wr(Yt,e),Qt!==null&&Wr(Qt,e),Xt!==null&&Wr(Xt,e),_s.forEach(t),bs.forEach(t),n=0;n<Wt.length;n++)r=Wt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wt.length&&(n=Wt[0],n.blockedOn===null);)Rp(n),n.blockedOn===null&&Wt.shift()}var vr=It.ReactCurrentBatchConfig,Ji=!0;function dv(e,t,n,r){var s=q,i=vr.transition;vr.transition=null;try{q=1,Du(e,t,n,r)}finally{q=s,vr.transition=i}}function hv(e,t,n,r){var s=q,i=vr.transition;vr.transition=null;try{q=4,Du(e,t,n,r)}finally{q=s,vr.transition=i}}function Du(e,t,n,r){if(Ji){var s=fl(e,t,n,r);if(s===null)fa(e,t,r,Zi,n),md(e,r);else if(uv(s,e,t,n,r))r.stopPropagation();else if(md(e,r),t&4&&-1<lv.indexOf(e)){for(;s!==null;){var i=Hs(s);if(i!==null&&Ep(i),i=fl(e,t,n,r),i===null&&fa(e,t,r,Zi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else fa(e,t,r,null,n)}}var Zi=null;function fl(e,t,n,r){if(Zi=null,e=Pu(r),e=bn(e),e!==null)if(t=Vn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zi=e,null}function Dp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zy()){case Au:return 1;case bp:return 4;case Qi:case ev:return 16;case Tp:return 536870912;default:return 16}default:return 16}}var Ht=null,Lu=null,Di=null;function Lp(){if(Di)return Di;var e,t=Lu,n=t.length,r,s="value"in Ht?Ht.value:Ht.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Di=s.slice(e,1<r?1-r:void 0)}function Li(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hi(){return!0}function yd(){return!1}function He(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hi:yd,this.isPropagationStopped=yd,this}return oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),t}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=He(Lr),Ks=oe({},Lr,{view:0,detail:0}),fv=He(Ks),sa,ia,Gr,Eo=oe({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gr&&(Gr&&e.type==="mousemove"?(sa=e.screenX-Gr.screenX,ia=e.screenY-Gr.screenY):ia=sa=0,Gr=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),vd=He(Eo),pv=oe({},Eo,{dataTransfer:0}),mv=He(pv),gv=oe({},Ks,{relatedTarget:0}),oa=He(gv),yv=oe({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),vv=He(yv),wv=oe({},Lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xv=He(wv),kv=oe({},Lr,{data:0}),wd=He(kv),Sv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_v={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bv[e])?!!t[e]:!1}function Mu(){return Tv}var jv=oe({},Ks,{key:function(e){if(e.key){var t=Sv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_v[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mu,charCode:function(e){return e.type==="keypress"?Li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cv=He(jv),Ev=oe({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xd=He(Ev),Pv=oe({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mu}),Av=He(Pv),Nv=oe({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rv=He(Nv),Dv=oe({},Eo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lv=He(Dv),Ov=[9,13,27,32],Iu=Nt&&"CompositionEvent"in window,is=null;Nt&&"documentMode"in document&&(is=document.documentMode);var Mv=Nt&&"TextEvent"in window&&!is,Op=Nt&&(!Iu||is&&8<is&&11>=is),kd=" ",Sd=!1;function Mp(e,t){switch(e){case"keyup":return Ov.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var er=!1;function Iv(e,t){switch(e){case"compositionend":return Ip(t);case"keypress":return t.which!==32?null:(Sd=!0,kd);case"textInput":return e=t.data,e===kd&&Sd?null:e;default:return null}}function Fv(e,t){if(er)return e==="compositionend"||!Iu&&Mp(e,t)?(e=Lp(),Di=Lu=Ht=null,er=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Op&&t.locale!=="ko"?null:t.data;default:return null}}var $v={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _d(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$v[e.type]:t==="textarea"}function Fp(e,t,n,r){mp(r),t=eo(t,"onChange"),0<t.length&&(n=new Ou("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var os=null,js=null;function Uv(e){Yp(e,0)}function Po(e){var t=rr(e);if(lp(t))return e}function Vv(e,t){if(e==="change")return t}var $p=!1;if(Nt){var aa;if(Nt){var la="oninput"in document;if(!la){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),la=typeof bd.oninput=="function"}aa=la}else aa=!1;$p=aa&&(!document.documentMode||9<document.documentMode)}function Td(){os&&(os.detachEvent("onpropertychange",Up),js=os=null)}function Up(e){if(e.propertyName==="value"&&Po(js)){var t=[];Fp(t,js,e,Pu(e)),wp(Uv,t)}}function Bv(e,t,n){e==="focusin"?(Td(),os=t,js=n,os.attachEvent("onpropertychange",Up)):e==="focusout"&&Td()}function zv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Po(js)}function Wv(e,t){if(e==="click")return Po(t)}function Gv(e,t){if(e==="input"||e==="change")return Po(t)}function Kv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pt=typeof Object.is=="function"?Object.is:Kv;function Cs(e,t){if(pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ya.call(t,s)||!pt(e[s],t[s]))return!1}return!0}function jd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cd(e,t){var n=jd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jd(n)}}function Vp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bp(){for(var e=window,t=Hi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Hi(e.document)}return t}function Fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Hv(e){var t=Bp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Vp(n.ownerDocument.documentElement,n)){if(r!==null&&Fu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Cd(n,i);var o=Cd(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qv=Nt&&"documentMode"in document&&11>=document.documentMode,tr=null,pl=null,as=null,ml=!1;function Ed(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ml||tr==null||tr!==Hi(r)||(r=tr,"selectionStart"in r&&Fu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),as&&Cs(as,r)||(as=r,r=eo(pl,"onSelect"),0<r.length&&(t=new Ou("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=tr)))}function fi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nr={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},ua={},zp={};Nt&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function Ao(e){if(ua[e])return ua[e];if(!nr[e])return e;var t=nr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zp)return ua[e]=t[n];return e}var Wp=Ao("animationend"),Gp=Ao("animationiteration"),Kp=Ao("animationstart"),Hp=Ao("transitionend"),qp=new Map,Pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(e,t){qp.set(e,t),Un(t,[e])}for(var ca=0;ca<Pd.length;ca++){var da=Pd[ca],Yv=da.toLowerCase(),Qv=da[0].toUpperCase()+da.slice(1);ln(Yv,"on"+Qv)}ln(Wp,"onAnimationEnd");ln(Gp,"onAnimationIteration");ln(Kp,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(Hp,"onTransitionEnd");Sr("onMouseEnter",["mouseout","mouseover"]);Sr("onMouseLeave",["mouseout","mouseover"]);Sr("onPointerEnter",["pointerout","pointerover"]);Sr("onPointerLeave",["pointerout","pointerover"]);Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Un("onBeforeInput",["compositionend","keypress","textInput","paste"]);Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xv=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function Ad(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Yy(r,t,void 0,e),e.currentTarget=null}function Yp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ad(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ad(s,a,u),i=l}}}if(Yi)throw e=cl,Yi=!1,cl=null,e}function X(e,t){var n=t[xl];n===void 0&&(n=t[xl]=new Set);var r=e+"__bubble";n.has(r)||(Qp(t,e,2,!1),n.add(r))}function ha(e,t,n){var r=0;t&&(r|=4),Qp(n,e,r,t)}var pi="_reactListening"+Math.random().toString(36).slice(2);function Es(e){if(!e[pi]){e[pi]=!0,rp.forEach(function(n){n!=="selectionchange"&&(Xv.has(n)||ha(n,!1,e),ha(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pi]||(t[pi]=!0,ha("selectionchange",!1,t))}}function Qp(e,t,n,r){switch(Dp(t)){case 1:var s=dv;break;case 4:s=hv;break;default:s=Du}n=s.bind(null,t,n,e),s=void 0,!ul||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function fa(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=bn(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}wp(function(){var u=i,c=Pu(n),h=[];e:{var f=qp.get(e);if(f!==void 0){var y=Ou,v=e;switch(e){case"keypress":if(Li(n)===0)break e;case"keydown":case"keyup":y=Cv;break;case"focusin":v="focus",y=oa;break;case"focusout":v="blur",y=oa;break;case"beforeblur":case"afterblur":y=oa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=mv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Av;break;case Wp:case Gp:case Kp:y=vv;break;case Hp:y=Rv;break;case"scroll":y=fv;break;case"wheel":y=Lv;break;case"copy":case"cut":case"paste":y=xv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=xd}var w=(t&4)!==0,x=!w&&e==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var p=u,m;p!==null;){m=p;var k=m.stateNode;if(m.tag===5&&k!==null&&(m=k,g!==null&&(k=Ss(p,g),k!=null&&w.push(Ps(p,k,m)))),x)break;p=p.return}0<w.length&&(f=new y(f,v,null,n,c),h.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",f&&n!==al&&(v=n.relatedTarget||n.fromElement)&&(bn(v)||v[Rt]))break e;if((y||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?bn(v):null,v!==null&&(x=Vn(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(w=vd,k="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(w=xd,k="onPointerLeave",g="onPointerEnter",p="pointer"),x=y==null?f:rr(y),m=v==null?f:rr(v),f=new w(k,p+"leave",y,n,c),f.target=x,f.relatedTarget=m,k=null,bn(c)===u&&(w=new w(g,p+"enter",v,n,c),w.target=m,w.relatedTarget=x,k=w),x=k,y&&v)t:{for(w=y,g=v,p=0,m=w;m;m=zn(m))p++;for(m=0,k=g;k;k=zn(k))m++;for(;0<p-m;)w=zn(w),p--;for(;0<m-p;)g=zn(g),m--;for(;p--;){if(w===g||g!==null&&w===g.alternate)break t;w=zn(w),g=zn(g)}w=null}else w=null;y!==null&&Nd(h,f,y,w,!1),v!==null&&x!==null&&Nd(h,x,v,w,!0)}}e:{if(f=u?rr(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var b=Vv;else if(_d(f))if($p)b=Gv;else{b=zv;var T=Bv}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=Wv);if(b&&(b=b(e,u))){Fp(h,b,n,c);break e}T&&T(e,f,u),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&nl(f,"number",f.value)}switch(T=u?rr(u):window,e){case"focusin":(_d(T)||T.contentEditable==="true")&&(tr=T,pl=u,as=null);break;case"focusout":as=pl=tr=null;break;case"mousedown":ml=!0;break;case"contextmenu":case"mouseup":case"dragend":ml=!1,Ed(h,n,c);break;case"selectionchange":if(qv)break;case"keydown":case"keyup":Ed(h,n,c)}var j;if(Iu)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else er?Mp(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Op&&n.locale!=="ko"&&(er||_!=="onCompositionStart"?_==="onCompositionEnd"&&er&&(j=Lp()):(Ht=c,Lu="value"in Ht?Ht.value:Ht.textContent,er=!0)),T=eo(u,_),0<T.length&&(_=new wd(_,e,null,n,c),h.push({event:_,listeners:T}),j?_.data=j:(j=Ip(n),j!==null&&(_.data=j)))),(j=Mv?Iv(e,n):Fv(e,n))&&(u=eo(u,"onBeforeInput"),0<u.length&&(c=new wd("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=j))}Yp(h,t)})}function Ps(e,t,n){return{instance:e,listener:t,currentTarget:n}}function eo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ss(e,n),i!=null&&r.unshift(Ps(e,i,s)),i=Ss(e,t),i!=null&&r.push(Ps(e,i,s))),e=e.return}return r}function zn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nd(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Ss(n,i),l!=null&&o.unshift(Ps(n,l,a))):s||(l=Ss(n,i),l!=null&&o.push(Ps(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Jv=/\r\n?/g,Zv=/\u0000|\uFFFD/g;function Rd(e){return(typeof e=="string"?e:""+e).replace(Jv,`
`).replace(Zv,"")}function mi(e,t,n){if(t=Rd(t),Rd(e)!==t&&n)throw Error(E(425))}function to(){}var gl=null,yl=null;function vl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wl=typeof setTimeout=="function"?setTimeout:void 0,ew=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,tw=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(e){return Dd.resolve(null).then(e).catch(nw)}:wl;function nw(e){setTimeout(function(){throw e})}function pa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ts(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ts(t)}function Jt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ld(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Or=Math.random().toString(36).slice(2),vt="__reactFiber$"+Or,As="__reactProps$"+Or,Rt="__reactContainer$"+Or,xl="__reactEvents$"+Or,rw="__reactListeners$"+Or,sw="__reactHandles$"+Or;function bn(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rt]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ld(e);e!==null;){if(n=e[vt])return n;e=Ld(e)}return t}e=n,n=e.parentNode}return null}function Hs(e){return e=e[vt]||e[Rt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(E(33))}function No(e){return e[As]||null}var kl=[],sr=-1;function un(e){return{current:e}}function J(e){0>sr||(e.current=kl[sr],kl[sr]=null,sr--)}function Q(e,t){sr++,kl[sr]=e.current,e.current=t}var sn={},Ce=un(sn),Fe=un(!1),Ln=sn;function _r(e,t){var n=e.type.contextTypes;if(!n)return sn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function $e(e){return e=e.childContextTypes,e!=null}function no(){J(Fe),J(Ce)}function Od(e,t,n){if(Ce.current!==sn)throw Error(E(168));Q(Ce,t),Q(Fe,n)}function Xp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(E(108,By(e)||"Unknown",s));return oe({},n,r)}function ro(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sn,Ln=Ce.current,Q(Ce,e),Q(Fe,Fe.current),!0}function Md(e,t,n){var r=e.stateNode;if(!r)throw Error(E(169));n?(e=Xp(e,t,Ln),r.__reactInternalMemoizedMergedChildContext=e,J(Fe),J(Ce),Q(Ce,e)):J(Fe),Q(Fe,n)}var Ct=null,Ro=!1,ma=!1;function Jp(e){Ct===null?Ct=[e]:Ct.push(e)}function iw(e){Ro=!0,Jp(e)}function cn(){if(!ma&&Ct!==null){ma=!0;var e=0,t=q;try{var n=Ct;for(q=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ct=null,Ro=!1}catch(s){throw Ct!==null&&(Ct=Ct.slice(e+1)),_p(Au,cn),s}finally{q=t,ma=!1}}return null}var ir=[],or=0,so=null,io=0,Qe=[],Xe=0,On=null,Et=1,Pt="";function wn(e,t){ir[or++]=io,ir[or++]=so,so=e,io=t}function Zp(e,t,n){Qe[Xe++]=Et,Qe[Xe++]=Pt,Qe[Xe++]=On,On=e;var r=Et;e=Pt;var s=32-ht(r)-1;r&=~(1<<s),n+=1;var i=32-ht(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Et=1<<32-ht(t)+s|n<<s|r,Pt=i+e}else Et=1<<i|n<<s|r,Pt=e}function $u(e){e.return!==null&&(wn(e,1),Zp(e,1,0))}function Uu(e){for(;e===so;)so=ir[--or],ir[or]=null,io=ir[--or],ir[or]=null;for(;e===On;)On=Qe[--Xe],Qe[Xe]=null,Pt=Qe[--Xe],Qe[Xe]=null,Et=Qe[--Xe],Qe[Xe]=null}var ze=null,Be=null,ee=!1,ct=null;function em(e,t){var n=Je(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Id(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ze=e,Be=Jt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ze=e,Be=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=On!==null?{id:Et,overflow:Pt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Je(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ze=e,Be=null,!0):!1;default:return!1}}function Sl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _l(e){if(ee){var t=Be;if(t){var n=t;if(!Id(e,t)){if(Sl(e))throw Error(E(418));t=Jt(n.nextSibling);var r=ze;t&&Id(e,t)?em(r,n):(e.flags=e.flags&-4097|2,ee=!1,ze=e)}}else{if(Sl(e))throw Error(E(418));e.flags=e.flags&-4097|2,ee=!1,ze=e}}}function Fd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ze=e}function gi(e){if(e!==ze)return!1;if(!ee)return Fd(e),ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vl(e.type,e.memoizedProps)),t&&(t=Be)){if(Sl(e))throw tm(),Error(E(418));for(;t;)em(e,t),t=Jt(t.nextSibling)}if(Fd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Be=Jt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Be=null}}else Be=ze?Jt(e.stateNode.nextSibling):null;return!0}function tm(){for(var e=Be;e;)e=Jt(e.nextSibling)}function br(){Be=ze=null,ee=!1}function Vu(e){ct===null?ct=[e]:ct.push(e)}var ow=It.ReactCurrentBatchConfig;function Kr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $d(e){var t=e._init;return t(e._payload)}function nm(e){function t(g,p){if(e){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=nn(g,p),g.index=0,g.sibling=null,g}function i(g,p,m){return g.index=m,e?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,p,m,k){return p===null||p.tag!==6?(p=Sa(m,g.mode,k),p.return=g,p):(p=s(p,m),p.return=g,p)}function l(g,p,m,k){var b=m.type;return b===Zn?c(g,p,m.props.children,k,m.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Bt&&$d(b)===p.type)?(k=s(p,m.props),k.ref=Kr(g,p,m),k.return=g,k):(k=Vi(m.type,m.key,m.props,null,g.mode,k),k.ref=Kr(g,p,m),k.return=g,k)}function u(g,p,m,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=_a(m,g.mode,k),p.return=g,p):(p=s(p,m.children||[]),p.return=g,p)}function c(g,p,m,k,b){return p===null||p.tag!==7?(p=An(m,g.mode,k,b),p.return=g,p):(p=s(p,m),p.return=g,p)}function h(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Sa(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case oi:return m=Vi(p.type,p.key,p.props,null,g.mode,m),m.ref=Kr(g,null,p),m.return=g,m;case Jn:return p=_a(p,g.mode,m),p.return=g,p;case Bt:var k=p._init;return h(g,k(p._payload),m)}if(Jr(p)||Vr(p))return p=An(p,g.mode,m,null),p.return=g,p;yi(g,p)}return null}function f(g,p,m,k){var b=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return b!==null?null:a(g,p,""+m,k);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case oi:return m.key===b?l(g,p,m,k):null;case Jn:return m.key===b?u(g,p,m,k):null;case Bt:return b=m._init,f(g,p,b(m._payload),k)}if(Jr(m)||Vr(m))return b!==null?null:c(g,p,m,k,null);yi(g,m)}return null}function y(g,p,m,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(m)||null,a(p,g,""+k,b);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case oi:return g=g.get(k.key===null?m:k.key)||null,l(p,g,k,b);case Jn:return g=g.get(k.key===null?m:k.key)||null,u(p,g,k,b);case Bt:var T=k._init;return y(g,p,m,T(k._payload),b)}if(Jr(k)||Vr(k))return g=g.get(m)||null,c(p,g,k,b,null);yi(p,k)}return null}function v(g,p,m,k){for(var b=null,T=null,j=p,_=p=0,M=null;j!==null&&_<m.length;_++){j.index>_?(M=j,j=null):M=j.sibling;var R=f(g,j,m[_],k);if(R===null){j===null&&(j=M);break}e&&j&&R.alternate===null&&t(g,j),p=i(R,p,_),T===null?b=R:T.sibling=R,T=R,j=M}if(_===m.length)return n(g,j),ee&&wn(g,_),b;if(j===null){for(;_<m.length;_++)j=h(g,m[_],k),j!==null&&(p=i(j,p,_),T===null?b=j:T.sibling=j,T=j);return ee&&wn(g,_),b}for(j=r(g,j);_<m.length;_++)M=y(j,g,_,m[_],k),M!==null&&(e&&M.alternate!==null&&j.delete(M.key===null?_:M.key),p=i(M,p,_),T===null?b=M:T.sibling=M,T=M);return e&&j.forEach(function(A){return t(g,A)}),ee&&wn(g,_),b}function w(g,p,m,k){var b=Vr(m);if(typeof b!="function")throw Error(E(150));if(m=b.call(m),m==null)throw Error(E(151));for(var T=b=null,j=p,_=p=0,M=null,R=m.next();j!==null&&!R.done;_++,R=m.next()){j.index>_?(M=j,j=null):M=j.sibling;var A=f(g,j,R.value,k);if(A===null){j===null&&(j=M);break}e&&j&&A.alternate===null&&t(g,j),p=i(A,p,_),T===null?b=A:T.sibling=A,T=A,j=M}if(R.done)return n(g,j),ee&&wn(g,_),b;if(j===null){for(;!R.done;_++,R=m.next())R=h(g,R.value,k),R!==null&&(p=i(R,p,_),T===null?b=R:T.sibling=R,T=R);return ee&&wn(g,_),b}for(j=r(g,j);!R.done;_++,R=m.next())R=y(j,g,_,R.value,k),R!==null&&(e&&R.alternate!==null&&j.delete(R.key===null?_:R.key),p=i(R,p,_),T===null?b=R:T.sibling=R,T=R);return e&&j.forEach(function(O){return t(g,O)}),ee&&wn(g,_),b}function x(g,p,m,k){if(typeof m=="object"&&m!==null&&m.type===Zn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case oi:e:{for(var b=m.key,T=p;T!==null;){if(T.key===b){if(b=m.type,b===Zn){if(T.tag===7){n(g,T.sibling),p=s(T,m.props.children),p.return=g,g=p;break e}}else if(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Bt&&$d(b)===T.type){n(g,T.sibling),p=s(T,m.props),p.ref=Kr(g,T,m),p.return=g,g=p;break e}n(g,T);break}else t(g,T);T=T.sibling}m.type===Zn?(p=An(m.props.children,g.mode,k,m.key),p.return=g,g=p):(k=Vi(m.type,m.key,m.props,null,g.mode,k),k.ref=Kr(g,p,m),k.return=g,g=k)}return o(g);case Jn:e:{for(T=m.key;p!==null;){if(p.key===T)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=s(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else t(g,p);p=p.sibling}p=_a(m,g.mode,k),p.return=g,g=p}return o(g);case Bt:return T=m._init,x(g,p,T(m._payload),k)}if(Jr(m))return v(g,p,m,k);if(Vr(m))return w(g,p,m,k);yi(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=s(p,m),p.return=g,g=p):(n(g,p),p=Sa(m,g.mode,k),p.return=g,g=p),o(g)):n(g,p)}return x}var Tr=nm(!0),rm=nm(!1),oo=un(null),ao=null,ar=null,Bu=null;function zu(){Bu=ar=ao=null}function Wu(e){var t=oo.current;J(oo),e._currentValue=t}function bl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wr(e,t){ao=e,Bu=ar=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Me=!0),e.firstContext=null)}function nt(e){var t=e._currentValue;if(Bu!==e)if(e={context:e,memoizedValue:t,next:null},ar===null){if(ao===null)throw Error(E(308));ar=e,ao.dependencies={lanes:0,firstContext:e}}else ar=ar.next=e;return t}var Tn=null;function Gu(e){Tn===null?Tn=[e]:Tn.push(e)}function sm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Gu(t)):(n.next=s.next,s.next=n),t.interleaved=n,Dt(e,r)}function Dt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zt=!1;function Ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function im(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function At(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Dt(e,n)}return s=r.interleaved,s===null?(t.next=t,Gu(r)):(t.next=s.next,s.next=t),r.interleaved=t,Dt(e,n)}function Oi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Nu(e,n)}}function Ud(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lo(e,t,n,r){var s=e.updateQueue;zt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var f=a.lane,y=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,w=a;switch(f=t,y=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(y,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(y,h,f):v,f==null)break e;h=oe({},h,f);break e;case 2:zt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=y,l=h):c=c.next=y,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);In|=o,e.lanes=o,e.memoizedState=h}}function Vd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var qs={},xt=un(qs),Ns=un(qs),Rs=un(qs);function jn(e){if(e===qs)throw Error(E(174));return e}function Hu(e,t){switch(Q(Rs,t),Q(Ns,e),Q(xt,qs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sl(t,e)}J(xt),Q(xt,t)}function jr(){J(xt),J(Ns),J(Rs)}function om(e){jn(Rs.current);var t=jn(xt.current),n=sl(t,e.type);t!==n&&(Q(Ns,e),Q(xt,n))}function qu(e){Ns.current===e&&(J(xt),J(Ns))}var ne=un(0);function uo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ga=[];function Yu(){for(var e=0;e<ga.length;e++)ga[e]._workInProgressVersionPrimary=null;ga.length=0}var Mi=It.ReactCurrentDispatcher,ya=It.ReactCurrentBatchConfig,Mn=0,ie=null,me=null,ye=null,co=!1,ls=!1,Ds=0,aw=0;function _e(){throw Error(E(321))}function Qu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pt(e[n],t[n]))return!1;return!0}function Xu(e,t,n,r,s,i){if(Mn=i,ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mi.current=e===null||e.memoizedState===null?dw:hw,e=n(r,s),ls){i=0;do{if(ls=!1,Ds=0,25<=i)throw Error(E(301));i+=1,ye=me=null,t.updateQueue=null,Mi.current=fw,e=n(r,s)}while(ls)}if(Mi.current=ho,t=me!==null&&me.next!==null,Mn=0,ye=me=ie=null,co=!1,t)throw Error(E(300));return e}function Ju(){var e=Ds!==0;return Ds=0,e}function gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?ie.memoizedState=ye=e:ye=ye.next=e,ye}function rt(){if(me===null){var e=ie.alternate;e=e!==null?e.memoizedState:null}else e=me.next;var t=ye===null?ie.memoizedState:ye.next;if(t!==null)ye=t,me=e;else{if(e===null)throw Error(E(310));me=e,e={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},ye===null?ie.memoizedState=ye=e:ye=ye.next=e}return ye}function Ls(e,t){return typeof t=="function"?t(e):t}function va(e){var t=rt(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=me,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((Mn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ie.lanes|=c,In|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,pt(r,t.memoizedState)||(Me=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ie.lanes|=i,In|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=rt(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);pt(i,t.memoizedState)||(Me=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function am(){}function lm(e,t){var n=ie,r=rt(),s=t(),i=!pt(r.memoizedState,s);if(i&&(r.memoizedState=s,Me=!0),r=r.queue,Zu(dm.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ye!==null&&ye.memoizedState.tag&1){if(n.flags|=2048,Os(9,cm.bind(null,n,r,s,t),void 0,null),ve===null)throw Error(E(349));Mn&30||um(n,t,s)}return s}function um(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cm(e,t,n,r){t.value=n,t.getSnapshot=r,hm(t)&&fm(e)}function dm(e,t,n){return n(function(){hm(t)&&fm(e)})}function hm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pt(e,n)}catch{return!0}}function fm(e){var t=Dt(e,1);t!==null&&ft(t,e,1,-1)}function Bd(e){var t=gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:e},t.queue=e,e=e.dispatch=cw.bind(null,ie,e),[t.memoizedState,e]}function Os(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function pm(){return rt().memoizedState}function Ii(e,t,n,r){var s=gt();ie.flags|=e,s.memoizedState=Os(1|t,n,void 0,r===void 0?null:r)}function Do(e,t,n,r){var s=rt();r=r===void 0?null:r;var i=void 0;if(me!==null){var o=me.memoizedState;if(i=o.destroy,r!==null&&Qu(r,o.deps)){s.memoizedState=Os(t,n,i,r);return}}ie.flags|=e,s.memoizedState=Os(1|t,n,i,r)}function zd(e,t){return Ii(8390656,8,e,t)}function Zu(e,t){return Do(2048,8,e,t)}function mm(e,t){return Do(4,2,e,t)}function gm(e,t){return Do(4,4,e,t)}function ym(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vm(e,t,n){return n=n!=null?n.concat([e]):null,Do(4,4,ym.bind(null,t,e),n)}function ec(){}function wm(e,t){var n=rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Qu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xm(e,t){var n=rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Qu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function km(e,t,n){return Mn&21?(pt(n,t)||(n=jp(),ie.lanes|=n,In|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Me=!0),e.memoizedState=n)}function lw(e,t){var n=q;q=n!==0&&4>n?n:4,e(!0);var r=ya.transition;ya.transition={};try{e(!1),t()}finally{q=n,ya.transition=r}}function Sm(){return rt().memoizedState}function uw(e,t,n){var r=tn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_m(e))bm(t,n);else if(n=sm(e,t,n,r),n!==null){var s=Ne();ft(n,e,r,s),Tm(n,t,r)}}function cw(e,t,n){var r=tn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_m(e))bm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,pt(a,o)){var l=t.interleaved;l===null?(s.next=s,Gu(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=sm(e,t,s,r),n!==null&&(s=Ne(),ft(n,e,r,s),Tm(n,t,r))}}function _m(e){var t=e.alternate;return e===ie||t!==null&&t===ie}function bm(e,t){ls=co=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Tm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Nu(e,n)}}var ho={readContext:nt,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},dw={readContext:nt,useCallback:function(e,t){return gt().memoizedState=[e,t===void 0?null:t],e},useContext:nt,useEffect:zd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ii(4194308,4,ym.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var n=gt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=uw.bind(null,ie,e),[r.memoizedState,e]},useRef:function(e){var t=gt();return e={current:e},t.memoizedState=e},useState:Bd,useDebugValue:ec,useDeferredValue:function(e){return gt().memoizedState=e},useTransition:function(){var e=Bd(!1),t=e[0];return e=lw.bind(null,e[1]),gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ie,s=gt();if(ee){if(n===void 0)throw Error(E(407));n=n()}else{if(n=t(),ve===null)throw Error(E(349));Mn&30||um(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,zd(dm.bind(null,r,i,e),[e]),r.flags|=2048,Os(9,cm.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=gt(),t=ve.identifierPrefix;if(ee){var n=Pt,r=Et;n=(r&~(1<<32-ht(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ds++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=aw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hw={readContext:nt,useCallback:wm,useContext:nt,useEffect:Zu,useImperativeHandle:vm,useInsertionEffect:mm,useLayoutEffect:gm,useMemo:xm,useReducer:va,useRef:pm,useState:function(){return va(Ls)},useDebugValue:ec,useDeferredValue:function(e){var t=rt();return km(t,me.memoizedState,e)},useTransition:function(){var e=va(Ls)[0],t=rt().memoizedState;return[e,t]},useMutableSource:am,useSyncExternalStore:lm,useId:Sm,unstable_isNewReconciler:!1},fw={readContext:nt,useCallback:wm,useContext:nt,useEffect:Zu,useImperativeHandle:vm,useInsertionEffect:mm,useLayoutEffect:gm,useMemo:xm,useReducer:wa,useRef:pm,useState:function(){return wa(Ls)},useDebugValue:ec,useDeferredValue:function(e){var t=rt();return me===null?t.memoizedState=e:km(t,me.memoizedState,e)},useTransition:function(){var e=wa(Ls)[0],t=rt().memoizedState;return[e,t]},useMutableSource:am,useSyncExternalStore:lm,useId:Sm,unstable_isNewReconciler:!1};function at(e,t){if(e&&e.defaultProps){t=oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Tl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Lo={isMounted:function(e){return(e=e._reactInternals)?Vn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ne(),s=tn(e),i=At(r,s);i.payload=t,n!=null&&(i.callback=n),t=Zt(e,i,s),t!==null&&(ft(t,e,s,r),Oi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ne(),s=tn(e),i=At(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Zt(e,i,s),t!==null&&(ft(t,e,s,r),Oi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ne(),r=tn(e),s=At(n,r);s.tag=2,t!=null&&(s.callback=t),t=Zt(e,s,r),t!==null&&(ft(t,e,r,n),Oi(t,e,r))}};function Wd(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Cs(n,r)||!Cs(s,i):!0}function jm(e,t,n){var r=!1,s=sn,i=t.contextType;return typeof i=="object"&&i!==null?i=nt(i):(s=$e(t)?Ln:Ce.current,r=t.contextTypes,i=(r=r!=null)?_r(e,s):sn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Gd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Lo.enqueueReplaceState(t,t.state,null)}function jl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ku(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=nt(i):(i=$e(t)?Ln:Ce.current,s.context=_r(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Tl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Lo.enqueueReplaceState(s,s.state,null),lo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Cr(e,t){try{var n="",r=t;do n+=Vy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function xa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Cl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pw=typeof WeakMap=="function"?WeakMap:Map;function Cm(e,t,n){n=At(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){po||(po=!0,Il=r),Cl(e,t)},n}function Em(e,t,n){n=At(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Cl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cl(e,t),typeof r!="function"&&(en===null?en=new Set([this]):en.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Kd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new pw;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ew.bind(null,e,t,n),t.then(e,e))}function Hd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qd(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=At(-1,1),t.tag=2,Zt(n,t,1))),n.lanes|=1),e)}var mw=It.ReactCurrentOwner,Me=!1;function Pe(e,t,n,r){t.child=e===null?rm(t,null,n,r):Tr(t,e.child,n,r)}function Yd(e,t,n,r,s){n=n.render;var i=t.ref;return wr(t,s),r=Xu(e,t,n,r,i,s),n=Ju(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Lt(e,t,s)):(ee&&n&&$u(t),t.flags|=1,Pe(e,t,r,s),t.child)}function Qd(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!lc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Pm(e,t,i,r,s)):(e=Vi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Cs,n(o,r)&&e.ref===t.ref)return Lt(e,t,s)}return t.flags|=1,e=nn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Pm(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Cs(i,r)&&e.ref===t.ref)if(Me=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Me=!0);else return t.lanes=e.lanes,Lt(e,t,s)}return El(e,t,n,r,s)}function Am(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(ur,Ve),Ve|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Q(ur,Ve),Ve|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Q(ur,Ve),Ve|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Q(ur,Ve),Ve|=r;return Pe(e,t,s,n),t.child}function Nm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function El(e,t,n,r,s){var i=$e(n)?Ln:Ce.current;return i=_r(t,i),wr(t,s),n=Xu(e,t,n,r,i,s),r=Ju(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Lt(e,t,s)):(ee&&r&&$u(t),t.flags|=1,Pe(e,t,n,s),t.child)}function Xd(e,t,n,r,s){if($e(n)){var i=!0;ro(t)}else i=!1;if(wr(t,s),t.stateNode===null)Fi(e,t),jm(t,n,r),jl(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nt(u):(u=$e(n)?Ln:Ce.current,u=_r(t,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Gd(t,o,r,u),zt=!1;var f=t.memoizedState;o.state=f,lo(t,r,o,s),l=t.memoizedState,a!==r||f!==l||Fe.current||zt?(typeof c=="function"&&(Tl(t,n,c,r),l=t.memoizedState),(a=zt||Wd(t,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,im(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:at(t.type,a),o.props=u,h=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nt(l):(l=$e(n)?Ln:Ce.current,l=_r(t,l));var y=n.getDerivedStateFromProps;(c=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Gd(t,o,r,l),zt=!1,f=t.memoizedState,o.state=f,lo(t,r,o,s);var v=t.memoizedState;a!==h||f!==v||Fe.current||zt?(typeof y=="function"&&(Tl(t,n,y,r),v=t.memoizedState),(u=zt||Wd(t,n,u,r,f,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Pl(e,t,n,r,i,s)}function Pl(e,t,n,r,s,i){Nm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Md(t,n,!1),Lt(e,t,i);r=t.stateNode,mw.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Tr(t,e.child,null,i),t.child=Tr(t,null,a,i)):Pe(e,t,a,i),t.memoizedState=r.state,s&&Md(t,n,!0),t.child}function Rm(e){var t=e.stateNode;t.pendingContext?Od(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Od(e,t.context,!1),Hu(e,t.containerInfo)}function Jd(e,t,n,r,s){return br(),Vu(s),t.flags|=256,Pe(e,t,n,r),t.child}var Al={dehydrated:null,treeContext:null,retryLane:0};function Nl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dm(e,t,n){var r=t.pendingProps,s=ne.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Q(ne,s&1),e===null)return _l(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Io(o,r,0,null),e=An(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Nl(n),t.memoizedState=Al,e):tc(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return gw(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=nn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=nn(a,i):(i=An(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Nl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Al,r}return i=e.child,e=i.sibling,r=nn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function tc(e,t){return t=Io({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vi(e,t,n,r){return r!==null&&Vu(r),Tr(t,e.child,null,n),e=tc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gw(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=xa(Error(E(422))),vi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Io({mode:"visible",children:r.children},s,0,null),i=An(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Tr(t,e.child,null,o),t.child.memoizedState=Nl(o),t.memoizedState=Al,i);if(!(t.mode&1))return vi(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(E(419)),r=xa(i,r,void 0),vi(e,t,o,r)}if(a=(o&e.childLanes)!==0,Me||a){if(r=ve,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dt(e,s),ft(r,e,s,-1))}return ac(),r=xa(Error(E(421))),vi(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Pw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Be=Jt(s.nextSibling),ze=t,ee=!0,ct=null,e!==null&&(Qe[Xe++]=Et,Qe[Xe++]=Pt,Qe[Xe++]=On,Et=e.id,Pt=e.overflow,On=t),t=tc(t,r.children),t.flags|=4096,t)}function Zd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),bl(e.return,t,n)}function ka(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Lm(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Pe(e,t,r.children,n),r=ne.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zd(e,n,t);else if(e.tag===19)Zd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Q(ne,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&uo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ka(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&uo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ka(t,!0,n,null,i);break;case"together":ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),In|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,n=nn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yw(e,t,n){switch(t.tag){case 3:Rm(t),br();break;case 5:om(t);break;case 1:$e(t.type)&&ro(t);break;case 4:Hu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Q(oo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Q(ne,ne.current&1),t.flags|=128,null):n&t.child.childLanes?Dm(e,t,n):(Q(ne,ne.current&1),e=Lt(e,t,n),e!==null?e.sibling:null);Q(ne,ne.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Lm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Q(ne,ne.current),r)break;return null;case 22:case 23:return t.lanes=0,Am(e,t,n)}return Lt(e,t,n)}var Om,Rl,Mm,Im;Om=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rl=function(){};Mm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,jn(xt.current);var i=null;switch(n){case"input":s=el(e,s),r=el(e,r),i=[];break;case"select":s=oe({},s,{value:void 0}),r=oe({},r,{value:void 0}),i=[];break;case"textarea":s=rl(e,s),r=rl(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=to)}il(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&X("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Im=function(e,t,n,r){n!==r&&(t.flags|=4)};function Hr(e,t){if(!ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function be(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vw(e,t,n){var r=t.pendingProps;switch(Uu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(t),null;case 1:return $e(t.type)&&no(),be(t),null;case 3:return r=t.stateNode,jr(),J(Fe),J(Ce),Yu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(gi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ct!==null&&(Ul(ct),ct=null))),Rl(e,t),be(t),null;case 5:qu(t);var s=jn(Rs.current);if(n=t.type,e!==null&&t.stateNode!=null)Mm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(E(166));return be(t),null}if(e=jn(xt.current),gi(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[vt]=t,r[As]=i,e=(t.mode&1)!==0,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(s=0;s<es.length;s++)X(es[s],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":ld(r,i),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},X("invalid",r);break;case"textarea":cd(r,i),X("invalid",r)}il(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&mi(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&mi(r.textContent,a,e),s=["children",""+a]):xs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&X("scroll",r)}switch(n){case"input":ai(r),ud(r,i,!0);break;case"textarea":ai(r),dd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=to)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[vt]=t,e[As]=r,Om(e,t,!1,!1),t.stateNode=e;e:{switch(o=ol(n,r),n){case"dialog":X("cancel",e),X("close",e),s=r;break;case"iframe":case"object":case"embed":X("load",e),s=r;break;case"video":case"audio":for(s=0;s<es.length;s++)X(es[s],e);s=r;break;case"source":X("error",e),s=r;break;case"img":case"image":case"link":X("error",e),X("load",e),s=r;break;case"details":X("toggle",e),s=r;break;case"input":ld(e,r),s=el(e,r),X("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=oe({},r,{value:void 0}),X("invalid",e);break;case"textarea":cd(e,r),s=rl(e,r),X("invalid",e);break;default:s=r}il(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?pp(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hp(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ks(e,l):typeof l=="number"&&ks(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xs.hasOwnProperty(i)?l!=null&&i==="onScroll"&&X("scroll",e):l!=null&&Tu(e,i,l,o))}switch(n){case"input":ai(e),ud(e,r,!1);break;case"textarea":ai(e),dd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+rn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?mr(e,!!r.multiple,i,!1):r.defaultValue!=null&&mr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=to)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return be(t),null;case 6:if(e&&t.stateNode!=null)Im(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(E(166));if(n=jn(Rs.current),jn(xt.current),gi(t)){if(r=t.stateNode,n=t.memoizedProps,r[vt]=t,(i=r.nodeValue!==n)&&(e=ze,e!==null))switch(e.tag){case 3:mi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vt]=t,t.stateNode=r}return be(t),null;case 13:if(J(ne),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ee&&Be!==null&&t.mode&1&&!(t.flags&128))tm(),br(),t.flags|=98560,i=!1;else if(i=gi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(E(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[vt]=t}else br(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;be(t),i=!1}else ct!==null&&(Ul(ct),ct=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ne.current&1?ge===0&&(ge=3):ac())),t.updateQueue!==null&&(t.flags|=4),be(t),null);case 4:return jr(),Rl(e,t),e===null&&Es(t.stateNode.containerInfo),be(t),null;case 10:return Wu(t.type._context),be(t),null;case 17:return $e(t.type)&&no(),be(t),null;case 19:if(J(ne),i=t.memoizedState,i===null)return be(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Hr(i,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=uo(e),o!==null){for(t.flags|=128,Hr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Q(ne,ne.current&1|2),t.child}e=e.sibling}i.tail!==null&&ce()>Er&&(t.flags|=128,r=!0,Hr(i,!1),t.lanes=4194304)}else{if(!r)if(e=uo(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ee)return be(t),null}else 2*ce()-i.renderingStartTime>Er&&n!==1073741824&&(t.flags|=128,r=!0,Hr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ce(),t.sibling=null,n=ne.current,Q(ne,r?n&1|2:n&1),t):(be(t),null);case 22:case 23:return oc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ve&1073741824&&(be(t),t.subtreeFlags&6&&(t.flags|=8192)):be(t),null;case 24:return null;case 25:return null}throw Error(E(156,t.tag))}function ww(e,t){switch(Uu(t),t.tag){case 1:return $e(t.type)&&no(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jr(),J(Fe),J(Ce),Yu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qu(t),null;case 13:if(J(ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(ne),null;case 4:return jr(),null;case 10:return Wu(t.type._context),null;case 22:case 23:return oc(),null;case 24:return null;default:return null}}var wi=!1,Te=!1,xw=typeof WeakSet=="function"?WeakSet:Set,N=null;function lr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){le(e,t,r)}else n.current=null}function Dl(e,t,n){try{n()}catch(r){le(e,t,r)}}var eh=!1;function kw(e,t){if(gl=Ji,e=Bp(),Fu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=e,f=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===e)break t;if(f===n&&++u===s&&(a=o),f===i&&++c===r&&(l=o),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yl={focusedElem:e,selectionRange:n},Ji=!1,N=t;N!==null;)if(t=N,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,N=e;else for(;N!==null;){t=N;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,x=v.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:at(t.type,w),x);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(k){le(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,N=e;break}N=t.return}return v=eh,eh=!1,v}function us(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dl(t,n,i)}s=s.next}while(s!==r)}}function Oo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ll(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fm(e){var t=e.alternate;t!==null&&(e.alternate=null,Fm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vt],delete t[As],delete t[xl],delete t[rw],delete t[sw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $m(e){return e.tag===5||e.tag===3||e.tag===4}function th(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$m(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ol(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=to));else if(r!==4&&(e=e.child,e!==null))for(Ol(e,t,n),e=e.sibling;e!==null;)Ol(e,t,n),e=e.sibling}function Ml(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ml(e,t,n),e=e.sibling;e!==null;)Ml(e,t,n),e=e.sibling}var we=null,lt=!1;function Ft(e,t,n){for(n=n.child;n!==null;)Um(e,t,n),n=n.sibling}function Um(e,t,n){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Co,n)}catch{}switch(n.tag){case 5:Te||lr(n,t);case 6:var r=we,s=lt;we=null,Ft(e,t,n),we=r,lt=s,we!==null&&(lt?(e=we,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):we.removeChild(n.stateNode));break;case 18:we!==null&&(lt?(e=we,n=n.stateNode,e.nodeType===8?pa(e.parentNode,n):e.nodeType===1&&pa(e,n),Ts(e)):pa(we,n.stateNode));break;case 4:r=we,s=lt,we=n.stateNode.containerInfo,lt=!0,Ft(e,t,n),we=r,lt=s;break;case 0:case 11:case 14:case 15:if(!Te&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dl(n,t,o),s=s.next}while(s!==r)}Ft(e,t,n);break;case 1:if(!Te&&(lr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){le(n,t,a)}Ft(e,t,n);break;case 21:Ft(e,t,n);break;case 22:n.mode&1?(Te=(r=Te)||n.memoizedState!==null,Ft(e,t,n),Te=r):Ft(e,t,n);break;default:Ft(e,t,n)}}function nh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xw),t.forEach(function(r){var s=Aw.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function st(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:we=a.stateNode,lt=!1;break e;case 3:we=a.stateNode.containerInfo,lt=!0;break e;case 4:we=a.stateNode.containerInfo,lt=!0;break e}a=a.return}if(we===null)throw Error(E(160));Um(i,o,s),we=null,lt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){le(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vm(t,e),t=t.sibling}function Vm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(st(t,e),mt(e),r&4){try{us(3,e,e.return),Oo(3,e)}catch(w){le(e,e.return,w)}try{us(5,e,e.return)}catch(w){le(e,e.return,w)}}break;case 1:st(t,e),mt(e),r&512&&n!==null&&lr(n,n.return);break;case 5:if(st(t,e),mt(e),r&512&&n!==null&&lr(n,n.return),e.flags&32){var s=e.stateNode;try{ks(s,"")}catch(w){le(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&up(s,i),ol(a,o);var u=ol(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?pp(s,h):c==="dangerouslySetInnerHTML"?hp(s,h):c==="children"?ks(s,h):Tu(s,c,h,u)}switch(a){case"input":tl(s,i);break;case"textarea":cp(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?mr(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?mr(s,!!i.multiple,i.defaultValue,!0):mr(s,!!i.multiple,i.multiple?[]:"",!1))}s[As]=i}catch(w){le(e,e.return,w)}}break;case 6:if(st(t,e),mt(e),r&4){if(e.stateNode===null)throw Error(E(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){le(e,e.return,w)}}break;case 3:if(st(t,e),mt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ts(t.containerInfo)}catch(w){le(e,e.return,w)}break;case 4:st(t,e),mt(e);break;case 13:st(t,e),mt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sc=ce())),r&4&&nh(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Te=(u=Te)||c,st(t,e),Te=u):st(t,e),mt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(N=e,c=e.child;c!==null;){for(h=N=c;N!==null;){switch(f=N,y=f.child,f.tag){case 0:case 11:case 14:case 15:us(4,f,f.return);break;case 1:lr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){le(r,n,w)}}break;case 5:lr(f,f.return);break;case 22:if(f.memoizedState!==null){sh(h);continue}}y!==null?(y.return=f,N=y):sh(h)}c=c.sibling}e:for(c=null,h=e;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fp("display",o))}catch(w){le(e,e.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){le(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:st(t,e),mt(e),r&4&&nh(e);break;case 21:break;default:st(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($m(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ks(s,""),r.flags&=-33);var i=th(e);Ml(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=th(e);Ol(e,a,o);break;default:throw Error(E(161))}}catch(l){le(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Sw(e,t,n){N=e,Bm(e)}function Bm(e,t,n){for(var r=(e.mode&1)!==0;N!==null;){var s=N,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||wi;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Te;a=wi;var u=Te;if(wi=o,(Te=l)&&!u)for(N=s;N!==null;)o=N,l=o.child,o.tag===22&&o.memoizedState!==null?ih(s):l!==null?(l.return=o,N=l):ih(s);for(;i!==null;)N=i,Bm(i),i=i.sibling;N=s,wi=a,Te=u}rh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,N=i):rh(e)}}function rh(e){for(;N!==null;){var t=N;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Te||Oo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Te)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:at(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Vd(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Vd(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ts(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Te||t.flags&512&&Ll(t)}catch(f){le(t,t.return,f)}}if(t===e){N=null;break}if(n=t.sibling,n!==null){n.return=t.return,N=n;break}N=t.return}}function sh(e){for(;N!==null;){var t=N;if(t===e){N=null;break}var n=t.sibling;if(n!==null){n.return=t.return,N=n;break}N=t.return}}function ih(e){for(;N!==null;){var t=N;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Oo(4,t)}catch(l){le(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){le(t,s,l)}}var i=t.return;try{Ll(t)}catch(l){le(t,i,l)}break;case 5:var o=t.return;try{Ll(t)}catch(l){le(t,o,l)}}}catch(l){le(t,t.return,l)}if(t===e){N=null;break}var a=t.sibling;if(a!==null){a.return=t.return,N=a;break}N=t.return}}var _w=Math.ceil,fo=It.ReactCurrentDispatcher,nc=It.ReactCurrentOwner,Ze=It.ReactCurrentBatchConfig,K=0,ve=null,he=null,ke=0,Ve=0,ur=un(0),ge=0,Ms=null,In=0,Mo=0,rc=0,cs=null,Le=null,sc=0,Er=1/0,Tt=null,po=!1,Il=null,en=null,xi=!1,qt=null,mo=0,ds=0,Fl=null,$i=-1,Ui=0;function Ne(){return K&6?ce():$i!==-1?$i:$i=ce()}function tn(e){return e.mode&1?K&2&&ke!==0?ke&-ke:ow.transition!==null?(Ui===0&&(Ui=jp()),Ui):(e=q,e!==0||(e=window.event,e=e===void 0?16:Dp(e.type)),e):1}function ft(e,t,n,r){if(50<ds)throw ds=0,Fl=null,Error(E(185));Gs(e,n,r),(!(K&2)||e!==ve)&&(e===ve&&(!(K&2)&&(Mo|=n),ge===4&&Gt(e,ke)),Ue(e,r),n===1&&K===0&&!(t.mode&1)&&(Er=ce()+500,Ro&&cn()))}function Ue(e,t){var n=e.callbackNode;ov(e,t);var r=Xi(e,e===ve?ke:0);if(r===0)n!==null&&pd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&pd(n),t===1)e.tag===0?iw(oh.bind(null,e)):Jp(oh.bind(null,e)),tw(function(){!(K&6)&&cn()}),n=null;else{switch(Cp(r)){case 1:n=Au;break;case 4:n=bp;break;case 16:n=Qi;break;case 536870912:n=Tp;break;default:n=Qi}n=Qm(n,zm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zm(e,t){if($i=-1,Ui=0,K&6)throw Error(E(327));var n=e.callbackNode;if(xr()&&e.callbackNode!==n)return null;var r=Xi(e,e===ve?ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=go(e,r);else{t=r;var s=K;K|=2;var i=Gm();(ve!==e||ke!==t)&&(Tt=null,Er=ce()+500,Pn(e,t));do try{jw();break}catch(a){Wm(e,a)}while(!0);zu(),fo.current=i,K=s,he!==null?t=0:(ve=null,ke=0,t=ge)}if(t!==0){if(t===2&&(s=dl(e),s!==0&&(r=s,t=$l(e,s))),t===1)throw n=Ms,Pn(e,0),Gt(e,r),Ue(e,ce()),n;if(t===6)Gt(e,r);else{if(s=e.current.alternate,!(r&30)&&!bw(s)&&(t=go(e,r),t===2&&(i=dl(e),i!==0&&(r=i,t=$l(e,i))),t===1))throw n=Ms,Pn(e,0),Gt(e,r),Ue(e,ce()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(E(345));case 2:xn(e,Le,Tt);break;case 3:if(Gt(e,r),(r&130023424)===r&&(t=sc+500-ce(),10<t)){if(Xi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ne(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=wl(xn.bind(null,e,Le,Tt),t);break}xn(e,Le,Tt);break;case 4:if(Gt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-ht(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_w(r/1960))-r,10<r){e.timeoutHandle=wl(xn.bind(null,e,Le,Tt),r);break}xn(e,Le,Tt);break;case 5:xn(e,Le,Tt);break;default:throw Error(E(329))}}}return Ue(e,ce()),e.callbackNode===n?zm.bind(null,e):null}function $l(e,t){var n=cs;return e.current.memoizedState.isDehydrated&&(Pn(e,t).flags|=256),e=go(e,t),e!==2&&(t=Le,Le=n,t!==null&&Ul(t)),e}function Ul(e){Le===null?Le=e:Le.push.apply(Le,e)}function bw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!pt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gt(e,t){for(t&=~rc,t&=~Mo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ht(t),r=1<<n;e[n]=-1,t&=~r}}function oh(e){if(K&6)throw Error(E(327));xr();var t=Xi(e,0);if(!(t&1))return Ue(e,ce()),null;var n=go(e,t);if(e.tag!==0&&n===2){var r=dl(e);r!==0&&(t=r,n=$l(e,r))}if(n===1)throw n=Ms,Pn(e,0),Gt(e,t),Ue(e,ce()),n;if(n===6)throw Error(E(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xn(e,Le,Tt),Ue(e,ce()),null}function ic(e,t){var n=K;K|=1;try{return e(t)}finally{K=n,K===0&&(Er=ce()+500,Ro&&cn())}}function Fn(e){qt!==null&&qt.tag===0&&!(K&6)&&xr();var t=K;K|=1;var n=Ze.transition,r=q;try{if(Ze.transition=null,q=1,e)return e()}finally{q=r,Ze.transition=n,K=t,!(K&6)&&cn()}}function oc(){Ve=ur.current,J(ur)}function Pn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ew(n)),he!==null)for(n=he.return;n!==null;){var r=n;switch(Uu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&no();break;case 3:jr(),J(Fe),J(Ce),Yu();break;case 5:qu(r);break;case 4:jr();break;case 13:J(ne);break;case 19:J(ne);break;case 10:Wu(r.type._context);break;case 22:case 23:oc()}n=n.return}if(ve=e,he=e=nn(e.current,null),ke=Ve=t,ge=0,Ms=null,rc=Mo=In=0,Le=cs=null,Tn!==null){for(t=0;t<Tn.length;t++)if(n=Tn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Tn=null}return e}function Wm(e,t){do{var n=he;try{if(zu(),Mi.current=ho,co){for(var r=ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}co=!1}if(Mn=0,ye=me=ie=null,ls=!1,Ds=0,nc.current=null,n===null||n.return===null){ge=1,Ms=t,he=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=ke,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var y=Hd(o);if(y!==null){y.flags&=-257,qd(y,o,a,i,t),y.mode&1&&Kd(i,u,t),t=y,l=u;var v=t.updateQueue;if(v===null){var w=new Set;w.add(l),t.updateQueue=w}else v.add(l);break e}else{if(!(t&1)){Kd(i,u,t),ac();break e}l=Error(E(426))}}else if(ee&&a.mode&1){var x=Hd(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),qd(x,o,a,i,t),Vu(Cr(l,a));break e}}i=l=Cr(l,a),ge!==4&&(ge=2),cs===null?cs=[i]:cs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Cm(i,l,t);Ud(i,g);break e;case 1:a=l;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(en===null||!en.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=Em(i,a,t);Ud(i,k);break e}}i=i.return}while(i!==null)}Hm(n)}catch(b){t=b,he===n&&n!==null&&(he=n=n.return);continue}break}while(!0)}function Gm(){var e=fo.current;return fo.current=ho,e===null?ho:e}function ac(){(ge===0||ge===3||ge===2)&&(ge=4),ve===null||!(In&268435455)&&!(Mo&268435455)||Gt(ve,ke)}function go(e,t){var n=K;K|=2;var r=Gm();(ve!==e||ke!==t)&&(Tt=null,Pn(e,t));do try{Tw();break}catch(s){Wm(e,s)}while(!0);if(zu(),K=n,fo.current=r,he!==null)throw Error(E(261));return ve=null,ke=0,ge}function Tw(){for(;he!==null;)Km(he)}function jw(){for(;he!==null&&!Xy();)Km(he)}function Km(e){var t=Ym(e.alternate,e,Ve);e.memoizedProps=e.pendingProps,t===null?Hm(e):he=t,nc.current=null}function Hm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ww(n,t),n!==null){n.flags&=32767,he=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,he=null;return}}else if(n=vw(n,t,Ve),n!==null){he=n;return}if(t=t.sibling,t!==null){he=t;return}he=t=e}while(t!==null);ge===0&&(ge=5)}function xn(e,t,n){var r=q,s=Ze.transition;try{Ze.transition=null,q=1,Cw(e,t,n,r)}finally{Ze.transition=s,q=r}return null}function Cw(e,t,n,r){do xr();while(qt!==null);if(K&6)throw Error(E(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(E(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(av(e,i),e===ve&&(he=ve=null,ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xi||(xi=!0,Qm(Qi,function(){return xr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ze.transition,Ze.transition=null;var o=q;q=1;var a=K;K|=4,nc.current=null,kw(e,n),Vm(n,e),Hv(yl),Ji=!!gl,yl=gl=null,e.current=n,Sw(n),Jy(),K=a,q=o,Ze.transition=i}else e.current=n;if(xi&&(xi=!1,qt=e,mo=s),i=e.pendingLanes,i===0&&(en=null),tv(n.stateNode),Ue(e,ce()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(po)throw po=!1,e=Il,Il=null,e;return mo&1&&e.tag!==0&&xr(),i=e.pendingLanes,i&1?e===Fl?ds++:(ds=0,Fl=e):ds=0,cn(),null}function xr(){if(qt!==null){var e=Cp(mo),t=Ze.transition,n=q;try{if(Ze.transition=null,q=16>e?16:e,qt===null)var r=!1;else{if(e=qt,qt=null,mo=0,K&6)throw Error(E(331));var s=K;for(K|=4,N=e.current;N!==null;){var i=N,o=i.child;if(N.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(N=u;N!==null;){var c=N;switch(c.tag){case 0:case 11:case 15:us(8,c,i)}var h=c.child;if(h!==null)h.return=c,N=h;else for(;N!==null;){c=N;var f=c.sibling,y=c.return;if(Fm(c),c===u){N=null;break}if(f!==null){f.return=y,N=f;break}N=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}N=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,N=o;else e:for(;N!==null;){if(i=N,i.flags&2048)switch(i.tag){case 0:case 11:case 15:us(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,N=g;break e}N=i.return}}var p=e.current;for(N=p;N!==null;){o=N;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,N=m;else e:for(o=p;N!==null;){if(a=N,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Oo(9,a)}}catch(b){le(a,a.return,b)}if(a===o){N=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,N=k;break e}N=a.return}}if(K=s,cn(),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Co,e)}catch{}r=!0}return r}finally{q=n,Ze.transition=t}}return!1}function ah(e,t,n){t=Cr(n,t),t=Cm(e,t,1),e=Zt(e,t,1),t=Ne(),e!==null&&(Gs(e,1,t),Ue(e,t))}function le(e,t,n){if(e.tag===3)ah(e,e,n);else for(;t!==null;){if(t.tag===3){ah(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(en===null||!en.has(r))){e=Cr(n,e),e=Em(t,e,1),t=Zt(t,e,1),e=Ne(),t!==null&&(Gs(t,1,e),Ue(t,e));break}}t=t.return}}function Ew(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ne(),e.pingedLanes|=e.suspendedLanes&n,ve===e&&(ke&n)===n&&(ge===4||ge===3&&(ke&130023424)===ke&&500>ce()-sc?Pn(e,0):rc|=n),Ue(e,t)}function qm(e,t){t===0&&(e.mode&1?(t=ci,ci<<=1,!(ci&130023424)&&(ci=4194304)):t=1);var n=Ne();e=Dt(e,t),e!==null&&(Gs(e,t,n),Ue(e,n))}function Pw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qm(e,n)}function Aw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(t),qm(e,n)}var Ym;Ym=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fe.current)Me=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Me=!1,yw(e,t,n);Me=!!(e.flags&131072)}else Me=!1,ee&&t.flags&1048576&&Zp(t,io,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Fi(e,t),e=t.pendingProps;var s=_r(t,Ce.current);wr(t,n),s=Xu(null,t,r,e,s,n);var i=Ju();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$e(r)?(i=!0,ro(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ku(t),s.updater=Lo,t.stateNode=s,s._reactInternals=t,jl(t,r,e,n),t=Pl(null,t,r,!0,i,n)):(t.tag=0,ee&&i&&$u(t),Pe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Fi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Rw(r),e=at(r,e),s){case 0:t=El(null,t,r,e,n);break e;case 1:t=Xd(null,t,r,e,n);break e;case 11:t=Yd(null,t,r,e,n);break e;case 14:t=Qd(null,t,r,at(r.type,e),n);break e}throw Error(E(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:at(r,s),El(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:at(r,s),Xd(e,t,r,s,n);case 3:e:{if(Rm(t),e===null)throw Error(E(387));r=t.pendingProps,i=t.memoizedState,s=i.element,im(e,t),lo(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Cr(Error(E(423)),t),t=Jd(e,t,r,n,s);break e}else if(r!==s){s=Cr(Error(E(424)),t),t=Jd(e,t,r,n,s);break e}else for(Be=Jt(t.stateNode.containerInfo.firstChild),ze=t,ee=!0,ct=null,n=rm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(br(),r===s){t=Lt(e,t,n);break e}Pe(e,t,r,n)}t=t.child}return t;case 5:return om(t),e===null&&_l(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,vl(r,s)?o=null:i!==null&&vl(r,i)&&(t.flags|=32),Nm(e,t),Pe(e,t,o,n),t.child;case 6:return e===null&&_l(t),null;case 13:return Dm(e,t,n);case 4:return Hu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tr(t,null,r,n):Pe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:at(r,s),Yd(e,t,r,s,n);case 7:return Pe(e,t,t.pendingProps,n),t.child;case 8:return Pe(e,t,t.pendingProps.children,n),t.child;case 12:return Pe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Q(oo,r._currentValue),r._currentValue=o,i!==null)if(pt(i.value,o)){if(i.children===s.children&&!Fe.current){t=Lt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=At(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),bl(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bl(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,wr(t,n),s=nt(s),r=r(s),t.flags|=1,Pe(e,t,r,n),t.child;case 14:return r=t.type,s=at(r,t.pendingProps),s=at(r.type,s),Qd(e,t,r,s,n);case 15:return Pm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:at(r,s),Fi(e,t),t.tag=1,$e(r)?(e=!0,ro(t)):e=!1,wr(t,n),jm(t,r,s),jl(t,r,s,n),Pl(null,t,r,!0,e,n);case 19:return Lm(e,t,n);case 22:return Am(e,t,n)}throw Error(E(156,t.tag))};function Qm(e,t){return _p(e,t)}function Nw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,t,n,r){return new Nw(e,t,n,r)}function lc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rw(e){if(typeof e=="function")return lc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cu)return 11;if(e===Eu)return 14}return 2}function nn(e,t){var n=e.alternate;return n===null?(n=Je(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")lc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zn:return An(n.children,s,i,t);case ju:o=8,s|=8;break;case Qa:return e=Je(12,n,t,s|2),e.elementType=Qa,e.lanes=i,e;case Xa:return e=Je(13,n,t,s),e.elementType=Xa,e.lanes=i,e;case Ja:return e=Je(19,n,t,s),e.elementType=Ja,e.lanes=i,e;case op:return Io(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sp:o=10;break e;case ip:o=9;break e;case Cu:o=11;break e;case Eu:o=14;break e;case Bt:o=16,r=null;break e}throw Error(E(130,e==null?e:typeof e,""))}return t=Je(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function An(e,t,n,r){return e=Je(7,e,r,t),e.lanes=n,e}function Io(e,t,n,r){return e=Je(22,e,r,t),e.elementType=op,e.lanes=n,e.stateNode={isHidden:!1},e}function Sa(e,t,n){return e=Je(6,e,null,t),e.lanes=n,e}function _a(e,t,n){return t=Je(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dw(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ra(0),this.expirationTimes=ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function uc(e,t,n,r,s,i,o,a,l){return e=new Dw(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Je(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ku(i),e}function Lw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Xm(e){if(!e)return sn;e=e._reactInternals;e:{if(Vn(e)!==e||e.tag!==1)throw Error(E(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($e(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(E(171))}if(e.tag===1){var n=e.type;if($e(n))return Xp(e,n,t)}return t}function Jm(e,t,n,r,s,i,o,a,l){return e=uc(n,r,!0,e,s,i,o,a,l),e.context=Xm(null),n=e.current,r=Ne(),s=tn(n),i=At(r,s),i.callback=t??null,Zt(n,i,s),e.current.lanes=s,Gs(e,s,r),Ue(e,r),e}function Fo(e,t,n,r){var s=t.current,i=Ne(),o=tn(s);return n=Xm(n),t.context===null?t.context=n:t.pendingContext=n,t=At(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zt(s,t,o),e!==null&&(ft(e,s,o,i),Oi(e,s,o)),o}function yo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function cc(e,t){lh(e,t),(e=e.alternate)&&lh(e,t)}function Ow(){return null}var Zm=typeof reportError=="function"?reportError:function(e){console.error(e)};function dc(e){this._internalRoot=e}$o.prototype.render=dc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));Fo(e,t,null,null)};$o.prototype.unmount=dc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fn(function(){Fo(null,e,null,null)}),t[Rt]=null}};function $o(e){this._internalRoot=e}$o.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ap();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wt.length&&t!==0&&t<Wt[n].priority;n++);Wt.splice(n,0,e),n===0&&Rp(e)}};function hc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Uo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uh(){}function Mw(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=yo(o);i.call(u)}}var o=Jm(t,r,e,0,null,!1,!1,"",uh);return e._reactRootContainer=o,e[Rt]=o.current,Es(e.nodeType===8?e.parentNode:e),Fn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=yo(l);a.call(u)}}var l=uc(e,0,!1,null,null,!1,!1,"",uh);return e._reactRootContainer=l,e[Rt]=l.current,Es(e.nodeType===8?e.parentNode:e),Fn(function(){Fo(t,l,n,r)}),l}function Vo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=yo(o);a.call(l)}}Fo(t,o,e,s)}else o=Mw(n,t,e,s,r);return yo(o)}Ep=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zr(t.pendingLanes);n!==0&&(Nu(t,n|1),Ue(t,ce()),!(K&6)&&(Er=ce()+500,cn()))}break;case 13:Fn(function(){var r=Dt(e,1);if(r!==null){var s=Ne();ft(r,e,1,s)}}),cc(e,1)}};Ru=function(e){if(e.tag===13){var t=Dt(e,134217728);if(t!==null){var n=Ne();ft(t,e,134217728,n)}cc(e,134217728)}};Pp=function(e){if(e.tag===13){var t=tn(e),n=Dt(e,t);if(n!==null){var r=Ne();ft(n,e,t,r)}cc(e,t)}};Ap=function(){return q};Np=function(e,t){var n=q;try{return q=e,t()}finally{q=n}};ll=function(e,t,n){switch(t){case"input":if(tl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=No(r);if(!s)throw Error(E(90));lp(r),tl(r,s)}}}break;case"textarea":cp(e,n);break;case"select":t=n.value,t!=null&&mr(e,!!n.multiple,t,!1)}};yp=ic;vp=Fn;var Iw={usingClientEntryPoint:!1,Events:[Hs,rr,No,mp,gp,ic]},qr={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fw={bundleType:qr.bundleType,version:qr.version,rendererPackageName:qr.rendererPackageName,rendererConfig:qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:It.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kp(e),e===null?null:e.stateNode},findFiberByHostInstance:qr.findFiberByHostInstance||Ow,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ki.isDisabled&&ki.supportsFiber)try{Co=ki.inject(Fw),wt=ki}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iw;Ke.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hc(t))throw Error(E(200));return Lw(e,t,null,n)};Ke.createRoot=function(e,t){if(!hc(e))throw Error(E(299));var n=!1,r="",s=Zm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=uc(e,1,!1,null,null,n,!1,r,s),e[Rt]=t.current,Es(e.nodeType===8?e.parentNode:e),new dc(t)};Ke.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=kp(t),e=e===null?null:e.stateNode,e};Ke.flushSync=function(e){return Fn(e)};Ke.hydrate=function(e,t,n){if(!Uo(t))throw Error(E(200));return Vo(null,e,t,!0,n)};Ke.hydrateRoot=function(e,t,n){if(!hc(e))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Zm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Jm(t,null,e,1,n??null,s,!1,i,o),e[Rt]=t.current,Es(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new $o(t)};Ke.render=function(e,t,n){if(!Uo(t))throw Error(E(200));return Vo(null,e,t,!1,n)};Ke.unmountComponentAtNode=function(e){if(!Uo(e))throw Error(E(40));return e._reactRootContainer?(Fn(function(){Vo(null,null,e,!1,function(){e._reactRootContainer=null,e[Rt]=null})}),!0):!1};Ke.unstable_batchedUpdates=ic;Ke.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Uo(n))throw Error(E(200));if(e==null||e._reactInternals===void 0)throw Error(E(38));return Vo(e,t,n,!1,r)};Ke.version="18.3.1-next-f1338f8080-20240426";function eg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eg)}catch(e){console.error(e)}}eg(),ep.exports=Ke;var tg=ep.exports;const $w=Vf(tg);var ch=tg;qa.createRoot=ch.createRoot,qa.hydrateRoot=ch.hydrateRoot;var D=(e=>(e.Home="HOME",e.MyGuides="MY_GUIDES",e.Create="CREATE",e.Profile="PROFILE",e.Ranking="RANKING",e.GuideDetail="GUIDE_DETAIL",e.EditGuide="EDIT_GUIDE",e.ShareOptions="SHARE_OPTIONS",e.ShareRanking="SHARE_RANKING",e.FarcasterTest="FARCASTER_TEST",e))(D||{});const Uw="modulepreload",Vw=function(e){return"/"+e},dh={},Ys=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Vw(l),l in dh)return;dh[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Uw,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,y)=>{h.addEventListener("load",f),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},Bw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>Mr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class fc extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class zw extends fc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hh extends fc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class fh extends fc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Vl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Vl||(Vl={}));var Ww=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Gw{constructor(t,{headers:n={},customFetch:r,region:s=Vl.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Bw(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Ww(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(w=>{throw new zw(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new hh(h);if(!h.ok)throw new fh(h);let y=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield h.json():y==="application/octet-stream"?v=yield h.blob():y==="text/event-stream"?v=h:y==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof fh||s instanceof hh?s.context:void 0}}})}}var Oe={},pc={},Bo={},Qs={},zo={},Wo={},Kw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pr=Kw();const Hw=Pr.fetch,ng=Pr.fetch.bind(Pr),rg=Pr.Headers,qw=Pr.Request,Yw=Pr.Response,Mr=Object.freeze(Object.defineProperty({__proto__:null,Headers:rg,Request:qw,Response:Yw,default:ng,fetch:Hw},Symbol.toStringTag,{value:"Module"})),Qw=fy(Mr);var Go={};Object.defineProperty(Go,"__esModule",{value:!0});let Xw=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Go.default=Xw;var sg=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wo,"__esModule",{value:!0});const Jw=sg(Qw),Zw=sg(Go);let ex=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Jw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let c=null,h=null,f=null,y=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=p:h=JSON.parse(p))}const x=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,y=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(h=[],c=null,y=200,v="OK")}catch{i.status===404&&x===""?(y=204,v="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,y=200,v="OK"),c&&this.shouldThrowOnError)throw new Zw.default(c)}return{error:c,data:h,count:f,status:y,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Wo.default=ex;var tx=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zo,"__esModule",{value:!0});const nx=tx(Wo);let rx=class extends nx.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};zo.default=rx;var sx=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qs,"__esModule",{value:!0});const ix=sx(zo);let ox=class extends ix.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Qs.default=ox;var ax=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bo,"__esModule",{value:!0});const Yr=ax(Qs);let lx=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Yr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Yr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Yr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Yr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Yr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Bo.default=lx;var ig=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pc,"__esModule",{value:!0});const ux=ig(Bo),cx=ig(Qs);let dx=class og{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new ux.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new og(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new cx.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};pc.default=dx;var Ir=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.PostgrestError=Oe.PostgrestBuilder=Oe.PostgrestTransformBuilder=Oe.PostgrestFilterBuilder=Oe.PostgrestQueryBuilder=Oe.PostgrestClient=void 0;const ag=Ir(pc);Oe.PostgrestClient=ag.default;const lg=Ir(Bo);Oe.PostgrestQueryBuilder=lg.default;const ug=Ir(Qs);Oe.PostgrestFilterBuilder=ug.default;const cg=Ir(zo);Oe.PostgrestTransformBuilder=cg.default;const dg=Ir(Wo);Oe.PostgrestBuilder=dg.default;const hg=Ir(Go);Oe.PostgrestError=hg.default;var hx=Oe.default={PostgrestClient:ag.default,PostgrestQueryBuilder:lg.default,PostgrestFilterBuilder:ug.default,PostgrestTransformBuilder:cg.default,PostgrestBuilder:dg.default,PostgrestError:hg.default};const{PostgrestClient:fx,PostgrestQueryBuilder:lj,PostgrestFilterBuilder:uj,PostgrestTransformBuilder:cj,PostgrestBuilder:dj,PostgrestError:hj}=hx;class px{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const mx="2.15.5",gx=`realtime-js/${mx}`,yx="1.0.0",Bl=1e4,vx=1e3,wx=100;var hs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(hs||(hs={}));var fe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(fe||(fe={}));var ut;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ut||(ut={}));var zl;(function(e){e.websocket="websocket"})(zl||(zl={}));var _n;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_n||(_n={}));class xx{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class fg{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Y;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Y||(Y={}));const ph=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=kx(o,e,t,s),i),{})},kx=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?pg(i,o):Wl(o)},pg=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Tx(t,n)}switch(e){case Y.bool:return Sx(t);case Y.float4:case Y.float8:case Y.int2:case Y.int4:case Y.int8:case Y.numeric:case Y.oid:return _x(t);case Y.json:case Y.jsonb:return bx(t);case Y.timestamp:return jx(t);case Y.abstime:case Y.date:case Y.daterange:case Y.int4range:case Y.int8range:case Y.money:case Y.reltime:case Y.text:case Y.time:case Y.timestamptz:case Y.timetz:case Y.tsrange:case Y.tstzrange:return Wl(t);default:return Wl(t)}},Wl=e=>e,Sx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},_x=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},bx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Tx=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>pg(t,a))}return e},jx=e=>typeof e=="string"?e.replace(" ","T"):e,mg=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ba{constructor(t,n,r={},s=Bl){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var mh;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(mh||(mh={}));class fs{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=fs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=fs.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const f=c.map(x=>x.presence_ref),y=h.map(x=>x.presence_ref),v=c.filter(x=>y.indexOf(x.presence_ref)<0),w=h.filter(x=>f.indexOf(x.presence_ref)<0);v.length>0&&(a[u]=v),w.length>0&&(l[u]=w)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const h=t[a].map(y=>y.presence_ref),f=c.filter(y=>h.indexOf(y.presence_ref)<0);t[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gh;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(gh||(gh={}));var ps;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ps||(ps={}));var jt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(jt||(jt={}));class mc{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ba(this,ut.join,this.params,this.timeout),this.rejoinTimer=new fg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ut.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new fs(this),this.broadcastEndpointURL=mg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==fe.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[ps.PRESENCE]&&this.bindings[ps.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(jt.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(jt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){t==null||t(jt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,x=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,g=[];for(let p=0;p<x;p++){const m=w[p],{filter:{event:k,schema:b,table:T,filter:j}}=m,_=y&&y[p];if(_&&_.event===k&&_.schema===b&&_.table===T&&_.filter===j)g.push(Object.assign(Object.assign({},m),{id:_.id}));else{this.unsubscribe(),this.state=fe.errored,t==null||t(jt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(jt.SUBSCRIBED);return}}).receive("error",y=>{this.state=fe.errored,t==null||t(jt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(jt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===fe.joined&&t===ps.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=fe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ut.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ba(this,ut.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fe.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ba(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>wx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=ut;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,w,x;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(w=y.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(y=>y.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var v,w,x,g,p,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const k=y.id,b=(v=y.filter)===null||v===void 0?void 0:v.event;return k&&((w=n.ids)===null||w===void 0?void 0:w.includes(k))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const k=(p=(g=y==null?void 0:y.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return k==="*"||k===((m=n==null?void 0:n.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:w,table:x,commit_timestamp:g,type:p,errors:m}=v;f=Object.assign(Object.assign({},{schema:w,table:x,commit_timestamp:g,eventType:p,new:{},old:{},errors:m}),this._getPayloadRecords(v))}y.callback(f,r)})}_isClosed(){return this.state===fe.closed}_isJoined(){return this.state===fe.joined}_isJoining(){return this.state===fe.joining}_isLeaving(){return this.state===fe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&mc.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ut.close,{},t)}_onError(t){this._on(ut.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ph(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ph(t.columns,t.old_record)),n}}const Ta=()=>{},Si={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Cx=[1e3,2e3,5e3,1e4],Ex=1e4,Px=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ax{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bl,this.transport=null,this.heartbeatIntervalMs=Si.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ta,this.ref=0,this.reconnectTimer=null,this.logger=Ta,this.conn=null,this.sendBuffer=[],this.serializer=new xx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Ys(async()=>{const{default:a}=await Promise.resolve().then(()=>Mr);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${zl.websocket}`,this.httpEndpoint=mg(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=px.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yx}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case hs.connecting:return _n.Connecting;case hs.open:return _n.Open;case hs.closing:return _n.Closing;default:return _n.Closed}}isConnected(){return this.connectionState()===_n.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new mc(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(vx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Si.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ut.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Px],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:gx};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(ut.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new fg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Si.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Bl,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Si.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Ta,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:h=>Cx[h-1]||Ex,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class gc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function pe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Nx extends gc{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Gl extends gc{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Rx=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const gg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>Mr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Dx=()=>Rx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ys(()=>Promise.resolve().then(()=>Mr),void 0)).Response:Response}),Kl=e=>{if(Array.isArray(e))return e.map(n=>Kl(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Kl(r)}),t},Lx=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Bn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const ja=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ox=(e,t,n)=>Bn(void 0,void 0,void 0,function*(){const r=yield Dx();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new Nx(ja(s),i,o))}).catch(s=>{t(new Gl(ja(s),s))}):t(new Gl(ja(e),e))}),Mx=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(Lx(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Xs(e,t,n,r,s,i){return Bn(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,Mx(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ox(l,a,r))})})}function vo(e,t,n,r){return Bn(this,void 0,void 0,function*(){return Xs(e,"GET",t,n,r)})}function yt(e,t,n,r,s){return Bn(this,void 0,void 0,function*(){return Xs(e,"POST",t,r,s,n)})}function Hl(e,t,n,r,s){return Bn(this,void 0,void 0,function*(){return Xs(e,"PUT",t,r,s,n)})}function Ix(e,t,n,r){return Bn(this,void 0,void 0,function*(){return Xs(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function yg(e,t,n,r,s){return Bn(this,void 0,void 0,function*(){return Xs(e,"DELETE",t,r,s,n)})}var Ee=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Fx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $x{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=gg(s)}uploadOrUpdate(t,n,r,s){return Ee(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},yh),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),h=yield(t=="PUT"?Hl:yt)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Ee(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:yh.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield Hl(this.fetch,a.toString(),l,{headers:c});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(pe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Ee(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield yt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new gc("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ee(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Ee(this,void 0,void 0,function*(){try{return{data:{path:(yield yt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Ee(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield yt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Ee(this,void 0,void 0,function*(){try{const s=yield yt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}download(t,n){return Ee(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield vo(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(pe(a))return{data:null,error:a};throw a}})}info(t){return Ee(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield vo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Kl(r),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}exists(t){return Ee(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Ix(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(pe(r)&&r instanceof Gl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return Ee(this,void 0,void 0,function*(){try{return{data:yield yg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ee(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Fx),n),{prefix:t||""});return{data:yield yt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}listV2(t,n){return Ee(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield yt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Ux="2.11.1",Vx={"X-Client-Info":`storage-js/${Ux}`};var Wn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Bx{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Vx),n),this.fetch=gg(r)}listBuckets(){return Wn(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}})}getBucket(t){return Wn(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Wn(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Wn(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Wn(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Wn(this,void 0,void 0,function*(){try{return{data:yield yg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}}class zx extends Bx{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new $x(this.url,this.headers,t,this.fetch)}}const Wx="2.57.2";let ts="";typeof Deno<"u"?ts="deno":typeof document<"u"?ts="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ts="react-native":ts="node";const Gx={"X-Client-Info":`supabase-js-${ts}/${Wx}`},Kx={headers:Gx},Hx={schema:"public"},qx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Yx={};var Qx=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Xx=e=>{let t;return e?t=e:typeof fetch>"u"?t=ng:t=fetch,(...n)=>t(...n)},Jx=()=>typeof Headers>"u"?rg:Headers,Zx=(e,t,n)=>{const r=Xx(n),s=Jx();return(i,o)=>Qx(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var e1=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function t1(e){return e.endsWith("/")?e:e+"/"}function n1(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>e1(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const vg="2.71.1",Qn=30*1e3,ql=3,Ca=ql*Qn,r1="http://localhost:9999",s1="supabase.auth.token",i1={"X-Client-Info":`gotrue-js/${vg}`},Yl="X-Supabase-Api-Version",wg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},o1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,a1=10*60*1e3;class yc extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function V(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class l1 extends yc{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function u1(e){return V(e)&&e.name==="AuthApiError"}class xg extends yc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class dn extends yc{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Ut extends dn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function c1(e){return V(e)&&e.name==="AuthSessionMissingError"}class _i extends dn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bi extends dn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ti extends dn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function d1(e){return V(e)&&e.name==="AuthImplicitGrantRedirectError"}class vh extends dn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ql extends dn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Ea(e){return V(e)&&e.name==="AuthRetryableFetchError"}class wh extends dn{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Xl extends dn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xh=` 	
\r=`.split(""),h1=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<xh.length;t+=1)e[xh[t].charCodeAt(0)]=-2;for(let t=0;t<wo.length;t+=1)e[wo[t].charCodeAt(0)]=t;return e})();function kh(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(wo[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(wo[r]),t.queuedBits-=6}}function kg(e,t,n){const r=h1[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Sh(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{m1(o,r,n)};for(let o=0;o<e.length;o+=1)kg(e.charCodeAt(o),s,i);return t.join("")}function f1(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function p1(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}f1(r,t)}}function m1(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function g1(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)kg(e.charCodeAt(s),n,r);return new Uint8Array(t)}function y1(e){const t=[];return p1(e,n=>t.push(n)),new Uint8Array(t)}function v1(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>kh(s,n,r)),kh(null,n,r),t.join("")}function w1(e){return Math.round(Date.now()/1e3)+e}function x1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const it=()=>typeof window<"u"&&typeof document<"u",gn={tested:!1,writable:!1},Sg=()=>{if(!it())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gn.tested)return gn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gn.tested=!0,gn.writable=!0}catch{gn.tested=!0,gn.writable=!1}return gn.writable};function k1(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const _g=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>Mr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},S1=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Xn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},yn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},$t=async(e,t)=>{await e.removeItem(t)};class Ko{constructor(){this.promise=new Ko.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ko.promiseConstructor=Promise;function Pa(e){const t=e.split(".");if(t.length!==3)throw new Xl("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!o1.test(t[r]))throw new Xl("JWT not in base64url format");return{header:JSON.parse(Sh(t[0])),payload:JSON.parse(Sh(t[1])),signature:g1(t[2]),raw:{header:t[0],payload:t[1]}}}async function _1(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function b1(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function T1(e){return("0"+e.toString(16)).substr(-2)}function j1(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,T1).join("")}async function C1(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function E1(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await C1(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gn(e,t,n=!1){const r=j1();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Xn(e,`${t}-code-verifier`,s);const i=await E1(r);return[i,r===i?"plain":"s256"]}const P1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function A1(e){const t=e.headers.get(Yl);if(!t||!t.match(P1))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function N1(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function R1(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const D1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kn(e){if(!D1.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Aa(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _h(e){return JSON.parse(JSON.stringify(e))}var L1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const kn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),O1=[502,503,504];async function bh(e){var t;if(!S1(e))throw new Ql(kn(e),0);if(O1.includes(e.status))throw new Ql(kn(e),e.status);let n;try{n=await e.json()}catch(i){throw new xg(kn(i),i)}let r;const s=A1(e);if(s&&s.getTime()>=wg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new wh(kn(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ut}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new wh(kn(n),e.status,n.weak_password.reasons);throw new l1(kn(n),e.status||500,r)}const M1=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function z(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Yl]||(i[Yl]=wg["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await I1(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function I1(e,t,n,r,s,i){const o=M1(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Ql(kn(l),0)}if(a.ok||await bh(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await bh(l)}}function bt(e){var t;let n=null;V1(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=w1(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Th(e){const t=bt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Kt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function F1(e){return{data:e,error:null}}function $1(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=L1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function U1(e){return e}function V1(e){return e.access_token&&e.refresh_token&&e.expires_in}const Na=["global","local","others"];var B1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class z1{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=_g(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Na[0]){if(Na.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Na.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Kt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=B1(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:$1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(V(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Kt})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:U1});if(c.error)throw c.error;const h=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(V(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Kn(t);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Kt})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Kn(t);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Kt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Kn(t);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Kt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Kn(t.userId);try{const{data:n,error:r}=await z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(V(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Kn(t.userId),Kn(t.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}}}function jh(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function W1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Hn={debug:!!(globalThis&&Sg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class G1 extends bg{}async function K1(e,t,n){Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Hn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new G1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Hn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}W1();const H1={url:r1,storageKey:s1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:i1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ch(e,t,n){return await n()}const qn={};class Is{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&it()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},H1),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new z1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=_g(s.fetch),this.lock=s.lock||Ch,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:it()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=K1:this.lock=Ch,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Sg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jh(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=jh(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=qn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){qn[this.storageKey]=Object.assign(Object.assign({},qn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=qn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){qn[this.storageKey]=Object.assign(Object.assign({},qn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vg}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=k1(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),it()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),d1(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return V(n)?{error:n}:{error:new xg("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:bt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(V(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:h,options:f}=t;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Gn(this.storage,this.storageKey)),i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:v},xform:bt})}else if("phone"in t){const{phone:c,password:h,options:f}=t;i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:bt})}else throw new bi("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(V(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Th})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Th})}else throw new bi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _i}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(V(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,a,l,u,c,h,f,y;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:x,wallet:g,statement:p,options:m}=t;let k;if(it())if(typeof g=="object")k=g;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))k=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=g}const b=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const T=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),p?{statement:p}:null));let j;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")j=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)j=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)v=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),w=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${b.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(s=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(c=m==null?void 0:m.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const T=await k.signMessage(new TextEncoder().encode(v),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=T}}try{const{data:x,error:g}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:v1(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:bt});if(g)throw g;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new _i}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:g})}catch(x){if(V(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await yn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:bt});if(await $t(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new _i}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(V(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:bt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new _i}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(V(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Gn(this.storage,this.storageKey));const{error:h}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new bi("You must provide either an email or phone number.")}catch(a){if(V(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:bt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(V(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Gn(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:F1})}catch(i){if(V(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ut;const{error:s}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(V(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await z(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await z(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new bi("You must provide either an email or phone number and a type")}catch(n){if(V(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await yn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Ca:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await yn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Aa()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Kt}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ut}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Kt})})}catch(n){if(V(n))return c1(n)&&(await this._removeSession(),await $t(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ut;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Gn(this.storage,this.storageKey));const{data:u,error:c}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Kt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ut;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Pa(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(V(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ut;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(V(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!it())throw new Ti("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ti(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new vh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ti("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new vh("No code detected.");const{data:p,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new Ti("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let f=c+h;l&&(f=parseInt(l));const y=f-c;y*1e3<=Qn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const v=f-h;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,c);const{data:w,error:x}=await this._getUser(i);if(x)throw x;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(V(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await yn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(u1(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await $t(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=x1(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Gn(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(V(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:f}=i;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",y,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return it()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(V(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(V(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await b1(async s=>(s>0&&await _1(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ea(i)&&Date.now()+o-r<Qn})}catch(r){if(this._debug(n,"error",r),V(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),it()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await yn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await yn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Xn(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Aa()}else if(s&&!s.user&&!s.user){const o=await yn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await $t(this.storage,this.storageKey+"-user"),await Xn(this.storage,this.storageKey,s)):s.user=Aa()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ca;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Ca}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ea(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ut;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ko;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ut;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),V(i)){const o={session:null,error:i};return Ea(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Xn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=_h(s);await Xn(this.storage,this.storageKey,i)}else{const s=_h(n);await Xn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await $t(this.storage,this.storageKey),await $t(this.storage,this.storageKey+"-code-verifier"),await $t(this.storage,this.storageKey+"-user"),this.userStorage&&await $t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&it()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Qn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Qn}ms, refresh threshold is ${ql} ticks`),s<=ql&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof bg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Gn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(V(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await z(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(V(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(V(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(V(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Pa(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+a1>s)return r;const{data:i,error:o}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:v}=await this.getSession();if(v||!y.session)return{data:null,error:v};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Pa(r);n!=null&&n.allowExpired||N1(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const c=R1(s.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,y1(`${a}.${l}`)))throw new Xl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}}Is.nextInstanceID=0;const q1=Is;class Y1 extends q1{constructor(t){super(t)}}var Q1=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class X1{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=t1(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Hx,realtime:Yx,auth:Object.assign(Object.assign({},qx),{storageKey:u}),global:Kx},h=n1(r??{},c);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Zx(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new fx(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new zx(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Gw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Q1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u},c,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Y1({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Ax(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const J1=(e,t,n)=>new X1(e,t,n);function Z1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Z1()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ek={"4cd58ff3-fa6a-4ab0-80bc-e0cc22730778":{id:"4cd58ff3-fa6a-4ab0-80bc-e0cc22730778",username:"farcaster.eth",pfp_url:"https://i.imgur.com/34Iodlt.jpg",fid:1},"8126631d-d609-4b10-8406-1ad28db214e8":{id:"8126631d-d609-4b10-8406-1ad28db214e8",username:"Sci-Fi Reader",pfp_url:"https://i.imgur.com/PC3e8NJ.jpg",fid:2},"a7b8e966-a865-4567-9bdf-2639417da534":{id:"a7b8e966-a865-4567-9bdf-2639417da534",username:"Literary Bookworm",pfp_url:"https://i.imgur.com/J3G59bK.jpg",fid:3},"56e9561b-f708-43d1-ac23-9ee1b3be095c":{id:"56e9561b-f708-43d1-ac23-9ee1b3be095c",username:"philosopher_king",pfp_url:"https://i.imgur.com/mQkmy0N.jpg",fid:4},"15fef28f-4627-4db5-821f-697692f18f7c":{id:"15fef28f-4627-4db5-821f-697692f18f7c",username:"startup_guru",pfp_url:"https://i.imgur.com/T0a0bA0.jpg",fid:5},"1c10d98f-df53-4ec2-9765-c3967c4451d6":{id:"1c10d98f-df53-4ec2-9765-c3967c4451d6",username:"comic_nerd",pfp_url:"https://i.imgur.com/vH5y5Z5.jpg",fid:6},"ef4ef7fd-ade7-43d7-85d2-04c3f55ed27c":{id:"ef4ef7fd-ade7-43d7-85d2-04c3f55ed27c",username:"Tche Foundation",pfp_url:"https://i.imgur.com/d28d83A.png",fid:7}},Yn=e=>{const t=ek[e]||{username:"Unknown",pfp_url:"https://i.imgur.com/PC3e8NJ.jpg",fid:0};return{authorId:e,authorFid:t.fid,authorUsername:t.username,authorPfpUrl:t.pfp_url}};let tk=[{id:1,title:"Essential Sci-Fi Classics",description:"A journey through the golden age of science fiction, featuring timeless works that shaped the genre.",createdAt:"2024-01-15T00:00:00Z",isPublic:!0,tags:["sci-fi","classic","world-building"],...Yn("8126631d-d609-4b10-8406-1ad28db214e8"),likes:3,dislikes:0,books:[{id:1,title:"Dune",author:"Frank Herbert",notes:"Focus on world-building and politics.",coverUrl:"https://i.imgur.com/sBwQ4yL.jpg",purchaseLink:"#",likes:1,dislikes:1},{id:2,title:"Foundation",author:"Isaac Asimov",notes:"A story spanning centuries.",coverUrl:"https://i.imgur.com/s4n7vVv.jpg",purchaseLink:void 0,likes:1,dislikes:0}]},{id:2,title:"Modern Literary Fiction",description:"Contemporary novels that have redefined storytelling in the 21st century.",createdAt:"2024-01-14T00:00:00Z",isPublic:!0,tags:["fiction","modern","fantasy"],...Yn("a7b8e966-a865-4567-9bdf-2639417da534"),likes:1,dislikes:1,books:[{id:3,title:"The Name of the Wind",author:"Patrick Rothfuss",likes:0,dislikes:0},{id:4,title:"Mistborn: The Final Empire",author:"Brandon Sanderson",likes:0,dislikes:0}]},{id:3,title:"My Private Reading List",description:"A few books I plan to read this quarter. Not for public viewing yet.",createdAt:new Date().toISOString(),isPublic:!1,tags:["personal","to-read"],...Yn("4cd58ff3-fa6a-4ab0-80bc-e0cc22730778"),likes:0,dislikes:0,books:[{id:6,title:"Project Hail Mary",author:"Andy Weir",likes:0,dislikes:0}]},{id:4,title:"Philosophy 101: The Stoics",description:"An introductory guide to the teachings of Seneca, Epictetus, and Marcus Aurelius.",createdAt:"2024-03-10T00:00:00Z",isPublic:!0,tags:["philosophy","stoicism","self-improvement"],...Yn("56e9561b-f708-43d1-ac23-9ee1b3be095c"),likes:4,dislikes:0,books:[{id:7,title:"Meditations",author:"Marcus Aurelius",coverUrl:"https://i.imgur.com/e8p2t5L.jpg",likes:2,dislikes:0},{id:8,title:"Letters from a Stoic",author:"Seneca",purchaseLink:"#",likes:0,dislikes:0}]},{id:5,title:"Startup Playbook: From Idea to Exit",description:"Key readings for aspiring founders, covering product management, fundraising, and scaling a business.",createdAt:"2024-04-20T00:00:00Z",isPublic:!0,tags:["business","startup","entrepreneurship"],...Yn("15fef28f-4627-4db5-821f-697692f18f7c"),likes:1,dislikes:0,books:[{id:9,title:"The Lean Startup",author:"Eric Ries",coverUrl:"https://i.imgur.com/L4u2X7L.jpg",likes:0,dislikes:0},{id:10,title:"Zero to One",author:"Peter Thiel",coverUrl:"https://i.imgur.com/7vY5rWb.jpg",likes:2,dislikes:0}]},{id:6,title:"Beyond Superheroes: A Graphic Novel Tour",description:"Explore the depth and diversity of graphic novels with these critically acclaimed stories.",createdAt:"2024-05-01T00:00:00Z",isPublic:!0,tags:["graphic novel","comics","storytelling"],...Yn("1c10d98f-df53-4ec2-9765-c3967c4451d6"),likes:1,dislikes:1,books:[{id:11,title:"Maus",author:"Art Spiegelman",coverUrl:"https://i.imgur.com/G4Y2H8d.jpg",likes:0,dislikes:0},{id:12,title:"Persepolis",author:"Marjane Satrapi",coverUrl:"https://i.imgur.com/w9vA9oK.jpg",likes:0,dislikes:0},{id:13,title:"Watchmen",author:"Alan Moore",coverUrl:"https://i.imgur.com/h9yV3T5.jpg",likes:2,dislikes:1}]}],nk=[{action:"Liked",itemTitle:"Essential Sci-Fi Classics",timestamp:new Date(Date.now()-2*60*60*1e3).toISOString()},{action:"Shared",itemTitle:"Startup Playbook: From Idea to Exit",timestamp:new Date(Date.now()-24*60*60*1e3).toISOString()},{action:"Liked",itemTitle:"Philosophy 101: The Stoics",timestamp:new Date(Date.now()-3*24*60*60*1e3).toISOString()},{action:"Disliked",itemTitle:"Modern Literary Fiction",timestamp:new Date(Date.now()-5*24*60*60*1e3).toISOString()}];const vc="wc_secret_a42c4d96bfd9e08dfdf803e8d9e0907073dd8e01390bf3f22ea8bb43_83f487fb",wc="https://api.warpcast.com/v2",xc=async e=>{try{const t=await fetch(`${wc}/user?fid=${e}`,{headers:{Authorization:`Bearer ${vc}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json()).result.user}catch(t){return console.error("Error fetching Farcaster user:",t),null}},Tg=async(e,t=25)=>{try{const n=await fetch(`${wc}/casts?fid=${e}&limit=${t}`,{headers:{Authorization:`Bearer ${vc}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return(await n.json()).result.casts}catch(n){return console.error("Error fetching user casts:",n),[]}},rk=async(e,t=10)=>{try{const r=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].slice(0,t*2).map(o=>xc(o));return(await Promise.all(r)).filter(o=>o!==null&&(o.username.toLowerCase().includes(e.toLowerCase())||o.display_name.toLowerCase().includes(e.toLowerCase()))).slice(0,t)}catch(n){return console.error("Error searching Farcaster users:",n),[]}},sk=async(e=25)=>{try{const t=[1,2,3,4,5],n=t.map(o=>Tg(o,Math.ceil(e/t.length)));return(await Promise.all(n)).flat().sort((o,a)=>a.reactions.count-o.reactions.count).slice(0,e)}catch(t){return console.error("Error fetching trending casts:",t),[]}},jg=async(e,t)=>{try{const n=await fetch(`${wc}/casts`,{method:"POST",headers:{Authorization:`Bearer ${vc}`,"Content-Type":"application/json"},body:JSON.stringify({text:e,parent:t?{hash:t}:void 0})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return(await n.json()).result.cast}catch(n){return console.error("Error creating cast:",n),null}},ik=e=>{var r;const t="📚",n=((r=e.tags)==null?void 0:r.map(s=>`#${s}`).join(" "))||"";return`${t} ${e.title}

${e.description}

${n}

#Castlist #ReadingList`},ok=async e=>{const t=ik(e);return await jg(t)},Cg="https://rygpuqnqaagihwoapdix.supabase.co",ak="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ5Z3B1cW5xYWFnaWh3b2FwZGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczMDU5MDAsImV4cCI6MjA3Mjg4MTkwMH0.DxkNHZ7duGlAYR03GEPPsMaHGK9UPdgUT5fo--eZhGQ";console.log("🔧 Supabase configuration:",{url:Cg,hasAnonKey:!0,envVars:{SUPABASE_URL:void 0,VITE_SUPABASE_URL:void 0,SUPABASE_ANON_KEY:void 0,VITE_SUPABASE_ANON_KEY:void 0}});const Nn=J1(Cg,ak),Ra=async e=>{let t=null;try{t=await xc(e.fid),console.log("Fetched fresh Farcaster data:",t)}catch(l){console.warn("Could not fetch fresh Farcaster data, using provided data:",l)}const n=t||e,{data:r,error:s}=await Nn.from("profiles").select("*").eq("fid",n.fid).single();if(s&&s.code!=="PGRST116")throw console.error("Error fetching profile by FID:",s),s;if(r){if(t){const{data:l,error:u}=await Nn.from("profiles").update({username:t.username,pfp_url:t.pfp_url,updated_at:new Date().toISOString()}).eq("fid",n.fid).select().single();return u?(console.error("Error updating profile:",u),r):l}return r}const i={id:crypto.randomUUID(),fid:n.fid,username:n.username,pfp_url:n.pfp_url},{data:o,error:a}=await Nn.from("profiles").insert(i).select().single();if(a)throw console.error("Error creating new profile:",a),a;return o};let dt=[...tk];const Ar={guides:new Map,books:new Map},lk=async e=>{console.log("REAL: Fetching guides for author:",e);try{const{data:t}=await Nn.from("profiles").select("fid").eq("id",e).single();if(!t)return console.error("Profile not found for authorId:",e),[];const{data:n,error:r}=await Nn.rpc("get_user_guides_with_stats",{user_fid:t.fid,limit_count:50,offset_count:0});return r?(console.error("Error fetching user guides:",r),[]):n.map(i=>({id:i.id,title:i.title,description:i.description,coverImage:i.cover_image,tags:i.tags||[],isPublic:i.is_public,createdAt:i.created_at,authorId:e,authorFid:t.fid,authorUsername:"Loading...",authorPfpUrl:"Loading...",likes:i.like_count||0,dislikes:0,books:[]}))}catch(t){return console.error("Error in getMyGuides:",t),[]}},Eg=async()=>{console.log("REAL: Fetching all public guides.");try{const{data:e,error:t}=await Nn.rpc("get_public_guides_feed",{limit_count:50,offset_count:0});return t?(console.error("Error fetching public guides:",t),[]):e.map(r=>({id:r.id,title:r.title,description:r.description,coverImage:r.cover_image,tags:r.tags||[],isPublic:!0,createdAt:r.created_at,authorId:"unknown",authorFid:r.creator_fid,authorUsername:r.creator_username,authorPfpUrl:r.creator_pfp_url,likes:r.like_count||0,dislikes:0,books:[]}))}catch(e){return console.error("Error in getPublicGuides:",e),[]}},uk=async()=>{console.log("REAL: Fetching recommended guides.");try{const{data:e,error:t}=await Nn.rpc("get_public_guides_feed",{limit_count:5,offset_count:0});return t?(console.error("Error fetching recommended guides:",t),[]):e.map(r=>({id:r.id,title:r.title,description:r.description,coverImage:r.cover_image,tags:r.tags||[],isPublic:!0,createdAt:r.created_at,authorId:"unknown",authorFid:r.creator_fid,authorUsername:r.creator_username,authorPfpUrl:r.creator_pfp_url,likes:r.like_count||0,dislikes:0,books:[]}))}catch(e){return console.error("Error in getRecommendedGuides:",e),[]}},kc=async e=>{console.log("MOCK: Fetching guide by ID:",e);const t=dt.find(n=>n.id===e);return Promise.resolve(t?JSON.parse(JSON.stringify(t)):void 0)},ck=async(e,t)=>{console.log("MOCK: Creating new guide titled:",e.title);const n={id:Math.max(...dt.map(r=>r.id))+1,...e,createdAt:new Date().toISOString(),authorId:t.id,authorFid:t.fid,authorUsername:t.username,authorPfpUrl:t.pfp_url,likes:0,dislikes:0,books:e.books.map((r,s)=>({...r,id:Date.now()+s,likes:0,dislikes:0}))};return dt.push(n),Promise.resolve(JSON.parse(JSON.stringify(n)))},dk=async(e,t)=>{console.log("MOCK: Updating guide ID:",e);let n;if(dt=dt.map(r=>r.id===e?(n={...r,...t,books:(t.books||r.books).map((s,i)=>({...s,id:s.id||Date.now()+i}))},n):r),!n)throw new Error("MOCK: Guide not found for update.");return Promise.resolve(JSON.parse(JSON.stringify(n)))},hk=async e=>{console.log("MOCK: Deleting guide ID:",e);const t=dt.length;dt=dt.filter(r=>r.id!==e);const n=dt.length<t;return Promise.resolve({success:n})},hn=async(e,t,n)=>{const r=e==="guide"?Ar.guides:Ar.books,s=r.get(t);return dt=dt.map(i=>{const o=a=>{s===n?(n==="like"?a.likes--:a.dislikes--,r.delete(t)):(s==="like"&&a.likes--,s==="dislike"&&a.dislikes--,n==="like"?a.likes++:a.dislikes++,r.set(t,n))};return e==="guide"&&i.id===t?o(i):e==="book"&&(i.books=i.books.map(a=>(a.id===t&&o(a),a))),i}),Promise.resolve()},fk=async e=>hn("guide",e,"like"),pk=async e=>hn("guide",e,"like"),mk=async e=>hn("guide",e,"dislike"),gk=async e=>hn("guide",e,"dislike"),yk=async e=>hn("book",e,"like"),vk=async e=>hn("book",e,"like"),wk=async e=>hn("book",e,"dislike"),xk=async e=>hn("book",e,"dislike"),kk=async e=>Promise.resolve(Ar.guides.get(e)==="like"),Sk=async e=>Promise.resolve(Ar.guides.get(e)==="dislike"),_k=async e=>{const t={};return e.books.forEach(n=>{t[n.id]=Ar.books.get(n.id)==="like"}),Promise.resolve(t)},bk=async e=>{const t={};return e.books.forEach(n=>{t[n.id]=Ar.books.get(n.id)==="dislike"}),Promise.resolve(t)},Pg=S.createContext(void 0),Tk=({children:e})=>{const[t,n]=S.useState(null),[r,s]=S.useState(!0);S.useEffect(()=>{(async()=>{var c,h,f,y,v,w,x,g;s(!0);try{const p=window.farcaster&&window.farcaster.actions&&window.farcaster.actions.ready;if(console.log("🔍 Environment detection:"),console.log("  - isMiniApp:",p),console.log("  - window.farcaster:",!!window.farcaster),p&&window.farcaster)if(console.log("📱 Mini App environment detected - using Quick Auth"),(c=window.farcaster.quickAuth)!=null&&c.getToken)try{console.log("🔍 Attempting Quick Auth...");const m=await window.farcaster.quickAuth.getToken();console.log("✅ Quick Auth token received:",m);const k=await window.farcaster.getUser();if(k){console.log("✅ User info received:",k);const b=await Ra(k);n(b),(h=window.farcaster.actions)!=null&&h.ready&&(window.farcaster.actions.ready(),console.log("✅ Called sdk.actions.ready() after auth"))}}catch(m){console.warn("⚠️ Quick Auth failed, falling back to manual auth:",m);const k=await window.farcaster.getUser();if(k){const b=await Ra(k);n(b),(f=window.farcaster.actions)!=null&&f.ready&&(window.farcaster.actions.ready(),console.log("✅ Called sdk.actions.ready() after fallback auth"))}}else{console.log("🔍 Quick Auth not available, using manual auth");const m=await window.farcaster.getUser();if(m){const k=await Ra(m);n(k),(y=window.farcaster.actions)!=null&&y.ready&&(window.farcaster.actions.ready(),console.log("✅ Called sdk.actions.ready() after manual auth"))}}else console.warn("Farcaster SDK not found. Using development mode."),n({id:"dev-user-1",fid:1,username:"farcaster.eth",pfp_url:"https://i.imgur.com/34Iodlt.jpg",email:"dev@example.com"}),(w=(v=window.farcaster)==null?void 0:v.actions)!=null&&w.ready&&(window.farcaster.actions.ready(),console.log("✅ Called sdk.actions.ready() in development mode"))}catch(p){console.error("Error checking Farcaster session:",p),n({id:"dev-user-1",fid:1,username:"farcaster.eth",pfp_url:"https://i.imgur.com/34Iodlt.jpg",email:"dev@example.com"}),(g=(x=window.farcaster)==null?void 0:x.actions)!=null&&g.ready&&(window.farcaster.actions.ready(),console.log("✅ Called sdk.actions.ready() in error case"))}finally{s(!1)}})()},[]);const l={user:t,isAuthenticated:!!t,isLoading:r,login:async()=>(console.warn("Manual login is not supported in v2 compliance mode. Authentication is automatic."),{error:"Manual login not supported"}),logout:async()=>{n(null)},loginAsMockUser:u=>{console.log("🔍 loginAsMockUser called with:",u),console.log("🔍 Mock user details:",{id:u.id,fid:u.fid,username:u.username,pfp_url:u.pfp_url,email:u.email}),n(u),console.log("✅ User set in context:",u.username)}};return d.jsx(Pg.Provider,{value:l,children:e})},Ho=()=>{const e=S.useContext(Pg);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},jk=()=>{const[e,t]=S.useState({isLoaded:!1,isReady:!1,hasActions:!1});return S.useEffect(()=>{const n=()=>{var o,a,l;console.log("🔍 Checking Farcaster SDK..."),console.log("window.farcaster:",window.farcaster);const s=!!window.farcaster,i=!!((o=window.farcaster)!=null&&o.actions);if(console.log("isLoaded:",s),console.log("hasActions:",i),t({isLoaded:s,isReady:!1,hasActions:i}),s&&i&&((l=(a=window.farcaster)==null?void 0:a.actions)!=null&&l.ready))try{console.log("🚀 Calling sdk.actions.ready()..."),window.farcaster.actions.ready(),console.log("✅ Farcaster SDK ready() called successfully"),t(u=>({...u,isReady:!0}))}catch(u){console.error("❌ Error calling Farcaster SDK ready():",u)}else console.log("⚠️ SDK not ready yet or actions not available")};n();const r=()=>{setTimeout(n,100)};return window.addEventListener("load",r),()=>{window.removeEventListener("load",r)}},[]),e},Ag=S.createContext(void 0),Ck=({children:e})=>{const[t,n]=S.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem("theme");return s||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});S.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(t),localStorage.setItem("theme",t)},[t]);const r=()=>{n(s=>s==="light"?"dark":"light")};return d.jsx(Ag.Provider,{value:{theme:t,toggleTheme:r},children:e})},Ek=()=>{const e=S.useContext(Ag);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e};let Bi=[...nk];const xo=async(e,t)=>{try{const n={action:e,itemTitle:t,timestamp:new Date().toISOString()};return Bi.unshift(n),Bi.length>50&&Bi.pop(),console.log("MOCK: Logged activity:",n),Promise.resolve()}catch(n){console.error("Could not log mock activity:",n)}},Pk=async e=>e?(console.log("MOCK: Retrieving activity log."),Promise.resolve(Bi)):Promise.resolve([]),Ng=S.createContext(void 0),Ak=({children:e})=>{const{user:t}=Ho(),[n,r]=S.useState([]),[s,i]=S.useState([]),[o,a]=S.useState([]),[l,u]=S.useState([]),[c,h]=S.useState([]),[f,y]=S.useState({totalLikes:0,rank:null,totalRankedUsers:0}),[v,w]=S.useState(!0),x=S.useCallback((m,k)=>{const b=[...m].sort((A,O)=>O.likes-A.likes);if(h(b.slice(0,10)),!k){y({totalLikes:0,rank:null,totalRankedUsers:0});return}const T=new Map;m.forEach(A=>{if(A.authorFid){const O=T.get(A.authorFid)||0;T.set(A.authorFid,O+A.likes)}});const j=Array.from(T.entries()).map(([A,O])=>({fid:A,totalLikes:O})).sort((A,O)=>O.totalLikes-A.totalLikes),_=j.findIndex(A=>A.fid===k);let M=0,R=null;_!==-1&&(R=_+1,M=j[_].totalLikes),y({totalLikes:M,rank:R,totalRankedUsers:j.length>0?j.length:1})},[]),g=S.useCallback(async()=>{if(!t){w(!1);return}w(!0);try{const[m,k,b,T]=await Promise.all([Eg(),uk(),lk(t.id),Pk(t.id)]);r(m),a(k),i(b),u(T),x(m,t.fid)}catch(m){console.error("Failed to fetch app data:",m)}finally{w(!1)}},[t,x]);S.useEffect(()=>{t&&g()},[t,g]);const p=S.useMemo(()=>({allGuides:n,myGuides:s,recommendedGuides:o,rankedGuides:c,activities:l,profileStats:f,isLoading:v,refreshAllData:g}),[n,s,o,c,l,f,v,g]);return d.jsx(Ng.Provider,{value:p,children:e})},Js=()=>{const e=S.useContext(Ng);if(e===void 0)throw new Error("useData must be used within a DataProvider");return e},Ge=({text:e})=>d.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",role:"status","aria-live":"polite",children:[d.jsx("div",{className:"w-12 h-12 rounded-full animate-spin border-4 border-solid border-primary-500 border-t-transparent"}),e&&d.jsx("span",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300",children:e})]}),Nk=()=>d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center text-gray-800 dark:text-gray-200 p-4 bg-gradient-to-br from-primary-50 via-purple-50 to-blue-100 bg-300% animate-gradient dark:from-gray-900 dark:via-gray-900 dark:to-black",children:d.jsxs("div",{className:"text-center animate-fadeIn w-full max-w-sm",children:[d.jsx("h1",{className:"text-5xl font-bold text-gray-900 dark:text-gray-50 mb-3",children:"Castlist"}),d.jsx("h2",{className:"text-xl font-medium text-primary-700 dark:text-primary-400 mb-4",children:"Transform your Readings into a Social Journey"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-md mx-auto mb-10 text-base",children:"The Castlist platform is your gateway to creating, sharing, and discovering curated lists within the Farcaster ecosystem."}),d.jsx("div",{className:"mt-10",children:d.jsx(Ge,{text:"Loading..."})})]})}),Rg=S.createContext({});function Rk(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const Sc=typeof window<"u",Dk=Sc?S.useLayoutEffect:S.useEffect,_c=S.createContext(null);function bc(e,t){e.indexOf(t)===-1&&e.push(t)}function Tc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ot=(e,t,n)=>n>t?t:n<e?e:n;let jc=()=>{};const Mt={},Dg=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Lg(e){return typeof e=="object"&&e!==null}const Og=e=>/^0[^.\s]+$/u.test(e);function Cc(e){let t;return()=>(t===void 0&&(t=e()),t)}const et=e=>e,Lk=(e,t)=>n=>t(e(n)),Zs=(...e)=>e.reduce(Lk),Fs=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Ec{constructor(){this.subscriptions=[]}add(t){return bc(this.subscriptions,t),()=>Tc(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const kt=e=>e*1e3,St=e=>e/1e3;function Mg(e,t){return t?e*(1e3/t):0}const Ig=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Ok=1e-7,Mk=12;function Ik(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=Ig(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>Ok&&++a<Mk);return o}function ei(e,t,n,r){if(e===t&&n===r)return et;const s=i=>Ik(i,0,1,e,n);return i=>i===0||i===1?i:Ig(s(i),t,r)}const Fg=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,$g=e=>t=>1-e(1-t),Ug=ei(.33,1.53,.69,.99),Pc=$g(Ug),Vg=Fg(Pc),Bg=e=>(e*=2)<1?.5*Pc(e):.5*(2-Math.pow(2,-10*(e-1))),Ac=e=>1-Math.sin(Math.acos(e)),zg=$g(Ac),Wg=Fg(Ac),Fk=ei(.42,0,1,1),$k=ei(0,0,.58,1),Gg=ei(.42,0,.58,1),Uk=e=>Array.isArray(e)&&typeof e[0]!="number",Kg=e=>Array.isArray(e)&&typeof e[0]=="number",Vk={linear:et,easeIn:Fk,easeInOut:Gg,easeOut:$k,circIn:Ac,circInOut:Wg,circOut:zg,backIn:Pc,backInOut:Vg,backOut:Ug,anticipate:Bg},Bk=e=>typeof e=="string",Eh=e=>{if(Kg(e)){jc(e.length===4);const[t,n,r,s]=e;return ei(t,n,r,s)}else if(Bk(e))return Vk[e];return e},ji=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function zk(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,h=!1,f=!1)=>{const v=f&&s?n:r;return h&&o.add(c),v.has(c)||v.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,i&&(i=!1,u.process(c))}};return u}const Wk=40;function Hg(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=ji.reduce((m,k)=>(m[k]=zk(i),m),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:f,render:y,postRender:v}=o,w=()=>{const m=Mt.useManualTiming?s.timestamp:performance.now();n=!1,Mt.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(m-s.timestamp,Wk),1)),s.timestamp=m,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),h.process(s),f.process(s),y.process(s),v.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(w))},x=()=>{n=!0,r=!0,s.isProcessing||e(w)};return{schedule:ji.reduce((m,k)=>{const b=o[k];return m[k]=(T,j=!1,_=!1)=>(n||x(),b.schedule(T,j,_)),m},{}),cancel:m=>{for(let k=0;k<ji.length;k++)o[ji[k]].cancel(m)},state:s,steps:o}}const{schedule:te,cancel:on,state:xe,steps:Da}=Hg(typeof requestAnimationFrame<"u"?requestAnimationFrame:et,!0);let zi;function Gk(){zi=void 0}const Ie={now:()=>(zi===void 0&&Ie.set(xe.isProcessing||Mt.useManualTiming?xe.timestamp:performance.now()),zi),set:e=>{zi=e,queueMicrotask(Gk)}},qg=e=>t=>typeof t=="string"&&t.startsWith(e),Nc=qg("--"),Kk=qg("var(--"),Rc=e=>Kk(e)?Hk.test(e.split("/*")[0].trim()):!1,Hk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},$s={...Fr,transform:e=>Ot(0,1,e)},Ci={...Fr,default:1},ms=e=>Math.round(e*1e5)/1e5,Dc=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function qk(e){return e==null}const Yk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lc=(e,t)=>n=>!!(typeof n=="string"&&Yk.test(n)&&n.startsWith(e)||t&&!qk(n)&&Object.prototype.hasOwnProperty.call(n,t)),Yg=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Dc);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Qk=e=>Ot(0,255,e),La={...Fr,transform:e=>Math.round(Qk(e))},Cn={test:Lc("rgb","red"),parse:Yg("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+La.transform(e)+", "+La.transform(t)+", "+La.transform(n)+", "+ms($s.transform(r))+")"};function Xk(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Jl={test:Lc("#"),parse:Xk,transform:Cn.transform},ti=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Vt=ti("deg"),_t=ti("%"),$=ti("px"),Jk=ti("vh"),Zk=ti("vw"),Ph={..._t,parse:e=>_t.parse(e)/100,transform:e=>_t.transform(e*100)},cr={test:Lc("hsl","hue"),parse:Yg("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+_t.transform(ms(t))+", "+_t.transform(ms(n))+", "+ms($s.transform(r))+")"},de={test:e=>Cn.test(e)||Jl.test(e)||cr.test(e),parse:e=>Cn.test(e)?Cn.parse(e):cr.test(e)?cr.parse(e):Jl.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Cn.transform(e):cr.transform(e),getAnimatableNone:e=>{const t=de.parse(e);return t.alpha=0,de.transform(t)}},eS=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tS(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Dc))==null?void 0:t.length)||0)+(((n=e.match(eS))==null?void 0:n.length)||0)>0}const Qg="number",Xg="color",nS="var",rS="var(",Ah="${}",sS=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Us(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(sS,l=>(de.test(l)?(r.color.push(i),s.push(Xg),n.push(de.parse(l))):l.startsWith(rS)?(r.var.push(i),s.push(nS),n.push(l)):(r.number.push(i),s.push(Qg),n.push(parseFloat(l))),++i,Ah)).split(Ah);return{values:n,split:a,indexes:r,types:s}}function Jg(e){return Us(e).values}function Zg(e){const{split:t,types:n}=Us(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===Qg?i+=ms(s[o]):a===Xg?i+=de.transform(s[o]):i+=s[o]}return i}}const iS=e=>typeof e=="number"?0:de.test(e)?de.getAnimatableNone(e):e;function oS(e){const t=Jg(e);return Zg(e)(t.map(iS))}const an={test:tS,parse:Jg,createTransformer:Zg,getAnimatableNone:oS};function Oa(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function aS({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=Oa(l,a,e+1/3),i=Oa(l,a,e),o=Oa(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function ko(e,t){return n=>n>0?t:e}const se=(e,t,n)=>e+(t-e)*n,Ma=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},lS=[Jl,Cn,cr],uS=e=>lS.find(t=>t.test(e));function Nh(e){const t=uS(e);if(!t)return!1;let n=t.parse(e);return t===cr&&(n=aS(n)),n}const Rh=(e,t)=>{const n=Nh(e),r=Nh(t);if(!n||!r)return ko(e,t);const s={...n};return i=>(s.red=Ma(n.red,r.red,i),s.green=Ma(n.green,r.green,i),s.blue=Ma(n.blue,r.blue,i),s.alpha=se(n.alpha,r.alpha,i),Cn.transform(s))},Zl=new Set(["none","hidden"]);function cS(e,t){return Zl.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function dS(e,t){return n=>se(e,t,n)}function Oc(e){return typeof e=="number"?dS:typeof e=="string"?Rc(e)?ko:de.test(e)?Rh:pS:Array.isArray(e)?e0:typeof e=="object"?de.test(e)?Rh:hS:ko}function e0(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>Oc(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function hS(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Oc(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function fS(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const pS=(e,t)=>{const n=an.createTransformer(t),r=Us(e),s=Us(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Zl.has(e)&&!s.values.length||Zl.has(t)&&!r.values.length?cS(e,t):Zs(e0(fS(r,s),s.values),n):ko(e,t)};function t0(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?se(e,t,n):Oc(e)(e,t)}const mS=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>te.update(t,n),stop:()=>on(t),now:()=>xe.isProcessing?xe.timestamp:Ie.now()}},n0=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},So=2e4;function Mc(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<So;)t+=n,r=e.next(t);return t>=So?1/0:t}function gS(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(Mc(r),So);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:St(s)}}const yS=5;function r0(e,t,n){const r=Math.max(t-yS,0);return Mg(n-e(r),t-r)}const ae={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ia=.001;function vS({duration:e=ae.duration,bounce:t=ae.bounce,velocity:n=ae.velocity,mass:r=ae.mass}){let s,i,o=1-t;o=Ot(ae.minDamping,ae.maxDamping,o),e=Ot(ae.minDuration,ae.maxDuration,St(e)),o<1?(s=u=>{const c=u*o,h=c*e,f=c-n,y=eu(u,o),v=Math.exp(-h);return Ia-f/y*v},i=u=>{const h=u*o*e,f=h*n+n,y=Math.pow(o,2)*Math.pow(u,2)*e,v=Math.exp(-h),w=eu(Math.pow(u,2),o);return(-s(u)+Ia>0?-1:1)*((f-y)*v)/w}):(s=u=>{const c=Math.exp(-u*e),h=(u-n)*e+1;return-Ia+c*h},i=u=>{const c=Math.exp(-u*e),h=(n-u)*(e*e);return c*h});const a=5/e,l=xS(s,i,a);if(e=kt(e),isNaN(l))return{stiffness:ae.stiffness,damping:ae.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const wS=12;function xS(e,t,n){let r=n;for(let s=1;s<wS;s++)r=r-e(r)/t(r);return r}function eu(e,t){return e*Math.sqrt(1-t*t)}const kS=["duration","bounce"],SS=["stiffness","damping","mass"];function Dh(e,t){return t.some(n=>e[n]!==void 0)}function _S(e){let t={velocity:ae.velocity,stiffness:ae.stiffness,damping:ae.damping,mass:ae.mass,isResolvedFromDuration:!1,...e};if(!Dh(e,SS)&&Dh(e,kS))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Ot(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:ae.mass,stiffness:s,damping:i}}else{const n=vS(e);t={...t,...n,mass:ae.mass},t.isResolvedFromDuration=!0}return t}function _o(e=ae.visualDuration,t=ae.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:h,velocity:f,isResolvedFromDuration:y}=_S({...n,velocity:-St(n.velocity||0)}),v=f||0,w=u/(2*Math.sqrt(l*c)),x=o-i,g=St(Math.sqrt(l/c)),p=Math.abs(x)<5;r||(r=p?ae.restSpeed.granular:ae.restSpeed.default),s||(s=p?ae.restDelta.granular:ae.restDelta.default);let m;if(w<1){const b=eu(g,w);m=T=>{const j=Math.exp(-w*g*T);return o-j*((v+w*g*x)/b*Math.sin(b*T)+x*Math.cos(b*T))}}else if(w===1)m=b=>o-Math.exp(-g*b)*(x+(v+g*x)*b);else{const b=g*Math.sqrt(w*w-1);m=T=>{const j=Math.exp(-w*g*T),_=Math.min(b*T,300);return o-j*((v+w*g*x)*Math.sinh(_)+b*x*Math.cosh(_))/b}}const k={calculatedDuration:y&&h||null,next:b=>{const T=m(b);if(y)a.done=b>=h;else{let j=b===0?v:0;w<1&&(j=b===0?kt(v):r0(m,b,T));const _=Math.abs(j)<=r,M=Math.abs(o-T)<=s;a.done=_&&M}return a.value=a.done?o:T,a},toString:()=>{const b=Math.min(Mc(k),So),T=n0(j=>k.next(b*j).value,b,30);return b+"ms "+T},toTransition:()=>{}};return k}_o.applyToOptions=e=>{const t=gS(e,100,_o);return e.ease=t.ease,e.duration=kt(t.duration),e.type="keyframes",e};function tu({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=e[0],f={done:!1,value:h},y=_=>a!==void 0&&_<a||l!==void 0&&_>l,v=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let w=n*t;const x=h+w,g=o===void 0?x:o(x);g!==x&&(w=g-h);const p=_=>-w*Math.exp(-_/r),m=_=>g+p(_),k=_=>{const M=p(_),R=m(_);f.done=Math.abs(M)<=u,f.value=f.done?g:R};let b,T;const j=_=>{y(f.value)&&(b=_,T=_o({keyframes:[f.value,v(f.value)],velocity:r0(m,_,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return j(0),{calculatedDuration:null,next:_=>{let M=!1;return!T&&b===void 0&&(M=!0,k(_),j(_)),b!==void 0&&_>=b?T.next(_-b):(!M&&k(_),f)}}}function bS(e,t,n){const r=[],s=n||Mt.mix||t0,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||et:t;a=Zs(l,a)}r.push(a)}return r}function TS(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(jc(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=bS(t,r,s),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(c<e[h+1]);h++);const f=Fs(e[h],e[h+1],c);return a[h](f)};return n?c=>u(Ot(e[0],e[i-1],c)):u}function jS(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Fs(0,t,r);e.push(se(n,1,s))}}function CS(e){const t=[0];return jS(t,e.length-1),t}function ES(e,t){return e.map(n=>n*t)}function PS(e,t){return e.map(()=>t||Gg).splice(0,e.length-1)}function gs({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Uk(r)?r.map(Eh):Eh(r),i={done:!1,value:t[0]},o=ES(n&&n.length===t.length?n:CS(t),e),a=TS(o,t,{ease:Array.isArray(s)?s:PS(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const AS=e=>e!==null;function Ic(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(AS),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const NS={decay:tu,inertia:tu,tween:gs,keyframes:gs,spring:_o};function s0(e){typeof e.type=="string"&&(e.type=NS[e.type])}class Fc{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const RS=e=>e/100;class $c extends Fc{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Ie.now()&&this.tick(Ie.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;s0(t);const{type:n=gs,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const l=n||gs;l!==gs&&typeof a[0]!="number"&&(this.mixKeyframes=Zs(RS,t0(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Mc(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:h,repeatType:f,repeatDelay:y,type:v,onUpdate:w,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),p=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let m=this.currentTime,k=r;if(h){const _=Math.min(this.currentTime,s)/a;let M=Math.floor(_),R=_%1;!R&&_>=1&&(R=1),R===1&&M--,M=Math.min(M,h+1),!!(M%2)&&(f==="reverse"?(R=1-R,y&&(R-=y/a)):f==="mirror"&&(k=o)),m=Ot(0,1,R)*a}const b=p?{done:!1,value:c[0]}:k.next(m);i&&(b.value=i(b.value));let{done:T}=b;!p&&l!==null&&(T=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return j&&v!==tu&&(b.value=Ic(c,this.options,x,this.speed)),w&&w(b.value),j&&this.finish(),b}then(t,n){return this.finished.then(t,n)}get duration(){return St(this.calculatedDuration)}get time(){return St(this.currentTime)}set time(t){var n;t=kt(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ie.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=St(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=mS,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ie.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function DS(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const En=e=>e*180/Math.PI,nu=e=>{const t=En(Math.atan2(e[1],e[0]));return ru(t)},LS={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:nu,rotateZ:nu,skewX:e=>En(Math.atan(e[1])),skewY:e=>En(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ru=e=>(e=e%360,e<0&&(e+=360),e),Lh=nu,Oh=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Mh=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),OS={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Oh,scaleY:Mh,scale:e=>(Oh(e)+Mh(e))/2,rotateX:e=>ru(En(Math.atan2(e[6],e[5]))),rotateY:e=>ru(En(Math.atan2(-e[2],e[0]))),rotateZ:Lh,rotate:Lh,skewX:e=>En(Math.atan(e[4])),skewY:e=>En(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function su(e){return e.includes("scale")?1:0}function iu(e,t){if(!e||e==="none")return su(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=OS,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=LS,s=a}if(!s)return su(t);const i=r[t],o=s[1].split(",").map(IS);return typeof i=="function"?i(o):o[i]}const MS=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return iu(n,t)};function IS(e){return parseFloat(e.trim())}const $r=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ur=new Set($r),Ih=e=>e===Fr||e===$,FS=new Set(["x","y","z"]),$S=$r.filter(e=>!FS.has(e));function US(e){const t=[];return $S.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Rn={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>iu(t,"x"),y:(e,{transform:t})=>iu(t,"y")};Rn.translateX=Rn.x;Rn.translateY=Rn.y;const Dn=new Set;let ou=!1,au=!1,lu=!1;function i0(){if(au){const e=Array.from(Dn).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=US(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}au=!1,ou=!1,Dn.forEach(e=>e.complete(lu)),Dn.clear()}function o0(){Dn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(au=!0)})}function VS(){lu=!0,o0(),i0(),lu=!1}class Uc{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Dn.add(this),ou||(ou=!0,te.read(o0),te.resolveKeyframes(i0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}DS(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Dn.delete(this)}cancel(){this.state==="scheduled"&&(Dn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const BS=e=>e.startsWith("--");function zS(e,t,n){BS(t)?e.style.setProperty(t,n):e.style[t]=n}const WS=Cc(()=>window.ScrollTimeline!==void 0),GS={};function KS(e,t){const n=Cc(e);return()=>GS[t]??n()}const a0=KS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ns=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Fh={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ns([0,.65,.55,1]),circOut:ns([.55,0,1,.45]),backIn:ns([.31,.01,.66,-.59]),backOut:ns([.33,1.53,.69,.99])};function l0(e,t){if(e)return typeof e=="function"?a0()?n0(e,t):"ease-out":Kg(e)?ns(e):Array.isArray(e)?e.map(n=>l0(n,t)||Fh.easeOut):Fh[e]}function HS(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const h=l0(a,s);Array.isArray(h)&&(c.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(c,f)}function u0(e){return typeof e=="function"&&"applyToOptions"in e}function qS({type:e,...t}){return u0(e)&&a0()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class YS extends Fc{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,jc(typeof t.type!="string");const u=qS(t);this.animation=HS(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const c=Ic(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):zS(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return St(Number(t))}get time(){return St(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=kt(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&WS()?(this.animation.timeline=t,et):n(this)}}const c0={anticipate:Bg,backInOut:Vg,circInOut:Wg};function QS(e){return e in c0}function XS(e){typeof e.ease=="string"&&QS(e.ease)&&(e.ease=c0[e.ease])}const $h=10;class JS extends YS{constructor(t){XS(t),s0(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new $c({...o,autoplay:!1}),l=kt(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-$h).value,a.sample(l).value,$h),a.stop()}}const Uh=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(an.test(e)||e==="0")&&!e.startsWith("url("));function ZS(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function e_(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Uh(s,t),a=Uh(i,t);return!o||!a?!1:ZS(e)||(n==="spring"||u0(n))&&r}function uu(e){e.duration=0,e.type}const t_=new Set(["opacity","clipPath","filter","transform"]),n_=Cc(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function r_(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return n_()&&n&&t_.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const s_=40;class i_ extends Fc{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...h}){var v;super(),this.stop=()=>{var w,x;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Ie.now();const f={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:u,element:c,...h},y=(c==null?void 0:c.KeyframeResolver)||Uc;this.keyframeResolver=new y(a,(w,x,g)=>this.onKeyframesResolved(w,x,f,!g),l,u,c),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=Ie.now(),e_(t,i,o,a)||((Mt.instantAnimations||!l)&&(c==null||c(Ic(t,r,n))),t[0]=t[t.length-1],uu(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>s_?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!u&&r_(f)?new JS({...f,element:f.motionValue.owner.current}):new $c(f);y.finished.then(()=>this.notifyFinished()).catch(et),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),VS()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const o_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function a_(e){const t=o_.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function d0(e,t,n=1){const[r,s]=a_(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Dg(o)?parseFloat(o):o}return Rc(s)?d0(s,t,n+1):s}function Vc(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const h0=new Set(["width","height","top","left","right","bottom",...$r]),l_={test:e=>e==="auto",parse:e=>e},f0=e=>t=>t.test(e),p0=[Fr,$,_t,Vt,Zk,Jk,l_],Vh=e=>p0.find(f0(e));function u_(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Og(e):!0}const c_=new Set(["brightness","contrast","saturate","opacity"]);function d_(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Dc)||[];if(!r)return e;const s=n.replace(r,"");let i=c_.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const h_=/\b([a-z-]*)\(.*?\)/gu,cu={...an,getAnimatableNone:e=>{const t=e.match(h_);return t?t.map(d_).join(" "):e}},Bh={...Fr,transform:Math.round},f_={rotate:Vt,rotateX:Vt,rotateY:Vt,rotateZ:Vt,scale:Ci,scaleX:Ci,scaleY:Ci,scaleZ:Ci,skew:Vt,skewX:Vt,skewY:Vt,distance:$,translateX:$,translateY:$,translateZ:$,x:$,y:$,z:$,perspective:$,transformPerspective:$,opacity:$s,originX:Ph,originY:Ph,originZ:$},Bc={borderWidth:$,borderTopWidth:$,borderRightWidth:$,borderBottomWidth:$,borderLeftWidth:$,borderRadius:$,radius:$,borderTopLeftRadius:$,borderTopRightRadius:$,borderBottomRightRadius:$,borderBottomLeftRadius:$,width:$,maxWidth:$,height:$,maxHeight:$,top:$,right:$,bottom:$,left:$,padding:$,paddingTop:$,paddingRight:$,paddingBottom:$,paddingLeft:$,margin:$,marginTop:$,marginRight:$,marginBottom:$,marginLeft:$,backgroundPositionX:$,backgroundPositionY:$,...f_,zIndex:Bh,fillOpacity:$s,strokeOpacity:$s,numOctaves:Bh},p_={...Bc,color:de,backgroundColor:de,outlineColor:de,fill:de,stroke:de,borderColor:de,borderTopColor:de,borderRightColor:de,borderBottomColor:de,borderLeftColor:de,filter:cu,WebkitFilter:cu},m0=e=>p_[e];function g0(e,t){let n=m0(e);return n!==cu&&(n=an),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const m_=new Set(["auto","none","0"]);function g_(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!m_.has(i)&&Us(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=g0(n,s)}class y_ extends Uc{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),Rc(u))){const c=d0(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!h0.has(r)||t.length!==2)return;const[s,i]=t,o=Vh(s),a=Vh(i);if(o!==a)if(Ih(o)&&Ih(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else Rn[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||u_(t[s]))&&r.push(s);r.length&&g_(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rn[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Rn[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function v_(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const y0=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function w_(e){return Lg(e)&&"offsetHeight"in e}const zh=30,x_=e=>!isNaN(parseFloat(e));class k_{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Ie.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ie.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=x_(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ec);const r=this.events[t].add(n);return t==="change"?()=>{r(),te.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ie.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>zh)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,zh);return Mg(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nr(e,t){return new k_(e,t)}const{schedule:zc}=Hg(queueMicrotask,!1),ot={x:!1,y:!1};function v0(){return ot.x||ot.y}function S_(e){return e==="x"||e==="y"?ot[e]?null:(ot[e]=!0,()=>{ot[e]=!1}):ot.x||ot.y?null:(ot.x=ot.y=!0,()=>{ot.x=ot.y=!1})}function w0(e,t){const n=v_(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Wh(e){return!(e.pointerType==="touch"||v0())}function __(e,t,n={}){const[r,s,i]=w0(e,n),o=a=>{if(!Wh(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=h=>{Wh(h)&&(u(h),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const x0=(e,t)=>t?e===t?!0:x0(e,t.parentElement):!1,Wc=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,b_=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function T_(e){return b_.has(e.tagName)||e.tabIndex!==-1}const Wi=new WeakSet;function Gh(e){return t=>{t.key==="Enter"&&e(t)}}function Fa(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const j_=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Gh(()=>{if(Wi.has(n))return;Fa(n,"down");const s=Gh(()=>{Fa(n,"up")}),i=()=>Fa(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Kh(e){return Wc(e)&&!v0()}function C_(e,t,n={}){const[r,s,i]=w0(e,n),o=a=>{const l=a.currentTarget;if(!Kh(a))return;Wi.add(l);const u=t(l,a),c=(y,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Wi.has(l)&&Wi.delete(l),Kh(y)&&typeof u=="function"&&u(y,{success:v})},h=y=>{c(y,l===window||l===document||n.useGlobalTarget||x0(l,y.target))},f=y=>{c(y,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),w_(a)&&(a.addEventListener("focus",u=>j_(u,s)),!T_(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function k0(e){return Lg(e)&&"ownerSVGElement"in e}function E_(e){return k0(e)&&e.tagName==="svg"}const je=e=>!!(e&&e.getVelocity),P_=[...p0,de,an],A_=e=>P_.find(f0(e)),S0=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function N_(e=!0){const t=S.useContext(_c);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=S.useId();S.useEffect(()=>{if(e)return s(i)},[e]);const o=S.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const _0=S.createContext({strict:!1}),Hh={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Rr={};for(const e in Hh)Rr[e]={isEnabled:t=>Hh[e].some(n=>!!t[n])};function R_(e){for(const t in e)Rr[t]={...Rr[t],...e[t]}}const D_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||D_.has(e)}let b0=e=>!bo(e);function L_(e){typeof e=="function"&&(b0=t=>t.startsWith("on")?!bo(t):e(t))}try{L_(require("@emotion/is-prop-valid").default)}catch{}function O_(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(b0(s)||n===!0&&bo(s)||!t&&!bo(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const qo=S.createContext({});function Yo(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Vs(e){return typeof e=="string"||Array.isArray(e)}const Gc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Kc=["initial",...Gc];function Qo(e){return Yo(e.animate)||Kc.some(t=>Vs(e[t]))}function T0(e){return!!(Qo(e)||e.variants)}function M_(e,t){if(Qo(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Vs(n)?n:void 0,animate:Vs(r)?r:void 0}}return e.inherit!==!1?t:{}}function I_(e){const{initial:t,animate:n}=M_(e,S.useContext(qo));return S.useMemo(()=>({initial:t,animate:n}),[qh(t),qh(n)])}function qh(e){return Array.isArray(e)?e.join(" "):e}const Bs={};function F_(e){for(const t in e)Bs[t]=e[t],Nc(t)&&(Bs[t].isCSSVariable=!0)}function j0(e,{layout:t,layoutId:n}){return Ur.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Bs[e]||e==="opacity")}const $_={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},U_=$r.length;function V_(e,t,n){let r="",s=!0;for(let i=0;i<U_;i++){const o=$r[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=y0(a,Bc[o]);if(!l){s=!1;const c=$_[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function Hc(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(Ur.has(l)){o=!0;continue}else if(Nc(l)){s[l]=u;continue}else{const c=y0(u,Bc[l]);l.startsWith("origin")?(a=!0,i[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=V_(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}const qc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function C0(e,t,n){for(const r in t)!je(t[r])&&!j0(r,n)&&(e[r]=t[r])}function B_({transformTemplate:e},t){return S.useMemo(()=>{const n=qc();return Hc(n,t,e),Object.assign({},n.vars,n.style)},[t])}function z_(e,t){const n=e.style||{},r={};return C0(r,n,e),Object.assign(r,B_(e,t)),r}function W_(e,t){const n={},r=z_(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const G_={offset:"stroke-dashoffset",array:"stroke-dasharray"},K_={offset:"strokeDashoffset",array:"strokeDasharray"};function H_(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?G_:K_;e[i.offset]=$.transform(-r);const o=$.transform(t),a=$.transform(n);e[i.array]=`${o} ${a}`}function E0(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,u,c){if(Hc(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&H_(h,s,i,o,!1)}const P0=()=>({...qc(),attrs:{}}),A0=e=>typeof e=="string"&&e.toLowerCase()==="svg";function q_(e,t,n,r){const s=S.useMemo(()=>{const i=P0();return E0(i,t,A0(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};C0(i,e.style,e),s.style={...i,...s.style}}return s}const Y_=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yc(e){return typeof e!="string"||e.includes("-")?!1:!!(Y_.indexOf(e)>-1||/[A-Z]/u.test(e))}function Q_(e,t,n,{latestValues:r},s,i=!1){const a=(Yc(e)?q_:W_)(t,r,s,e),l=O_(t,typeof e=="string",i),u=e!==S.Fragment?{...l,...a,ref:n}:{},{children:c}=t,h=S.useMemo(()=>je(c)?c.get():c,[c]);return S.createElement(e,{...u,children:h})}function Yh(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Qc(e,t,n,r){if(typeof t=="function"){const[s,i]=Yh(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Yh(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function Gi(e){return je(e)?e.get():e}function X_({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:J_(n,r,s,e),renderState:t()}}function J_(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=Gi(i[f]);let{initial:o,animate:a}=e;const l=Qo(e),u=T0(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const h=c?a:o;if(h&&typeof h!="boolean"&&!Yo(h)){const f=Array.isArray(h)?h:[h];for(let y=0;y<f.length;y++){const v=Qc(e,f[y]);if(v){const{transitionEnd:w,transition:x,...g}=v;for(const p in g){let m=g[p];if(Array.isArray(m)){const k=c?m.length-1:0;m=m[k]}m!==null&&(s[p]=m)}for(const p in w)s[p]=w[p]}}}return s}const N0=e=>(t,n)=>{const r=S.useContext(qo),s=S.useContext(_c),i=()=>X_(e,t,r,s);return n?i():Rk(i)};function Xc(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(je(r[o])||t.style&&je(t.style[o])||j0(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const Z_=N0({scrapeMotionValuesFromProps:Xc,createRenderState:qc});function R0(e,t,n){const r=Xc(e,t,n);for(const s in e)if(je(e[s])||je(t[s])){const i=$r.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const eb=N0({scrapeMotionValuesFromProps:R0,createRenderState:P0}),tb=Symbol.for("motionComponentSymbol");function dr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function nb(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):dr(n)&&(n.current=r))},[t])}const Jc=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rb="framerAppearId",D0="data-"+Jc(rb),L0=S.createContext({});function sb(e,t,n,r,s){var w,x;const{visualElement:i}=S.useContext(qo),o=S.useContext(_0),a=S.useContext(_c),l=S.useContext(S0).reducedMotion,u=S.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,h=S.useContext(L0);c&&!c.projection&&s&&(c.type==="html"||c.type==="svg")&&ib(u.current,n,s,h);const f=S.useRef(!1);S.useInsertionEffect(()=>{c&&f.current&&c.update(n,a)});const y=n[D0],v=S.useRef(!!y&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,y))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,y)));return Dk(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),v.current&&c.animationState&&c.animationState.animateChanges())}),S.useEffect(()=>{c&&(!v.current&&c.animationState&&c.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,y)}),v.current=!1),c.enteringChildren=void 0)}),c}function ib(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:O0(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&dr(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function O0(e){if(e)return e.options.allowProjection!==!1?e.projection:O0(e.parent)}function $a(e,{forwardMotionProps:t=!1}={},n,r){n&&R_(n);const s=Yc(e)?eb:Z_;function i(a,l){let u;const c={...S.useContext(S0),...a,layoutId:ob(a)},{isStatic:h}=c,f=I_(a),y=s(a,h);if(!h&&Sc){ab();const v=lb(c);u=v.MeasureLayout,f.visualElement=sb(e,y,c,r,v.ProjectionNode)}return d.jsxs(qo.Provider,{value:f,children:[u&&f.visualElement?d.jsx(u,{visualElement:f.visualElement,...c}):null,Q_(e,a,nb(y,f.visualElement,l),y,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=S.forwardRef(i);return o[tb]=e,o}function ob({layoutId:e}){const t=S.useContext(Rg).id;return t&&e!==void 0?t+"-"+e:e}function ab(e,t){S.useContext(_0).strict}function lb(e){const{drag:t,layout:n}=Rr;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function ub(e,t){if(typeof Proxy>"u")return $a;const n=new Map,r=(i,o)=>$a(i,o,e,t),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,$a(o,void 0,e,t)),n.get(o))})}function M0({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function cb({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function db(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ua(e){return e===void 0||e===1}function du({scale:e,scaleX:t,scaleY:n}){return!Ua(e)||!Ua(t)||!Ua(n)}function Sn(e){return du(e)||I0(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function I0(e){return Qh(e.x)||Qh(e.y)}function Qh(e){return e&&e!=="0%"}function To(e,t,n){const r=e-n,s=t*r;return n+s}function Xh(e,t,n,r,s){return s!==void 0&&(e=To(e,s,r)),To(e,n,r)+t}function hu(e,t=0,n=1,r,s){e.min=Xh(e.min,t,n,r,s),e.max=Xh(e.max,t,n,r,s)}function F0(e,{x:t,y:n}){hu(e.x,t.translate,t.scale,t.originPoint),hu(e.y,n.translate,n.scale,n.originPoint)}const Jh=.999999999999,Zh=1.0000000000001;function hb(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&fr(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,F0(e,o)),r&&Sn(i.latestValues)&&fr(e,i.latestValues))}t.x<Zh&&t.x>Jh&&(t.x=1),t.y<Zh&&t.y>Jh&&(t.y=1)}function hr(e,t){e.min=e.min+t,e.max=e.max+t}function ef(e,t,n,r,s=.5){const i=se(e.min,e.max,s);hu(e,t,n,i,r)}function fr(e,t){ef(e.x,t.x,t.scaleX,t.scale,t.originX),ef(e.y,t.y,t.scaleY,t.scale,t.originY)}function $0(e,t){return M0(db(e.getBoundingClientRect(),t))}function fb(e,t,n){const r=$0(e,n),{scroll:s}=t;return s&&(hr(r.x,s.offset.x),hr(r.y,s.offset.y)),r}const tf=()=>({translate:0,scale:1,origin:0,originPoint:0}),pr=()=>({x:tf(),y:tf()}),nf=()=>({min:0,max:0}),ue=()=>({x:nf(),y:nf()}),fu={current:null},U0={current:!1};function pb(){if(U0.current=!0,!!Sc)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>fu.current=e.matches;e.addEventListener("change",t),t()}else fu.current=!1}const mb=new WeakMap;function gb(e,t,n){for(const r in t){const s=t[r],i=n[r];if(je(s))e.addValue(r,s);else if(je(i))e.addValue(r,Nr(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,Nr(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const rf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yb{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Uc,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Ie.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,te.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Qo(n),this.isVariantNode=T0(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const y=h[f];l[f]!==void 0&&je(y)&&y.set(l[f])}}mount(t){var n;this.current=t,mb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),U0.current||pb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fu.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),on(this.notifyUpdate),on(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ur.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&te.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Rr){const n=Rr[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<rf.length;r++){const s=rf[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=gb(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Nr(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Dg(r)||Og(r))?r=parseFloat(r):!A_(r)&&an.test(n)&&(r=g0(t,n)),this.setBaseTarget(t,je(r)?r.get():r)),je(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Qc(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!je(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ec),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){zc.render(this.render)}}class V0 extends yb{constructor(){super(...arguments),this.KeyframeResolver=y_}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;je(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function B0(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function vb(e){return window.getComputedStyle(e)}class wb extends V0{constructor(){super(...arguments),this.type="html",this.renderInstance=B0}readValueFromInstance(t,n){var r;if(Ur.has(n))return(r=this.projection)!=null&&r.isProjecting?su(n):MS(t,n);{const s=vb(t),i=(Nc(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return $0(t,n)}build(t,n,r){Hc(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Xc(t,n,r)}}const z0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xb(e,t,n,r){B0(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(z0.has(s)?s:Jc(s),t.attrs[s])}class kb extends V0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ue}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ur.has(n)){const r=m0(n);return r&&r.default||0}return n=z0.has(n)?n:Jc(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return R0(t,n,r)}build(t,n,r){E0(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){xb(t,n,r,s)}mount(t){this.isSVGTag=A0(t.tagName),super.mount(t)}}const Sb=(e,t)=>Yc(e)?new kb(t):new wb(t,{allowProjection:e!==S.Fragment});function kr(e,t,n){const r=e.getProps();return Qc(r,t,n!==void 0?n:r.custom,e)}const pu=e=>Array.isArray(e);function _b(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Nr(n))}function bb(e){return pu(e)?e[e.length-1]||0:e}function Tb(e,t){const n=kr(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=bb(i[o]);_b(e,o,a)}}function jb(e){return!!(je(e)&&e.add)}function mu(e,t){const n=e.getValue("willChange");if(jb(n))return n.add(t);if(!n&&Mt.WillChange){const r=new Mt.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function W0(e){return e.props[D0]}const Cb=e=>e!==null;function Eb(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(Cb),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const Pb={type:"spring",stiffness:500,damping:25,restSpeed:10},Ab=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Nb={type:"keyframes",duration:.8},Rb={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Db=(e,{keyframes:t})=>t.length>2?Nb:Ur.has(e)?e.startsWith("scale")?Ab(t[1]):Pb:Rb;function Lb({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Zc=(e,t,n,r={},s,i)=>o=>{const a=Vc(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-kt(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};Lb(a)||Object.assign(c,Db(e,c)),c.duration&&(c.duration=kt(c.duration)),c.repeatDelay&&(c.repeatDelay=kt(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(uu(c),c.delay===0&&(h=!0)),(Mt.instantAnimations||Mt.skipAnimations)&&(h=!0,uu(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,h&&!i&&t.get()!==void 0){const f=Eb(c.keyframes,a);if(f!==void 0){te.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new $c(c):new i_(c)};function Ob({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function G0(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const c in a){const h=e.getValue(c,e.latestValues[c]??null),f=a[c];if(f===void 0||u&&Ob(u,c))continue;const y={delay:n,...Vc(i||{},c)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===v&&!y.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const g=W0(e);if(g){const p=window.MotionHandoffAnimation(g,c,te);p!==null&&(y.startTime=p,w=!0)}}mu(e,c),h.start(Zc(c,h,f,e.shouldReduceMotion&&h0.has(c)?{type:!1}:y,e,w));const x=h.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{te.update(()=>{o&&Tb(e,o)})}),l}function K0(e,t,n,r=0,s=1){const i=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function gu(e,t,n={}){var l;const r=kr(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(G0(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=s;return Mb(e,t,u,c,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function Mb(e,t,n=0,r=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(gu(l,t,{...o,delay:n+(typeof r=="function"?0:r)+K0(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function Ib(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>gu(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=gu(e,t,n);else{const s=typeof t=="function"?kr(e,t,n.custom):t;r=Promise.all(G0(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function H0(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Fb=Kc.length;function q0(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?q0(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Fb;n++){const r=Kc[n],s=e.props[r];(Vs(s)||s===!1)&&(t[r]=s)}return t}const $b=[...Gc].reverse(),Ub=Gc.length;function Vb(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Ib(e,n,r)))}function Bb(e){let t=Vb(e),n=sf(),r=!0;const s=l=>(u,c)=>{var f;const h=kr(e,c,l==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:y,transitionEnd:v,...w}=h;u={...u,...w,...v}}return u};function i(l){t=l(e)}function o(l){const{props:u}=e,c=q0(e.parent)||{},h=[],f=new Set;let y={},v=1/0;for(let x=0;x<Ub;x++){const g=$b[x],p=n[g],m=u[g]!==void 0?u[g]:c[g],k=Vs(m),b=g===l?p.isActive:null;b===!1&&(v=x);let T=m===c[g]&&m!==u[g]&&k;if(T&&r&&e.manuallyAnimateOnMount&&(T=!1),p.protectedKeys={...y},!p.isActive&&b===null||!m&&!p.prevProp||Yo(m)||typeof m=="boolean")continue;const j=zb(p.prevProp,m);let _=j||g===l&&p.isActive&&!T&&k||x>v&&k,M=!1;const R=Array.isArray(m)?m:[m];let A=R.reduce(s(g),{});b===!1&&(A={});const{prevResolvedValues:O={}}=p,P={...O,...A},L=U=>{_=!0,f.has(U)&&(M=!0,f.delete(U)),p.needsAnimating[U]=!0;const C=e.getValue(U);C&&(C.liveStyle=!1)};for(const U in P){const C=A[U],I=O[U];if(y.hasOwnProperty(U))continue;let F=!1;pu(C)&&pu(I)?F=!H0(C,I):F=C!==I,F?C!=null?L(U):f.add(U):C!==void 0&&f.has(U)?L(U):p.protectedKeys[U]=!0}p.prevProp=m,p.prevResolvedValues=A,p.isActive&&(y={...y,...A}),r&&e.blockInitialAnimation&&(_=!1);const G=T&&j;_&&(!G||M)&&h.push(...R.map(U=>{const C={type:g};if(typeof U=="string"&&r&&!G&&e.manuallyAnimateOnMount&&e.parent){const{parent:I}=e,F=kr(I,U);if(I.enteringChildren&&F){const{delayChildren:H}=F.transition||{};C.delay=K0(I.enteringChildren,e,H)}}return{animation:U,options:C}}))}if(f.size){const x={};if(typeof u.initial!="boolean"){const g=kr(e,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(x.transition=g.transition)}f.forEach(g=>{const p=e.getBaseTarget(g),m=e.getValue(g);m&&(m.liveStyle=!0),x[g]=p??null}),h.push({animation:x})}let w=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(w=!1),r=!1,w?t(h):Promise.resolve()}function a(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var y;return(y=f.animationState)==null?void 0:y.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const f in n)n[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=sf(),r=!0}}}function zb(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!H0(t,e):!1}function vn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sf(){return{animate:vn(!0),whileInView:vn(),whileHover:vn(),whileTap:vn(),whileDrag:vn(),whileFocus:vn(),exit:vn()}}class fn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Wb extends fn{constructor(t){super(t),t.animationState||(t.animationState=Bb(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Yo(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Gb=0;class Kb extends fn{constructor(){super(...arguments),this.id=Gb++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Hb={animation:{Feature:Wb},exit:{Feature:Kb}};function zs(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function ni(e){return{point:{x:e.pageX,y:e.pageY}}}const qb=e=>t=>Wc(t)&&e(t,ni(t));function ys(e,t,n,r){return zs(e,t,qb(n),r)}const Y0=1e-4,Yb=1-Y0,Qb=1+Y0,Q0=.01,Xb=0-Q0,Jb=0+Q0;function Ae(e){return e.max-e.min}function Zb(e,t,n){return Math.abs(e-t)<=n}function of(e,t,n,r=.5){e.origin=r,e.originPoint=se(t.min,t.max,e.origin),e.scale=Ae(n)/Ae(t),e.translate=se(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Yb&&e.scale<=Qb||isNaN(e.scale))&&(e.scale=1),(e.translate>=Xb&&e.translate<=Jb||isNaN(e.translate))&&(e.translate=0)}function vs(e,t,n,r){of(e.x,t.x,n.x,r?r.originX:void 0),of(e.y,t.y,n.y,r?r.originY:void 0)}function af(e,t,n){e.min=n.min+t.min,e.max=e.min+Ae(t)}function e2(e,t,n){af(e.x,t.x,n.x),af(e.y,t.y,n.y)}function lf(e,t,n){e.min=t.min-n.min,e.max=e.min+Ae(t)}function ws(e,t,n){lf(e.x,t.x,n.x),lf(e.y,t.y,n.y)}function Ye(e){return[e("x"),e("y")]}const X0=({current:e})=>e?e.ownerDocument.defaultView:null,uf=(e,t)=>Math.abs(e-t);function t2(e,t){const n=uf(e.x,t.x),r=uf(e.y,t.y);return Math.sqrt(n**2+r**2)}class J0{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Ba(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=t2(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!v)return;const{point:w}=f,{timestamp:x}=xe;this.history.push({...w,timestamp:x});const{onStart:g,onMove:p}=this.handlers;y||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,f)},this.handlePointerMove=(f,y)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Va(y,this.transformPagePoint),te.update(this.updatePoint,!0)},this.handlePointerUp=(f,y)=>{this.end();const{onEnd:v,onSessionEnd:w,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Ba(f.type==="pointercancel"?this.lastMoveEventInfo:Va(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,g),w&&w(f,g)},!Wc(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=ni(t),l=Va(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=xe;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=n;h&&h(t,Ba(l,this.history)),this.removeListeners=Zs(ys(this.contextWindow,"pointermove",this.handlePointerMove),ys(this.contextWindow,"pointerup",this.handlePointerUp),ys(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),on(this.updatePoint)}}function Va(e,t){return t?{point:t(e.point)}:e}function cf(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ba({point:e},t){return{point:e,delta:cf(e,Z0(t)),offset:cf(e,n2(t)),velocity:r2(t,.1)}}function n2(e){return e[0]}function Z0(e){return e[e.length-1]}function r2(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Z0(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>kt(t)));)n--;if(!r)return{x:0,y:0};const i=St(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function s2(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?se(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?se(n,e,r.max):Math.min(e,n)),e}function df(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function i2(e,{top:t,left:n,bottom:r,right:s}){return{x:df(e.x,n,s),y:df(e.y,t,r)}}function hf(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function o2(e,t){return{x:hf(e.x,t.x),y:hf(e.y,t.y)}}function a2(e,t){let n=.5;const r=Ae(e),s=Ae(t);return s>r?n=Fs(t.min,t.max-r,e.min):r>s&&(n=Fs(e.min,e.max-s,t.min)),Ot(0,1,n)}function l2(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const yu=.35;function u2(e=yu){return e===!1?e=0:e===!0&&(e=yu),{x:ff(e,"left","right"),y:ff(e,"top","bottom")}}function ff(e,t,n){return{min:pf(e,t),max:pf(e,n)}}function pf(e,t){return typeof e=="number"?e:e[t]||0}const c2=new WeakMap;class d2{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ue(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ni(h).point)},o=(h,f)=>{const{drag:y,dragPropagation:v,onDragStart:w}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=S_(y),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ye(g=>{let p=this.getAxisMotionValue(g).get()||0;if(_t.test(p)){const{projection:m}=this.visualElement;if(m&&m.layout){const k=m.layout.layoutBox[g];k&&(p=Ae(k)*(parseFloat(p)/100))}}this.originPoint[g]=p}),w&&te.postRender(()=>w(h,f)),mu(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:w,onDrag:x}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:g}=f;if(v&&this.currentDirection===null){this.currentDirection=h2(g),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),x&&x(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ye(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new J0(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:X0(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&te.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Ei(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=s2(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&dr(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=i2(r.layoutBox,t):this.constraints=!1,this.elastic=u2(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ye(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=l2(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!dr(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=fb(r,s.root,this.visualElement.getTransformPagePoint());let o=o2(s.layout.layoutBox,i);if(n){const a=n(cb(o));this.hasMutatedConstraints=!!a,a&&(o=M0(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Ye(c=>{if(!Ei(c,n,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const f=s?200:1e6,y=s?40:1e7,v={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(c,v)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return mu(this.visualElement,t),r.start(Zc(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ye(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ye(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ye(n=>{const{drag:r}=this.getProps();if(!Ei(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-se(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!dr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ye(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=a2({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ye(o=>{if(!Ei(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(se(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;c2.set(this.visualElement,this);const t=this.visualElement.current,n=ys(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();dr(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),te.read(r);const o=zs(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ye(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=yu,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Ei(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function h2(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class f2 extends fn{constructor(t){super(t),this.removeGroupControls=et,this.removeListeners=et,this.controls=new d2(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||et}unmount(){this.removeGroupControls(),this.removeListeners()}}const mf=e=>(t,n)=>{e&&te.postRender(()=>e(t,n))};class p2 extends fn{constructor(){super(...arguments),this.removePointerDownListener=et}onPointerDown(t){this.session=new J0(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:X0(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:mf(t),onStart:mf(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&te.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=ys(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ki={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gf(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Qr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if($.test(e))e=parseFloat(e);else return e;const n=gf(e,t.target.x),r=gf(e,t.target.y);return`${n}% ${r}%`}},m2={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=an.parse(e);if(s.length>5)return r;const i=an.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=se(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let za=!1;class g2 extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;F_(y2),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),za&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ki.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,za=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||te.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),zc.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;za=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ey(e){const[t,n]=N_(),r=S.useContext(Rg);return d.jsx(g2,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(L0),isPresent:t,safeToRemove:n})}const y2={borderRadius:{...Qr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qr,borderTopRightRadius:Qr,borderBottomLeftRadius:Qr,borderBottomRightRadius:Qr,boxShadow:m2};function v2(e,t,n){const r=je(e)?e:Nr(e);return r.start(Zc("",r,t,n)),r.animation}const w2=(e,t)=>e.depth-t.depth;class x2{constructor(){this.children=[],this.isDirty=!1}add(t){bc(this.children,t),this.isDirty=!0}remove(t){Tc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(w2),this.isDirty=!1,this.children.forEach(t)}}function k2(e,t){const n=Ie.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(on(r),e(i-t))};return te.setup(r,!0),()=>on(r)}const ty=["TopLeft","TopRight","BottomLeft","BottomRight"],S2=ty.length,yf=e=>typeof e=="string"?parseFloat(e):e,vf=e=>typeof e=="number"||$.test(e);function _2(e,t,n,r,s,i){s?(e.opacity=se(0,n.opacity??1,b2(r)),e.opacityExit=se(t.opacity??1,0,T2(r))):i&&(e.opacity=se(t.opacity??1,n.opacity??1,r));for(let o=0;o<S2;o++){const a=`border${ty[o]}Radius`;let l=wf(t,a),u=wf(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||vf(l)===vf(u)?(e[a]=Math.max(se(yf(l),yf(u),r),0),(_t.test(u)||_t.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=se(t.rotate||0,n.rotate||0,r))}function wf(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const b2=ny(0,.5,zg),T2=ny(.5,.95,et);function ny(e,t,n){return r=>r<e?0:r>t?1:n(Fs(e,t,r))}function xf(e,t){e.min=t.min,e.max=t.max}function qe(e,t){xf(e.x,t.x),xf(e.y,t.y)}function kf(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Sf(e,t,n,r,s){return e-=t,e=To(e,1/n,r),s!==void 0&&(e=To(e,1/s,r)),e}function j2(e,t=0,n=1,r=.5,s,i=e,o=e){if(_t.test(t)&&(t=parseFloat(t),t=se(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=se(i.min,i.max,r);e===i&&(a-=t),e.min=Sf(e.min,t,n,a,s),e.max=Sf(e.max,t,n,a,s)}function _f(e,t,[n,r,s],i,o){j2(e,t[n],t[r],t[s],t.scale,i,o)}const C2=["x","scaleX","originX"],E2=["y","scaleY","originY"];function bf(e,t,n,r){_f(e.x,t,C2,n?n.x:void 0,r?r.x:void 0),_f(e.y,t,E2,n?n.y:void 0,r?r.y:void 0)}function Tf(e){return e.translate===0&&e.scale===1}function ry(e){return Tf(e.x)&&Tf(e.y)}function jf(e,t){return e.min===t.min&&e.max===t.max}function P2(e,t){return jf(e.x,t.x)&&jf(e.y,t.y)}function Cf(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function sy(e,t){return Cf(e.x,t.x)&&Cf(e.y,t.y)}function Ef(e){return Ae(e.x)/Ae(e.y)}function Pf(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class A2{constructor(){this.members=[]}add(t){bc(this.members,t),t.scheduleRender()}remove(t){if(Tc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function N2(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:f,skewX:y,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),y&&(r+=`skewX(${y}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Wa=["","X","Y","Z"],R2=1e3;let D2=0;function Ga(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function iy(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=W0(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",te,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&iy(r)}function oy({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=D2++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(M2),this.nodes.forEach(U2),this.nodes.forEach(V2),this.nodes.forEach(I2)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new x2)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ec),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=k0(o)&&!E_(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,h=0;const f=()=>this.root.updateBlockedByResize=!1;te.read(()=>{h=window.innerWidth}),e(o,()=>{const y=window.innerWidth;y!==h&&(h=y,this.root.updateBlockedByResize=!0,c&&c(),c=k2(f,250),Ki.hasAnimatedSinceResize&&(Ki.hasAnimatedSinceResize=!1,this.nodes.forEach(Rf)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||K2,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=u.getProps(),g=!this.targetLayout||!sy(this.targetLayout,y),p=!h&&f;if(this.options.layoutRoot||this.resumeFrom||p||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const m={...Vc(v,"layout"),onPlay:w,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(m.delay=0,m.type=!1),this.startAnimation(m),this.setAnimationOrigin(c,p)}else h||Rf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),on(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(B2),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iy(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Af);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Nf);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach($2),this.nodes.forEach(L2),this.nodes.forEach(O2)):this.nodes.forEach(Nf),this.clearAllSnapshots();const a=Ie.now();xe.delta=Ot(0,1e3/60,a-xe.timestamp),xe.timestamp=a,xe.isProcessing=!0,Da.update.process(xe),Da.preRender.process(xe),Da.render.process(xe),xe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zc.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(F2),this.sharedNodes.forEach(z2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,te.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){te.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ae(this.snapshot.measuredBox.x)&&!Ae(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!ry(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Sn(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),H2(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return ue();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(q2))){const{scroll:c}=this.root;c&&(hr(a.x,c.offset.x),hr(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=ue();if(qe(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:f}=c;c!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&qe(a,o),hr(a.x,h.offset.x),hr(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=ue();qe(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&fr(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Sn(c.latestValues)&&fr(l,c.latestValues)}return Sn(this.latestValues)&&fr(l,this.latestValues),l}removeTransform(o){const a=ue();qe(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Sn(u.latestValues))continue;du(u.latestValues)&&u.updateSnapshot();const c=ue(),h=u.measurePageBox();qe(c,h),bf(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Sn(this.latestValues)&&bf(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=xe.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),ws(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ue(),this.targetWithTransforms=ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),e2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qe(this.target,this.layout.layoutBox),F0(this.target,this.targetDelta)):qe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),ws(this.relativeTargetOrigin,this.target,y.target),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||du(this.parent.latestValues)||I0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===xe.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;qe(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;hb(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ue());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kf(this.prevProjectionDelta.x,this.projectionDelta.x),kf(this.prevProjectionDelta.y,this.projectionDelta.y)),vs(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Pf(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pf(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pr(),this.projectionDelta=pr(),this.projectionDeltaWithTransform=pr()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=pr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ue(),y=l?l.source:void 0,v=this.layout?this.layout.source:void 0,w=y!==v,x=this.getStack(),g=!x||x.members.length<=1,p=!!(w&&!g&&this.options.crossfade===!0&&!this.path.some(G2));this.animationProgress=0;let m;this.mixTargetDelta=k=>{const b=k/1e3;Df(h.x,o.x,b),Df(h.y,o.y,b),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ws(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),W2(this.relativeTarget,this.relativeTargetOrigin,f,b),m&&P2(this.relativeTarget,m)&&(this.isProjectionDirty=!1),m||(m=ue()),qe(m,this.relativeTarget)),w&&(this.animationValues=c,_2(c,u,this.latestValues,b,p,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(on(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=te.update(()=>{Ki.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Nr(0)),this.currentAnimation=v2(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(R2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&ay(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ue();const h=Ae(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Ae(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}qe(a,l),fr(a,c),vs(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new A2),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Ga("z",o,u,this.animationValues);for(let c=0;c<Wa.length;c++)Ga(`rotate${Wa[c]}`,o,u,this.animationValues),Ga(`skew${Wa[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Gi(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Gi(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Sn(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=N2(this.projectionDeltaWithTransform,this.treeScale,c);l&&(h=l(c,h)),o.transform=h;const{x:f,y}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${y.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const v in Bs){if(c[v]===void 0)continue;const{correct:w,applyTo:x,isCSSVariable:g}=Bs[v],p=h==="none"?c[v]:w(c[v],u);if(x){const m=x.length;for(let k=0;k<m;k++)o[x[k]]=p}else g?this.options.visualElement.renderState.vars[v]=p:o[v]=p}this.options.layoutId&&(o.pointerEvents=u===this?Gi(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Af),this.root.sharedNodes.clear()}}}function L2(e){e.updateLayout()}function O2(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?Ye(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],y=Ae(f);f.min=r[h].min,f.max=f.min+y}):ay(i,t.layoutBox,r)&&Ye(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],y=Ae(r[h]);f.max=f.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+y)});const a=pr();vs(a,r,t.layoutBox);const l=pr();o?vs(l,e.applyTransform(s,!0),t.measuredBox):vs(l,r,t.layoutBox);const u=!ry(a);let c=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:y}=h;if(f&&y){const v=ue();ws(v,t.layoutBox,f.layoutBox);const w=ue();ws(w,r,y.layoutBox),sy(v,w)||(c=!0),h.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function M2(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function I2(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function F2(e){e.clearSnapshot()}function Af(e){e.clearMeasurements()}function Nf(e){e.isLayoutDirty=!1}function $2(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Rf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function U2(e){e.resolveTargetDelta()}function V2(e){e.calcProjection()}function B2(e){e.resetSkewAndRotation()}function z2(e){e.removeLeadSnapshot()}function Df(e,t,n){e.translate=se(t.translate,0,n),e.scale=se(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Lf(e,t,n,r){e.min=se(t.min,n.min,r),e.max=se(t.max,n.max,r)}function W2(e,t,n,r){Lf(e.x,t.x,n.x,r),Lf(e.y,t.y,n.y,r)}function G2(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const K2={duration:.45,ease:[.4,0,.1,1]},Of=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Mf=Of("applewebkit/")&&!Of("chrome/")?Math.round:et;function If(e){e.min=Mf(e.min),e.max=Mf(e.max)}function H2(e){If(e.x),If(e.y)}function ay(e,t,n){return e==="position"||e==="preserve-aspect"&&!Zb(Ef(t),Ef(n),.2)}function q2(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Y2=oy({attachResizeListener:(e,t)=>zs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ka={current:void 0},ly=oy({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ka.current){const e=new Y2({});e.mount(window),e.setOptions({layoutScroll:!0}),Ka.current=e}return Ka.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Q2={pan:{Feature:p2},drag:{Feature:f2,ProjectionNode:ly,MeasureLayout:ey}};function Ff(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&te.postRender(()=>i(t,ni(t)))}class X2 extends fn{mount(){const{current:t}=this.node;t&&(this.unmount=__(t,(n,r)=>(Ff(this.node,r,"Start"),s=>Ff(this.node,s,"End"))))}unmount(){}}class J2 extends fn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zs(zs(this.node.current,"focus",()=>this.onFocus()),zs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $f(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&te.postRender(()=>i(t,ni(t)))}class Z2 extends fn{mount(){const{current:t}=this.node;t&&(this.unmount=C_(t,(n,r)=>($f(this.node,r,"Start"),(s,{success:i})=>$f(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vu=new WeakMap,Ha=new WeakMap,eT=e=>{const t=vu.get(e.target);t&&t(e)},tT=e=>{e.forEach(eT)};function nT({root:e,...t}){const n=e||document;Ha.has(n)||Ha.set(n,{});const r=Ha.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(tT,{root:e,...t})),r[s]}function rT(e,t,n){const r=nT(t);return vu.set(e,n),r.observe(e),()=>{vu.delete(e),r.unobserve(e)}}const sT={some:0,all:1};class iT extends fn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:sT[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),f=u?c:h;f&&f(l)};return rT(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(oT(t,n))&&this.startObserver()}unmount(){}}function oT({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const aT={inView:{Feature:iT},tap:{Feature:Z2},focus:{Feature:J2},hover:{Feature:X2}},lT={layout:{ProjectionNode:ly,MeasureLayout:ey}},uT={...Hb,...aT,...Q2,...lT},$n=ub(uT,Sb),cT=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v11.494m-9-5.747h18"})}),dT=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),ed=({guide:e,onClick:t})=>d.jsxs($n.div,{onClick:t,className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 shadow-md p-5 cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,y:-4,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},children:[d.jsxs("div",{className:"flex items-start mb-4 space-x-4",children:[d.jsx("img",{src:e.authorPfpUrl,alt:e.authorUsername,className:"w-11 h-11 rounded-full"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 line-clamp-1",children:e.title}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["by ",e.authorUsername]})]})]}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2 min-h-[40px]",children:e.description}),e.tags&&e.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.slice(0,3).map((n,r)=>d.jsx("span",{className:"bg-primary-100 text-primary-800 dark:bg-primary-900/50 dark:text-primary-300 text-xs font-medium px-2.5 py-1 rounded-full",children:n},r))}),d.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400 pt-3 border-t border-gray-100 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("span",{className:"flex items-center font-medium",children:[d.jsx(cT,{})," ",e.books.length," books"]}),d.jsxs("span",{className:"flex items-center font-medium",children:[d.jsx(dT,{})," ",e.likes]})]}),d.jsx("span",{className:"text-xs",children:new Date(e.createdAt).toLocaleDateString("en-GB")})]})]}),hT=({setPage:e,setSelectedGuideId:t})=>{const{myGuides:n,isLoading:r}=Js(),s=i=>{t(i),e(D.GuideDetail)};return d.jsx("div",{className:"animate-fadeIn",children:r?d.jsx("div",{className:"flex justify-center mt-20",children:d.jsx(Ge,{})}):n.length>0?d.jsx("div",{className:"space-y-4",children:n.map(i=>d.jsx(ed,{guide:i,onClick:()=>s(i.id)},i.id))}):d.jsxs("div",{className:"text-center py-12 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"No guides yet!"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Tap the 'Create' tab to build your first reading guide."})]})})},fT=()=>{const e=S.useRef(null),t=S.useRef({isDown:!1,startX:0,scrollLeft:0,hasDragged:!1});return S.useEffect(()=>{const n=e.current;if(!n)return;const r=l=>{if(!t.current.isDown)return;const c=("touches"in l?l.touches[0].pageX:l.pageX)-t.current.startX;Math.abs(c)>5&&(t.current.hasDragged=!0,l.type==="touchmove"&&l.preventDefault()),n.scrollLeft=t.current.scrollLeft-c},s=()=>{t.current.isDown&&(t.current.isDown=!1,n.style.scrollBehavior="smooth",document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",s),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",s),setTimeout(()=>{t.current.hasDragged=!1},0))},i=l=>{l.stopPropagation(),l.type==="mousedown"&&l.preventDefault(),t.current.isDown=!0,t.current.hasDragged=!1,n.style.scrollBehavior="auto";const u="touches"in l?l.touches[0].pageX:l.pageX;t.current.startX=u,t.current.scrollLeft=n.scrollLeft,document.addEventListener("mousemove",r),document.addEventListener("mouseup",s),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",s)},o=l=>{t.current.hasDragged&&l.stopPropagation()},a={passive:!1};return n.addEventListener("mousedown",i),n.addEventListener("touchstart",i,a),n.addEventListener("click",o,!0),()=>{n.removeEventListener("mousedown",i),n.removeEventListener("touchstart",i,!1),n.removeEventListener("click",o,!0),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",s),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",s)}},[]),e},pT=({guide:e,onClick:t})=>d.jsxs($n.div,{onClick:t,className:"flex-shrink-0 w-48 bg-white dark:bg-gray-700 rounded-2xl border border-gray-200/80 dark:border-gray-600/80 shadow-md p-4 cursor-pointer",whileHover:{scale:1.05,y:-2,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},children:[d.jsx("img",{src:e.authorPfpUrl,alt:e.authorUsername,className:"w-12 h-12 rounded-full mb-3 shadow-sm pointer-events-none"}),d.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 text-md line-clamp-2 mb-1 h-12",children:e.title}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-1",children:["by ",e.authorUsername]})]}),Uf=({setPage:e,setSelectedGuideId:t,searchTerm:n})=>{const{allGuides:r,recommendedGuides:s,isLoading:i}=Js(),o=fT(),[a,l]=S.useState(0),[u,c]=S.useState(0);S.useEffect(()=>{const w=()=>{const g=o.current;if(g&&g.scrollWidth>g.clientWidth){const p=Math.ceil(g.scrollWidth/g.clientWidth);l(p)}else l(0)},x=setTimeout(w,100);return window.addEventListener("resize",w),()=>{clearTimeout(x),window.removeEventListener("resize",w)}},[i,s]);const h=w=>{t(w),e(D.GuideDetail)},f=r.filter(w=>{const x=n.toLowerCase();return w.title.toLowerCase().includes(x)||w.description.toLowerCase().includes(x)||w.authorUsername.toLowerCase().includes(x)||w.tags&&w.tags.some(g=>g.toLowerCase().includes(x))}),y=S.useCallback(()=>{const w=o.current;if(w){const x=Math.round(w.scrollLeft/w.clientWidth);c(x)}},[]),v=w=>{const x=o.current;x&&x.scrollTo({left:x.clientWidth*w,behavior:"smooth"})};return d.jsx("div",{className:"animate-fadeIn",children:i?d.jsx("div",{className:"flex justify-center mt-20",children:d.jsx(Ge,{})}):d.jsxs("div",{className:"space-y-8",children:[d.jsxs("section",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"Recommended for You"}),d.jsx("div",{ref:o,onScroll:y,className:"flex space-x-4 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide cursor-grab active:cursor-grabbing select-none",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:s.map(w=>d.jsx(pT,{guide:w,onClick:()=>h(w.id)},`rec-${w.id}`))}),a>1&&d.jsx("div",{className:"flex justify-center items-center space-x-2 mt-4",children:Array.from({length:a}).map((w,x)=>d.jsx("button",{onClick:()=>v(x),className:`h-2.5 rounded-full transition-all duration-300 ease-in-out ${u===x?"w-6 bg-primary-700":"w-2.5 bg-gray-300 dark:bg-gray-600"}`,"aria-label":`Go to page ${x+1}`},x))})]}),d.jsxs("section",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"All Guides"}),f.length>0?d.jsx($n.div,{className:"space-y-4",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:f.map((w,x)=>d.jsx($n.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{delay:x*.05},children:d.jsx(ed,{guide:w,onClick:()=>h(w.id)})},w.id))}):d.jsxs("div",{className:"text-center py-12 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"No Results Found"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Try adjusting your search term."})]})]})]})})},td=()=>({trigger:S.useCallback((t="light")=>{if(window.navigator&&window.navigator.vibrate)switch(t){case"light":window.navigator.vibrate(10);break;case"medium":window.navigator.vibrate([10,200,10]);break;case"heavy":window.navigator.vibrate(200);break;default:window.navigator.vibrate(10)}},[])}),re=({children:e,variant:t="primary",isLoading:n=!1,className:r="",...s})=>{const{trigger:i}=td(),o="w-full text-lg px-8 py-4 font-semibold rounded-xl focus:outline-none focus:ring-4 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",a={primary:"text-white bg-primary-700 hover:bg-primary-800 focus:ring-primary-300 shadow-lg shadow-primary-500/30",secondary:"text-gray-800 bg-gray-200 hover:bg-gray-300 focus:ring-gray-300 dark:text-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-600",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-red-300 shadow-lg shadow-red-500/30"},l=c=>{i("light"),s.onClick&&s.onClick(c)},u=d.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});return d.jsxs($n.button,{className:`${o} ${a[t]} ${r}`,disabled:n||s.disabled,onClick:l,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:17},...s,children:[n&&u,e]})},uy=({isOpen:e,onClose:t,title:n,children:r})=>{const s=S.useRef(null);return S.useEffect(()=>{const i=a=>{a.key==="Escape"&&t()},o=a=>{s.current&&!s.current.contains(a.target)&&t()};return e&&(document.addEventListener("keydown",i),document.addEventListener("mousedown",o)),()=>{document.removeEventListener("keydown",i),document.removeEventListener("mousedown",o)}},[e,t]),e?$w.createPortal(d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60 backdrop-blur-sm animate-fadeIn",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:d.jsxs("div",{ref:s,className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-md m-4 border border-gray-200/50 dark:border-gray-700/50",children:[d.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors rounded-full p-1 focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"Close modal",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"p-6",children:r})]})}),document.body):null},mT=({onBookGenerated:e})=>{const[t,n]=S.useState(""),[r,s]=S.useState(""),[i,o]=S.useState(""),a=()=>{!t||!r||(e({title:t,author:r,notes:i||void 0}),n(""),s(""),o(""))},l="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2",u="w-full bg-gray-100 dark:bg-gray-700 border-2 border-transparent rounded-xl p-3 text-gray-800 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:bg-white dark:focus:bg-gray-600 focus:border-primary-500 transition-all";return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"title",className:l,children:"Book Title:"}),d.jsx("input",{id:"title",type:"text",value:t,onChange:c=>n(c.target.value),className:u,placeholder:"Enter book title","aria-label":"Book title"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"author",className:l,children:"Author:"}),d.jsx("input",{id:"author",type:"text",value:r,onChange:c=>s(c.target.value),className:u,placeholder:"Enter author name","aria-label":"Author name"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"notes",className:l,children:"Notes (optional):"}),d.jsx("textarea",{id:"notes",value:i,onChange:c=>o(c.target.value),className:`${u} h-24`,placeholder:"Add any notes about this book","aria-label":"Book notes"})]}),d.jsx(re,{onClick:a,className:"w-full",children:"Add Book"})]})},cy=({user:e,onSave:t,onCancel:n,existingGuide:r})=>{var R;const[s,i]=S.useState((r==null?void 0:r.title)||""),[o,a]=S.useState((r==null?void 0:r.description)||""),[l,u]=S.useState(((R=r==null?void 0:r.tags)==null?void 0:R.join(", "))||""),[c,h]=S.useState(r!=null&&r.books&&r.books.length>0?r.books:[{id:Date.now(),title:"",author:"",likes:0,dislikes:0}]),[f,y]=S.useState((r==null?void 0:r.isPublic)??!0),[v,w]=S.useState(!1),[x,g]=S.useState(!1),{trigger:p}=td(),m=(A,O,P)=>{const L=[...c];L[A]={...L[A],[O]:P},h(L)},k=()=>{p("light"),h([...c,{id:Date.now(),title:"",author:"",notes:"",coverUrl:"",purchaseLink:"",likes:0,dislikes:0}])},b=A=>{p("light");const O={id:Date.now(),title:A.title||"",author:A.author||"",notes:A.notes||"",coverUrl:"",purchaseLink:"",likes:0,dislikes:0};h(P=>P.length===1&&!P[0].title&&!P[0].author?[O]:[...P,O])},T=A=>{if(p("light"),c.length>1){const O=c.filter((P,L)=>L!==A);h(O)}},j=async A=>{A.preventDefault(),w(!0),p("medium");const O=l.split(",").map(L=>L.trim()).filter(Boolean),P={title:s,description:o,books:c.filter(L=>L.title&&L.author),isPublic:f,tags:O};try{if(r){const L=await dk(r.id,P);t(L)}else{const L=await ck(P,e);t(L)}}catch(L){console.error("Failed to save guide",L)}finally{w(!1)}},_="w-full bg-gray-100 dark:bg-gray-700 border-2 border-transparent rounded-xl p-3 text-gray-800 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:bg-white dark:focus:bg-gray-600 focus:border-primary-500 transition-all",M="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2";return d.jsxs(d.Fragment,{children:[d.jsxs("form",{onSubmit:j,className:"space-y-6 animate-fadeIn",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"title",className:M,children:"Title"}),d.jsx("input",{id:"title",type:"text",value:s,onChange:A=>i(A.target.value),className:_,placeholder:"e.g., Intro to Stoicism",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"description",className:M,children:"Description"}),d.jsx("textarea",{id:"description",value:o,onChange:A=>a(A.target.value),className:`${_} h-24`,placeholder:"A brief summary of this guide",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"tags",className:M,children:"Tags"}),d.jsx("input",{id:"tags",name:"tags",type:"text",value:l,onChange:A=>u(A.target.value),className:_,placeholder:"Add tags (separated by comma)"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3 px-2",children:"Books"}),d.jsx("div",{className:"space-y-4",children:c.map((A,O)=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 relative",children:[c.length>1&&d.jsx("button",{type:"button",onClick:()=>T(O),className:"absolute -top-2 -right-2 w-7 h-7 bg-red-500 rounded-full text-white font-bold text-lg flex items-center justify-center leading-none pb-0.5 shadow-md hover:bg-red-600 transition-colors",children:"×"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("input",{id:`book-title-${O}`,name:`book-title-${O}`,type:"text",value:A.title,onChange:P=>m(O,"title",P.target.value),className:_,placeholder:"Book Title",required:!0}),d.jsx("input",{id:`book-author-${O}`,name:`book-author-${O}`,type:"text",value:A.author,onChange:P=>m(O,"author",P.target.value),className:_,placeholder:"Author",required:!0}),d.jsx("textarea",{id:`book-notes-${O}`,name:`book-notes-${O}`,value:A.notes||"",onChange:P=>m(O,"notes",P.target.value),className:`${_} h-20 text-sm`,placeholder:"Optional notes..."}),d.jsx("input",{id:`book-cover-${O}`,name:`book-cover-${O}`,type:"url",value:A.coverUrl||"",onChange:P=>m(O,"coverUrl",P.target.value),className:_,placeholder:"Cover URL (optional)"}),d.jsx("input",{id:`book-purchase-${O}`,name:`book-purchase-${O}`,type:"url",value:A.purchaseLink||"",onChange:P=>m(O,"purchaseLink",P.target.value),className:_,placeholder:"Purchase Link (optional)"})]})]},A.id))}),d.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[d.jsx(re,{type:"button",onClick:()=>g(!0),variant:"secondary",className:"w-full",children:"✨ Generate with AI"}),d.jsx(re,{type:"button",onClick:k,variant:"secondary",className:"w-full",children:"Add Another Book"})]})]}),d.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80",children:d.jsxs("label",{htmlFor:"isPublic",className:"flex items-center justify-between cursor-pointer",children:[d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Make Guide Public?"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{id:"isPublic",type:"checkbox",className:"sr-only",checked:f,onChange:()=>y(!f)}),d.jsx("div",{className:`block w-14 h-8 rounded-full transition-colors ${f?"bg-primary-700":"bg-gray-200 dark:bg-gray-600"}`}),d.jsx("div",{className:`dot absolute left-1 top-1 bg-white dark:bg-gray-300 w-6 h-6 rounded-full transition-transform ${f?"transform translate-x-6":""}`})]})]})}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(re,{type:"button",variant:"secondary",onClick:n,children:"Cancel"}),d.jsx(re,{type:"submit",variant:"primary",isLoading:v,children:r?"Update Guide":"Create Guide"})]})]}),d.jsx(uy,{isOpen:x,onClose:()=>g(!1),title:"Generate Book Ideas",children:d.jsx(mT,{onBookGenerated:b})})]})},gT=({user:e,onSave:t,onCancel:n})=>d.jsx("div",{className:"animate-fadeIn",children:d.jsx(cy,{user:e,onSave:t,onCancel:n})}),yT=({guideId:e,user:t,setPage:n,onDelete:r})=>{const[s,i]=S.useState(null),[o,a]=S.useState(!0),[l,u]=S.useState(!1),[c,h]=S.useState(!1),[f,y]=S.useState(!1),[v,w]=S.useState(!1),[x,g]=S.useState({}),[p,m]=S.useState({});S.useEffect(()=>{(async()=>{a(!0);const L=await kc(e);if(L){const[G,B,U,C]=await Promise.all([kk(e),Sk(e),_k(L),bk(L)]);i(L),y(G),w(B),g(U),m(C)}else i(null);a(!1)})()},[e]);const k=(s==null?void 0:s.authorUsername)===t.username,b=()=>{s&&n(D.ShareOptions,s.id)},T=async()=>{s&&(h(!0),await hk(s.id),h(!1),u(!1),r())},j=async()=>{if(!s)return;const P={...s},L=f,G=v;i(B=>B?{...B,likes:L?B.likes-1:B.likes+1,dislikes:G?B.dislikes-1:B.dislikes}:null),y(!L),G&&w(!1);try{L?await pk(s.id):(await fk(s.id),await xo("Liked",s.title))}catch(B){console.error("Failed to update like status:",B),i(P),y(L),w(G)}},_=async()=>{if(!s)return;const P={...s},L=f,G=v;i(B=>B?{...B,dislikes:G?B.dislikes-1:B.dislikes+1,likes:L?B.likes-1:B.likes}:null),w(!G),L&&y(!1);try{G?await gk(s.id):(await mk(s.id),await xo("Disliked",s.title))}catch(B){console.error("Failed to update dislike status:",B),i(P),y(L),w(G)}},M=async P=>{if(!s)return;const L={...s},G=!!x[P],B=!!p[P];g(U=>({...U,[P]:!G})),!G&&B&&m(U=>({...U,[P]:!1})),i(U=>U?{...U,books:U.books.map(C=>C.id===P?{...C,likes:G?C.likes-1:C.likes+1,dislikes:!G&&B?C.dislikes-1:C.dislikes}:C)}:null);try{G?await vk(P):await yk(P)}catch(U){console.error("Failed to update book like status:",U),i(L),g(C=>({...C,[P]:G})),!G&&B&&m(C=>({...C,[P]:!0}))}},R=async P=>{if(!s)return;const L={...s},G=!!x[P],B=!!p[P];m(U=>({...U,[P]:!B})),!B&&G&&g(U=>({...U,[P]:!1})),i(U=>U?{...U,books:U.books.map(C=>C.id===P?{...C,dislikes:B?C.dislikes-1:C.dislikes+1,likes:!B&&G?C.likes-1:C.likes}:C)}:null);try{B?await xk(P):await wk(P)}catch(U){console.error("Failed to update book dislike status:",U),i(L),m(C=>({...C,[P]:B})),!B&&G&&g(C=>({...C,[P]:!0}))}};if(o)return d.jsx("div",{className:"flex justify-center mt-20",children:d.jsx(Ge,{})});if(!s)return d.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Guide not found."});const A=({filled:P,small:L=!1})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:L?"h-5 w-5":"h-6 w-6",viewBox:"0 0 24 24",fill:P?"currentColor":"none",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),O=({filled:P,small:L=!1})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${L?"h-5 w-5":"h-6 w-6"} transform -scale-y-100`,viewBox:"0 0 24 24",fill:P?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})});return d.jsxs("div",{className:"animate-fadeIn",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4 text-center",children:s.title}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200/80 dark:border-gray-700/80 rounded-2xl p-5 mb-6",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("img",{src:s.authorPfpUrl,alt:s.authorUsername,className:"w-11 h-11 rounded-full mr-3"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s.authorUsername}),d.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created on ",new Date(s.createdAt).toLocaleDateString()]})]})]}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:s.description}),s.tags&&s.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-100 dark:border-gray-700",children:s.tags.map((P,L)=>d.jsx("span",{className:"bg-primary-100 text-primary-800 dark:bg-primary-900/50 dark:text-primary-300 text-xs font-semibold px-3 py-1.5 rounded-full",children:P},L))})]}),d.jsx("div",{className:"space-y-4 mb-8",children:s.books.map((P,L)=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200/80 dark:border-gray-700/80 rounded-2xl p-4 flex flex-col sm:flex-row gap-4 transition-shadow hover:shadow-md",children:[P.coverUrl&&d.jsx("img",{src:P.coverUrl,alt:`Cover of ${P.title}`,className:"w-24 h-36 object-cover rounded-lg flex-shrink-0 self-center sm:self-start shadow-sm"}),d.jsxs("div",{className:"flex-grow flex flex-col",children:[d.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[L+1,". ",P.title]}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:["by ",P.author]}),P.notes&&d.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700/50 p-3 rounded-xl italic mb-3",children:['"',P.notes,'"']}),d.jsxs("div",{className:"mt-auto pt-2 flex items-center justify-between",children:[P.purchaseLink?d.jsxs("a",{href:P.purchaseLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-primary-700 bg-primary-100 hover:bg-primary-200 dark:text-primary-300 dark:bg-primary-900/50 dark:hover:bg-primary-900/80 rounded-lg transition-colors",children:["Buy Now",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}):d.jsx("div",{}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("button",{onClick:()=>R(P.id),className:`flex items-center space-x-2 px-3 py-1.5 font-semibold rounded-full focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out transform active:scale-95 text-sm ${p[P.id]?"bg-blue-100 text-blue-600 focus:ring-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 focus:ring-gray-300"}`,children:[d.jsx(O,{filled:!!p[P.id],small:!0}),d.jsx("span",{children:P.dislikes})]}),d.jsxs("button",{onClick:()=>M(P.id),className:`flex items-center space-x-2 px-3 py-1.5 font-semibold rounded-full focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out transform active:scale-95 text-sm ${x[P.id]?"bg-red-100 text-red-600 focus:ring-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 focus:ring-gray-300"}`,children:[d.jsx(A,{filled:!!x[P.id],small:!0}),d.jsx("span",{children:P.likes})]})]})]})]})]},P.id))}),d.jsxs("div",{className:"flex flex-col space-y-3",children:[d.jsxs("div",{className:"flex items-stretch space-x-3",children:[d.jsxs("button",{onClick:_,className:`flex items-center justify-center space-x-2 px-4 py-3 font-semibold rounded-xl focus:outline-none focus:ring-4 transition-all duration-300 ease-in-out transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed ${v?"bg-blue-100 text-blue-600 focus:ring-blue-200":"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 focus:ring-gray-300"}`,children:[d.jsx(O,{filled:v}),d.jsx("span",{children:s.dislikes})]}),d.jsx(re,{onClick:b,variant:"primary",className:"flex-1",children:"Share to Farcaster"}),d.jsxs("button",{onClick:j,className:`flex items-center justify-center space-x-2 px-4 py-3 font-semibold rounded-xl focus:outline-none focus:ring-4 transition-all duration-300 ease-in-out transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed ${f?"bg-red-100 text-red-600 focus:ring-red-200":"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 focus:ring-gray-300"}`,children:[d.jsx(A,{filled:f}),d.jsx("span",{children:s.likes})]})]}),k&&d.jsxs("div",{className:"flex space-x-3",children:[d.jsx(re,{onClick:()=>n(D.EditGuide,s.id),variant:"secondary",className:"flex-1",children:"Edit"}),d.jsx(re,{onClick:()=>u(!0),variant:"danger",className:"flex-1",children:"Delete"})]})]}),d.jsxs(uy,{isOpen:l,onClose:()=>u(!1),title:"Confirm Deletion",children:[d.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to permanently delete this guide? This action cannot be undone."}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx(re,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),d.jsx(re,{variant:"danger",onClick:T,isLoading:c,children:"Delete"})]})]})]})},vT=({user:e,guideId:t,onSave:n,onCancel:r})=>{const[s,i]=S.useState(null),[o,a]=S.useState(!0);return S.useEffect(()=>{(async()=>{a(!0);const u=await kc(t);u&&u.authorUsername===e.username&&i(u),a(!1)})()},[t,e.username]),o?d.jsx("div",{className:"flex justify-center mt-20",children:d.jsx(Ge,{})}):s?d.jsx("div",{className:"animate-fadeIn",children:d.jsx(cy,{user:e,onSave:n,onCancel:r,existingGuide:s})}):d.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Guide not found or you don't have permission to edit it."})},wT=["gradient","modern","classic"];function Pi(e,t,n,r,s,i){const o=t.split(" ");let a="",l=r;for(let u=0;u<o.length;u++){const c=a+o[u]+" ";e.measureText(c).width>s&&u>0?(e.fillText(a,n,l),a=o[u]+" ",l+=i):a=c}return e.fillText(a,n,l),l+i}const xT=(e,t,n)=>new Promise((r,s)=>{const i=document.createElement("canvas"),o=i.getContext("2d");if(!o)return s(new Error("Could not get canvas context"));const a=1200,l=630;i.width=a,i.height=l;let u="#FFFFFF",c="#111827",h="#374151",f="#4B5563",y="#6B7280",v="bold 72px sans-serif",w="40px sans-serif",x="italic 32px sans-serif";switch(t){case"gradient":const p=o.createLinearGradient(0,0,a,l);p.addColorStop(0,"#F4E6FF"),p.addColorStop(1,"#E9D0FF"),u=p,c="#2E0F50",h="#6020A0",f="#4F1B82",y="#7828C8";break;case"modern":u="#111827",c="#F9FAFB",h="#D1D5DB",f="#9CA3AF",y="#E5E7EB";break;case"classic":u="#FFFFFF",c="#1F2937",h="#4B5563",f="#6B7280",y="#9CA3AF",v="bold 80px serif",w="42px serif",x="italic 34px serif";break}const g=p=>{if(o.fillStyle=u,o.fillRect(0,0,a,l),p){const k=a*.55,b=a-k-60,T=l-60*2,j=b/p.width,_=T/p.height,M=Math.min(j,_),R=p.width*M,A=p.height*M,O=k+(b-R)/2,P=60+(T-A)/2;o.shadowColor="rgba(0,0,0,0.15)",o.shadowBlur=20,o.shadowOffsetX=0,o.shadowOffsetY=8,o.drawImage(p,O,P,R,A),o.shadowColor="transparent";const L=60,G=a*.55-90;o.fillStyle=c,o.font=v,o.textAlign="left",o.textBaseline="top";const B=Pi(o,e.title,L,80,G,85);o.fillStyle=h,o.font=w,Pi(o,e.description,L,B+15,G,50)}else{o.fillStyle=c,o.font=v,o.textAlign="left",o.textBaseline="top";const k=Pi(o,e.title,60,80,1080,85);o.fillStyle=h,o.font=w,Pi(o,e.description,60,k+10,1080,50)}o.fillStyle=f,o.font=x,o.textBaseline="bottom",o.textAlign="left",o.fillText(`by @${e.authorUsername}`,60,l-60),o.fillStyle=y,o.font="24px sans-serif",o.textAlign="right",o.fillText("Shared from Castlist",a-60,l-60),r(i.toDataURL("image/png"))};if(n){let p=!1;const m=setTimeout(()=>{p||(p=!0,console.warn("Image load timed out after 10 seconds. Falling back to text-only card."),g(null))},1e4),k=new Image;k.crossOrigin="anonymous",k.onload=()=>{p||(p=!0,clearTimeout(m),g(k))},k.onerror=T=>{p||(p=!0,clearTimeout(m),console.error("Failed to load cover image, drawing text-only card.",T),g(null))};const b=`https://images.weserv.nl/?url=${encodeURIComponent(n)}`;k.src=b}else g(null)}),kT=({guideId:e,onBack:t})=>{const[n,r]=S.useState(null),[s,i]=S.useState(!0),[o,a]=S.useState("modern"),[l,u]=S.useState(null),[c,h]=S.useState(null),[f,y]=S.useState(!0);S.useEffect(()=>{(async()=>{var p;i(!0);const g=await kc(e);if(r(g||null),g){const m=(p=g.books.find(k=>k.coverUrl))==null?void 0:p.coverUrl;u(m||null)}i(!1)})()},[e]),S.useEffect(()=>{n&&(async()=>{y(!0),h(null);try{const g=await xT(n,o,l);h(g)}catch(g){console.error("Failed to generate share card:",g)}finally{y(!1)}})()},[n,o,l]);const v=async()=>{n&&(await xo("Shared",n.title),alert("Sharing is simulated! In a real app, your card would be cast."),t())};if(s)return d.jsx("div",{className:"flex justify-center mt-20",children:d.jsx(Ge,{text:"Loading guide..."})});if(!n)return d.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Guide not found."});const w=n.books.filter(x=>x.coverUrl);return d.jsxs("div",{className:"animate-fadeIn",children:[d.jsx("div",{className:"mb-6 border border-gray-200/80 dark:border-gray-700/80 rounded-3xl overflow-hidden flex items-center justify-center bg-gray-100 dark:bg-gray-800 shadow-lg",children:f?d.jsx("div",{className:"w-full aspect-[1.91/1] flex flex-col items-center justify-center",children:d.jsx(Ge,{text:"Generating preview..."})}):c&&d.jsx("img",{src:c,alt:"Share card preview",className:"w-full h-auto block"})}),w.length>0&&d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 mb-6",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-3 text-center",children:"Select a Cover"}),d.jsxs("div",{className:"flex space-x-3 overflow-x-auto pb-2 -mx-2 px-2 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[d.jsx("div",{onClick:()=>u(null),className:`flex-shrink-0 w-20 h-28 rounded-lg flex items-center justify-center cursor-pointer transition-all border-4 bg-gray-50 dark:bg-gray-700 ${l?"border-transparent hover:border-gray-300 dark:hover:border-gray-500":"border-primary-500"}`,children:d.jsxs("div",{className:"w-full h-full rounded-md flex flex-col items-center justify-center text-center p-2",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400 dark:text-gray-500 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 14a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 14a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Text Only"})]})}),w.map(x=>d.jsx("div",{onClick:()=>u(x.coverUrl),className:`flex-shrink-0 w-20 h-28 rounded-lg cursor-pointer transition-all border-4 ${l===x.coverUrl?"border-primary-500":"border-transparent hover:border-gray-300 dark:hover:border-gray-500"}`,children:d.jsx("img",{src:x.coverUrl,alt:`Cover of ${x.title}`,className:"w-full h-full object-cover rounded-md shadow-sm"})},x.id))]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-3 text-center",children:"Choose a Theme"}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:wT.map(x=>d.jsx(re,{variant:o===x?"primary":"secondary",onClick:()=>a(x),className:"capitalize w-full",children:x},x))})]}),d.jsx("div",{className:"mt-8",children:d.jsx(re,{onClick:v,className:"w-full",disabled:f,children:f?"Generating...":"Confirm Share"})})]})},ST=["gradient","modern","classic"],_T=(e,t,n,r)=>{let s;if(r===1)s="#FFD700";else if(r===2)s="#C0C0C0";else if(r===3)s="#CD7F32";else return;e.save(),e.beginPath(),e.arc(t,n,20,0,Math.PI*2,!1),e.fillStyle=s,e.fill(),e.strokeStyle="rgba(255,255,255,0.5)",e.lineWidth=2,e.stroke(),e.fillStyle=r===1?"#A36B00":r===2?"#6C757D":"#8C5A2D",e.font="bold 24px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillText(r.toString(),t,n+2),e.restore()},bT=(e,t)=>new Promise((n,r)=>{const s=document.createElement("canvas"),i=s.getContext("2d");if(!i)return r(new Error("Could not get canvas context"));const o=1200,a=630;s.width=o,s.height=a;let l="#FFFFFF",u="#111827",c="#374151",h="#6B7280",f="#6B7280",y="bold 72px sans-serif",v="48px sans-serif",w="italic 30px sans-serif";switch(t){case"gradient":const p=i.createLinearGradient(0,0,o,a);p.addColorStop(0,"#F4E6FF"),p.addColorStop(1,"#E9D0FF"),l=p,u="#2E0F50",c="#6020A0",h="#4F1B82",f="#7828C8";break;case"modern":l="#111827",u="#F9FAFB",c="#D1D5DB",h="#9CA3AF",f="#E5E7EB";break;case"classic":l="#FFFFFF",u="#1F2937",c="#4B5563",h="#6B7280",f="#9CA3AF",y="bold 80px serif",v="50px serif",w="italic 32px serif";break}i.fillStyle=l,i.fillRect(0,0,o,a),i.fillStyle=u,i.font=y,i.textAlign="center",i.fillText("Top 5 Reading Guides",o/2,90);let x=180;const g=85;e.slice(0,5).forEach((p,m)=>{const k=m+1,b=120;k<=3?_T(i,b-40,x,k):(i.fillStyle=c,i.font="bold 48px sans-serif",i.textAlign="center",i.fillText(`#${k}`,b-40,x+5)),i.fillStyle=c,i.font=v,i.textAlign="left",i.textBaseline="middle";const T=650;let j=p.title;if(i.measureText(j).width>T){for(;i.measureText(j+"...").width>T;)j=j.slice(0,-1);j+="..."}i.fillText(j,b+20,x-12),i.fillStyle=h,i.font=w,i.fillText(`by @${p.authorUsername}`,b+25,x+22),i.fillStyle="#E11D48",i.font="bold 40px sans-serif",i.textAlign="right",i.fillText(`❤️ ${p.likes}`,o-100,x),x+=g}),i.fillStyle=f,i.font="24px sans-serif",i.textAlign="right",i.textBaseline="bottom",i.fillText("Shared from Castlist",o-60,a-40),n(s.toDataURL("image/png"))}),TT=({onBack:e})=>{const[t,n]=S.useState(null),[r,s]=S.useState(!0),[i,o]=S.useState("modern"),[a,l]=S.useState(null),[u,c]=S.useState(!0);S.useEffect(()=>{(async()=>{s(!0);const v=[...await Eg()].sort((w,x)=>x.likes-w.likes);n(v),s(!1)})()},[]),S.useEffect(()=>{t&&(async()=>{c(!0),l(null);try{const y=await bT(t,i);l(y)}catch(y){console.error("Failed to generate share card:",y)}finally{c(!1)}})()},[t,i]);const h=()=>{t&&(xo("Shared","the global ranking"),alert("Sharing is simulated! In a real app, your card would be cast."),e())};return r?d.jsx("div",{className:"flex justify-center mt-20",children:d.jsx(Ge,{text:"Loading rankings..."})}):t?d.jsxs("div",{className:"animate-fadeIn",children:[d.jsx("div",{className:"mb-6 border border-gray-200/80 dark:border-gray-700/80 rounded-3xl overflow-hidden flex items-center justify-center bg-gray-100 dark:bg-gray-800 shadow-lg",children:u?d.jsx("div",{className:"w-full aspect-[1.91/1] flex flex-col items-center justify-center",children:d.jsx(Ge,{text:"Generating preview..."})}):a&&d.jsx("img",{src:a,alt:"Share card preview",className:"w-full h-auto block"})}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-3 text-center",children:"Choose a Theme"}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:ST.map(f=>d.jsx(re,{variant:i===f?"primary":"secondary",onClick:()=>o(f),className:"capitalize w-full",children:f},f))})]}),d.jsx("div",{className:"mt-8",children:d.jsx(re,{onClick:h,className:"w-full",disabled:u,children:u?"Generating...":"Confirm Share"})})]}):d.jsx("div",{className:"text-center text-gray-500 mt-20",children:"No guides found."})};function jT({title:e,titleId:t,...n},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?S.createElement("title",{id:t},e):null,S.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 0 1 3.16 5.337a45.6 45.6 0 0 1 2.006-.343v.256Zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 0 1-2.863 3.207 6.72 6.72 0 0 0 .857-3.294Z",clipRule:"evenodd"}))}const dy=S.forwardRef(jT),CT=e=>{const t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/1e3);if(r<60)return`${r}s ago`;const s=Math.floor(r/60);if(s<60)return`${s}m ago`;const i=Math.floor(s/60);if(i<24)return`${i}h ago`;const o=Math.floor(i/24);if(o<30)return`${o}d ago`;const a=Math.floor(o/30);return a<12?`${a}mo ago`:`${Math.floor(o/365)}y ago`},ET=({action:e})=>{const t="w-10 h-10 rounded-full flex items-center justify-center";return e.includes("Liked")?d.jsx("div",{className:`${t} bg-red-100 dark:bg-red-900/40`,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})}):e.includes("Disliked")?d.jsx("div",{className:`${t} bg-blue-100 dark:bg-blue-900/40`,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M10 3.5a1.5 1.5 0 01.954 2.805l-4.18 6.335A1.5 1.5 0 015.5 14H5V8.5a1.5 1.5 0 011.5-1.5h2.5V3.5zM8 5.5H6.5V14h.672a3.5 3.5 0 003.26-4.971l4.18-6.335A3.501 3.501 0 0010 0a3.5 3.5 0 00-2 6.5v-1z",transform:"translate(0 3)"})})}):e.includes("Shared")?d.jsx("div",{className:`${t} bg-primary-100 dark:bg-primary-900/40`,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary-500",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})})}):null},PT=()=>{const{theme:e,toggleTheme:t}=Ek();return d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Dark Mode"}),d.jsxs("button",{onClick:t,className:"relative inline-flex items-center h-8 w-14 rounded-full transition-colors bg-gray-200 dark:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800","aria-label":`Switch to ${e==="light"?"dark":"light"} mode`,children:[d.jsx("span",{className:`inline-block w-6 h-6 transform transition-transform rounded-full bg-white dark:bg-gray-300 ${e==="dark"?"translate-x-7":"translate-x-1"}`}),d.jsx("span",{className:`absolute left-1.5 top-1.5 transition-opacity ${e==="light"?"opacity-100":"opacity-0"}`,"aria-hidden":"true",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 14.464A1 1 0 106.465 13.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zm-1.414-2.12a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z"})})}),d.jsx("span",{className:`absolute right-1.5 top-1.5 transition-opacity ${e==="dark"?"opacity-100":"opacity-0"}`,"aria-hidden":"true",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-400",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})]})]})},AT=({setPage:e,setSelectedGuideId:t})=>{const{user:n,logout:r}=Ho(),{myGuides:s,activities:i,profileStats:o,isLoading:a}=Js(),l=u=>{t(u),e(D.GuideDetail,u)};return a?d.jsx("div",{className:"flex justify-center mt-20",children:d.jsx(Ge,{})}):n?d.jsxs("div",{className:"animate-fadeIn space-y-8",children:[d.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 flex flex-col items-center text-center shadow-md border border-gray-200/80 dark:border-gray-700/80",children:[d.jsx("img",{src:n.pfp_url,alt:n.username,className:"w-24 h-24 rounded-full mb-4 ring-4 ring-primary-200 dark:ring-primary-900 shadow-lg"}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.username}),d.jsxs("div",{className:"flex justify-center items-center space-x-8 mt-6 pt-6 border-t border-gray-100 dark:border-gray-700 w-full",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-2xl font-bold text-primary-700 dark:text-primary-400",children:s.length}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Guides"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-2xl font-bold text-primary-700 dark:text-primary-400",children:o.totalLikes}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Likes"})]})]})]}),d.jsxs("section",{children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"Your Rank"}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-md border border-gray-200/80 dark:border-gray-700/80 flex items-center space-x-6",children:[d.jsx("div",{className:"bg-primary-100 dark:bg-primary-900/40 p-4 rounded-full flex-shrink-0",children:d.jsx(dy,{className:"h-8 w-8 text-primary-600 dark:text-primary-300"})}),d.jsx("div",{children:o.rank?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Your Global Position"}),d.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:["#",o.rank]}),d.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["You're in the top ",Math.ceil(o.rank/o.totalRankedUsers*100),"% of creators!"]})]}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"You are not ranked yet"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Create public guides and get likes to join the leaderboard!"})]})})]})]}),d.jsxs("section",{children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"Activity History"}),i.length>0?d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-4 shadow-md border border-gray-200/80 dark:border-gray-700/80 space-y-2",children:i.slice(0,5).map((u,c)=>d.jsxs("div",{className:"flex items-center p-2 rounded-xl",children:[d.jsx("div",{className:"mr-4",children:d.jsx(ET,{action:u.action})}),d.jsx("div",{className:"flex-grow",children:d.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 leading-tight",children:["You ",u.action.toLowerCase()," the guide: ",d.jsxs("span",{className:"font-semibold",children:['"',u.itemTitle,'"']})]})}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0",children:CT(u.timestamp)})]},c))}):d.jsxs("div",{className:"text-center py-10 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:"text-md font-semibold text-gray-800 dark:text-gray-100",children:"No recent activity."}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 text-sm",children:"Like or share a guide to see your activity here."})]})]}),d.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-md border border-gray-200/80 dark:border-gray-700/80",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Settings"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(PT,{}),d.jsx("div",{className:"pt-2",children:d.jsx(re,{onClick:()=>e(D.FarcasterTest),variant:"secondary",className:"w-full",children:"🔑 Test Farcaster API"})})]})]}),d.jsxs("section",{children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"My Guides"}),s.length>0?d.jsx("div",{className:"space-y-4",children:s.map(u=>d.jsx(ed,{guide:u,onClick:()=>l(u.id)},u.id))}):d.jsxs("div",{className:"text-center py-12 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"No guides yet!"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Tap the 'Create' tab to build your first reading guide."})]})]}),d.jsx("section",{className:"pt-4",children:d.jsx(re,{variant:"danger",onClick:r,className:"w-full",children:"Sign Out"})})]}):d.jsx("div",{className:"text-center text-gray-500 mt-20",children:"User not found."})},NT=({rank:e})=>{const t=[{color:"text-yellow-400 dark:text-yellow-300",shadow:"drop-shadow-[0_2px_2px_rgba(250,204,21,0.4)]"},{color:"text-gray-400 dark:text-gray-300",shadow:"drop-shadow-[0_2px_2px_rgba(156,163,175,0.4)]"},{color:"text-orange-500 dark:text-orange-400",shadow:"drop-shadow-[0_2px_2px_rgba(249,115,22,0.4)]"}];if(e>3)return null;const{color:n,shadow:r}=t[e-1];return d.jsx("div",{className:`relative ${r}`,children:d.jsx(dy,{className:`h-6 w-6 ${n}`})})},RT=({setPage:e,setSelectedGuideId:t})=>{const{rankedGuides:n,isLoading:r}=Js(),s=o=>{t(o),e(D.GuideDetail,o)},i=()=>{e(D.ShareRanking)};return r?d.jsx("div",{className:"flex justify-center mt-20",children:d.jsx(Ge,{text:"Calculating rankings..."})}):d.jsxs("div",{className:"animate-fadeIn",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 text-center",children:"Top 10 Guides"}),n.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-3",children:n.map((o,a)=>{const l=a+1;return d.jsxs("div",{onClick:()=>s(o.id),className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 shadow-md p-4 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-primary-300 dark:hover:border-primary-700 hover:-translate-y-1 flex items-center space-x-4",children:[d.jsxs("div",{className:"flex flex-col items-center justify-center w-12 text-center",children:[d.jsxs("span",{className:"text-2xl font-bold text-gray-500 dark:text-gray-400",children:["#",l]}),d.jsx(NT,{rank:l})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 truncate",children:o.title}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["by ",o.authorUsername]})]}),d.jsxs("div",{className:"flex items-center space-x-2 text-red-500 flex-shrink-0",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),d.jsx("span",{className:"font-bold text-md",children:o.likes})]})]},o.id)})}),d.jsx("div",{className:"mt-8",children:d.jsx(re,{onClick:i,className:"w-full",children:"Share Ranking"})})]}):d.jsxs("div",{className:"text-center py-12 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"No guides available!"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Check back later to see the top guides."})]})]})},DT=()=>{const[e,t]=S.useState(null),[n,r]=S.useState([]),[s,i]=S.useState([]),[o,a]=S.useState([]),[l,u]=S.useState(!1),[c,h]=S.useState(!1),[f,y]=S.useState(!1),[v,w]=S.useState(null),x=S.useCallback(()=>{w(null)},[]),g=S.useCallback(async T=>{u(!0),w(null);try{const[j,_]=await Promise.all([xc(T),Tg(T,25)]);j?(t(j),r(_)):w("User not found")}catch(j){w(j instanceof Error?j.message:"Failed to fetch user")}finally{u(!1)}},[]),p=S.useCallback(async T=>{if(!T.trim()){i([]);return}h(!0),w(null);try{const j=await rk(T,10);i(j)}catch(j){w(j instanceof Error?j.message:"Failed to search users")}finally{h(!1)}},[]),m=S.useCallback(async()=>{u(!0),w(null);try{const T=await sk(25);a(T)}catch(T){w(T instanceof Error?T.message:"Failed to fetch trending casts")}finally{u(!1)}},[]),k=S.useCallback(async T=>{y(!0),w(null);try{const j=await ok(T);return j&&e&&await g(e.fid),j}catch(j){return w(j instanceof Error?j.message:"Failed to share guide"),null}finally{y(!1)}},[e,g]),b=S.useCallback(async(T,j)=>{y(!0),w(null);try{const _=await jg(T,j);return _&&e&&await g(e.fid),_}catch(_){return w(_ instanceof Error?_.message:"Failed to create cast"),null}finally{y(!1)}},[e,g]);return{user:e,userCasts:n,searchResults:s,trendingCasts:o,isLoading:l,isSearching:c,isCreatingCast:f,fetchUser:g,searchUsers:p,fetchTrending:m,shareGuide:k,createNewCast:b,error:v,clearError:x}},LT=()=>{const{user:e,userCasts:t,searchResults:n,trendingCasts:r,isLoading:s,isSearching:i,isCreatingCast:o,fetchUser:a,searchUsers:l,fetchTrending:u,shareGuide:c,createNewCast:h,error:f,clearError:y}=DT(),[v,w]=S.useState(""),[x,g]=S.useState(""),[p,m]=S.useState("1"),k=async()=>{v.trim()&&await l(v)},b=async()=>{const _=parseInt(p);isNaN(_)||await a(_)},T=async()=>{x.trim()&&await h(x)&&(g(""),alert("Cast created successfully!"))},j=async()=>{await c({title:"Test Guide",description:"This is a test guide from Castlist",tags:["test","farcaster","books"]})&&alert("Guide shared as cast successfully!")};return d.jsx("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"🔑 Farcaster API Test"}),f&&d.jsxs("div",{className:"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg p-4 mb-4",children:[d.jsx("p",{className:"text-red-700 dark:text-red-300",children:f}),d.jsx(re,{onClick:y,variant:"secondary",className:"mt-2",children:"Clear Error"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Test User Fetch"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{id:"test-fid",name:"test-fid",type:"number",value:p,onChange:_=>m(_.target.value),placeholder:"Enter FID (e.g., 1)",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(re,{onClick:b,isLoading:s,children:"Fetch User"})]}),e&&d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[d.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"User Data:"}),d.jsxs("p",{children:[d.jsx("strong",{children:"FID:"})," ",e.fid]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Username:"})," ",e.username]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Display Name:"})," ",e.display_name]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Followers:"})," ",e.follower_count]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Following:"})," ",e.following_count]}),d.jsx("img",{src:e.pfp_url,alt:"Profile",className:"w-16 h-16 rounded-full mt-2"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Test User Search"}),d.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-3 mb-4",children:d.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[d.jsx("strong",{children:"Note:"})," The Farcaster API doesn't have a search endpoint. This searches through popular users (FIDs 1-20) and filters by username match."]})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{id:"search-query",name:"search-query",type:"text",value:v,onChange:_=>w(_.target.value),placeholder:"Search users (e.g., 'farcaster', 'dwr')",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),d.jsx(re,{onClick:k,isLoading:i,children:"Search"})]}),n.length>0&&d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[d.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Search Results:"}),d.jsx("div",{className:"space-y-2",children:n.map(_=>d.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-600 rounded",children:[d.jsx("img",{src:_.pfp_url,alt:_.username,className:"w-8 h-8 rounded-full"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:_.username}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["FID: ",_.fid]})]})]},_.fid))})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Test Trending Casts"}),d.jsx(re,{onClick:u,isLoading:s,children:"Fetch Trending"}),r.length>0&&d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[d.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Trending Casts:"}),d.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:r.slice(0,5).map(_=>d.jsxs("div",{className:"p-3 bg-white dark:bg-gray-600 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("img",{src:_.author.pfp_url,alt:_.author.username,className:"w-6 h-6 rounded-full"}),d.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:_.author.username})]}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:_.text}),d.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[d.jsxs("span",{children:["❤️ ",_.reactions.count]}),d.jsxs("span",{children:["🔄 ",_.recasts.count]}),d.jsxs("span",{children:["💬 ",_.replies.count]})]})]},_.hash))})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Test Cast Creation"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("textarea",{value:x,onChange:_=>g(_.target.value),placeholder:"Enter your cast text...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white h-20"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(re,{onClick:T,isLoading:o,children:"Create Cast"}),d.jsx(re,{onClick:j,isLoading:o,variant:"secondary",children:"Share Test Guide"})]})]})]}),t.length>0&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"User's Recent Casts"}),d.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:d.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:t.slice(0,5).map(_=>d.jsxs("div",{className:"p-3 bg-white dark:bg-gray-600 rounded",children:[d.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:_.text}),d.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[d.jsxs("span",{children:["❤️ ",_.reactions.count]}),d.jsxs("span",{children:["🔄 ",_.recasts.count]}),d.jsxs("span",{children:["💬 ",_.replies.count]}),d.jsx("span",{children:new Date(_.timestamp).toLocaleDateString()})]})]},_.hash))})})]})]})})},OT=()=>d.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:d.jsx(LT,{})});function MT({title:e,titleId:t,...n},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?S.createElement("title",{id:t},e):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"}))}const IT=S.forwardRef(MT);function FT({title:e,titleId:t,...n},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?S.createElement("title",{id:t},e):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const $T=S.forwardRef(FT);function UT({title:e,titleId:t,...n},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?S.createElement("title",{id:t},e):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const VT=S.forwardRef(UT);function BT({title:e,titleId:t,...n},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?S.createElement("title",{id:t},e):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const zT=S.forwardRef(BT);function WT({title:e,titleId:t,...n},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?S.createElement("title",{id:t},e):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const GT=S.forwardRef(WT),KT=[{page:D.Home,label:"Home",icon:$T},{page:D.MyGuides,label:"My Guides",icon:IT},{page:D.Create,label:"Create",icon:VT},{page:D.Ranking,label:"Ranking",icon:zT},{page:D.Profile,label:"Profile",icon:GT}],HT=({activePage:e,setPage:t})=>{const{trigger:n}=td(),r=s=>{n("light"),t(s)};return d.jsx("div",{className:"fixed bottom-4 left-0 right-0 z-50 px-4",children:d.jsx("nav",{className:"flex items-center justify-around h-16 bg-white/70 backdrop-blur-xl dark:bg-gray-900/70 rounded-3xl shadow-lg max-w-lg mx-auto ring-1 ring-black/5 dark:ring-white/5",children:KT.map(({page:s,label:i,icon:o})=>{const a=e===s,l="text-primary-700 dark:text-primary-400",u="text-gray-500 dark:text-gray-400 group-hover:text-primary-700 dark:group-hover:text-primary-400";return d.jsxs($n.button,{onClick:()=>r(s),className:"flex flex-col items-center justify-center w-20 h-full rounded-2xl space-y-1 group focus:outline-none relative",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:[a&&d.jsx($n.div,{className:"absolute inset-0 bg-primary-100 dark:bg-primary-900/40 rounded-2xl",layoutId:"activeTab",initial:!1,transition:{type:"spring",stiffness:400,damping:30}}),d.jsxs("div",{className:"relative z-10 flex flex-col items-center space-y-1",children:[Jf.createElement(o,{className:`h-6 w-6 transition-colors duration-300 ${a?l:u}`}),d.jsx("span",{className:`text-xs font-bold transition-colors duration-300 ${a?l:u}`,children:i})]})]},s)})})})},qT=()=>d.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("rect",{width:"32",height:"32",rx:"8",fill:"url(#paint0_linear_1_2)"}),d.jsx("path",{d:"M10 9C10 8.44772 10.4477 8 11 8H22C22.5523 8 23 8.44772 23 9V22C23 23.1046 22.1046 24 21 24H11C10.4477 24 10 23.5523 10 23V9Z",fill:"white",fillOpacity:"0.8"}),d.jsx("path",{d:"M9 11C9 9.89543 9.89543 9 11 9H20C21.1046 9 22 9.89543 22 11V20C22 21.6569 20.6569 23 19 23H11C9.89543 23 9 22.1046 9 21V11Z",fill:"url(#paint1_linear_1_2)"}),d.jsxs("defs",{children:[d.jsxs("linearGradient",{id:"paint0_linear_1_2",x1:"0",y1:"0",x2:"32",y2:"32",gradientUnits:"userSpaceOnUse",children:[d.jsx("stop",{stopColor:"#A958EB"}),d.jsx("stop",{offset:"1",stopColor:"#6020A0"})]}),d.jsxs("linearGradient",{id:"paint1_linear_1_2",x1:"9",y1:"9",x2:"22",y2:"23",gradientUnits:"userSpaceOnUse",children:[d.jsx("stop",{stopColor:"#D9B0FF"}),d.jsx("stop",{offset:"1",stopColor:"#E9D0FF"})]})]})]}),YT=()=>d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),QT=({onClick:e})=>d.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white p-2 -ml-2 rounded-full transition-colors",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),XT=({page:e,onBack:t,title:n,searchTerm:r,setSearchTerm:s,showSearch:i})=>{const o=[D.GuideDetail,D.Create,D.EditGuide,D.ShareOptions,D.ShareRanking].includes(e);return d.jsx("header",{className:"fixed top-0 left-0 right-0 z-40 animate-fadeIn",children:d.jsx("div",{className:"bg-white/70 backdrop-blur-xl border-b border-black/5 dark:bg-gray-900/70 dark:border-white/5",children:d.jsxs("div",{className:"container mx-auto max-w-lg p-4 flex flex-col gap-4",children:[d.jsx("div",{className:"relative flex items-center justify-center h-8",children:o?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"absolute left-0",children:d.jsx(QT,{onClick:t})}),d.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n})]}):d.jsxs("div",{className:"flex items-center gap-3 w-full",children:[d.jsx(qT,{}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Castlist"})]})}),i&&d.jsxs("div",{className:"relative",children:[d.jsx(YT,{}),d.jsx("input",{id:"search-guides",name:"search-guides",type:"text",placeholder:"Search guides...",value:r,onChange:a=>s(a.target.value),className:"w-full bg-white/80 dark:bg-gray-800/80 border-2 border-transparent rounded-xl py-3 pl-11 pr-4 text-gray-800 dark:text-gray-200 focus:outline-none focus:bg-white dark:focus:bg-gray-700 focus:border-primary-500 transition-all"})]})]})})})},JT=(e=!1)=>{const[t,n]=S.useState({isLoaded:!1,isReady:!1,hasActions:!1});return S.useEffect(()=>{e&&!window.farcasterWaitStart&&(window.farcasterWaitStart=Date.now(),console.log("⏰ Started waiting for real Farcaster SDK..."));const r=()=>{var y,v,w,x,g,p,m,k,b,T,j,_,M,R,A,O,P,L,G,B,U,C,I,F;console.log("🔍 Checking Farcaster SDK..."),console.log("window.farcaster:",window.farcaster),console.log("window.location:",window.location.href),console.log("document.referrer:",document.referrer);const c=document.referrer.includes("farcaster.xyz")||window.location.href.includes("farcaster.xyz")||window.location.href.includes("ngrok");console.log("isInFarcasterPreview:",c);const h=!!window.farcaster,f=!!((y=window.farcaster)!=null&&y.actions);if(console.log("isLoaded:",h),console.log("hasActions:",f),console.log("actions:",(v=window.farcaster)==null?void 0:v.actions),n({isLoaded:h,isReady:!1,hasActions:f}),c&&!h&&!e)console.log("🔄 Attempting to inject Mock Farcaster SDK..."),console.log("Debug - isInFarcasterPreview:",c),console.log("Debug - isLoaded:",h),console.log("Debug - useRealFarcaster:",e),s();else if(c&&!h&&e)console.log("🔄 Real Farcaster mode - waiting for real SDK to load..."),console.log("Debug - isInFarcasterPreview:",c),console.log("Debug - isLoaded:",h),console.log("Debug - useRealFarcaster:",e),(Date.now()-window.farcasterWaitStart||0)>5e3&&(console.log("⚠️ Real Farcaster SDK not loading after 5s - checking if in production"),window.location.hostname.includes("localhost")||window.location.hostname.includes("ngrok")?(console.log("🔄 Development environment - using enhanced mock for preview"),i()):console.log("🚫 Production environment - not injecting mock SDK, waiting for real SDK"));else if(c&&h&&e){if(console.log("🔄 Real Farcaster mode - SDK already loaded, checking if it's real..."),console.log("Debug - window.farcaster:",window.farcaster),console.log("Debug - signIn contains Mock:",(x=(w=window.farcaster)==null?void 0:w.signIn)==null?void 0:x.toString().includes("Mock")),console.log("Debug - signIn contains Enhanced mock:",(p=(g=window.farcaster)==null?void 0:g.signIn)==null?void 0:p.toString().includes("Enhanced mock")),console.log("Debug - getUser:",(m=window.farcaster)==null?void 0:m.getUser),console.log("Debug - actions:",(k=window.farcaster)==null?void 0:k.actions),(T=(b=window.farcaster)==null?void 0:b.signIn)!=null&&T.toString().includes("Mock")||(_=(j=window.farcaster)==null?void 0:j.signIn)!=null&&_.toString().includes("Enhanced mock")){console.log("🚫 Mock SDK detected in Real Farcaster mode - REMOVING IT"),delete window.farcaster,n({isLoaded:!1,isReady:!1,hasActions:!1});return}window.farcaster&&!((R=(M=window.farcaster)==null?void 0:M.signIn)!=null&&R.toString().includes("Mock"))&&!((O=(A=window.farcaster)==null?void 0:A.signIn)!=null&&O.toString().includes("Enhanced mock"))&&console.log("✅ Real Farcaster SDK detected!")}if(h&&f&&((L=(P=window.farcaster)==null?void 0:P.actions)!=null&&L.ready))if(!((B=(G=window.farcaster)==null?void 0:G.signIn)!=null&&B.toString().includes("Mock"))&&!((C=(U=window.farcaster)==null?void 0:U.signIn)!=null&&C.toString().includes("Enhanced mock")))try{console.log("🚀 Calling sdk.actions.ready() on REAL SDK..."),window.farcaster.actions.ready(),console.log("✅ Real Farcaster SDK ready() called successfully"),n(Z=>({...Z,isReady:!0}))}catch(Z){console.error("❌ Error calling Real Farcaster SDK ready():",Z)}else console.log("⚠️ Mock SDK detected - not calling ready() to avoid popup issues"),n(Z=>({...Z,isReady:!0}));else if(h&&f&&((F=(I=window.farcaster)==null?void 0:I.actions)!=null&&F.ready))try{console.log("🚀 Calling sdk.actions.ready() (fallback)..."),window.farcaster.actions.ready(),console.log("✅ Farcaster SDK ready() called successfully (fallback)"),n(H=>({...H,isReady:!0}))}catch(H){console.error("❌ Error calling Farcaster SDK ready() (fallback):",H)}else console.log(e&&!h?"⏳ Real Farcaster mode - waiting for real SDK to load...":"⚠️ SDK not ready yet or actions not available")},s=()=>{window.farcaster||(console.log("🔄 Injecting mock Farcaster SDK for preview..."),window.farcaster={signIn:async()=>(console.log("🔐 Mock signIn called"),{fid:12345,username:"preview_user",pfp_url:"https://via.placeholder.com/100x100/8A63D2/FFFFFF?text=P",message:"Mock message",signature:"mock_signature",nonce:"mock_nonce"}),getUser:async()=>(console.log("👤 Mock getUser called"),{fid:12345,username:"preview_user",pfp_url:"https://via.placeholder.com/100x100/8A63D2/FFFFFF?text=P"}),actions:{ready:()=>{console.log("✅ Mock sdk.actions.ready() called")}}},console.log("✅ Mock Farcaster SDK injected"))},i=()=>{window.farcaster||(console.log("🔄 Injecting enhanced mock Farcaster SDK for preview..."),window.farcaster={signIn:async()=>(console.log("🔐 Enhanced mock signIn called"),{fid:99999,username:"farcaster_preview_user",pfp_url:"https://via.placeholder.com/100x100/8A63D2/FFFFFF?text=FP",message:"Enhanced mock message",signature:"enhanced_mock_signature",nonce:"enhanced_mock_nonce"}),getUser:async()=>(console.log("👤 Enhanced mock getUser called"),{fid:99999,username:"farcaster_preview_user",pfp_url:"https://via.placeholder.com/100x100/8A63D2/FFFFFF?text=FP"}),actions:{ready:()=>{console.log("✅ Enhanced mock sdk.actions.ready() called")}}},console.log("✅ Enhanced mock Farcaster SDK injected"))};r();const o=[setTimeout(r,100),setTimeout(r,500),setTimeout(r,1e3),setTimeout(r,2e3),setTimeout(r,3e3),setTimeout(r,5e3),setTimeout(r,1e4),setTimeout(r,15e3),setTimeout(r,2e4)],a=()=>{setTimeout(r,100)},l=()=>{console.log("🔍 SDK injection detected, checking..."),setTimeout(r,100)};return new MutationObserver(()=>{var c,h;window.farcaster&&!((h=(c=window.farcaster)==null?void 0:c.signIn)!=null&&h.toString().includes("Mock"))&&(console.log("🔍 Real Farcaster SDK detected via mutation observer"),l())}).observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("load",a),()=>{window.removeEventListener("load",a),o.forEach(clearTimeout)}},[]),t},ZT=()=>{var h,f,y,v,w;const[e,t]=S.useState(()=>localStorage.getItem("useRealFarcaster")==="true"),{isLoaded:n,isReady:r,hasActions:s}=JT(e),{user:i,isAuthenticated:o}=Ho(),[a,l]=S.useState(!1),u=()=>{const x=!e;t(x),localStorage.setItem("useRealFarcaster",x.toString()),x?(console.log("🔄 Switched to Real Farcaster mode - reload page to apply"),setTimeout(()=>window.location.reload(),1e3)):(console.log("🔄 Switched to Mock Farcaster mode - reload page to apply"),setTimeout(()=>window.location.reload(),1e3))},c=document.referrer.includes("farcaster.xyz")||window.location.href.includes("farcaster.xyz")||window.location.href.includes("ngrok");return r?null:d.jsxs("div",{className:"fixed top-4 right-4 bg-black/80 text-white text-xs rounded-lg z-50 font-mono max-w-xs transition-all duration-300 ease-in-out",children:[d.jsxs("div",{className:"flex items-center justify-between p-2 cursor-pointer hover:bg-black/60 rounded-t-lg",onClick:()=>l(!a),children:[d.jsx("div",{className:"font-bold text-yellow-400",children:"SDK Debug Panel"}),d.jsx("div",{className:"text-gray-400 hover:text-white transition-colors",children:a?"▼":"▲"})]}),d.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${a?"max-h-0 opacity-0":"max-h-96 opacity-100"}`,children:d.jsxs("div",{className:"p-2 pt-0 space-y-1",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{children:"Use Real Farcaster:"}),d.jsx("button",{onClick:u,className:`px-2 py-1 text-xs rounded ${e?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:e?"ON":"OFF"})]}),d.jsxs("div",{children:["SDK Loaded: ",n?"✅":e?"⏳":"❌"]}),d.jsxs("div",{children:["Has Actions: ",s?"✅":e?"⏳":"❌"]}),d.jsxs("div",{children:["SDK Ready: ",r?"✅":"⏳"]}),d.jsxs("div",{children:["Farcaster: ",window.farcaster?"✅":e?"⏳":"❌"]}),d.jsxs("div",{children:["Preview Mode: ",c?"✅":"❌"]}),d.jsxs("div",{children:["Mode: ",e?"🔴 Real":"🟡 Mock"]}),e&&!n&&d.jsx("div",{className:"text-yellow-400 text-xs",children:"⏳ Waiting for real Farcaster SDK..."}),d.jsxs("div",{className:"border-t border-gray-600 pt-1 mt-1",children:[d.jsx("div",{className:"font-bold text-green-400",children:"User Info:"}),d.jsxs("div",{children:["Authenticated: ",o?"✅":"❌"]}),i&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:["FID: ",i.fid]}),d.jsxs("div",{children:["Username: ",i.username]}),d.jsxs("div",{children:["ID: ",i.id]}),d.jsxs("div",{className:"text-xs text-gray-400",children:["User Type: ",i.fid===99999?"🟠 Enhanced Mock":i.id==="dev-user-1"||i.fid===12345||i.username==="preview_user"?"🟡 Mock":"🔴 Real"]}),d.jsxs("div",{className:"text-xs text-red-400",children:["SDK Source: ",(f=(h=window.farcaster)==null?void 0:h.signIn)!=null&&f.toString().includes("Enhanced mock")?"🟠 Enhanced Mock SDK":(v=(y=window.farcaster)==null?void 0:y.signIn)!=null&&v.toString().includes("Mock")?"🟡 Mock SDK":"🔴 Real SDK"]})]})]}),((w=window.farcaster)==null?void 0:w.actions)&&d.jsxs("div",{children:["Actions: ",Object.keys(window.farcaster.actions).join(", ")]}),d.jsxs("div",{className:"text-xs text-gray-400",children:["URL: ",window.location.href.substring(0,30),"..."]}),d.jsxs("div",{className:"text-xs text-gray-400",children:["Referrer: ",document.referrer.substring(0,30),"..."]})]})})]})},ej=()=>{const{isAuthenticated:e,user:t,isLoading:n}=Ho(),{isLoading:r,refreshAllData:s}=Js(),{isLoaded:i,isReady:o,hasActions:a}=jk(),l=window.farcaster&&window.farcaster.actions&&typeof window.farcaster.signIn=="function";console.log("🔍 App.tsx - Environment detection:"),console.log("🔍 window.farcaster:",window.farcaster),console.log("🔍 isMiniApp:",l),console.log("🔍 isAuthenticated:",e),console.log("🔍 isAuthLoading:",n),console.log("🔍 document.readyState:",document.readyState);const[u,c]=S.useState(D.Home),[h,f]=S.useState(D.Home),[y,v]=S.useState(null),[w,x]=S.useState([D.Home]),[g,p]=S.useState(""),m=(A,O)=>{O&&v(Number(O)),[D.Home,D.MyGuides,D.Create,D.Profile,D.Ranking].includes(A)&&(f(A),A!==D.Home&&p("")),A!==u&&x(P=>[...P,A]),c(A)},k=()=>{const A=[...w];A.pop();const O=A[A.length-1]||D.Home;if([D.GuideDetail,D.EditGuide,D.ShareOptions,D.ShareRanking].includes(u)){const P=w.find(L=>[D.Home,D.MyGuides,D.Ranking].includes(L))||D.Home;f(P)}else{const P=[D.Home,D.MyGuides,D.Profile,D.Ranking].find(L=>L===O);P&&f(P)}x(A),c(O)},b=async A=>{await s(),v(A.id),c(D.GuideDetail)},T=async()=>{await s(),c(D.MyGuides)},j=u===D.Home,_=()=>{switch(u){case D.Create:return"Create New Guide";case D.EditGuide:return"Edit Guide";case D.GuideDetail:return"Details";case D.Profile:return"Profile";case D.ShareOptions:return"Customize Share Card";case D.ShareRanking:return"Customize Ranking Card";default:return""}},M=()=>{switch(u){case D.Home:return d.jsx(Uf,{setPage:m,setSelectedGuideId:v,searchTerm:g});case D.MyGuides:return d.jsx(hT,{setPage:m,setSelectedGuideId:v});case D.Create:return d.jsx(gT,{user:t,onSave:b,onCancel:k});case D.Profile:return d.jsx(AT,{setPage:m,setSelectedGuideId:v});case D.Ranking:return d.jsx(RT,{setPage:m,setSelectedGuideId:v});case D.GuideDetail:return d.jsx(yT,{guideId:y,user:t,setPage:m,onBack:k,onDelete:T});case D.EditGuide:return d.jsx(vT,{guideId:y,user:t,onSave:b,onCancel:()=>m(D.GuideDetail,y)});case D.ShareOptions:return d.jsx(kT,{guideId:y,setPage:m,onBack:k});case D.ShareRanking:return d.jsx(TT,{setPage:m,onBack:k});case D.FarcasterTest:return d.jsx(OT,{});default:return d.jsx(Uf,{setPage:m,setSelectedGuideId:v,searchTerm:g})}};if(n)return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-purple-50 to-blue-100 dark:from-gray-900 dark:via-gray-900 dark:to-black",children:d.jsxs("div",{className:"text-center",children:[d.jsx(Ge,{text:"Authenticating..."}),i&&d.jsxs("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:[d.jsx("p",{children:"SDK Loaded: ✅"}),d.jsxs("p",{children:["SDK Ready: ",o?"✅":"⏳"]}),d.jsxs("p",{children:["Has Actions: ",a?"✅":"❌"]})]})]})});if(!e)return d.jsx(Nk,{});const R=j?"pt-36":"pt-24";return d.jsxs("div",{className:"text-gray-800 dark:text-gray-200 min-h-screen font-sans bg-gradient-to-br from-primary-50 via-purple-50 to-blue-100 bg-300% animate-gradient dark:from-gray-900 dark:via-gray-900 dark:to-black",children:[d.jsx(ZT,{}),d.jsx(XT,{page:u,onBack:k,title:_(),searchTerm:g,setSearchTerm:p,showSearch:j}),d.jsx("main",{className:`container mx-auto max-w-lg p-4 pb-28 ${R}`,children:r&&u===D.Home?d.jsx("div",{className:"flex justify-center mt-20",children:d.jsx(Ge,{})}):M()}),d.jsx(HT,{activePage:h,setPage:m})]})},tj=()=>d.jsx(Ck,{children:d.jsx(Tk,{children:d.jsx(Ak,{children:d.jsx(ej,{})})})}),hy=document.getElementById("root");if(!hy)throw new Error("Could not find root element to mount to");const nj=qa.createRoot(hy);nj.render(d.jsx(Jf.StrictMode,{children:d.jsx(tj,{})}));
