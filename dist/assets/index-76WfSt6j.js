(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function og(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var sg={exports:{}},ia={},ag={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=Symbol.for("react.element"),dT=Symbol.for("react.portal"),fT=Symbol.for("react.fragment"),hT=Symbol.for("react.strict_mode"),pT=Symbol.for("react.profiler"),mT=Symbol.for("react.provider"),gT=Symbol.for("react.context"),yT=Symbol.for("react.forward_ref"),vT=Symbol.for("react.suspense"),wT=Symbol.for("react.memo"),TT=Symbol.for("react.lazy"),Zd=Symbol.iterator;function xT(t){return t===null||typeof t!="object"?null:(t=Zd&&t[Zd]||t["@@iterator"],typeof t=="function"?t:null)}var lg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ug=Object.assign,cg={};function Yr(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||lg}Yr.prototype.isReactComponent={};Yr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dg(){}dg.prototype=Yr.prototype;function fc(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||lg}var hc=fc.prototype=new dg;hc.constructor=fc;ug(hc,Yr.prototype);hc.isPureReactComponent=!0;var ef=Array.isArray,fg=Object.prototype.hasOwnProperty,pc={current:null},hg={key:!0,ref:!0,__self:!0,__source:!0};function pg(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)fg.call(e,r)&&!hg.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:po,type:t,key:o,ref:s,props:i,_owner:pc.current}}function CT(t,e){return{$$typeof:po,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mc(t){return typeof t=="object"&&t!==null&&t.$$typeof===po}function ST(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tf=/\/+/g;function Da(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ST(""+t.key):e.toString(36)}function rs(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case po:case dT:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Da(s,0):r,ef(i)?(n="",t!=null&&(n=t.replace(tf,"$&/")+"/"),rs(i,e,n,"",function(d){return d})):i!=null&&(mc(i)&&(i=CT(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(tf,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",ef(t))for(var u=0;u<t.length;u++){o=t[u];var c=r+Da(o,u);s+=rs(o,e,n,c,i)}else if(c=xT(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=r+Da(o,u++),s+=rs(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Mo(t,e,n){if(t==null)return t;var r=[],i=0;return rs(t,r,"","",function(o){return e.call(n,o,i++)}),r}function _T(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ve={current:null},is={transition:null},kT={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:is,ReactCurrentOwner:pc};function mg(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:Mo,forEach:function(t,e,n){Mo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mo(t,function(){e++}),e},toArray:function(t){return Mo(t,function(e){return e})||[]},only:function(t){if(!mc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=Yr;J.Fragment=fT;J.Profiler=pT;J.PureComponent=fc;J.StrictMode=hT;J.Suspense=vT;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kT;J.act=mg;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ug({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=pc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)fg.call(e,c)&&!hg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:po,type:t.type,key:i,ref:o,props:r,_owner:s}};J.createContext=function(t){return t={$$typeof:gT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mT,_context:t},t.Consumer=t};J.createElement=pg;J.createFactory=function(t){var e=pg.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:yT,render:t}};J.isValidElement=mc;J.lazy=function(t){return{$$typeof:TT,_payload:{_status:-1,_result:t},_init:_T}};J.memo=function(t,e){return{$$typeof:wT,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=is.transition;is.transition={};try{t()}finally{is.transition=e}};J.unstable_act=mg;J.useCallback=function(t,e){return Ve.current.useCallback(t,e)};J.useContext=function(t){return Ve.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return Ve.current.useDeferredValue(t)};J.useEffect=function(t,e){return Ve.current.useEffect(t,e)};J.useId=function(){return Ve.current.useId()};J.useImperativeHandle=function(t,e,n){return Ve.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return Ve.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return Ve.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return Ve.current.useMemo(t,e)};J.useReducer=function(t,e,n){return Ve.current.useReducer(t,e,n)};J.useRef=function(t){return Ve.current.useRef(t)};J.useState=function(t){return Ve.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return Ve.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return Ve.current.useTransition()};J.version="18.3.1";ag.exports=J;var P=ag.exports;const gg=og(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET=P,AT=Symbol.for("react.element"),PT=Symbol.for("react.fragment"),IT=Object.prototype.hasOwnProperty,MT=ET.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RT={key:!0,ref:!0,__self:!0,__source:!0};function yg(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)IT.call(e,r)&&!RT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:AT,type:t,key:o,ref:s,props:i,_owner:MT.current}}ia.Fragment=PT;ia.jsx=yg;ia.jsxs=yg;sg.exports=ia;var m=sg.exports,Ml={},vg={exports:{}},Ze={},wg={exports:{}},Tg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,B){var G=M.length;M.push(B);e:for(;0<G;){var X=G-1>>>1,ie=M[X];if(0<i(ie,B))M[X]=B,M[G]=ie,G=X;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var B=M[0],G=M.pop();if(G!==B){M[0]=G;e:for(var X=0,ie=M.length,Po=ie>>>1;X<Po;){var _n=2*(X+1)-1,Na=M[_n],kn=_n+1,Io=M[kn];if(0>i(Na,G))kn<ie&&0>i(Io,Na)?(M[X]=Io,M[kn]=G,X=kn):(M[X]=Na,M[_n]=G,X=_n);else if(kn<ie&&0>i(Io,G))M[X]=Io,M[kn]=G,X=kn;else break e}}return B}function i(M,B){var G=M.sortIndex-B.sortIndex;return G!==0?G:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],d=[],f=1,h=null,p=3,g=!1,T=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(M){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=M)r(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(d)}}function S(M){if(x=!1,v(M),!T)if(n(c)!==null)T=!0,q(_);else{var B=n(d);B!==null&&H(S,B.startTime-M)}}function _(M,B){T=!1,x&&(x=!1,w(E),E=-1),g=!0;var G=p;try{for(v(B),h=n(c);h!==null&&(!(h.expirationTime>B)||M&&!I());){var X=h.callback;if(typeof X=="function"){h.callback=null,p=h.priorityLevel;var ie=X(h.expirationTime<=B);B=t.unstable_now(),typeof ie=="function"?h.callback=ie:h===n(c)&&r(c),v(B)}else r(c);h=n(c)}if(h!==null)var Po=!0;else{var _n=n(d);_n!==null&&H(S,_n.startTime-B),Po=!1}return Po}finally{h=null,p=G,g=!1}}var k=!1,A=null,E=-1,R=5,L=-1;function I(){return!(t.unstable_now()-L<R)}function b(){if(A!==null){var M=t.unstable_now();L=M;var B=!0;try{B=A(!0,M)}finally{B?N():(k=!1,A=null)}}else k=!1}var N;if(typeof y=="function")N=function(){y(b)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,z=$.port2;$.port1.onmessage=b,N=function(){z.postMessage(null)}}else N=function(){C(b,0)};function q(M){A=M,k||(k=!0,N())}function H(M,B){E=C(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,q(_))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var G=p;p=B;try{return M()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=p;p=M;try{return B()}finally{p=G}},t.unstable_scheduleCallback=function(M,B,G){var X=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,M){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=G+ie,M={id:f++,callback:B,priorityLevel:M,startTime:G,expirationTime:ie,sortIndex:-1},G>X?(M.sortIndex=G,e(d,M),n(c)===null&&M===n(d)&&(x?(w(E),E=-1):x=!0,H(S,G-X))):(M.sortIndex=ie,e(c,M),T||g||(T=!0,q(_))),M},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(M){var B=p;return function(){var G=p;p=B;try{return M.apply(this,arguments)}finally{p=G}}}})(Tg);wg.exports=Tg;var NT=wg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT=P,Qe=NT;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xg=new Set,Hi={};function Xn(t,e){$r(t,e),$r(t+"Capture",e)}function $r(t,e){for(Hi[t]=e,t=0;t<e.length;t++)xg.add(e[t])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rl=Object.prototype.hasOwnProperty,LT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nf={},rf={};function bT(t){return Rl.call(rf,t)?!0:Rl.call(nf,t)?!1:LT.test(t)?rf[t]=!0:(nf[t]=!0,!1)}function FT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UT(t,e,n,r){if(e===null||typeof e>"u"||FT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ae[t]=new $e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ae[e]=new $e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ae[t]=new $e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ae[t]=new $e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ae[t]=new $e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ae[t]=new $e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ae[t]=new $e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ae[t]=new $e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ae[t]=new $e(t,5,!1,t.toLowerCase(),null,!1,!1)});var gc=/[\-:]([a-z])/g;function yc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gc,yc);Ae[e]=new $e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gc,yc);Ae[e]=new $e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gc,yc);Ae[e]=new $e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ae[t]=new $e(t,1,!1,t.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ae[t]=new $e(t,1,!1,t.toLowerCase(),null,!0,!0)});function vc(t,e,n,r){var i=Ae.hasOwnProperty(e)?Ae[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UT(e,n,i,r)&&(n=null),r||i===null?bT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wt=DT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ro=Symbol.for("react.element"),dr=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),wc=Symbol.for("react.strict_mode"),Nl=Symbol.for("react.profiler"),Cg=Symbol.for("react.provider"),Sg=Symbol.for("react.context"),Tc=Symbol.for("react.forward_ref"),Dl=Symbol.for("react.suspense"),Ll=Symbol.for("react.suspense_list"),xc=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),_g=Symbol.for("react.offscreen"),of=Symbol.iterator;function li(t){return t===null||typeof t!="object"?null:(t=of&&t[of]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,La;function wi(t){if(La===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+t}var ba=!1;function Fa(t,e){if(!t||ba)return"";ba=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,u=o.length-1;1<=s&&0<=u&&i[s]!==o[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==o[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==o[u]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{ba=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wi(t):""}function VT(t){switch(t.tag){case 5:return wi(t.type);case 16:return wi("Lazy");case 13:return wi("Suspense");case 19:return wi("SuspenseList");case 0:case 2:case 15:return t=Fa(t.type,!1),t;case 11:return t=Fa(t.type.render,!1),t;case 1:return t=Fa(t.type,!0),t;default:return""}}function bl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fr:return"Fragment";case dr:return"Portal";case Nl:return"Profiler";case wc:return"StrictMode";case Dl:return"Suspense";case Ll:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sg:return(t.displayName||"Context")+".Consumer";case Cg:return(t._context.displayName||"Context")+".Provider";case Tc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xc:return e=t.displayName||null,e!==null?e:bl(t.type)||"Memo";case Qt:e=t._payload,t=t._init;try{return bl(t(e))}catch{}}return null}function $T(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bl(e);case 8:return e===wc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BT(t){var e=kg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function No(t){t._valueTracker||(t._valueTracker=BT(t))}function Eg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ss(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fl(t,e){var n=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ag(t,e){e=e.checked,e!=null&&vc(t,"checked",e,!1)}function Ul(t,e){Ag(t,e);var n=pn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vl(t,e.type,pn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function af(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vl(t,e,n){(e!=="number"||Ss(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ti=Array.isArray;function Ir(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $l(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(Ti(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pn(n)}}function Pg(t,e){var n=pn(e.value),r=pn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function uf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ig(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ig(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Do,Mg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Do=Do||document.createElement("div"),Do.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Do.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GT=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(t){GT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ki[e]=ki[t]})});function Rg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ki.hasOwnProperty(t)&&ki[t]?(""+e).trim():e+"px"}function Ng(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Rg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var OT=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gl(t,e){if(e){if(OT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Ol(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hl=null;function Cc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,Mr=null,Rr=null;function cf(t){if(t=yo(t)){if(typeof ql!="function")throw Error(D(280));var e=t.stateNode;e&&(e=ua(e),ql(t.stateNode,t.type,e))}}function Dg(t){Mr?Rr?Rr.push(t):Rr=[t]:Mr=t}function Lg(){if(Mr){var t=Mr,e=Rr;if(Rr=Mr=null,cf(t),e)for(t=0;t<e.length;t++)cf(e[t])}}function bg(t,e){return t(e)}function Fg(){}var Ua=!1;function Ug(t,e,n){if(Ua)return t(e,n);Ua=!0;try{return bg(t,e,n)}finally{Ua=!1,(Mr!==null||Rr!==null)&&(Fg(),Lg())}}function zi(t,e){var n=t.stateNode;if(n===null)return null;var r=ua(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var zl=!1;if(Bt)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){zl=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{zl=!1}function HT(t,e,n,r,i,o,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ei=!1,_s=null,ks=!1,Wl=null,qT={onError:function(t){Ei=!0,_s=t}};function zT(t,e,n,r,i,o,s,u,c){Ei=!1,_s=null,HT.apply(qT,arguments)}function WT(t,e,n,r,i,o,s,u,c){if(zT.apply(this,arguments),Ei){if(Ei){var d=_s;Ei=!1,_s=null}else throw Error(D(198));ks||(ks=!0,Wl=d)}}function Qn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function df(t){if(Qn(t)!==t)throw Error(D(188))}function KT(t){var e=t.alternate;if(!e){if(e=Qn(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return df(i),t;if(o===r)return df(i),e;o=o.sibling}throw Error(D(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function $g(t){return t=KT(t),t!==null?Bg(t):null}function Bg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Bg(t);if(e!==null)return e;t=t.sibling}return null}var Gg=Qe.unstable_scheduleCallback,ff=Qe.unstable_cancelCallback,JT=Qe.unstable_shouldYield,jT=Qe.unstable_requestPaint,me=Qe.unstable_now,YT=Qe.unstable_getCurrentPriorityLevel,Sc=Qe.unstable_ImmediatePriority,Og=Qe.unstable_UserBlockingPriority,Es=Qe.unstable_NormalPriority,XT=Qe.unstable_LowPriority,Hg=Qe.unstable_IdlePriority,oa=null,At=null;function QT(t){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(oa,t,void 0,(t.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:tx,ZT=Math.log,ex=Math.LN2;function tx(t){return t>>>=0,t===0?32:31-(ZT(t)/ex|0)|0}var Lo=64,bo=4194304;function xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function As(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?r=xi(u):(o&=s,o!==0&&(r=xi(o)))}else s=n&~i,s!==0?r=xi(s):o!==0&&(r=xi(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tt(e),i=1<<n,r|=t[n],e&=~i;return r}function nx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Tt(o),u=1<<s,c=i[s];c===-1?(!(u&n)||u&r)&&(i[s]=nx(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function Kl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qg(){var t=Lo;return Lo<<=1,!(Lo&4194240)&&(Lo=64),t}function Va(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tt(e),t[e]=n}function ix(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Tt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function _c(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Q=0;function zg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wg,kc,Kg,Jg,jg,Jl=!1,Fo=[],sn=null,an=null,ln=null,Wi=new Map,Ki=new Map,en=[],ox="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hf(t,e){switch(t){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":Wi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(e.pointerId)}}function ci(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=yo(e),e!==null&&kc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sx(t,e,n,r,i){switch(e){case"focusin":return sn=ci(sn,t,e,n,r,i),!0;case"dragenter":return an=ci(an,t,e,n,r,i),!0;case"mouseover":return ln=ci(ln,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Wi.set(o,ci(Wi.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ki.set(o,ci(Ki.get(o)||null,t,e,n,r,i)),!0}return!1}function Yg(t){var e=Ln(t.target);if(e!==null){var n=Qn(e);if(n!==null){if(e=n.tag,e===13){if(e=Vg(n),e!==null){t.blockedOn=e,jg(t.priority,function(){Kg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function os(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hl=r,n.target.dispatchEvent(r),Hl=null}else return e=yo(n),e!==null&&kc(e),t.blockedOn=n,!1;e.shift()}return!0}function pf(t,e,n){os(t)&&n.delete(e)}function ax(){Jl=!1,sn!==null&&os(sn)&&(sn=null),an!==null&&os(an)&&(an=null),ln!==null&&os(ln)&&(ln=null),Wi.forEach(pf),Ki.forEach(pf)}function di(t,e){t.blockedOn===e&&(t.blockedOn=null,Jl||(Jl=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,ax)))}function Ji(t){function e(i){return di(i,t)}if(0<Fo.length){di(Fo[0],t);for(var n=1;n<Fo.length;n++){var r=Fo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sn!==null&&di(sn,t),an!==null&&di(an,t),ln!==null&&di(ln,t),Wi.forEach(e),Ki.forEach(e),n=0;n<en.length;n++)r=en[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<en.length&&(n=en[0],n.blockedOn===null);)Yg(n),n.blockedOn===null&&en.shift()}var Nr=Wt.ReactCurrentBatchConfig,Ps=!0;function lx(t,e,n,r){var i=Q,o=Nr.transition;Nr.transition=null;try{Q=1,Ec(t,e,n,r)}finally{Q=i,Nr.transition=o}}function ux(t,e,n,r){var i=Q,o=Nr.transition;Nr.transition=null;try{Q=4,Ec(t,e,n,r)}finally{Q=i,Nr.transition=o}}function Ec(t,e,n,r){if(Ps){var i=jl(t,e,n,r);if(i===null)Ja(t,e,r,Is,n),hf(t,r);else if(sx(i,t,e,n,r))r.stopPropagation();else if(hf(t,r),e&4&&-1<ox.indexOf(t)){for(;i!==null;){var o=yo(i);if(o!==null&&Wg(o),o=jl(t,e,n,r),o===null&&Ja(t,e,r,Is,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ja(t,e,r,null,n)}}var Is=null;function jl(t,e,n,r){if(Is=null,t=Cc(r),t=Ln(t),t!==null)if(e=Qn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Is=t,null}function Xg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YT()){case Sc:return 1;case Og:return 4;case Es:case XT:return 16;case Hg:return 536870912;default:return 16}default:return 16}}var rn=null,Ac=null,ss=null;function Qg(){if(ss)return ss;var t,e=Ac,n=e.length,r,i="value"in rn?rn.value:rn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return ss=i.slice(t,1<r?1-r:void 0)}function as(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uo(){return!0}function mf(){return!1}function et(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Uo:mf,this.isPropagationStopped=mf,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),e}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pc=et(Xr),go=de({},Xr,{view:0,detail:0}),cx=et(go),$a,Ba,fi,sa=de({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ic,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fi&&(fi&&t.type==="mousemove"?($a=t.screenX-fi.screenX,Ba=t.screenY-fi.screenY):Ba=$a=0,fi=t),$a)},movementY:function(t){return"movementY"in t?t.movementY:Ba}}),gf=et(sa),dx=de({},sa,{dataTransfer:0}),fx=et(dx),hx=de({},go,{relatedTarget:0}),Ga=et(hx),px=de({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),mx=et(px),gx=de({},Xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yx=et(gx),vx=de({},Xr,{data:0}),yf=et(vx),wx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xx[t])?!!e[t]:!1}function Ic(){return Cx}var Sx=de({},go,{key:function(t){if(t.key){var e=wx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=as(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ic,charCode:function(t){return t.type==="keypress"?as(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?as(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_x=et(Sx),kx=de({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vf=et(kx),Ex=de({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ic}),Ax=et(Ex),Px=de({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ix=et(Px),Mx=de({},sa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rx=et(Mx),Nx=[9,13,27,32],Mc=Bt&&"CompositionEvent"in window,Ai=null;Bt&&"documentMode"in document&&(Ai=document.documentMode);var Dx=Bt&&"TextEvent"in window&&!Ai,Zg=Bt&&(!Mc||Ai&&8<Ai&&11>=Ai),wf=" ",Tf=!1;function ey(t,e){switch(t){case"keyup":return Nx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hr=!1;function Lx(t,e){switch(t){case"compositionend":return ty(e);case"keypress":return e.which!==32?null:(Tf=!0,wf);case"textInput":return t=e.data,t===wf&&Tf?null:t;default:return null}}function bx(t,e){if(hr)return t==="compositionend"||!Mc&&ey(t,e)?(t=Qg(),ss=Ac=rn=null,hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zg&&e.locale!=="ko"?null:e.data;default:return null}}var Fx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Fx[t.type]:e==="textarea"}function ny(t,e,n,r){Dg(r),e=Ms(e,"onChange"),0<e.length&&(n=new Pc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pi=null,ji=null;function Ux(t){hy(t,0)}function aa(t){var e=gr(t);if(Eg(e))return t}function Vx(t,e){if(t==="change")return e}var ry=!1;if(Bt){var Oa;if(Bt){var Ha="oninput"in document;if(!Ha){var Cf=document.createElement("div");Cf.setAttribute("oninput","return;"),Ha=typeof Cf.oninput=="function"}Oa=Ha}else Oa=!1;ry=Oa&&(!document.documentMode||9<document.documentMode)}function Sf(){Pi&&(Pi.detachEvent("onpropertychange",iy),ji=Pi=null)}function iy(t){if(t.propertyName==="value"&&aa(ji)){var e=[];ny(e,ji,t,Cc(t)),Ug(Ux,e)}}function $x(t,e,n){t==="focusin"?(Sf(),Pi=e,ji=n,Pi.attachEvent("onpropertychange",iy)):t==="focusout"&&Sf()}function Bx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aa(ji)}function Gx(t,e){if(t==="click")return aa(e)}function Ox(t,e){if(t==="input"||t==="change")return aa(e)}function Hx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ct=typeof Object.is=="function"?Object.is:Hx;function Yi(t,e){if(Ct(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rl.call(e,i)||!Ct(t[i],e[i]))return!1}return!0}function _f(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kf(t,e){var n=_f(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_f(n)}}function oy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sy(){for(var t=window,e=Ss();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ss(t.document)}return e}function Rc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qx(t){var e=sy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oy(n.ownerDocument.documentElement,n)){if(r!==null&&Rc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=kf(n,o);var s=kf(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zx=Bt&&"documentMode"in document&&11>=document.documentMode,pr=null,Yl=null,Ii=null,Xl=!1;function Ef(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xl||pr==null||pr!==Ss(r)||(r=pr,"selectionStart"in r&&Rc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ii&&Yi(Ii,r)||(Ii=r,r=Ms(Yl,"onSelect"),0<r.length&&(e=new Pc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pr)))}function Vo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mr={animationend:Vo("Animation","AnimationEnd"),animationiteration:Vo("Animation","AnimationIteration"),animationstart:Vo("Animation","AnimationStart"),transitionend:Vo("Transition","TransitionEnd")},qa={},ay={};Bt&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function la(t){if(qa[t])return qa[t];if(!mr[t])return t;var e=mr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ay)return qa[t]=e[n];return t}var ly=la("animationend"),uy=la("animationiteration"),cy=la("animationstart"),dy=la("transitionend"),fy=new Map,Af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(t,e){fy.set(t,e),Xn(e,[t])}for(var za=0;za<Af.length;za++){var Wa=Af[za],Wx=Wa.toLowerCase(),Kx=Wa[0].toUpperCase()+Wa.slice(1);vn(Wx,"on"+Kx)}vn(ly,"onAnimationEnd");vn(uy,"onAnimationIteration");vn(cy,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(dy,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ci));function Pf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,WT(r,e,void 0,t),t.currentTarget=null}function hy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var u=r[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==o&&i.isPropagationStopped())break e;Pf(i,u,d),o=c}else for(s=0;s<r.length;s++){if(u=r[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==o&&i.isPropagationStopped())break e;Pf(i,u,d),o=c}}}if(ks)throw t=Wl,ks=!1,Wl=null,t}function te(t,e){var n=e[nu];n===void 0&&(n=e[nu]=new Set);var r=t+"__bubble";n.has(r)||(py(e,t,2,!1),n.add(r))}function Ka(t,e,n){var r=0;e&&(r|=4),py(n,t,r,e)}var $o="_reactListening"+Math.random().toString(36).slice(2);function Xi(t){if(!t[$o]){t[$o]=!0,xg.forEach(function(n){n!=="selectionchange"&&(Jx.has(n)||Ka(n,!1,t),Ka(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$o]||(e[$o]=!0,Ka("selectionchange",!1,e))}}function py(t,e,n,r){switch(Xg(e)){case 1:var i=lx;break;case 4:i=ux;break;default:i=Ec}n=i.bind(null,e,n,t),i=void 0,!zl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ja(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;u!==null;){if(s=Ln(u),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}u=u.parentNode}}r=r.return}Ug(function(){var d=o,f=Cc(n),h=[];e:{var p=fy.get(t);if(p!==void 0){var g=Pc,T=t;switch(t){case"keypress":if(as(n)===0)break e;case"keydown":case"keyup":g=_x;break;case"focusin":T="focus",g=Ga;break;case"focusout":T="blur",g=Ga;break;case"beforeblur":case"afterblur":g=Ga;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ax;break;case ly:case uy:case cy:g=mx;break;case dy:g=Ix;break;case"scroll":g=cx;break;case"wheel":g=Rx;break;case"copy":case"cut":case"paste":g=yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=vf}var x=(e&4)!==0,C=!x&&t==="scroll",w=x?p!==null?p+"Capture":null:p;x=[];for(var y=d,v;y!==null;){v=y;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,w!==null&&(S=zi(y,w),S!=null&&x.push(Qi(y,S,v)))),C)break;y=y.return}0<x.length&&(p=new g(p,T,null,n,f),h.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Hl&&(T=n.relatedTarget||n.fromElement)&&(Ln(T)||T[Gt]))break e;if((g||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=d,T=T?Ln(T):null,T!==null&&(C=Qn(T),T!==C||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=d),g!==T)){if(x=gf,S="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=vf,S="onPointerLeave",w="onPointerEnter",y="pointer"),C=g==null?p:gr(g),v=T==null?p:gr(T),p=new x(S,y+"leave",g,n,f),p.target=C,p.relatedTarget=v,S=null,Ln(f)===d&&(x=new x(w,y+"enter",T,n,f),x.target=v,x.relatedTarget=C,S=x),C=S,g&&T)t:{for(x=g,w=T,y=0,v=x;v;v=nr(v))y++;for(v=0,S=w;S;S=nr(S))v++;for(;0<y-v;)x=nr(x),y--;for(;0<v-y;)w=nr(w),v--;for(;y--;){if(x===w||w!==null&&x===w.alternate)break t;x=nr(x),w=nr(w)}x=null}else x=null;g!==null&&If(h,p,g,x,!1),T!==null&&C!==null&&If(h,C,T,x,!0)}}e:{if(p=d?gr(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var _=Vx;else if(xf(p))if(ry)_=Ox;else{_=Bx;var k=$x}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=Gx);if(_&&(_=_(t,d))){ny(h,_,n,f);break e}k&&k(t,p,d),t==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&Vl(p,"number",p.value)}switch(k=d?gr(d):window,t){case"focusin":(xf(k)||k.contentEditable==="true")&&(pr=k,Yl=d,Ii=null);break;case"focusout":Ii=Yl=pr=null;break;case"mousedown":Xl=!0;break;case"contextmenu":case"mouseup":case"dragend":Xl=!1,Ef(h,n,f);break;case"selectionchange":if(zx)break;case"keydown":case"keyup":Ef(h,n,f)}var A;if(Mc)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else hr?ey(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Zg&&n.locale!=="ko"&&(hr||E!=="onCompositionStart"?E==="onCompositionEnd"&&hr&&(A=Qg()):(rn=f,Ac="value"in rn?rn.value:rn.textContent,hr=!0)),k=Ms(d,E),0<k.length&&(E=new yf(E,t,null,n,f),h.push({event:E,listeners:k}),A?E.data=A:(A=ty(n),A!==null&&(E.data=A)))),(A=Dx?Lx(t,n):bx(t,n))&&(d=Ms(d,"onBeforeInput"),0<d.length&&(f=new yf("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:d}),f.data=A))}hy(h,e)})}function Qi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ms(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=zi(t,n),o!=null&&r.unshift(Qi(t,o,i)),o=zi(t,e),o!=null&&r.push(Qi(t,o,i))),t=t.return}return r}function nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function If(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,i?(c=zi(n,o),c!=null&&s.unshift(Qi(n,c,u))):i||(c=zi(n,o),c!=null&&s.push(Qi(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var jx=/\r\n?/g,Yx=/\u0000|\uFFFD/g;function Mf(t){return(typeof t=="string"?t:""+t).replace(jx,`
`).replace(Yx,"")}function Bo(t,e,n){if(e=Mf(e),Mf(t)!==e&&n)throw Error(D(425))}function Rs(){}var Ql=null,Zl=null;function eu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,Xx=typeof clearTimeout=="function"?clearTimeout:void 0,Rf=typeof Promise=="function"?Promise:void 0,Qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Rf<"u"?function(t){return Rf.resolve(null).then(t).catch(Zx)}:tu;function Zx(t){setTimeout(function(){throw t})}function ja(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ji(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ji(e)}function un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Nf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),Et="__reactFiber$"+Qr,Zi="__reactProps$"+Qr,Gt="__reactContainer$"+Qr,nu="__reactEvents$"+Qr,eC="__reactListeners$"+Qr,tC="__reactHandles$"+Qr;function Ln(t){var e=t[Et];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gt]||n[Et]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Nf(t);t!==null;){if(n=t[Et])return n;t=Nf(t)}return e}t=n,n=t.parentNode}return null}function yo(t){return t=t[Et]||t[Gt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function ua(t){return t[Zi]||null}var ru=[],yr=-1;function wn(t){return{current:t}}function re(t){0>yr||(t.current=ru[yr],ru[yr]=null,yr--)}function ee(t,e){yr++,ru[yr]=t.current,t.current=e}var mn={},De=wn(mn),qe=wn(!1),qn=mn;function Br(t,e){var n=t.type.contextTypes;if(!n)return mn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ze(t){return t=t.childContextTypes,t!=null}function Ns(){re(qe),re(De)}function Df(t,e,n){if(De.current!==mn)throw Error(D(168));ee(De,e),ee(qe,n)}function my(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(D(108,$T(t)||"Unknown",i));return de({},n,r)}function Ds(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mn,qn=De.current,ee(De,t),ee(qe,qe.current),!0}function Lf(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=my(t,e,qn),r.__reactInternalMemoizedMergedChildContext=t,re(qe),re(De),ee(De,t)):re(qe),ee(qe,n)}var Ft=null,ca=!1,Ya=!1;function gy(t){Ft===null?Ft=[t]:Ft.push(t)}function nC(t){ca=!0,gy(t)}function Tn(){if(!Ya&&Ft!==null){Ya=!0;var t=0,e=Q;try{var n=Ft;for(Q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ft=null,ca=!1}catch(i){throw Ft!==null&&(Ft=Ft.slice(t+1)),Gg(Sc,Tn),i}finally{Q=e,Ya=!1}}return null}var vr=[],wr=0,Ls=null,bs=0,rt=[],it=0,zn=null,Ut=1,Vt="";function In(t,e){vr[wr++]=bs,vr[wr++]=Ls,Ls=t,bs=e}function yy(t,e,n){rt[it++]=Ut,rt[it++]=Vt,rt[it++]=zn,zn=t;var r=Ut;t=Vt;var i=32-Tt(r)-1;r&=~(1<<i),n+=1;var o=32-Tt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ut=1<<32-Tt(e)+i|n<<i|r,Vt=o+t}else Ut=1<<o|n<<i|r,Vt=t}function Nc(t){t.return!==null&&(In(t,1),yy(t,1,0))}function Dc(t){for(;t===Ls;)Ls=vr[--wr],vr[wr]=null,bs=vr[--wr],vr[wr]=null;for(;t===zn;)zn=rt[--it],rt[it]=null,Vt=rt[--it],rt[it]=null,Ut=rt[--it],rt[it]=null}var Xe=null,Ye=null,oe=!1,vt=null;function vy(t,e){var n=ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xe=t,Ye=un(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xe=t,Ye=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zn!==null?{id:Ut,overflow:Vt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xe=t,Ye=null,!0):!1;default:return!1}}function iu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ou(t){if(oe){var e=Ye;if(e){var n=e;if(!bf(t,e)){if(iu(t))throw Error(D(418));e=un(n.nextSibling);var r=Xe;e&&bf(t,e)?vy(r,n):(t.flags=t.flags&-4097|2,oe=!1,Xe=t)}}else{if(iu(t))throw Error(D(418));t.flags=t.flags&-4097|2,oe=!1,Xe=t}}}function Ff(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xe=t}function Go(t){if(t!==Xe)return!1;if(!oe)return Ff(t),oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eu(t.type,t.memoizedProps)),e&&(e=Ye)){if(iu(t))throw wy(),Error(D(418));for(;e;)vy(t,e),e=un(e.nextSibling)}if(Ff(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ye=un(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ye=null}}else Ye=Xe?un(t.stateNode.nextSibling):null;return!0}function wy(){for(var t=Ye;t;)t=un(t.nextSibling)}function Gr(){Ye=Xe=null,oe=!1}function Lc(t){vt===null?vt=[t]:vt.push(t)}var rC=Wt.ReactCurrentBatchConfig;function hi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var u=i.refs;s===null?delete u[o]:u[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function Oo(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uf(t){var e=t._init;return e(t._payload)}function Ty(t){function e(w,y){if(t){var v=w.deletions;v===null?(w.deletions=[y],w.flags|=16):v.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function i(w,y){return w=hn(w,y),w.index=0,w.sibling=null,w}function o(w,y,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<y?(w.flags|=2,y):v):(w.flags|=2,y)):(w.flags|=1048576,y)}function s(w){return t&&w.alternate===null&&(w.flags|=2),w}function u(w,y,v,S){return y===null||y.tag!==6?(y=rl(v,w.mode,S),y.return=w,y):(y=i(y,v),y.return=w,y)}function c(w,y,v,S){var _=v.type;return _===fr?f(w,y,v.props.children,S,v.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qt&&Uf(_)===y.type)?(S=i(y,v.props),S.ref=hi(w,y,v),S.return=w,S):(S=ps(v.type,v.key,v.props,null,w.mode,S),S.ref=hi(w,y,v),S.return=w,S)}function d(w,y,v,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=il(v,w.mode,S),y.return=w,y):(y=i(y,v.children||[]),y.return=w,y)}function f(w,y,v,S,_){return y===null||y.tag!==7?(y=Bn(v,w.mode,S,_),y.return=w,y):(y=i(y,v),y.return=w,y)}function h(w,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=rl(""+y,w.mode,v),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ro:return v=ps(y.type,y.key,y.props,null,w.mode,v),v.ref=hi(w,null,y),v.return=w,v;case dr:return y=il(y,w.mode,v),y.return=w,y;case Qt:var S=y._init;return h(w,S(y._payload),v)}if(Ti(y)||li(y))return y=Bn(y,w.mode,v,null),y.return=w,y;Oo(w,y)}return null}function p(w,y,v,S){var _=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:u(w,y,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ro:return v.key===_?c(w,y,v,S):null;case dr:return v.key===_?d(w,y,v,S):null;case Qt:return _=v._init,p(w,y,_(v._payload),S)}if(Ti(v)||li(v))return _!==null?null:f(w,y,v,S,null);Oo(w,v)}return null}function g(w,y,v,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return w=w.get(v)||null,u(y,w,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ro:return w=w.get(S.key===null?v:S.key)||null,c(y,w,S,_);case dr:return w=w.get(S.key===null?v:S.key)||null,d(y,w,S,_);case Qt:var k=S._init;return g(w,y,v,k(S._payload),_)}if(Ti(S)||li(S))return w=w.get(v)||null,f(y,w,S,_,null);Oo(y,S)}return null}function T(w,y,v,S){for(var _=null,k=null,A=y,E=y=0,R=null;A!==null&&E<v.length;E++){A.index>E?(R=A,A=null):R=A.sibling;var L=p(w,A,v[E],S);if(L===null){A===null&&(A=R);break}t&&A&&L.alternate===null&&e(w,A),y=o(L,y,E),k===null?_=L:k.sibling=L,k=L,A=R}if(E===v.length)return n(w,A),oe&&In(w,E),_;if(A===null){for(;E<v.length;E++)A=h(w,v[E],S),A!==null&&(y=o(A,y,E),k===null?_=A:k.sibling=A,k=A);return oe&&In(w,E),_}for(A=r(w,A);E<v.length;E++)R=g(A,w,E,v[E],S),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?E:R.key),y=o(R,y,E),k===null?_=R:k.sibling=R,k=R);return t&&A.forEach(function(I){return e(w,I)}),oe&&In(w,E),_}function x(w,y,v,S){var _=li(v);if(typeof _!="function")throw Error(D(150));if(v=_.call(v),v==null)throw Error(D(151));for(var k=_=null,A=y,E=y=0,R=null,L=v.next();A!==null&&!L.done;E++,L=v.next()){A.index>E?(R=A,A=null):R=A.sibling;var I=p(w,A,L.value,S);if(I===null){A===null&&(A=R);break}t&&A&&I.alternate===null&&e(w,A),y=o(I,y,E),k===null?_=I:k.sibling=I,k=I,A=R}if(L.done)return n(w,A),oe&&In(w,E),_;if(A===null){for(;!L.done;E++,L=v.next())L=h(w,L.value,S),L!==null&&(y=o(L,y,E),k===null?_=L:k.sibling=L,k=L);return oe&&In(w,E),_}for(A=r(w,A);!L.done;E++,L=v.next())L=g(A,w,E,L.value,S),L!==null&&(t&&L.alternate!==null&&A.delete(L.key===null?E:L.key),y=o(L,y,E),k===null?_=L:k.sibling=L,k=L);return t&&A.forEach(function(b){return e(w,b)}),oe&&In(w,E),_}function C(w,y,v,S){if(typeof v=="object"&&v!==null&&v.type===fr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ro:e:{for(var _=v.key,k=y;k!==null;){if(k.key===_){if(_=v.type,_===fr){if(k.tag===7){n(w,k.sibling),y=i(k,v.props.children),y.return=w,w=y;break e}}else if(k.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qt&&Uf(_)===k.type){n(w,k.sibling),y=i(k,v.props),y.ref=hi(w,k,v),y.return=w,w=y;break e}n(w,k);break}else e(w,k);k=k.sibling}v.type===fr?(y=Bn(v.props.children,w.mode,S,v.key),y.return=w,w=y):(S=ps(v.type,v.key,v.props,null,w.mode,S),S.ref=hi(w,y,v),S.return=w,w=S)}return s(w);case dr:e:{for(k=v.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(w,y.sibling),y=i(y,v.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=il(v,w.mode,S),y.return=w,w=y}return s(w);case Qt:return k=v._init,C(w,y,k(v._payload),S)}if(Ti(v))return T(w,y,v,S);if(li(v))return x(w,y,v,S);Oo(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(w,y.sibling),y=i(y,v),y.return=w,w=y):(n(w,y),y=rl(v,w.mode,S),y.return=w,w=y),s(w)):n(w,y)}return C}var Or=Ty(!0),xy=Ty(!1),Fs=wn(null),Us=null,Tr=null,bc=null;function Fc(){bc=Tr=Us=null}function Uc(t){var e=Fs.current;re(Fs),t._currentValue=e}function su(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Dr(t,e){Us=t,bc=Tr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Oe=!0),t.firstContext=null)}function ct(t){var e=t._currentValue;if(bc!==t)if(t={context:t,memoizedValue:e,next:null},Tr===null){if(Us===null)throw Error(D(308));Tr=t,Us.dependencies={lanes:0,firstContext:t}}else Tr=Tr.next=t;return e}var bn=null;function Vc(t){bn===null?bn=[t]:bn.push(t)}function Cy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Vc(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ot(t,r)}function Ot(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zt=!1;function $c(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $t(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,j&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ot(t,n)}return i=r.interleaved,i===null?(e.next=e,Vc(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ot(t,n)}function ls(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_c(t,n)}}function Vf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vs(t,e,n,r){var i=t.updateQueue;Zt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(o!==null){var h=i.baseState;s=0,f=d=c=null,u=o;do{var p=u.lane,g=u.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var T=t,x=u;switch(p=e,g=n,x.tag){case 1:if(T=x.payload,typeof T=="function"){h=T.call(g,h,p);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=x.payload,p=typeof T=="function"?T.call(g,h,p):T,p==null)break e;h=de({},h,p);break e;case 2:Zt=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[u]:p.push(u))}else g={eventTime:g,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=g,c=h):f=f.next=g,s|=p;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;p=u,u=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Kn|=s,t.lanes=s,t.memoizedState=h}}function $f(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var vo={},Pt=wn(vo),eo=wn(vo),to=wn(vo);function Fn(t){if(t===vo)throw Error(D(174));return t}function Bc(t,e){switch(ee(to,e),ee(eo,t),ee(Pt,vo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bl(e,t)}re(Pt),ee(Pt,e)}function Hr(){re(Pt),re(eo),re(to)}function _y(t){Fn(to.current);var e=Fn(Pt.current),n=Bl(e,t.type);e!==n&&(ee(eo,t),ee(Pt,n))}function Gc(t){eo.current===t&&(re(Pt),re(eo))}var le=wn(0);function $s(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xa=[];function Oc(){for(var t=0;t<Xa.length;t++)Xa[t]._workInProgressVersionPrimary=null;Xa.length=0}var us=Wt.ReactCurrentDispatcher,Qa=Wt.ReactCurrentBatchConfig,Wn=0,ce=null,Te=null,Ce=null,Bs=!1,Mi=!1,no=0,iC=0;function Pe(){throw Error(D(321))}function Hc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ct(t[n],e[n]))return!1;return!0}function qc(t,e,n,r,i,o){if(Wn=o,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,us.current=t===null||t.memoizedState===null?lC:uC,t=n(r,i),Mi){o=0;do{if(Mi=!1,no=0,25<=o)throw Error(D(301));o+=1,Ce=Te=null,e.updateQueue=null,us.current=cC,t=n(r,i)}while(Mi)}if(us.current=Gs,e=Te!==null&&Te.next!==null,Wn=0,Ce=Te=ce=null,Bs=!1,e)throw Error(D(300));return t}function zc(){var t=no!==0;return no=0,t}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?ce.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function dt(){if(Te===null){var t=ce.alternate;t=t!==null?t.memoizedState:null}else t=Te.next;var e=Ce===null?ce.memoizedState:Ce.next;if(e!==null)Ce=e,Te=t;else{if(t===null)throw Error(D(310));Te=t,t={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ce===null?ce.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function ro(t,e){return typeof e=="function"?e(t):e}function Za(t){var e=dt(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=Te,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=s=null,c=null,d=o;do{var f=d.lane;if((Wn&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=h,s=r):c=c.next=h,ce.lanes|=f,Kn|=f}d=d.next}while(d!==null&&d!==o);c===null?s=r:c.next=u,Ct(r,e.memoizedState)||(Oe=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ce.lanes|=o,Kn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function el(t){var e=dt(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Ct(o,e.memoizedState)||(Oe=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ky(){}function Ey(t,e){var n=ce,r=dt(),i=e(),o=!Ct(r.memoizedState,i);if(o&&(r.memoizedState=i,Oe=!0),r=r.queue,Wc(Iy.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,io(9,Py.bind(null,n,r,i,e),void 0,null),Se===null)throw Error(D(349));Wn&30||Ay(n,e,i)}return i}function Ay(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Py(t,e,n,r){e.value=n,e.getSnapshot=r,My(e)&&Ry(t)}function Iy(t,e,n){return n(function(){My(e)&&Ry(t)})}function My(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ct(t,n)}catch{return!0}}function Ry(t){var e=Ot(t,1);e!==null&&xt(e,t,1,-1)}function Bf(t){var e=_t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:t},e.queue=t,t=t.dispatch=aC.bind(null,ce,t),[e.memoizedState,t]}function io(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ny(){return dt().memoizedState}function cs(t,e,n,r){var i=_t();ce.flags|=t,i.memoizedState=io(1|e,n,void 0,r===void 0?null:r)}function da(t,e,n,r){var i=dt();r=r===void 0?null:r;var o=void 0;if(Te!==null){var s=Te.memoizedState;if(o=s.destroy,r!==null&&Hc(r,s.deps)){i.memoizedState=io(e,n,o,r);return}}ce.flags|=t,i.memoizedState=io(1|e,n,o,r)}function Gf(t,e){return cs(8390656,8,t,e)}function Wc(t,e){return da(2048,8,t,e)}function Dy(t,e){return da(4,2,t,e)}function Ly(t,e){return da(4,4,t,e)}function by(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fy(t,e,n){return n=n!=null?n.concat([t]):null,da(4,4,by.bind(null,e,t),n)}function Kc(){}function Uy(t,e){var n=dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vy(t,e){var n=dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $y(t,e,n){return Wn&21?(Ct(n,e)||(n=qg(),ce.lanes|=n,Kn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Oe=!0),t.memoizedState=n)}function oC(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var r=Qa.transition;Qa.transition={};try{t(!1),e()}finally{Q=n,Qa.transition=r}}function By(){return dt().memoizedState}function sC(t,e,n){var r=fn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gy(t))Oy(e,n);else if(n=Cy(t,e,n,r),n!==null){var i=Ue();xt(n,t,r,i),Hy(n,e,r)}}function aC(t,e,n){var r=fn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gy(t))Oy(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,u=o(s,n);if(i.hasEagerState=!0,i.eagerState=u,Ct(u,s)){var c=e.interleaved;c===null?(i.next=i,Vc(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Cy(t,e,i,r),n!==null&&(i=Ue(),xt(n,t,r,i),Hy(n,e,r))}}function Gy(t){var e=t.alternate;return t===ce||e!==null&&e===ce}function Oy(t,e){Mi=Bs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_c(t,n)}}var Gs={readContext:ct,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},lC={readContext:ct,useCallback:function(t,e){return _t().memoizedState=[t,e===void 0?null:e],t},useContext:ct,useEffect:Gf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cs(4194308,4,by.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cs(4194308,4,t,e)},useInsertionEffect:function(t,e){return cs(4,2,t,e)},useMemo:function(t,e){var n=_t();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_t();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sC.bind(null,ce,t),[r.memoizedState,t]},useRef:function(t){var e=_t();return t={current:t},e.memoizedState=t},useState:Bf,useDebugValue:Kc,useDeferredValue:function(t){return _t().memoizedState=t},useTransition:function(){var t=Bf(!1),e=t[0];return t=oC.bind(null,t[1]),_t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ce,i=_t();if(oe){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),Se===null)throw Error(D(349));Wn&30||Ay(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Gf(Iy.bind(null,r,o,t),[t]),r.flags|=2048,io(9,Py.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=_t(),e=Se.identifierPrefix;if(oe){var n=Vt,r=Ut;n=(r&~(1<<32-Tt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=no++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uC={readContext:ct,useCallback:Uy,useContext:ct,useEffect:Wc,useImperativeHandle:Fy,useInsertionEffect:Dy,useLayoutEffect:Ly,useMemo:Vy,useReducer:Za,useRef:Ny,useState:function(){return Za(ro)},useDebugValue:Kc,useDeferredValue:function(t){var e=dt();return $y(e,Te.memoizedState,t)},useTransition:function(){var t=Za(ro)[0],e=dt().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:Ey,useId:By,unstable_isNewReconciler:!1},cC={readContext:ct,useCallback:Uy,useContext:ct,useEffect:Wc,useImperativeHandle:Fy,useInsertionEffect:Dy,useLayoutEffect:Ly,useMemo:Vy,useReducer:el,useRef:Ny,useState:function(){return el(ro)},useDebugValue:Kc,useDeferredValue:function(t){var e=dt();return Te===null?e.memoizedState=t:$y(e,Te.memoizedState,t)},useTransition:function(){var t=el(ro)[0],e=dt().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:Ey,useId:By,unstable_isNewReconciler:!1};function mt(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function au(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:de({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fa={isMounted:function(t){return(t=t._reactInternals)?Qn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ue(),i=fn(t),o=$t(r,i);o.payload=e,n!=null&&(o.callback=n),e=cn(t,o,i),e!==null&&(xt(e,t,i,r),ls(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ue(),i=fn(t),o=$t(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=cn(t,o,i),e!==null&&(xt(e,t,i,r),ls(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ue(),r=fn(t),i=$t(n,r);i.tag=2,e!=null&&(i.callback=e),e=cn(t,i,r),e!==null&&(xt(e,t,r,n),ls(e,t,r))}};function Of(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Yi(n,r)||!Yi(i,o):!0}function qy(t,e,n){var r=!1,i=mn,o=e.contextType;return typeof o=="object"&&o!==null?o=ct(o):(i=ze(e)?qn:De.current,r=e.contextTypes,o=(r=r!=null)?Br(t,i):mn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Hf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fa.enqueueReplaceState(e,e.state,null)}function lu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},$c(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ct(o):(o=ze(e)?qn:De.current,i.context=Br(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(au(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fa.enqueueReplaceState(i,i.state,null),Vs(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function qr(t,e){try{var n="",r=e;do n+=VT(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function tl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dC=typeof WeakMap=="function"?WeakMap:Map;function zy(t,e,n){n=$t(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hs||(Hs=!0,wu=r),uu(t,e)},n}function Wy(t,e,n){n=$t(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uu(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){uu(t,e),typeof r!="function"&&(dn===null?dn=new Set([this]):dn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function qf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kC.bind(null,t,e,n),e.then(t,t))}function zf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$t(-1,1),e.tag=2,cn(n,e,1))),n.lanes|=1),t)}var fC=Wt.ReactCurrentOwner,Oe=!1;function be(t,e,n,r){e.child=t===null?xy(e,null,n,r):Or(e,t.child,n,r)}function Kf(t,e,n,r,i){n=n.render;var o=e.ref;return Dr(e,i),r=qc(t,e,n,r,o,i),n=zc(),t!==null&&!Oe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ht(t,e,i)):(oe&&n&&Nc(e),e.flags|=1,be(t,e,r,i),e.child)}function Jf(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!td(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Ky(t,e,o,r,i)):(t=ps(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Yi,n(s,r)&&t.ref===e.ref)return Ht(t,e,i)}return e.flags|=1,t=hn(o,r),t.ref=e.ref,t.return=e,e.child=t}function Ky(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Yi(o,r)&&t.ref===e.ref)if(Oe=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Oe=!0);else return e.lanes=t.lanes,Ht(t,e,i)}return cu(t,e,n,r,i)}function Jy(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(Cr,Je),Je|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ee(Cr,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ee(Cr,Je),Je|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ee(Cr,Je),Je|=r;return be(t,e,i,n),e.child}function jy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cu(t,e,n,r,i){var o=ze(n)?qn:De.current;return o=Br(e,o),Dr(e,i),n=qc(t,e,n,r,o,i),r=zc(),t!==null&&!Oe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ht(t,e,i)):(oe&&r&&Nc(e),e.flags|=1,be(t,e,n,i),e.child)}function jf(t,e,n,r,i){if(ze(n)){var o=!0;Ds(e)}else o=!1;if(Dr(e,i),e.stateNode===null)ds(t,e),qy(e,n,r),lu(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=ct(d):(d=ze(n)?qn:De.current,d=Br(e,d));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Hf(e,s,r,d),Zt=!1;var p=e.memoizedState;s.state=p,Vs(e,r,s,i),c=e.memoizedState,u!==r||p!==c||qe.current||Zt?(typeof f=="function"&&(au(e,n,f,r),c=e.memoizedState),(u=Zt||Of(e,n,u,r,p,c,d))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Sy(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:mt(e.type,u),s.props=d,h=e.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=ct(c):(c=ze(n)?qn:De.current,c=Br(e,c));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==h||p!==c)&&Hf(e,s,r,c),Zt=!1,p=e.memoizedState,s.state=p,Vs(e,r,s,i);var T=e.memoizedState;u!==h||p!==T||qe.current||Zt?(typeof g=="function"&&(au(e,n,g,r),T=e.memoizedState),(d=Zt||Of(e,n,d,r,p,T,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,T,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,T,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),s.props=r,s.state=T,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return du(t,e,n,r,o,i)}function du(t,e,n,r,i,o){jy(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Lf(e,n,!1),Ht(t,e,o);r=e.stateNode,fC.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Or(e,t.child,null,o),e.child=Or(e,null,u,o)):be(t,e,u,o),e.memoizedState=r.state,i&&Lf(e,n,!0),e.child}function Yy(t){var e=t.stateNode;e.pendingContext?Df(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Df(t,e.context,!1),Bc(t,e.containerInfo)}function Yf(t,e,n,r,i){return Gr(),Lc(i),e.flags|=256,be(t,e,n,r),e.child}var fu={dehydrated:null,treeContext:null,retryLane:0};function hu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xy(t,e,n){var r=e.pendingProps,i=le.current,o=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ee(le,i&1),t===null)return ou(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ma(s,r,0,null),t=Bn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=hu(n),e.memoizedState=fu,t):Jc(e,s));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return hC(t,e,s,r,u,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=hn(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=hn(u,o):(o=Bn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?hu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=fu,r}return o=t.child,t=o.sibling,r=hn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jc(t,e){return e=ma({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ho(t,e,n,r){return r!==null&&Lc(r),Or(e,t.child,null,n),t=Jc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hC(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=tl(Error(D(422))),Ho(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ma({mode:"visible",children:r.children},i,0,null),o=Bn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Or(e,t.child,null,s),e.child.memoizedState=hu(s),e.memoizedState=fu,o);if(!(e.mode&1))return Ho(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(D(419)),r=tl(o,r,void 0),Ho(t,e,s,r)}if(u=(s&t.childLanes)!==0,Oe||u){if(r=Se,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ot(t,i),xt(r,t,i,-1))}return ed(),r=tl(Error(D(421))),Ho(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=EC.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ye=un(i.nextSibling),Xe=e,oe=!0,vt=null,t!==null&&(rt[it++]=Ut,rt[it++]=Vt,rt[it++]=zn,Ut=t.id,Vt=t.overflow,zn=e),e=Jc(e,r.children),e.flags|=4096,e)}function Xf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),su(t.return,e,n)}function nl(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Qy(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(be(t,e,r.children,n),r=le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xf(t,n,e);else if(t.tag===19)Xf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ee(le,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$s(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),nl(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$s(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}nl(e,!0,n,null,o);break;case"together":nl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ds(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ht(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Kn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=hn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pC(t,e,n){switch(e.tag){case 3:Yy(e),Gr();break;case 5:_y(e);break;case 1:ze(e.type)&&Ds(e);break;case 4:Bc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ee(Fs,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ee(le,le.current&1),e.flags|=128,null):n&e.child.childLanes?Xy(t,e,n):(ee(le,le.current&1),t=Ht(t,e,n),t!==null?t.sibling:null);ee(le,le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ee(le,le.current),r)break;return null;case 22:case 23:return e.lanes=0,Jy(t,e,n)}return Ht(t,e,n)}var Zy,pu,e0,t0;Zy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pu=function(){};e0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fn(Pt.current);var o=null;switch(n){case"input":i=Fl(t,i),r=Fl(t,r),o=[];break;case"select":i=de({},i,{value:void 0}),r=de({},r,{value:void 0}),o=[];break;case"textarea":i=$l(t,i),r=$l(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rs)}Gl(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Hi.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(u=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Hi.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&te("scroll",t),o||u===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};t0=function(t,e,n,r){n!==r&&(e.flags|=4)};function pi(t,e){if(!oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mC(t,e,n){var r=e.pendingProps;switch(Dc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return ze(e.type)&&Ns(),Ie(e),null;case 3:return r=e.stateNode,Hr(),re(qe),re(De),Oc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Go(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vt!==null&&(Cu(vt),vt=null))),pu(t,e),Ie(e),null;case 5:Gc(e);var i=Fn(to.current);if(n=e.type,t!==null&&e.stateNode!=null)e0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return Ie(e),null}if(t=Fn(Pt.current),Go(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Et]=e,r[Zi]=o,t=(e.mode&1)!==0,n){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(i=0;i<Ci.length;i++)te(Ci[i],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":sf(r,o),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},te("invalid",r);break;case"textarea":lf(r,o),te("invalid",r)}Gl(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&Bo(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Bo(r.textContent,u,t),i=["children",""+u]):Hi.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&te("scroll",r)}switch(n){case"input":No(r),af(r,o,!0);break;case"textarea":No(r),uf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Rs)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ig(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Et]=e,t[Zi]=r,Zy(t,e,!1,!1),e.stateNode=t;e:{switch(s=Ol(n,r),n){case"dialog":te("cancel",t),te("close",t),i=r;break;case"iframe":case"object":case"embed":te("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ci.length;i++)te(Ci[i],t);i=r;break;case"source":te("error",t),i=r;break;case"img":case"image":case"link":te("error",t),te("load",t),i=r;break;case"details":te("toggle",t),i=r;break;case"input":sf(t,r),i=Fl(t,r),te("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=de({},r,{value:void 0}),te("invalid",t);break;case"textarea":lf(t,r),i=$l(t,r),te("invalid",t);break;default:i=r}Gl(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?Ng(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mg(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&qi(t,c):typeof c=="number"&&qi(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Hi.hasOwnProperty(o)?c!=null&&o==="onScroll"&&te("scroll",t):c!=null&&vc(t,o,c,s))}switch(n){case"input":No(t),af(t,r,!1);break;case"textarea":No(t),uf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ir(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ir(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Rs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)t0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=Fn(to.current),Fn(Pt.current),Go(e)){if(r=e.stateNode,n=e.memoizedProps,r[Et]=e,(o=r.nodeValue!==n)&&(t=Xe,t!==null))switch(t.tag){case 3:Bo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bo(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Et]=e,e.stateNode=r}return Ie(e),null;case 13:if(re(le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(oe&&Ye!==null&&e.mode&1&&!(e.flags&128))wy(),Gr(),e.flags|=98560,o=!1;else if(o=Go(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(D(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(D(317));o[Et]=e}else Gr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),o=!1}else vt!==null&&(Cu(vt),vt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||le.current&1?xe===0&&(xe=3):ed())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return Hr(),pu(t,e),t===null&&Xi(e.stateNode.containerInfo),Ie(e),null;case 10:return Uc(e.type._context),Ie(e),null;case 17:return ze(e.type)&&Ns(),Ie(e),null;case 19:if(re(le),o=e.memoizedState,o===null)return Ie(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)pi(o,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=$s(t),s!==null){for(e.flags|=128,pi(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ee(le,le.current&1|2),e.child}t=t.sibling}o.tail!==null&&me()>zr&&(e.flags|=128,r=!0,pi(o,!1),e.lanes=4194304)}else{if(!r)if(t=$s(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!oe)return Ie(e),null}else 2*me()-o.renderingStartTime>zr&&n!==1073741824&&(e.flags|=128,r=!0,pi(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=me(),e.sibling=null,n=le.current,ee(le,r?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return Zc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Je&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function gC(t,e){switch(Dc(e),e.tag){case 1:return ze(e.type)&&Ns(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hr(),re(qe),re(De),Oc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gc(e),null;case 13:if(re(le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Gr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return re(le),null;case 4:return Hr(),null;case 10:return Uc(e.type._context),null;case 22:case 23:return Zc(),null;case 24:return null;default:return null}}var qo=!1,Me=!1,yC=typeof WeakSet=="function"?WeakSet:Set,F=null;function xr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){he(t,e,r)}else n.current=null}function mu(t,e,n){try{n()}catch(r){he(t,e,r)}}var Qf=!1;function vC(t,e){if(Ql=Ps,t=sy(),Rc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,f=0,h=t,p=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(u=s+i),h!==o||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++d===i&&(u=s),p===o&&++f===r&&(c=s),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zl={focusedElem:t,selectionRange:n},Ps=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var x=T.memoizedProps,C=T.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:mt(e.type,x),C);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(S){he(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return T=Qf,Qf=!1,T}function Ri(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&mu(e,n,o)}i=i.next}while(i!==r)}}function ha(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function n0(t){var e=t.alternate;e!==null&&(t.alternate=null,n0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Et],delete e[Zi],delete e[nu],delete e[eC],delete e[tC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function r0(t){return t.tag===5||t.tag===3||t.tag===4}function Zf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rs));else if(r!==4&&(t=t.child,t!==null))for(yu(t,e,n),t=t.sibling;t!==null;)yu(t,e,n),t=t.sibling}function vu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vu(t,e,n),t=t.sibling;t!==null;)vu(t,e,n),t=t.sibling}var _e=null,gt=!1;function Jt(t,e,n){for(n=n.child;n!==null;)i0(t,e,n),n=n.sibling}function i0(t,e,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(oa,n)}catch{}switch(n.tag){case 5:Me||xr(n,e);case 6:var r=_e,i=gt;_e=null,Jt(t,e,n),_e=r,gt=i,_e!==null&&(gt?(t=_e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(gt?(t=_e,n=n.stateNode,t.nodeType===8?ja(t.parentNode,n):t.nodeType===1&&ja(t,n),Ji(t)):ja(_e,n.stateNode));break;case 4:r=_e,i=gt,_e=n.stateNode.containerInfo,gt=!0,Jt(t,e,n),_e=r,gt=i;break;case 0:case 11:case 14:case 15:if(!Me&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&mu(n,e,s),i=i.next}while(i!==r)}Jt(t,e,n);break;case 1:if(!Me&&(xr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){he(n,e,u)}Jt(t,e,n);break;case 21:Jt(t,e,n);break;case 22:n.mode&1?(Me=(r=Me)||n.memoizedState!==null,Jt(t,e,n),Me=r):Jt(t,e,n);break;default:Jt(t,e,n)}}function eh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yC),e.forEach(function(r){var i=AC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:_e=u.stateNode,gt=!1;break e;case 3:_e=u.stateNode.containerInfo,gt=!0;break e;case 4:_e=u.stateNode.containerInfo,gt=!0;break e}u=u.return}if(_e===null)throw Error(D(160));i0(o,s,i),_e=null,gt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){he(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)o0(e,t),e=e.sibling}function o0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ft(e,t),St(t),r&4){try{Ri(3,t,t.return),ha(3,t)}catch(x){he(t,t.return,x)}try{Ri(5,t,t.return)}catch(x){he(t,t.return,x)}}break;case 1:ft(e,t),St(t),r&512&&n!==null&&xr(n,n.return);break;case 5:if(ft(e,t),St(t),r&512&&n!==null&&xr(n,n.return),t.flags&32){var i=t.stateNode;try{qi(i,"")}catch(x){he(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Ag(i,o),Ol(u,s);var d=Ol(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];f==="style"?Ng(i,h):f==="dangerouslySetInnerHTML"?Mg(i,h):f==="children"?qi(i,h):vc(i,f,h,d)}switch(u){case"input":Ul(i,o);break;case"textarea":Pg(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Ir(i,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?Ir(i,!!o.multiple,o.defaultValue,!0):Ir(i,!!o.multiple,o.multiple?[]:"",!1))}i[Zi]=o}catch(x){he(t,t.return,x)}}break;case 6:if(ft(e,t),St(t),r&4){if(t.stateNode===null)throw Error(D(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){he(t,t.return,x)}}break;case 3:if(ft(e,t),St(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ji(e.containerInfo)}catch(x){he(t,t.return,x)}break;case 4:ft(e,t),St(t);break;case 13:ft(e,t),St(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Xc=me())),r&4&&eh(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Me=(d=Me)||f,ft(e,t),Me=d):ft(e,t),St(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(F=t,f=t.child;f!==null;){for(h=F=f;F!==null;){switch(p=F,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ri(4,p,p.return);break;case 1:xr(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(x){he(r,n,x)}}break;case 5:xr(p,p.return);break;case 22:if(p.memoizedState!==null){nh(h);continue}}g!==null?(g.return=p,F=g):nh(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Rg("display",s))}catch(x){he(t,t.return,x)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){he(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ft(e,t),St(t),r&4&&eh(t);break;case 21:break;default:ft(e,t),St(t)}}function St(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(r0(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qi(i,""),r.flags&=-33);var o=Zf(t);vu(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=Zf(t);yu(t,u,s);break;default:throw Error(D(161))}}catch(c){he(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wC(t,e,n){F=t,s0(t)}function s0(t,e,n){for(var r=(t.mode&1)!==0;F!==null;){var i=F,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||qo;if(!s){var u=i.alternate,c=u!==null&&u.memoizedState!==null||Me;u=qo;var d=Me;if(qo=s,(Me=c)&&!d)for(F=i;F!==null;)s=F,c=s.child,s.tag===22&&s.memoizedState!==null?rh(i):c!==null?(c.return=s,F=c):rh(i);for(;o!==null;)F=o,s0(o),o=o.sibling;F=i,qo=u,Me=d}th(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,F=o):th(t)}}function th(t){for(;F!==null;){var e=F;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Me||ha(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Me)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&$f(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$f(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Ji(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Me||e.flags&512&&gu(e)}catch(p){he(e,e.return,p)}}if(e===t){F=null;break}if(n=e.sibling,n!==null){n.return=e.return,F=n;break}F=e.return}}function nh(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var n=e.sibling;if(n!==null){n.return=e.return,F=n;break}F=e.return}}function rh(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ha(4,e)}catch(c){he(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){he(e,i,c)}}var o=e.return;try{gu(e)}catch(c){he(e,o,c)}break;case 5:var s=e.return;try{gu(e)}catch(c){he(e,s,c)}}}catch(c){he(e,e.return,c)}if(e===t){F=null;break}var u=e.sibling;if(u!==null){u.return=e.return,F=u;break}F=e.return}}var TC=Math.ceil,Os=Wt.ReactCurrentDispatcher,jc=Wt.ReactCurrentOwner,st=Wt.ReactCurrentBatchConfig,j=0,Se=null,ye=null,Ee=0,Je=0,Cr=wn(0),xe=0,oo=null,Kn=0,pa=0,Yc=0,Ni=null,Be=null,Xc=0,zr=1/0,Lt=null,Hs=!1,wu=null,dn=null,zo=!1,on=null,qs=0,Di=0,Tu=null,fs=-1,hs=0;function Ue(){return j&6?me():fs!==-1?fs:fs=me()}function fn(t){return t.mode&1?j&2&&Ee!==0?Ee&-Ee:rC.transition!==null?(hs===0&&(hs=qg()),hs):(t=Q,t!==0||(t=window.event,t=t===void 0?16:Xg(t.type)),t):1}function xt(t,e,n,r){if(50<Di)throw Di=0,Tu=null,Error(D(185));mo(t,n,r),(!(j&2)||t!==Se)&&(t===Se&&(!(j&2)&&(pa|=n),xe===4&&tn(t,Ee)),We(t,r),n===1&&j===0&&!(e.mode&1)&&(zr=me()+500,ca&&Tn()))}function We(t,e){var n=t.callbackNode;rx(t,e);var r=As(t,t===Se?Ee:0);if(r===0)n!==null&&ff(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ff(n),e===1)t.tag===0?nC(ih.bind(null,t)):gy(ih.bind(null,t)),Qx(function(){!(j&6)&&Tn()}),n=null;else{switch(zg(r)){case 1:n=Sc;break;case 4:n=Og;break;case 16:n=Es;break;case 536870912:n=Hg;break;default:n=Es}n=p0(n,a0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function a0(t,e){if(fs=-1,hs=0,j&6)throw Error(D(327));var n=t.callbackNode;if(Lr()&&t.callbackNode!==n)return null;var r=As(t,t===Se?Ee:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zs(t,r);else{e=r;var i=j;j|=2;var o=u0();(Se!==t||Ee!==e)&&(Lt=null,zr=me()+500,$n(t,e));do try{SC();break}catch(u){l0(t,u)}while(!0);Fc(),Os.current=o,j=i,ye!==null?e=0:(Se=null,Ee=0,e=xe)}if(e!==0){if(e===2&&(i=Kl(t),i!==0&&(r=i,e=xu(t,i))),e===1)throw n=oo,$n(t,0),tn(t,r),We(t,me()),n;if(e===6)tn(t,r);else{if(i=t.current.alternate,!(r&30)&&!xC(i)&&(e=zs(t,r),e===2&&(o=Kl(t),o!==0&&(r=o,e=xu(t,o))),e===1))throw n=oo,$n(t,0),tn(t,r),We(t,me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:Mn(t,Be,Lt);break;case 3:if(tn(t,r),(r&130023424)===r&&(e=Xc+500-me(),10<e)){if(As(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ue(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tu(Mn.bind(null,t,Be,Lt),e);break}Mn(t,Be,Lt);break;case 4:if(tn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Tt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TC(r/1960))-r,10<r){t.timeoutHandle=tu(Mn.bind(null,t,Be,Lt),r);break}Mn(t,Be,Lt);break;case 5:Mn(t,Be,Lt);break;default:throw Error(D(329))}}}return We(t,me()),t.callbackNode===n?a0.bind(null,t):null}function xu(t,e){var n=Ni;return t.current.memoizedState.isDehydrated&&($n(t,e).flags|=256),t=zs(t,e),t!==2&&(e=Be,Be=n,e!==null&&Cu(e)),t}function Cu(t){Be===null?Be=t:Be.push.apply(Be,t)}function xC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ct(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tn(t,e){for(e&=~Yc,e&=~pa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tt(e),r=1<<n;t[n]=-1,e&=~r}}function ih(t){if(j&6)throw Error(D(327));Lr();var e=As(t,0);if(!(e&1))return We(t,me()),null;var n=zs(t,e);if(t.tag!==0&&n===2){var r=Kl(t);r!==0&&(e=r,n=xu(t,r))}if(n===1)throw n=oo,$n(t,0),tn(t,e),We(t,me()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mn(t,Be,Lt),We(t,me()),null}function Qc(t,e){var n=j;j|=1;try{return t(e)}finally{j=n,j===0&&(zr=me()+500,ca&&Tn())}}function Jn(t){on!==null&&on.tag===0&&!(j&6)&&Lr();var e=j;j|=1;var n=st.transition,r=Q;try{if(st.transition=null,Q=1,t)return t()}finally{Q=r,st.transition=n,j=e,!(j&6)&&Tn()}}function Zc(){Je=Cr.current,re(Cr)}function $n(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Xx(n)),ye!==null)for(n=ye.return;n!==null;){var r=n;switch(Dc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ns();break;case 3:Hr(),re(qe),re(De),Oc();break;case 5:Gc(r);break;case 4:Hr();break;case 13:re(le);break;case 19:re(le);break;case 10:Uc(r.type._context);break;case 22:case 23:Zc()}n=n.return}if(Se=t,ye=t=hn(t.current,null),Ee=Je=e,xe=0,oo=null,Yc=pa=Kn=0,Be=Ni=null,bn!==null){for(e=0;e<bn.length;e++)if(n=bn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}bn=null}return t}function l0(t,e){do{var n=ye;try{if(Fc(),us.current=Gs,Bs){for(var r=ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bs=!1}if(Wn=0,Ce=Te=ce=null,Mi=!1,no=0,jc.current=null,n===null||n.return===null){xe=1,oo=e,ye=null;break}e:{var o=t,s=n.return,u=n,c=e;if(e=Ee,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=zf(s);if(g!==null){g.flags&=-257,Wf(g,s,u,o,e),g.mode&1&&qf(o,d,e),e=g,c=d;var T=e.updateQueue;if(T===null){var x=new Set;x.add(c),e.updateQueue=x}else T.add(c);break e}else{if(!(e&1)){qf(o,d,e),ed();break e}c=Error(D(426))}}else if(oe&&u.mode&1){var C=zf(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Wf(C,s,u,o,e),Lc(qr(c,u));break e}}o=c=qr(c,u),xe!==4&&(xe=2),Ni===null?Ni=[o]:Ni.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=zy(o,c,e);Vf(o,w);break e;case 1:u=c;var y=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(dn===null||!dn.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=Wy(o,u,e);Vf(o,S);break e}}o=o.return}while(o!==null)}d0(n)}catch(_){e=_,ye===n&&n!==null&&(ye=n=n.return);continue}break}while(!0)}function u0(){var t=Os.current;return Os.current=Gs,t===null?Gs:t}function ed(){(xe===0||xe===3||xe===2)&&(xe=4),Se===null||!(Kn&268435455)&&!(pa&268435455)||tn(Se,Ee)}function zs(t,e){var n=j;j|=2;var r=u0();(Se!==t||Ee!==e)&&(Lt=null,$n(t,e));do try{CC();break}catch(i){l0(t,i)}while(!0);if(Fc(),j=n,Os.current=r,ye!==null)throw Error(D(261));return Se=null,Ee=0,xe}function CC(){for(;ye!==null;)c0(ye)}function SC(){for(;ye!==null&&!JT();)c0(ye)}function c0(t){var e=h0(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?d0(t):ye=e,jc.current=null}function d0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gC(n,e),n!==null){n.flags&=32767,ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,ye=null;return}}else if(n=mC(n,e,Je),n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);xe===0&&(xe=5)}function Mn(t,e,n){var r=Q,i=st.transition;try{st.transition=null,Q=1,_C(t,e,n,r)}finally{st.transition=i,Q=r}return null}function _C(t,e,n,r){do Lr();while(on!==null);if(j&6)throw Error(D(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(ix(t,o),t===Se&&(ye=Se=null,Ee=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zo||(zo=!0,p0(Es,function(){return Lr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=st.transition,st.transition=null;var s=Q;Q=1;var u=j;j|=4,jc.current=null,vC(t,n),o0(n,t),qx(Zl),Ps=!!Ql,Zl=Ql=null,t.current=n,wC(n),jT(),j=u,Q=s,st.transition=o}else t.current=n;if(zo&&(zo=!1,on=t,qs=i),o=t.pendingLanes,o===0&&(dn=null),QT(n.stateNode),We(t,me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hs)throw Hs=!1,t=wu,wu=null,t;return qs&1&&t.tag!==0&&Lr(),o=t.pendingLanes,o&1?t===Tu?Di++:(Di=0,Tu=t):Di=0,Tn(),null}function Lr(){if(on!==null){var t=zg(qs),e=st.transition,n=Q;try{if(st.transition=null,Q=16>t?16:t,on===null)var r=!1;else{if(t=on,on=null,qs=0,j&6)throw Error(D(331));var i=j;for(j|=4,F=t.current;F!==null;){var o=F,s=o.child;if(F.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(F=d;F!==null;){var f=F;switch(f.tag){case 0:case 11:case 15:Ri(8,f,o)}var h=f.child;if(h!==null)h.return=f,F=h;else for(;F!==null;){f=F;var p=f.sibling,g=f.return;if(n0(f),f===d){F=null;break}if(p!==null){p.return=g,F=p;break}F=g}}}var T=o.alternate;if(T!==null){var x=T.child;if(x!==null){T.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}F=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,F=s;else e:for(;F!==null;){if(o=F,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ri(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,F=w;break e}F=o.return}}var y=t.current;for(F=y;F!==null;){s=F;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,F=v;else e:for(s=y;F!==null;){if(u=F,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ha(9,u)}}catch(_){he(u,u.return,_)}if(u===s){F=null;break e}var S=u.sibling;if(S!==null){S.return=u.return,F=S;break e}F=u.return}}if(j=i,Tn(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(oa,t)}catch{}r=!0}return r}finally{Q=n,st.transition=e}}return!1}function oh(t,e,n){e=qr(n,e),e=zy(t,e,1),t=cn(t,e,1),e=Ue(),t!==null&&(mo(t,1,e),We(t,e))}function he(t,e,n){if(t.tag===3)oh(t,t,n);else for(;e!==null;){if(e.tag===3){oh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dn===null||!dn.has(r))){t=qr(n,t),t=Wy(e,t,1),e=cn(e,t,1),t=Ue(),e!==null&&(mo(e,1,t),We(e,t));break}}e=e.return}}function kC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ue(),t.pingedLanes|=t.suspendedLanes&n,Se===t&&(Ee&n)===n&&(xe===4||xe===3&&(Ee&130023424)===Ee&&500>me()-Xc?$n(t,0):Yc|=n),We(t,e)}function f0(t,e){e===0&&(t.mode&1?(e=bo,bo<<=1,!(bo&130023424)&&(bo=4194304)):e=1);var n=Ue();t=Ot(t,e),t!==null&&(mo(t,e,n),We(t,n))}function EC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f0(t,n)}function AC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),f0(t,n)}var h0;h0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qe.current)Oe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Oe=!1,pC(t,e,n);Oe=!!(t.flags&131072)}else Oe=!1,oe&&e.flags&1048576&&yy(e,bs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ds(t,e),t=e.pendingProps;var i=Br(e,De.current);Dr(e,n),i=qc(null,e,r,t,i,n);var o=zc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ze(r)?(o=!0,Ds(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$c(e),i.updater=fa,e.stateNode=i,i._reactInternals=e,lu(e,r,t,n),e=du(null,e,r,!0,o,n)):(e.tag=0,oe&&o&&Nc(e),be(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ds(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=IC(r),t=mt(r,t),i){case 0:e=cu(null,e,r,t,n);break e;case 1:e=jf(null,e,r,t,n);break e;case 11:e=Kf(null,e,r,t,n);break e;case 14:e=Jf(null,e,r,mt(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),cu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),jf(t,e,r,i,n);case 3:e:{if(Yy(e),t===null)throw Error(D(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Sy(t,e),Vs(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=qr(Error(D(423)),e),e=Yf(t,e,r,n,i);break e}else if(r!==i){i=qr(Error(D(424)),e),e=Yf(t,e,r,n,i);break e}else for(Ye=un(e.stateNode.containerInfo.firstChild),Xe=e,oe=!0,vt=null,n=xy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gr(),r===i){e=Ht(t,e,n);break e}be(t,e,r,n)}e=e.child}return e;case 5:return _y(e),t===null&&ou(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,eu(r,i)?s=null:o!==null&&eu(r,o)&&(e.flags|=32),jy(t,e),be(t,e,s,n),e.child;case 6:return t===null&&ou(e),null;case 13:return Xy(t,e,n);case 4:return Bc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Or(e,null,r,n):be(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),Kf(t,e,r,i,n);case 7:return be(t,e,e.pendingProps,n),e.child;case 8:return be(t,e,e.pendingProps.children,n),e.child;case 12:return be(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ee(Fs,r._currentValue),r._currentValue=s,o!==null)if(Ct(o.value,s)){if(o.children===i.children&&!qe.current){e=Ht(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=$t(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),su(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(D(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),su(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}be(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Dr(e,n),i=ct(i),r=r(i),e.flags|=1,be(t,e,r,n),e.child;case 14:return r=e.type,i=mt(r,e.pendingProps),i=mt(r.type,i),Jf(t,e,r,i,n);case 15:return Ky(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),ds(t,e),e.tag=1,ze(r)?(t=!0,Ds(e)):t=!1,Dr(e,n),qy(e,r,i),lu(e,r,i,n),du(null,e,r,!0,t,n);case 19:return Qy(t,e,n);case 22:return Jy(t,e,n)}throw Error(D(156,e.tag))};function p0(t,e){return Gg(t,e)}function PC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(t,e,n,r){return new PC(t,e,n,r)}function td(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IC(t){if(typeof t=="function")return td(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tc)return 11;if(t===xc)return 14}return 2}function hn(t,e){var n=t.alternate;return n===null?(n=ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ps(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")td(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case fr:return Bn(n.children,i,o,e);case wc:s=8,i|=8;break;case Nl:return t=ot(12,n,e,i|2),t.elementType=Nl,t.lanes=o,t;case Dl:return t=ot(13,n,e,i),t.elementType=Dl,t.lanes=o,t;case Ll:return t=ot(19,n,e,i),t.elementType=Ll,t.lanes=o,t;case _g:return ma(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cg:s=10;break e;case Sg:s=9;break e;case Tc:s=11;break e;case xc:s=14;break e;case Qt:s=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=ot(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Bn(t,e,n,r){return t=ot(7,t,r,e),t.lanes=n,t}function ma(t,e,n,r){return t=ot(22,t,r,e),t.elementType=_g,t.lanes=n,t.stateNode={isHidden:!1},t}function rl(t,e,n){return t=ot(6,t,null,e),t.lanes=n,t}function il(t,e,n){return e=ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Va(0),this.expirationTimes=Va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Va(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nd(t,e,n,r,i,o,s,u,c){return t=new MC(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ot(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$c(o),t}function RC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function m0(t){if(!t)return mn;t=t._reactInternals;e:{if(Qn(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ze(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(ze(n))return my(t,n,e)}return e}function g0(t,e,n,r,i,o,s,u,c){return t=nd(n,r,!0,t,i,o,s,u,c),t.context=m0(null),n=t.current,r=Ue(),i=fn(n),o=$t(r,i),o.callback=e??null,cn(n,o,i),t.current.lanes=i,mo(t,i,r),We(t,r),t}function ga(t,e,n,r){var i=e.current,o=Ue(),s=fn(i);return n=m0(n),e.context===null?e.context=n:e.pendingContext=n,e=$t(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cn(i,e,s),t!==null&&(xt(t,i,s,o),ls(t,i,s)),s}function Ws(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rd(t,e){sh(t,e),(t=t.alternate)&&sh(t,e)}function NC(){return null}var y0=typeof reportError=="function"?reportError:function(t){console.error(t)};function id(t){this._internalRoot=t}ya.prototype.render=id.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));ga(t,e,null,null)};ya.prototype.unmount=id.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jn(function(){ga(null,t,null,null)}),e[Gt]=null}};function ya(t){this._internalRoot=t}ya.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<en.length&&e!==0&&e<en[n].priority;n++);en.splice(n,0,t),n===0&&Yg(t)}};function od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function va(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ah(){}function DC(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Ws(s);o.call(d)}}var s=g0(e,r,t,0,null,!1,!1,"",ah);return t._reactRootContainer=s,t[Gt]=s.current,Xi(t.nodeType===8?t.parentNode:t),Jn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var d=Ws(c);u.call(d)}}var c=nd(t,0,!1,null,null,!1,!1,"",ah);return t._reactRootContainer=c,t[Gt]=c.current,Xi(t.nodeType===8?t.parentNode:t),Jn(function(){ga(e,c,n,r)}),c}function wa(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var u=i;i=function(){var c=Ws(s);u.call(c)}}ga(e,s,t,i)}else s=DC(n,e,t,i,r);return Ws(s)}Wg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xi(e.pendingLanes);n!==0&&(_c(e,n|1),We(e,me()),!(j&6)&&(zr=me()+500,Tn()))}break;case 13:Jn(function(){var r=Ot(t,1);if(r!==null){var i=Ue();xt(r,t,1,i)}}),rd(t,1)}};kc=function(t){if(t.tag===13){var e=Ot(t,134217728);if(e!==null){var n=Ue();xt(e,t,134217728,n)}rd(t,134217728)}};Kg=function(t){if(t.tag===13){var e=fn(t),n=Ot(t,e);if(n!==null){var r=Ue();xt(n,t,e,r)}rd(t,e)}};Jg=function(){return Q};jg=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};ql=function(t,e,n){switch(e){case"input":if(Ul(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ua(r);if(!i)throw Error(D(90));Eg(r),Ul(r,i)}}}break;case"textarea":Pg(t,n);break;case"select":e=n.value,e!=null&&Ir(t,!!n.multiple,e,!1)}};bg=Qc;Fg=Jn;var LC={usingClientEntryPoint:!1,Events:[yo,gr,ua,Dg,Lg,Qc]},mi={findFiberByHostInstance:Ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bC={bundleType:mi.bundleType,version:mi.version,rendererPackageName:mi.rendererPackageName,rendererConfig:mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$g(t),t===null?null:t.stateNode},findFiberByHostInstance:mi.findFiberByHostInstance||NC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{oa=Wo.inject(bC),At=Wo}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LC;Ze.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(e))throw Error(D(200));return RC(t,e,null,n)};Ze.createRoot=function(t,e){if(!od(t))throw Error(D(299));var n=!1,r="",i=y0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=nd(t,1,!1,null,null,n,!1,r,i),t[Gt]=e.current,Xi(t.nodeType===8?t.parentNode:t),new id(e)};Ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=$g(e),t=t===null?null:t.stateNode,t};Ze.flushSync=function(t){return Jn(t)};Ze.hydrate=function(t,e,n){if(!va(e))throw Error(D(200));return wa(null,t,e,!0,n)};Ze.hydrateRoot=function(t,e,n){if(!od(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=y0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=g0(e,null,t,1,n??null,i,!1,o,s),t[Gt]=e.current,Xi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ya(e)};Ze.render=function(t,e,n){if(!va(e))throw Error(D(200));return wa(null,t,e,!1,n)};Ze.unmountComponentAtNode=function(t){if(!va(t))throw Error(D(40));return t._reactRootContainer?(Jn(function(){wa(null,null,t,!1,function(){t._reactRootContainer=null,t[Gt]=null})}),!0):!1};Ze.unstable_batchedUpdates=Qc;Ze.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!va(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return wa(t,e,n,!1,r)};Ze.version="18.3.1-next-f1338f8080-20240426";function v0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v0)}catch(t){console.error(t)}}v0(),vg.exports=Ze;var w0=vg.exports;const FC=og(w0);var lh=w0;Ml.createRoot=lh.createRoot,Ml.hydrateRoot=lh.hydrateRoot;var V=(t=>(t.Home="HOME",t.MyGuides="MY_GUIDES",t.Create="CREATE",t.Profile="PROFILE",t.Ranking="RANKING",t.GuideDetail="GUIDE_DETAIL",t.EditGuide="EDIT_GUIDE",t.ShareOptions="SHARE_OPTIONS",t.ShareRanking="SHARE_RANKING",t.FarcasterTest="FARCASTER_TEST",t))(V||{});const UC="modulepreload",VC=function(t){return"/"+t},uh={},wo=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=VC(c),c in uh)return;uh[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":UC,d||(h.as="script"),h.crossOrigin="",h.href=c,u&&h.setAttribute("nonce",u),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=s,window.dispatchEvent(u),!u.defaultPrevented)throw s}return i.then(s=>{for(const u of s||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},$C=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wo(async()=>{const{default:r}=await Promise.resolve().then(()=>Zr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class sd extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class BC extends sd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ch extends sd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class dh extends sd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Su;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Su||(Su={}));var GC=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(f){try{d(r.next(f))}catch(h){s(h)}}function c(f){try{d(r.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):i(f.value).then(u,c)}d((r=r.apply(t,e||[])).next())})};class OC{constructor(e,{headers:n={},customFetch:r,region:i=Su.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=$C(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return GC(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:s}=n;let u={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(u["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let f;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=s):typeof s=="string"?(u["Content-Type"]="text/plain",f=s):typeof FormData<"u"&&s instanceof FormData?f=s:(u["Content-Type"]="application/json",f=JSON.stringify(s)));const h=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:f}).catch(x=>{throw new BC(x)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new ch(h);if(!h.ok)throw new dh(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),T;return g==="application/json"?T=yield h.json():g==="application/octet-stream"?T=yield h.blob():g==="text/event-stream"?T=h:g==="multipart/form-data"?T=yield h.formData():T=yield h.text(),{data:T,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof dh||i instanceof ch?i.context:void 0}}})}}var Ge={},ad={},Ta={},To={},xa={},Ca={},HC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Wr=HC();const qC=Wr.fetch,T0=Wr.fetch.bind(Wr),x0=Wr.Headers,zC=Wr.Request,WC=Wr.Response,Zr=Object.freeze(Object.defineProperty({__proto__:null,Headers:x0,Request:zC,Response:WC,default:T0,fetch:qC},Symbol.toStringTag,{value:"Module"})),KC=cT(Zr);var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});let JC=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Sa.default=JC;var C0=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ca,"__esModule",{value:!0});const jC=C0(KC),YC=C0(Sa);let XC=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=jC.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,u,c,d;let f=null,h=null,p=null,g=o.status,T=o.statusText;if(o.ok){if(this.method!=="HEAD"){const y=await o.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const C=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),w=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");C&&w&&w.length>1&&(p=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(f={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,g=406,T="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const C=await o.text();try{f=JSON.parse(C),Array.isArray(f)&&o.status===404&&(h=[],f=null,g=200,T="OK")}catch{o.status===404&&C===""?(g=204,T="No Content"):f={message:C}}if(f&&this.isMaybeSingle&&(!((d=f==null?void 0:f.details)===null||d===void 0)&&d.includes("0 rows"))&&(f=null,g=200,T="OK"),f&&this.shouldThrowOnError)throw new YC.default(f)}return{error:f,data:h,count:p,status:g,statusText:T}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,u,c;return{error:{message:`${(s=o==null?void 0:o.name)!==null&&s!==void 0?s:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(u=o==null?void 0:o.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Ca.default=XC;var QC=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xa,"__esModule",{value:!0});const ZC=QC(Ca);let eS=class extends ZC.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){const s=o?`${o}.order`:"order",u=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(s,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var u;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${d}"; options=${c};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};xa.default=eS;var tS=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(To,"__esModule",{value:!0});const nS=tS(xa);let rS=class extends nS.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${s}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};To.default=rS;var iS=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ta,"__esModule",{value:!0});const gi=iS(To);let oS=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let o=!1;const s=(e??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",s),r&&this.headers.append("Prefer",`count=${r}`),new gi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var i;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const s=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(s.length>0){const u=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new gi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var s;const u="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new gi.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(e,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new gi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new gi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ta.default=oS;var S0=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ad,"__esModule",{value:!0});const sS=S0(Ta),aS=S0(To);let lS=class _0{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new sS.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new _0(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var s;let u;const c=new URL(`${this.url}/rpc/${e}`);let d;r||i?(u=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(u="POST",d=n);const f=new Headers(this.headers);return o&&f.set("Prefer",`count=${o}`),new aS.default({method:u,url:c,headers:f,schema:this.schemaName,body:d,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};ad.default=lS;var ei=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.PostgrestError=Ge.PostgrestBuilder=Ge.PostgrestTransformBuilder=Ge.PostgrestFilterBuilder=Ge.PostgrestQueryBuilder=Ge.PostgrestClient=void 0;const k0=ei(ad);Ge.PostgrestClient=k0.default;const E0=ei(Ta);Ge.PostgrestQueryBuilder=E0.default;const A0=ei(To);Ge.PostgrestFilterBuilder=A0.default;const P0=ei(xa);Ge.PostgrestTransformBuilder=P0.default;const I0=ei(Ca);Ge.PostgrestBuilder=I0.default;const M0=ei(Sa);Ge.PostgrestError=M0.default;var uS=Ge.default={PostgrestClient:k0.default,PostgrestQueryBuilder:E0.default,PostgrestFilterBuilder:A0.default,PostgrestTransformBuilder:P0.default,PostgrestBuilder:I0.default,PostgrestError:M0.default};const{PostgrestClient:cS,PostgrestQueryBuilder:MV,PostgrestFilterBuilder:RV,PostgrestTransformBuilder:NV,PostgrestBuilder:DV,PostgrestError:LV}=uS;class dS{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const fS="2.15.5",hS=`realtime-js/${fS}`,pS="1.0.0",_u=1e4,mS=1e3,gS=100;var Li;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Li||(Li={}));var ve;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ve||(ve={}));var yt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(yt||(yt={}));var ku;(function(t){t.websocket="websocket"})(ku||(ku={}));var Dn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Dn||(Dn={}));class yS{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2);let s=this.HEADER_LENGTH+2;const u=r.decode(e.slice(s,s+i));s=s+i;const c=r.decode(e.slice(s,s+o));s=s+o;const d=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{ref:null,topic:u,event:c,payload:d}}}class R0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Z;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Z||(Z={}));const fh=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,s)=>(o[s]=vS(s,t,e,i),o),{})},vS=(t,e,n,r)=>{const i=e.find(u=>u.name===t),o=i==null?void 0:i.type,s=n[t];return o&&!r.includes(o)?N0(o,s):Eu(s)},N0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return CS(e,n)}switch(t){case Z.bool:return wS(e);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return TS(e);case Z.json:case Z.jsonb:return xS(e);case Z.timestamp:return SS(e);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return Eu(e);default:return Eu(e)}},Eu=t=>t,wS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},TS=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},xS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},CS=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const s=t.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(u=>N0(e,u))}return t},SS=t=>typeof t=="string"?t.replace(" ","T"):t,D0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ol{constructor(e,n,r={},i=_u){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hh||(hh={}));class bi{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:s,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bi.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=bi.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:s,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=bi.syncDiff(this.state,i,o,s),u())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),s=this.transformState(n),u={},c={};return this.map(o,(d,f)=>{s[d]||(c[d]=f)}),this.map(s,(d,f)=>{const h=o[d];if(h){const p=f.map(C=>C.presence_ref),g=h.map(C=>C.presence_ref),T=f.filter(C=>g.indexOf(C.presence_ref)<0),x=h.filter(C=>p.indexOf(C.presence_ref)<0);T.length>0&&(u[d]=T),x.length>0&&(c[d]=x)}else u[d]=f}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var d;const f=(d=e[u])!==null&&d!==void 0?d:[];if(e[u]=this.cloneDeep(c),f.length>0){const h=e[u].map(g=>g.presence_ref),p=f.filter(g=>h.indexOf(g.presence_ref)<0);e[u].unshift(...p)}r(u,f,c)}),this.map(s,(u,c)=>{let d=e[u];if(!d)return;const f=c.map(h=>h.presence_ref);d=d.filter(h=>f.indexOf(h.presence_ref)<0),e[u]=d,i(u,d,c),d.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ph;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ph||(ph={}));var Fi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Fi||(Fi={}));var bt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bt||(bt={}));class ld{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ol(this,yt.join,this.params,this.timeout),this.rejoinTimer=new R0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ve.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(yt.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new bi(this),this.broadcastEndpointURL=D0(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ve.closed){const{config:{broadcast:s,presence:u,private:c}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[Fi.PRESENCE]&&this.bindings[Fi.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},p={broadcast:s,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(bt.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(bt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var T;if(this.socket.setAuth(),g===void 0){e==null||e(bt.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,C=(T=x==null?void 0:x.length)!==null&&T!==void 0?T:0,w=[];for(let y=0;y<C;y++){const v=x[y],{filter:{event:S,schema:_,table:k,filter:A}}=v,E=g&&g[y];if(E&&E.event===S&&E.schema===_&&E.table===k&&E.filter===A)w.push(Object.assign(Object.assign({},v),{id:E.id}));else{this.unsubscribe(),this.state=ve.errored,e==null||e(bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(bt.SUBSCRIBED);return}}).receive("error",g=>{this.state=ve.errored,e==null||e(bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ve.joined&&e===Fi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:s}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,u,c;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(s=this.params)===null||s===void 0?void 0:s.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ve.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(yt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new ol(this,yt.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ve.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ol(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>gS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const s=e.toLocaleLowerCase(),{close:u,error:c,leave:d,join:f}=yt;if(r&&[u,c,d,f].indexOf(s)>=0&&r!==this._joinRef())return;let p=this._onMessage(s,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var T,x,C;return((T=g.filter)===null||T===void 0?void 0:T.event)==="*"||((C=(x=g.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===s}).map(g=>g.callback(p,r)):(o=this.bindings[s])===null||o===void 0||o.filter(g=>{var T,x,C,w,y,v;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in g){const S=g.id,_=(T=g.filter)===null||T===void 0?void 0:T.event;return S&&((x=n.ids)===null||x===void 0?void 0:x.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const S=(y=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return S==="*"||S===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===s}).map(g=>{if(typeof p=="object"&&"ids"in p){const T=p.data,{schema:x,table:C,commit_timestamp:w,type:y,errors:v}=T;p=Object.assign(Object.assign({},{schema:x,table:C,commit_timestamp:w,eventType:y,new:{},old:{},errors:v}),this._getPayloadRecords(T))}g.callback(p,r)})}_isClosed(){return this.state===ve.closed}_isJoined(){return this.state===ve.joined}_isJoining(){return this.state===ve.joining}_isLeaving(){return this.state===ve.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ld.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(yt.close,{},e)}_onError(e){this._on(yt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ve.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=fh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=fh(e.columns,e.old_record)),n}}const sl=()=>{},Ko={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_S=[1e3,2e3,5e3,1e4],kS=1e4,ES=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class AS{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_u,this.transport=null,this.heartbeatIntervalMs=Ko.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sl,this.ref=0,this.reconnectTimer=null,this.logger=sl,this.conn=null,this.sendBuffer=[],this.serializer=new yS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...s)=>wo(async()=>{const{default:u}=await Promise.resolve().then(()=>Zr);return{default:u}},void 0).then(({default:u})=>u(...s)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...s)=>o(...s)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ku.websocket}`,this.httpEndpoint=D0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=dS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pS}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Li.connecting:return Dn.Connecting;case Li.open:return Dn.Open;case Li.closing:return Dn.Closing;default:return Dn.Closed}}isConnected(){return this.connectionState()===Dn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new ld(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,s=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(mS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ko.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:s}=n,u=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(yt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([ES],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:hS};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(yt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new R0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ko.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,s,u,c,d,f;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:_u,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ko.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=e==null?void 0:e.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:sl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>_S[h-1]||kS,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(h,p)=>p(JSON.stringify(h)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ud extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function we(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class PS extends ud{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Au extends ud{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var IS=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(f){try{d(r.next(f))}catch(h){s(h)}}function c(f){try{d(r.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):i(f.value).then(u,c)}d((r=r.apply(t,e||[])).next())})};const L0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wo(async()=>{const{default:r}=await Promise.resolve().then(()=>Zr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},MS=()=>IS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wo(()=>Promise.resolve().then(()=>Zr),void 0)).Response:Response}),Pu=t=>{if(Array.isArray(t))return t.map(n=>Pu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Pu(r)}),e},RS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Zn=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(f){try{d(r.next(f))}catch(h){s(h)}}function c(f){try{d(r.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):i(f.value).then(u,c)}d((r=r.apply(t,e||[])).next())})};const al=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NS=(t,e,n)=>Zn(void 0,void 0,void 0,function*(){const r=yield MS();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const o=t.status||500,s=(i==null?void 0:i.statusCode)||o+"";e(new PS(al(i),o,s))}).catch(i=>{e(new Au(al(i),i))}):e(new Au(al(t),t))}),DS=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(RS(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function xo(t,e,n,r,i,o){return Zn(this,void 0,void 0,function*(){return new Promise((s,u)=>{t(n,DS(e,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>NS(c,u,r))})})}function Ks(t,e,n,r){return Zn(this,void 0,void 0,function*(){return xo(t,"GET",e,n,r)})}function kt(t,e,n,r,i){return Zn(this,void 0,void 0,function*(){return xo(t,"POST",e,r,i,n)})}function Iu(t,e,n,r,i){return Zn(this,void 0,void 0,function*(){return xo(t,"PUT",e,r,i,n)})}function LS(t,e,n,r){return Zn(this,void 0,void 0,function*(){return xo(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function b0(t,e,n,r,i){return Zn(this,void 0,void 0,function*(){return xo(t,"DELETE",e,r,i,n)})}var Le=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(f){try{d(r.next(f))}catch(h){s(h)}}function c(f){try{d(r.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):i(f.value).then(u,c)}d((r=r.apply(t,e||[])).next())})};const bS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class FS{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=L0(i)}uploadOrUpdate(e,n,r,i){return Le(this,void 0,void 0,function*(){try{let o;const s=Object.assign(Object.assign({},mh),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${s.cacheControl}`,u["content-type"]=s.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const d=this._removeEmptyFolders(n),f=this._getFinalPath(d),h=yield(e=="PUT"?Iu:kt)(this.fetch,`${this.url}/object/${f}`,o,Object.assign({headers:u},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(we(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Le(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),s=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${s}`);u.searchParams.set("token",n);try{let c;const d=Object.assign({upsert:mh.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const h=yield Iu(this.fetch,u.toString(),c,{headers:f});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(we(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Le(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield kt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),u=s.searchParams.get("token");if(!u)throw new ud("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:u},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}update(e,n,r){return Le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Le(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(we(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Le(this,void 0,void 0,function*(){try{return{data:{path:(yield kt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(we(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Le(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield kt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(we(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Le(this,void 0,void 0,function*(){try{const i=yield kt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(we(i))return{data:null,error:i};throw i}})}download(e,n){return Le(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Ks(this.fetch,`${this.url}/${i}/${u}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(we(u))return{data:null,error:u};throw u}})}info(e){return Le(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ks(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Pu(r),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}exists(e){return Le(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield LS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(we(r)&&r instanceof Au){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${d}`)}}}remove(e){return Le(this,void 0,void 0,function*(){try{return{data:yield b0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}list(e,n,r){return Le(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},bS),n),{prefix:e||""});return{data:yield kt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(we(i))return{data:null,error:i};throw i}})}listV2(e,n){return Le(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield kt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const US="2.11.1",VS={"X-Client-Info":`storage-js/${US}`};var rr=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(f){try{d(r.next(f))}catch(h){s(h)}}function c(f){try{d(r.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):i(f.value).then(u,c)}d((r=r.apply(t,e||[])).next())})};class $S{constructor(e,n={},r,i){const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},VS),n),this.fetch=L0(r)}listBuckets(){return rr(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(we(e))return{data:null,error:e};throw e}})}getBucket(e){return rr(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return rr(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return rr(this,void 0,void 0,function*(){try{return{data:yield Iu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}emptyBucket(e){return rr(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}deleteBucket(e){return rr(this,void 0,void 0,function*(){try{return{data:yield b0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}}class BS extends $S{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new FS(this.url,this.headers,e,this.fetch)}}const GS="2.57.2";let Si="";typeof Deno<"u"?Si="deno":typeof document<"u"?Si="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Si="react-native":Si="node";const OS={"X-Client-Info":`supabase-js-${Si}/${GS}`},HS={headers:OS},qS={schema:"public"},zS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WS={};var KS=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(f){try{d(r.next(f))}catch(h){s(h)}}function c(f){try{d(r.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):i(f.value).then(u,c)}d((r=r.apply(t,e||[])).next())})};const JS=t=>{let e;return t?e=t:typeof fetch>"u"?e=T0:e=fetch,(...n)=>e(...n)},jS=()=>typeof Headers>"u"?x0:Headers,YS=(t,e,n)=>{const r=JS(n),i=jS();return(o,s)=>KS(void 0,void 0,void 0,function*(){var u;const c=(u=yield e())!==null&&u!==void 0?u:t;let d=new i(s==null?void 0:s.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},s),{headers:d}))})};var XS=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(f){try{d(r.next(f))}catch(h){s(h)}}function c(f){try{d(r.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):i(f.value).then(u,c)}d((r=r.apply(t,e||[])).next())})};function QS(t){return t.endsWith("/")?t:t+"/"}function ZS(t,e){var n,r;const{db:i,auth:o,realtime:s,global:u}=t,{db:c,auth:d,realtime:f,global:h}=e,p={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},f),s),storage:{},global:Object.assign(Object.assign(Object.assign({},h),u),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>XS(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const F0="2.71.1",ur=30*1e3,Mu=3,ll=Mu*ur,e_="http://localhost:9999",t_="supabase.auth.token",n_={"X-Client-Info":`gotrue-js/${F0}`},Ru="X-Supabase-Api-Version",U0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},r_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,i_=10*60*1e3;class cd extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function W(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class o_ extends cd{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function s_(t){return W(t)&&t.name==="AuthApiError"}class V0 extends cd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class xn extends cd{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Yt extends xn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function a_(t){return W(t)&&t.name==="AuthSessionMissingError"}class Jo extends xn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jo extends xn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yo extends xn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function l_(t){return W(t)&&t.name==="AuthImplicitGrantRedirectError"}class gh extends xn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nu extends xn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ul(t){return W(t)&&t.name==="AuthRetryableFetchError"}class yh extends xn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Du extends xn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vh=` 	
\r=`.split(""),u_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<vh.length;e+=1)t[vh[e].charCodeAt(0)]=-2;for(let e=0;e<Js.length;e+=1)t[Js[e].charCodeAt(0)]=e;return t})();function wh(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Js[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Js[r]),e.queuedBits-=6}}function $0(t,e,n){const r=u_[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Th(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{f_(s,r,n)};for(let s=0;s<t.length;s+=1)$0(t.charCodeAt(s),i,o);return e.join("")}function c_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function d_(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}c_(r,e)}}function f_(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function h_(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)$0(t.charCodeAt(i),n,r);return new Uint8Array(e)}function p_(t){const e=[];return d_(t,n=>e.push(n)),new Uint8Array(e)}function m_(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>wh(i,n,r)),wh(null,n,r),e.join("")}function g_(t){return Math.round(Date.now()/1e3)+t}function y_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ht=()=>typeof window<"u"&&typeof document<"u",En={tested:!1,writable:!1},B0=()=>{if(!ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(En.tested)return En.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),En.tested=!0,En.writable=!0}catch{En.tested=!0,En.writable=!1}return En.writable};function v_(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const G0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wo(async()=>{const{default:r}=await Promise.resolve().then(()=>Zr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},w_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",cr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},An=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},jt=async(t,e)=>{await t.removeItem(e)};class _a{constructor(){this.promise=new _a.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}_a.promiseConstructor=Promise;function cl(t){const e=t.split(".");if(e.length!==3)throw new Du("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!r_.test(e[r]))throw new Du("JWT not in base64url format");return{header:JSON.parse(Th(e[0])),payload:JSON.parse(Th(e[1])),signature:h_(e[2]),raw:{header:e[0],payload:e[1]}}}async function T_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function x_(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const s=await t(o);if(!e(o,null,s)){r(s);return}}catch(s){if(!e(o,s)){i(s);return}}})()})}function C_(t){return("0"+t.toString(16)).substr(-2)}function S_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,C_).join("")}async function __(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function k_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await __(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ir(t,e,n=!1){const r=S_();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await cr(t,`${e}-code-verifier`,i);const o=await k_(r);return[o,r===o?"plain":"s256"]}const E_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function A_(t){const e=t.headers.get(Ru);if(!e||!e.match(E_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function P_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function I_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const M_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function or(t){if(!M_.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function dl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xh(t){return JSON.parse(JSON.stringify(t))}var R_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Rn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),N_=[502,503,504];async function Ch(t){var e;if(!w_(t))throw new Nu(Rn(t),0);if(N_.includes(t.status))throw new Nu(Rn(t),t.status);let n;try{n=await t.json()}catch(o){throw new V0(Rn(o),o)}let r;const i=A_(t);if(i&&i.getTime()>=U0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new yh(Rn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Yt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new yh(Rn(n),t.status,n.weak_password.reasons);throw new o_(Rn(n),t.status||500,r)}const D_=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function K(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Ru]||(o[Ru]=U0["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const s=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const u=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await L_(t,e,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function L_(t,e,n,r,i,o){const s=D_(e,r,i,o);let u;try{u=await t(n,Object.assign({},s))}catch(c){throw console.error(c),new Nu(Rn(c),0)}if(u.ok||await Ch(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Ch(c)}}function Dt(t){var e;let n=null;V_(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=g_(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Sh(t){const e=Dt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function nn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function b_(t){return{data:t,error:null}}function F_(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,s=R_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:u,user:c},error:null}}function U_(t){return t}function V_(t){return t.access_token&&t.refresh_token&&t.expires_in}const fl=["global","local","others"];var $_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class B_{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=G0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=fl[0]){if(fl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fl.join(", ")}`);try{return await K(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await K(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:nn})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=$_(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await K(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:F_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(W(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await K(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:nn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,s,u,c;try{const d={nextPage:null,lastPage:0,total:0},f=await K(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:U_});if(f.error)throw f.error;const h=await f.json(),p=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(c=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(T=>{const x=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(T.split(";")[1].split("=")[1]);d[`${C}Page`]=x}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(W(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){or(e);try{return await K(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:nn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){or(e);try{return await K(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:nn})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){or(e);try{return await K(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:nn})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){or(e.userId);try{const{data:n,error:r}=await K(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _deleteFactor(e){or(e.userId),or(e.id);try{return{data:await K(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}}function _h(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function G_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const sr={debug:!!(globalThis&&B0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class O0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class O_ extends O0{}async function H_(t,e,n){sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),sr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new O_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(sr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}G_();const q_={url:e_,storageKey:t_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:n_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function kh(t,e,n){return await n()}const ar={};class so{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=so.nextInstanceID,so.nextInstanceID+=1,this.instanceID>0&&ht()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},q_),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new B_({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=G0(i.fetch),this.lock=i.lock||kh,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ht()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=H_:this.lock=kh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:B0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_h(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=_h(this.memoryStorage)),ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=ar[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ar[this.storageKey]=Object.assign(Object.assign({},ar[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ar[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ar[this.storageKey]=Object.assign(Object.assign({},ar[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${F0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=v_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ht()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),l_(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:s,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",u),await this._saveSession(s),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return W(n)?{error:n}:{error:new V0("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Dt}),{data:s,error:u}=o;if(u||!s)return{data:{user:null,session:null},error:u};const c=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(W(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:f,password:h,options:p}=e;let g=null,T=null;this.flowType==="pkce"&&([g,T]=await ir(this.storage,this.storageKey)),o=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:f,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:T},xform:Dt})}else if("phone"in e){const{phone:f,password:h,options:p}=e;o=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Dt})}else throw new jo("You must provide either an email or phone number and a password");const{data:s,error:u}=o;if(u||!s)return{data:{user:null,session:null},error:u};const c=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(W(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:s,options:u}=e;n=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Sh})}else if("phone"in e){const{phone:o,password:s,options:u}=e;n=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Sh})}else throw new jo("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Jo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,o,s,u,c,d,f,h,p,g;let T,x;if("message"in e)T=e.message,x=e.signature;else{const{chain:C,wallet:w,statement:y,options:v}=e;let S;if(ht())if(typeof w=="object")S=w;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))S=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=w}const _=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const k=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),y?{statement:y}:null));let A;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")A=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)A=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)T=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),x=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(i=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(f=v==null?void 0:v.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const k=await S.signMessage(new TextEncoder().encode(T),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=k}}try{const{data:C,error:w}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:m_(x)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Dt});if(w)throw w;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Jo}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:w})}catch(C){if(W(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const n=await An(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:s}=await K(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Dt});if(await jt(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Jo}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:s})}catch(o){if(W(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:s}=e,u=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Dt}),{data:c,error:d}=u;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Jo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,o,s;try{if("email"in e){const{email:u,options:c}=e;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await ir(this.storage,this.storageKey));const{error:h}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:u,options:c}=e,{data:d,error:f}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new jo("You must provide either an email or phone number.")}catch(u){if(W(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:u}=await K(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Dt});if(u)throw u;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,d=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(W(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let o=null,s=null;return this.flowType==="pkce"&&([o,s]=await ir(this.storage,this.storageKey)),await K(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:s}),headers:this.headers,xform:b_})}catch(o){if(W(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Yt;const{error:i}=await K(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(W(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:s}=await K(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:s,error:u}=await K(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:u}}throw new jo("You must provide either an email or phone number and a type")}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await An(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ll:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await An(this.userStorage,this.storageKey+"-user");s!=null&&s.user?e.user=s.user:e.user=dl()}if(this.storage.isServer&&e.user){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,f)=>(!s&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,f))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:nn}):await this._useSession(async n=>{var r,i,o;const{data:s,error:u}=n;if(u)throw u;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yt}:await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:nn})})}catch(n){if(W(n))return a_(n)&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Yt;const s=i.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await ir(this.storage,this.storageKey));const{data:d,error:f}=await K(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:s.access_token,xform:nn});if(f)throw f;return s.user=d.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yt;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:s}=cl(e.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{session:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(W(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:u}=n;if(u)throw u;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Yt;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ht())throw new Yo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new gh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gh("No code detected.");const{data:y,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:s,expires_in:u,expires_at:c,token_type:d}=e;if(!o||!u||!s||!d)throw new Yo("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(u);let p=f+h;c&&(p=parseInt(c));const g=p-f;g*1e3<=ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const T=p-h;f-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,p,f):f-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,p,f);const{data:x,error:C}=await this._getUser(o);if(C)throw C;const w={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:h,expires_at:p,refresh_token:s,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(W(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await An(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:u}=await this.admin.signOut(s,e);if(u&&!(s_(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=y_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ir(this.storage,this.storageKey,!0));try{return await K(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(W(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var s,u,c,d,f;const{data:h,error:p}=o;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await K(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return ht()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(W(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)throw s;return await K(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await x_(async i=>(i>0&&await T_(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await K(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Dt})),(i,o)=>{const s=200*Math.pow(2,i);return o&&ul(o)&&Date.now()+s-r<ur})}catch(r){if(this._debug(n,"error",r),W(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ht()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await An(this.storage,this.storageKey);if(i&&this.userStorage){let s=await An(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await cr(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s==null?void 0:s.user)!==null&&e!==void 0?e:dl()}else if(i&&!i.user&&!i.user){const s=await An(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await jt(this.storage,this.storageKey+"-user"),await cr(this.storage,this.storageKey,i)):i.user=dl()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ll;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${ll}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),ul(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:u}=await this._getUser(i.access_token);!u&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new _a;const{data:o,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!o.session)throw new Yt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),W(o)){const s={session:null,error:o};return ul(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],s=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(s),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await cr(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=xh(i);await cr(this.storage,this.storageKey,o)}else{const i=xh(n);await cr(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await jt(this.storage,this.storageKey),await jt(this.storage,this.storageKey+"-code-verifier"),await jt(this.storage,this.storageKey+"-user"),this.userStorage&&await jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ur);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ur}ms, refresh threshold is ${Mu} ticks`),i<=Mu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof O0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,s]=await ir(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await K(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)return{data:null,error:s};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await K(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const{data:s,error:u}=await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:u})})}catch(n){if(W(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(W(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified"),o=r.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:r,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=cl(i.access_token);let u=null;s.aal&&(u=s.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const f=s.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+i_>i)return r;const{data:o,error:s}=await K(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:T}=await this.getSession();if(T||!g.session)return{data:null,error:T};r=g.session.access_token}const{header:i,payload:o,signature:s,raw:{header:u,payload:c}}=cl(r);n!=null&&n.allowExpired||P_(o.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:o,header:i,signature:s},error:null}}const f=I_(i.alg),h=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,s,p_(`${u}.${c}`)))throw new Du("Invalid JWT signature");return{data:{claims:o,header:i,signature:s},error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}}so.nextInstanceID=0;const z_=so;class W_ extends z_{constructor(e){super(e)}}var K_=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(f){try{d(r.next(f))}catch(h){s(h)}}function c(f){try{d(r.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):i(f.value).then(u,c)}d((r=r.apply(t,e||[])).next())})};class J_{constructor(e,n,r){var i,o,s;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=QS(e),c=new URL(u);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:qS,realtime:WS,auth:Object.assign(Object.assign({},zS),{storageKey:d}),global:HS},h=ZS(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=h.auth)!==null&&s!==void 0?s:{},this.headers,h.global.fetch),this.fetch=YS(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new cS(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new BS(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new OC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return K_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:u,lock:c,debug:d},f,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new W_({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),f),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new AS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const j_=(t,e,n)=>new J_(t,e,n);function Y_(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Y_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const X_={"4cd58ff3-fa6a-4ab0-80bc-e0cc22730778":{id:"4cd58ff3-fa6a-4ab0-80bc-e0cc22730778",username:"farcaster.eth",pfp_url:"https://i.imgur.com/34Iodlt.jpg",fid:1},"8126631d-d609-4b10-8406-1ad28db214e8":{id:"8126631d-d609-4b10-8406-1ad28db214e8",username:"Sci-Fi Reader",pfp_url:"https://i.imgur.com/PC3e8NJ.jpg",fid:2},"a7b8e966-a865-4567-9bdf-2639417da534":{id:"a7b8e966-a865-4567-9bdf-2639417da534",username:"Literary Bookworm",pfp_url:"https://i.imgur.com/J3G59bK.jpg",fid:3},"56e9561b-f708-43d1-ac23-9ee1b3be095c":{id:"56e9561b-f708-43d1-ac23-9ee1b3be095c",username:"philosopher_king",pfp_url:"https://i.imgur.com/mQkmy0N.jpg",fid:4},"15fef28f-4627-4db5-821f-697692f18f7c":{id:"15fef28f-4627-4db5-821f-697692f18f7c",username:"startup_guru",pfp_url:"https://i.imgur.com/T0a0bA0.jpg",fid:5},"1c10d98f-df53-4ec2-9765-c3967c4451d6":{id:"1c10d98f-df53-4ec2-9765-c3967c4451d6",username:"comic_nerd",pfp_url:"https://i.imgur.com/vH5y5Z5.jpg",fid:6},"ef4ef7fd-ade7-43d7-85d2-04c3f55ed27c":{id:"ef4ef7fd-ade7-43d7-85d2-04c3f55ed27c",username:"Tche Foundation",pfp_url:"https://i.imgur.com/d28d83A.png",fid:7}},lr=t=>{const e=X_[t]||{username:"Unknown",pfp_url:"https://i.imgur.com/PC3e8NJ.jpg",fid:0};return{authorId:t,authorFid:e.fid,authorUsername:e.username,authorPfpUrl:e.pfp_url}};let Q_=[{id:1,title:"Essential Sci-Fi Classics",description:"A journey through the golden age of science fiction, featuring timeless works that shaped the genre.",createdAt:"2024-01-15T00:00:00Z",isPublic:!0,tags:["sci-fi","classic","world-building"],...lr("8126631d-d609-4b10-8406-1ad28db214e8"),likes:3,dislikes:0,books:[{id:1,title:"Dune",author:"Frank Herbert",notes:"Focus on world-building and politics.",coverUrl:"https://i.imgur.com/sBwQ4yL.jpg",purchaseLink:"#",likes:1,dislikes:1},{id:2,title:"Foundation",author:"Isaac Asimov",notes:"A story spanning centuries.",coverUrl:"https://i.imgur.com/s4n7vVv.jpg",purchaseLink:void 0,likes:1,dislikes:0}]},{id:2,title:"Modern Literary Fiction",description:"Contemporary novels that have redefined storytelling in the 21st century.",createdAt:"2024-01-14T00:00:00Z",isPublic:!0,tags:["fiction","modern","fantasy"],...lr("a7b8e966-a865-4567-9bdf-2639417da534"),likes:1,dislikes:1,books:[{id:3,title:"The Name of the Wind",author:"Patrick Rothfuss",likes:0,dislikes:0},{id:4,title:"Mistborn: The Final Empire",author:"Brandon Sanderson",likes:0,dislikes:0}]},{id:3,title:"My Private Reading List",description:"A few books I plan to read this quarter. Not for public viewing yet.",createdAt:new Date().toISOString(),isPublic:!1,tags:["personal","to-read"],...lr("4cd58ff3-fa6a-4ab0-80bc-e0cc22730778"),likes:0,dislikes:0,books:[{id:6,title:"Project Hail Mary",author:"Andy Weir",likes:0,dislikes:0}]},{id:4,title:"Philosophy 101: The Stoics",description:"An introductory guide to the teachings of Seneca, Epictetus, and Marcus Aurelius.",createdAt:"2024-03-10T00:00:00Z",isPublic:!0,tags:["philosophy","stoicism","self-improvement"],...lr("56e9561b-f708-43d1-ac23-9ee1b3be095c"),likes:4,dislikes:0,books:[{id:7,title:"Meditations",author:"Marcus Aurelius",coverUrl:"https://i.imgur.com/e8p2t5L.jpg",likes:2,dislikes:0},{id:8,title:"Letters from a Stoic",author:"Seneca",purchaseLink:"#",likes:0,dislikes:0}]},{id:5,title:"Startup Playbook: From Idea to Exit",description:"Key readings for aspiring founders, covering product management, fundraising, and scaling a business.",createdAt:"2024-04-20T00:00:00Z",isPublic:!0,tags:["business","startup","entrepreneurship"],...lr("15fef28f-4627-4db5-821f-697692f18f7c"),likes:1,dislikes:0,books:[{id:9,title:"The Lean Startup",author:"Eric Ries",coverUrl:"https://i.imgur.com/L4u2X7L.jpg",likes:0,dislikes:0},{id:10,title:"Zero to One",author:"Peter Thiel",coverUrl:"https://i.imgur.com/7vY5rWb.jpg",likes:2,dislikes:0}]},{id:6,title:"Beyond Superheroes: A Graphic Novel Tour",description:"Explore the depth and diversity of graphic novels with these critically acclaimed stories.",createdAt:"2024-05-01T00:00:00Z",isPublic:!0,tags:["graphic novel","comics","storytelling"],...lr("1c10d98f-df53-4ec2-9765-c3967c4451d6"),likes:1,dislikes:1,books:[{id:11,title:"Maus",author:"Art Spiegelman",coverUrl:"https://i.imgur.com/G4Y2H8d.jpg",likes:0,dislikes:0},{id:12,title:"Persepolis",author:"Marjane Satrapi",coverUrl:"https://i.imgur.com/w9vA9oK.jpg",likes:0,dislikes:0},{id:13,title:"Watchmen",author:"Alan Moore",coverUrl:"https://i.imgur.com/h9yV3T5.jpg",likes:2,dislikes:1}]}],Z_=[{action:"Liked",itemTitle:"Essential Sci-Fi Classics",timestamp:new Date(Date.now()-2*60*60*1e3).toISOString()},{action:"Shared",itemTitle:"Startup Playbook: From Idea to Exit",timestamp:new Date(Date.now()-24*60*60*1e3).toISOString()},{action:"Liked",itemTitle:"Philosophy 101: The Stoics",timestamp:new Date(Date.now()-3*24*60*60*1e3).toISOString()},{action:"Disliked",itemTitle:"Modern Literary Fiction",timestamp:new Date(Date.now()-5*24*60*60*1e3).toISOString()}];const dd="wc_secret_a42c4d96bfd9e08dfdf803e8d9e0907073dd8e01390bf3f22ea8bb43_83f487fb",fd="https://api.warpcast.com/v2",hd=async t=>{try{const e=await fetch(`${fd}/user?fid=${t}`,{headers:{Authorization:`Bearer ${dd}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.json()).result.user}catch(e){return console.error("Error fetching Farcaster user:",e),null}},H0=async(t,e=25)=>{try{const n=await fetch(`${fd}/casts?fid=${t}&limit=${e}`,{headers:{Authorization:`Bearer ${dd}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return(await n.json()).result.casts}catch(n){return console.error("Error fetching user casts:",n),[]}},ek=async(t,e=10)=>{try{const r=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].slice(0,e*2).map(s=>hd(s));return(await Promise.all(r)).filter(s=>s!==null&&(s.username.toLowerCase().includes(t.toLowerCase())||s.display_name.toLowerCase().includes(t.toLowerCase()))).slice(0,e)}catch(n){return console.error("Error searching Farcaster users:",n),[]}},tk=async(t=25)=>{try{const e=[1,2,3,4,5],n=e.map(s=>H0(s,Math.ceil(t/e.length)));return(await Promise.all(n)).flat().sort((s,u)=>u.reactions.count-s.reactions.count).slice(0,t)}catch(e){return console.error("Error fetching trending casts:",e),[]}},q0=async(t,e)=>{try{const n=await fetch(`${fd}/casts`,{method:"POST",headers:{Authorization:`Bearer ${dd}`,"Content-Type":"application/json"},body:JSON.stringify({text:t,parent:e?{hash:e}:void 0})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return(await n.json()).result.cast}catch(n){return console.error("Error creating cast:",n),null}},nk=t=>{var r;const e="",n=((r=t.tags)==null?void 0:r.map(i=>`#${i}`).join(" "))||"";return`${e} ${t.title}

${t.description}

${n}

#Castlist #ReadingList`},rk=async t=>{const e=nk(t);return await q0(e)},z0="https://rygpuqnqaagihwoapdix.supabase.co",ik="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ5Z3B1cW5xYWFnaWh3b2FwZGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczMDU5MDAsImV4cCI6MjA3Mjg4MTkwMH0.DxkNHZ7duGlAYR03GEPPsMaHGK9UPdgUT5fo--eZhGQ";console.log(" Supabase configuration:",{url:z0,hasAnonKey:!0,envVars:{SUPABASE_URL:void 0,VITE_SUPABASE_URL:void 0,SUPABASE_ANON_KEY:void 0,VITE_SUPABASE_ANON_KEY:void 0}});const Gn=j_(z0,ik),hl=async t=>{let e=null;try{e=await hd(t.fid),console.log("Fetched fresh Farcaster data:",e)}catch(c){console.warn("Could not fetch fresh Farcaster data, using provided data:",c)}const n=e||t,{data:r,error:i}=await Gn.from("profiles").select("*").eq("fid",n.fid).single();if(i&&i.code!=="PGRST116")throw console.error("Error fetching profile by FID:",i),i;if(r){if(e){const{data:c,error:d}=await Gn.from("profiles").update({username:e.username,pfp_url:e.pfp_url,updated_at:new Date().toISOString()}).eq("fid",n.fid).select().single();return d?(console.error("Error updating profile:",d),r):c}return r}const o={id:crypto.randomUUID(),fid:n.fid,username:n.username,pfp_url:n.pfp_url},{data:s,error:u}=await Gn.from("profiles").insert(o).select().single();if(u)throw console.error("Error creating new profile:",u),u;return s};let wt=[...Q_];const Kr={guides:new Map,books:new Map},ok=async t=>{console.log("REAL: Fetching guides for author:",t);try{const{data:e}=await Gn.from("profiles").select("fid").eq("id",t).single();if(!e)return console.error("Profile not found for authorId:",t),[];const{data:n,error:r}=await Gn.rpc("get_user_guides_with_stats",{user_fid:e.fid,limit_count:50,offset_count:0});return r?(console.error("Error fetching user guides:",r),[]):n.map(o=>({id:o.id,title:o.title,description:o.description,coverImage:o.cover_image,tags:o.tags||[],isPublic:o.is_public,createdAt:o.created_at,authorId:t,authorFid:e.fid,authorUsername:"Loading...",authorPfpUrl:"Loading...",likes:o.like_count||0,dislikes:0,books:[]}))}catch(e){return console.error("Error in getMyGuides:",e),[]}},W0=async()=>{console.log("REAL: Fetching all public guides.");try{const{data:t,error:e}=await Gn.rpc("get_public_guides_feed",{limit_count:50,offset_count:0});return e?(console.error("Error fetching public guides:",e),[]):t.map(r=>({id:r.id,title:r.title,description:r.description,coverImage:r.cover_image,tags:r.tags||[],isPublic:!0,createdAt:r.created_at,authorId:"unknown",authorFid:r.creator_fid,authorUsername:r.creator_username,authorPfpUrl:r.creator_pfp_url,likes:r.like_count||0,dislikes:0,books:[]}))}catch(t){return console.error("Error in getPublicGuides:",t),[]}},sk=async()=>{console.log("REAL: Fetching recommended guides.");try{const{data:t,error:e}=await Gn.rpc("get_public_guides_feed",{limit_count:5,offset_count:0});return e?(console.error("Error fetching recommended guides:",e),[]):t.map(r=>({id:r.id,title:r.title,description:r.description,coverImage:r.cover_image,tags:r.tags||[],isPublic:!0,createdAt:r.created_at,authorId:"unknown",authorFid:r.creator_fid,authorUsername:r.creator_username,authorPfpUrl:r.creator_pfp_url,likes:r.like_count||0,dislikes:0,books:[]}))}catch(t){return console.error("Error in getRecommendedGuides:",t),[]}},pd=async t=>{console.log("MOCK: Fetching guide by ID:",t);const e=wt.find(n=>n.id===t);return Promise.resolve(e?JSON.parse(JSON.stringify(e)):void 0)},ak=async(t,e)=>{console.log("MOCK: Creating new guide titled:",t.title);const n={id:Math.max(...wt.map(r=>r.id))+1,...t,createdAt:new Date().toISOString(),authorId:e.id,authorFid:e.fid,authorUsername:e.username,authorPfpUrl:e.pfp_url,likes:0,dislikes:0,books:t.books.map((r,i)=>({...r,id:Date.now()+i,likes:0,dislikes:0}))};return wt.push(n),Promise.resolve(JSON.parse(JSON.stringify(n)))},lk=async(t,e)=>{console.log("MOCK: Updating guide ID:",t);let n;if(wt=wt.map(r=>r.id===t?(n={...r,...e,books:(e.books||r.books).map((i,o)=>({...i,id:i.id||Date.now()+o}))},n):r),!n)throw new Error("MOCK: Guide not found for update.");return Promise.resolve(JSON.parse(JSON.stringify(n)))},uk=async t=>{console.log("MOCK: Deleting guide ID:",t);const e=wt.length;wt=wt.filter(r=>r.id!==t);const n=wt.length<e;return Promise.resolve({success:n})},Cn=async(t,e,n)=>{const r=t==="guide"?Kr.guides:Kr.books,i=r.get(e);return wt=wt.map(o=>{const s=u=>{i===n?(n==="like"?u.likes--:u.dislikes--,r.delete(e)):(i==="like"&&u.likes--,i==="dislike"&&u.dislikes--,n==="like"?u.likes++:u.dislikes++,r.set(e,n))};return t==="guide"&&o.id===e?s(o):t==="book"&&(o.books=o.books.map(u=>(u.id===e&&s(u),u))),o}),Promise.resolve()},ck=async t=>Cn("guide",t,"like"),dk=async t=>Cn("guide",t,"like"),fk=async t=>Cn("guide",t,"dislike"),hk=async t=>Cn("guide",t,"dislike"),pk=async t=>Cn("book",t,"like"),mk=async t=>Cn("book",t,"like"),gk=async t=>Cn("book",t,"dislike"),yk=async t=>Cn("book",t,"dislike"),vk=async t=>Promise.resolve(Kr.guides.get(t)==="like"),wk=async t=>Promise.resolve(Kr.guides.get(t)==="dislike"),Tk=async t=>{const e={};return t.books.forEach(n=>{e[n.id]=Kr.books.get(n.id)==="like"}),Promise.resolve(e)},xk=async t=>{const e={};return t.books.forEach(n=>{e[n.id]=Kr.books.get(n.id)==="dislike"}),Promise.resolve(e)},K0=P.createContext(void 0),Ck=({children:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState(!0);P.useEffect(()=>{(async()=>{var f,h,p,g,T,x,C,w;i(!0);try{const y=window.farcaster&&window.farcaster.actions&&window.farcaster.actions.ready;if(console.log(" Environment detection:"),console.log("  - isMiniApp:",y),console.log("  - window.farcaster:",!!window.farcaster),y&&window.farcaster)if(console.log(" Mini App environment detected - using Quick Auth"),(f=window.farcaster.quickAuth)!=null&&f.getToken)try{console.log(" Attempting Quick Auth...");const v=await window.farcaster.quickAuth.getToken();console.log(" Quick Auth token received:",v);const S=await window.farcaster.getUser();if(S){console.log(" User info received:",S);const _=await hl(S);n(_),(h=window.farcaster.actions)!=null&&h.ready&&(window.farcaster.actions.ready(),console.log(" Called sdk.actions.ready() after auth"))}}catch(v){console.warn(" Quick Auth failed, falling back to manual auth:",v);const S=await window.farcaster.getUser();if(S){const _=await hl(S);n(_),(p=window.farcaster.actions)!=null&&p.ready&&(window.farcaster.actions.ready(),console.log(" Called sdk.actions.ready() after fallback auth"))}}else{console.log(" Quick Auth not available, using manual auth");const v=await window.farcaster.getUser();if(v){const S=await hl(v);n(S),(g=window.farcaster.actions)!=null&&g.ready&&(window.farcaster.actions.ready(),console.log(" Called sdk.actions.ready() after manual auth"))}}else console.warn("Farcaster SDK not found. Using development mode."),n({id:"dev-user-1",fid:1,username:"farcaster.eth",pfp_url:"https://i.imgur.com/34Iodlt.jpg",email:"dev@example.com"}),(x=(T=window.farcaster)==null?void 0:T.actions)!=null&&x.ready&&(window.farcaster.actions.ready(),console.log(" Called sdk.actions.ready() in development mode"))}catch(y){console.error("Error checking Farcaster session:",y),n({id:"dev-user-1",fid:1,username:"farcaster.eth",pfp_url:"https://i.imgur.com/34Iodlt.jpg",email:"dev@example.com"}),(w=(C=window.farcaster)==null?void 0:C.actions)!=null&&w.ready&&(window.farcaster.actions.ready(),console.log(" Called sdk.actions.ready() in error case"))}finally{i(!1)}})()},[]);const c={user:e,isAuthenticated:!!e,isLoading:r,login:async()=>(console.warn("Manual login is not supported in v2 compliance mode. Authentication is automatic."),{error:"Manual login not supported"}),logout:async()=>{n(null)},loginAsMockUser:d=>{console.log(" loginAsMockUser called with:",d),console.log(" Mock user details:",{id:d.id,fid:d.fid,username:d.username,pfp_url:d.pfp_url,email:d.email}),n(d),console.log(" User set in context:",d.username)}};return m.jsx(K0.Provider,{value:c,children:t})},ka=()=>{const t=P.useContext(K0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Sk=()=>{const[t,e]=P.useState({isLoaded:!1,isReady:!1,hasActions:!1});return P.useEffect(()=>{const n=()=>{var s,u,c;console.log(" Checking Farcaster SDK..."),console.log("window.farcaster:",window.farcaster);const i=!!window.farcaster,o=!!((s=window.farcaster)!=null&&s.actions);if(console.log("isLoaded:",i),console.log("hasActions:",o),e({isLoaded:i,isReady:!1,hasActions:o}),i&&o&&((c=(u=window.farcaster)==null?void 0:u.actions)!=null&&c.ready))try{console.log(" Calling sdk.actions.ready()..."),window.farcaster.actions.ready(),console.log(" Farcaster SDK ready() called successfully"),e(d=>({...d,isReady:!0}))}catch(d){console.error(" Error calling Farcaster SDK ready():",d)}else console.log(" SDK not ready yet or actions not available")};n();const r=()=>{setTimeout(n,100)};return window.addEventListener("load",r),()=>{window.removeEventListener("load",r)}},[]),t},J0=P.createContext(void 0),_k=({children:t})=>{const[e,n]=P.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});P.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")};return m.jsx(J0.Provider,{value:{theme:e,toggleTheme:r},children:t})},kk=()=>{const t=P.useContext(J0);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};let ms=[...Z_];const js=async(t,e)=>{try{const n={action:t,itemTitle:e,timestamp:new Date().toISOString()};return ms.unshift(n),ms.length>50&&ms.pop(),console.log("MOCK: Logged activity:",n),Promise.resolve()}catch(n){console.error("Could not log mock activity:",n)}},Ek=async t=>t?(console.log("MOCK: Retrieving activity log."),Promise.resolve(ms)):Promise.resolve([]),j0=P.createContext(void 0),Ak=({children:t})=>{const{user:e}=ka(),[n,r]=P.useState([]),[i,o]=P.useState([]),[s,u]=P.useState([]),[c,d]=P.useState([]),[f,h]=P.useState([]),[p,g]=P.useState({totalLikes:0,rank:null,totalRankedUsers:0}),[T,x]=P.useState(!0),C=P.useCallback((v,S)=>{const _=[...v].sort((I,b)=>b.likes-I.likes);if(h(_.slice(0,10)),!S){g({totalLikes:0,rank:null,totalRankedUsers:0});return}const k=new Map;v.forEach(I=>{if(I.authorFid){const b=k.get(I.authorFid)||0;k.set(I.authorFid,b+I.likes)}});const A=Array.from(k.entries()).map(([I,b])=>({fid:I,totalLikes:b})).sort((I,b)=>b.totalLikes-I.totalLikes),E=A.findIndex(I=>I.fid===S);let R=0,L=null;E!==-1&&(L=E+1,R=A[E].totalLikes),g({totalLikes:R,rank:L,totalRankedUsers:A.length>0?A.length:1})},[]),w=P.useCallback(async()=>{if(!e){x(!1);return}x(!0);try{const[v,S,_,k]=await Promise.all([W0(),sk(),ok(e.id),Ek(e.id)]);r(v),u(S),o(_),d(k),C(v,e.fid)}catch(v){console.error("Failed to fetch app data:",v)}finally{x(!1)}},[e,C]);P.useEffect(()=>{e&&w()},[e,w]);const y=P.useMemo(()=>({allGuides:n,myGuides:i,recommendedGuides:s,rankedGuides:f,activities:c,profileStats:p,isLoading:T,refreshAllData:w}),[n,i,s,f,c,p,T,w]);return m.jsx(j0.Provider,{value:y,children:t})},Co=()=>{const t=P.useContext(j0);if(t===void 0)throw new Error("useData must be used within a DataProvider");return t},Ke=({text:t})=>m.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",role:"status","aria-live":"polite",children:[m.jsx("div",{className:"w-12 h-12 rounded-full animate-spin border-4 border-solid border-primary-500 border-t-transparent"}),t&&m.jsx("span",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300",children:t})]}),Pk=()=>m.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center text-gray-800 dark:text-gray-200 p-4 bg-gradient-to-br from-primary-50 via-purple-50 to-blue-100 bg-300% animate-gradient dark:from-gray-900 dark:via-gray-900 dark:to-black",children:m.jsxs("div",{className:"text-center animate-fadeIn w-full max-w-sm",children:[m.jsx("h1",{className:"text-5xl font-bold text-gray-900 dark:text-gray-50 mb-3",children:"Castlist"}),m.jsx("h2",{className:"text-xl font-medium text-primary-700 dark:text-primary-400 mb-4",children:"Transform your Readings into a Social Journey"}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-md mx-auto mb-10 text-base",children:"The Castlist platform is your gateway to creating, sharing, and discovering curated lists within the Farcaster ecosystem."}),m.jsx("div",{className:"mt-10",children:m.jsx(Ke,{text:"Loading..."})})]})}),Y0=P.createContext({});function Ik(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const md=typeof window<"u",Mk=md?P.useLayoutEffect:P.useEffect,gd=P.createContext(null);function yd(t,e){t.indexOf(e)===-1&&t.push(e)}function vd(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const qt=(t,e,n)=>n>e?e:n<t?t:n;let wd=()=>{};const zt={},X0=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Q0(t){return typeof t=="object"&&t!==null}const Z0=t=>/^0[^.\s]+$/u.test(t);function Td(t){let e;return()=>(e===void 0&&(e=t()),e)}const at=t=>t,Rk=(t,e)=>n=>e(t(n)),So=(...t)=>t.reduce(Rk),ao=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class xd{constructor(){this.subscriptions=[]}add(e){return yd(this.subscriptions,e),()=>vd(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const It=t=>t*1e3,Mt=t=>t/1e3;function ev(t,e){return e?t*(1e3/e):0}const tv=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Nk=1e-7,Dk=12;function Lk(t,e,n,r,i){let o,s,u=0;do s=e+(n-e)/2,o=tv(s,r,i)-t,o>0?n=s:e=s;while(Math.abs(o)>Nk&&++u<Dk);return s}function _o(t,e,n,r){if(t===e&&n===r)return at;const i=o=>Lk(o,0,1,t,n);return o=>o===0||o===1?o:tv(i(o),e,r)}const nv=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,rv=t=>e=>1-t(1-e),iv=_o(.33,1.53,.69,.99),Cd=rv(iv),ov=nv(Cd),sv=t=>(t*=2)<1?.5*Cd(t):.5*(2-Math.pow(2,-10*(t-1))),Sd=t=>1-Math.sin(Math.acos(t)),av=rv(Sd),lv=nv(Sd),bk=_o(.42,0,1,1),Fk=_o(0,0,.58,1),uv=_o(.42,0,.58,1),Uk=t=>Array.isArray(t)&&typeof t[0]!="number",cv=t=>Array.isArray(t)&&typeof t[0]=="number",Vk={linear:at,easeIn:bk,easeInOut:uv,easeOut:Fk,circIn:Sd,circInOut:lv,circOut:av,backIn:Cd,backInOut:ov,backOut:iv,anticipate:sv},$k=t=>typeof t=="string",Eh=t=>{if(cv(t)){wd(t.length===4);const[e,n,r,i]=t;return _o(e,n,r,i)}else if($k(t))return Vk[t];return t},Xo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Bk(t,e){let n=new Set,r=new Set,i=!1,o=!1;const s=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(d.schedule(f),t()),f(u)}const d={schedule:(f,h=!1,p=!1)=>{const T=p&&i?n:r;return h&&s.add(f),T.has(f)||T.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(u=f,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,o&&(o=!1,d.process(f))}};return d}const Gk=40;function dv(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,s=Xo.reduce((v,S)=>(v[S]=Bk(o),v),{}),{setup:u,read:c,resolveKeyframes:d,preUpdate:f,update:h,preRender:p,render:g,postRender:T}=s,x=()=>{const v=zt.useManualTiming?i.timestamp:performance.now();n=!1,zt.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,Gk),1)),i.timestamp=v,i.isProcessing=!0,u.process(i),c.process(i),d.process(i),f.process(i),h.process(i),p.process(i),g.process(i),T.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},C=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Xo.reduce((v,S)=>{const _=s[S];return v[S]=(k,A=!1,E=!1)=>(n||C(),_.schedule(k,A,E)),v},{}),cancel:v=>{for(let S=0;S<Xo.length;S++)s[Xo[S]].cancel(v)},state:i,steps:s}}const{schedule:ae,cancel:gn,state:ke,steps:pl}=dv(typeof requestAnimationFrame<"u"?requestAnimationFrame:at,!0);let gs;function Ok(){gs=void 0}const He={now:()=>(gs===void 0&&He.set(ke.isProcessing||zt.useManualTiming?ke.timestamp:performance.now()),gs),set:t=>{gs=t,queueMicrotask(Ok)}},fv=t=>e=>typeof e=="string"&&e.startsWith(t),_d=fv("--"),Hk=fv("var(--"),kd=t=>Hk(t)?qk.test(t.split("/*")[0].trim()):!1,qk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ti={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},lo={...ti,transform:t=>qt(0,1,t)},Qo={...ti,default:1},Ui=t=>Math.round(t*1e5)/1e5,Ed=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zk(t){return t==null}const Wk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ad=(t,e)=>n=>!!(typeof n=="string"&&Wk.test(n)&&n.startsWith(t)||e&&!zk(n)&&Object.prototype.hasOwnProperty.call(n,e)),hv=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,s,u]=r.match(Ed);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(s),alpha:u!==void 0?parseFloat(u):1}},Kk=t=>qt(0,255,t),ml={...ti,transform:t=>Math.round(Kk(t))},Un={test:Ad("rgb","red"),parse:hv("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ml.transform(t)+", "+ml.transform(e)+", "+ml.transform(n)+", "+Ui(lo.transform(r))+")"};function Jk(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Lu={test:Ad("#"),parse:Jk,transform:Un.transform},ko=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Xt=ko("deg"),Rt=ko("%"),O=ko("px"),jk=ko("vh"),Yk=ko("vw"),Ah={...Rt,parse:t=>Rt.parse(t)/100,transform:t=>Rt.transform(t*100)},Sr={test:Ad("hsl","hue"),parse:hv("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Rt.transform(Ui(e))+", "+Rt.transform(Ui(n))+", "+Ui(lo.transform(r))+")"},ge={test:t=>Un.test(t)||Lu.test(t)||Sr.test(t),parse:t=>Un.test(t)?Un.parse(t):Sr.test(t)?Sr.parse(t):Lu.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Un.transform(t):Sr.transform(t),getAnimatableNone:t=>{const e=ge.parse(t);return e.alpha=0,ge.transform(e)}},Xk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qk(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ed))==null?void 0:e.length)||0)+(((n=t.match(Xk))==null?void 0:n.length)||0)>0}const pv="number",mv="color",Zk="var",eE="var(",Ph="${}",tE=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uo(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const u=e.replace(tE,c=>(ge.test(c)?(r.color.push(o),i.push(mv),n.push(ge.parse(c))):c.startsWith(eE)?(r.var.push(o),i.push(Zk),n.push(c)):(r.number.push(o),i.push(pv),n.push(parseFloat(c))),++o,Ph)).split(Ph);return{values:n,split:u,indexes:r,types:i}}function gv(t){return uo(t).values}function yv(t){const{split:e,types:n}=uo(t),r=e.length;return i=>{let o="";for(let s=0;s<r;s++)if(o+=e[s],i[s]!==void 0){const u=n[s];u===pv?o+=Ui(i[s]):u===mv?o+=ge.transform(i[s]):o+=i[s]}return o}}const nE=t=>typeof t=="number"?0:ge.test(t)?ge.getAnimatableNone(t):t;function rE(t){const e=gv(t);return yv(t)(e.map(nE))}const yn={test:Qk,parse:gv,createTransformer:yv,getAnimatableNone:rE};function gl(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function iE({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,s=0;if(!e)i=o=s=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;i=gl(c,u,t+1/3),o=gl(c,u,t),s=gl(c,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}function Ys(t,e){return n=>n>0?e:t}const ue=(t,e,n)=>t+(e-t)*n,yl=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},oE=[Lu,Un,Sr],sE=t=>oE.find(e=>e.test(t));function Ih(t){const e=sE(t);if(!e)return!1;let n=e.parse(t);return e===Sr&&(n=iE(n)),n}const Mh=(t,e)=>{const n=Ih(t),r=Ih(e);if(!n||!r)return Ys(t,e);const i={...n};return o=>(i.red=yl(n.red,r.red,o),i.green=yl(n.green,r.green,o),i.blue=yl(n.blue,r.blue,o),i.alpha=ue(n.alpha,r.alpha,o),Un.transform(i))},bu=new Set(["none","hidden"]);function aE(t,e){return bu.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function lE(t,e){return n=>ue(t,e,n)}function Pd(t){return typeof t=="number"?lE:typeof t=="string"?kd(t)?Ys:ge.test(t)?Mh:dE:Array.isArray(t)?vv:typeof t=="object"?ge.test(t)?Mh:uE:Ys}function vv(t,e){const n=[...t],r=n.length,i=t.map((o,s)=>Pd(o)(o,e[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}}function uE(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Pd(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function cE(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],s=t.indexes[o][r[o]],u=t.values[s]??0;n[i]=u,r[o]++}return n}const dE=(t,e)=>{const n=yn.createTransformer(e),r=uo(t),i=uo(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?bu.has(t)&&!i.values.length||bu.has(e)&&!r.values.length?aE(t,e):So(vv(cE(r,i),i.values),n):Ys(t,e)};function wv(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ue(t,e,n):Pd(t)(t,e)}const fE=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ae.update(e,n),stop:()=>gn(e),now:()=>ke.isProcessing?ke.timestamp:He.now()}},Tv=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Xs=2e4;function Id(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Xs;)e+=n,r=t.next(e);return e>=Xs?1/0:e}function hE(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Id(r),Xs);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:Mt(i)}}const pE=5;function xv(t,e,n){const r=Math.max(e-pE,0);return ev(n-t(r),e-r)}const fe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vl=.001;function mE({duration:t=fe.duration,bounce:e=fe.bounce,velocity:n=fe.velocity,mass:r=fe.mass}){let i,o,s=1-e;s=qt(fe.minDamping,fe.maxDamping,s),t=qt(fe.minDuration,fe.maxDuration,Mt(t)),s<1?(i=d=>{const f=d*s,h=f*t,p=f-n,g=Fu(d,s),T=Math.exp(-h);return vl-p/g*T},o=d=>{const h=d*s*t,p=h*n+n,g=Math.pow(s,2)*Math.pow(d,2)*t,T=Math.exp(-h),x=Fu(Math.pow(d,2),s);return(-i(d)+vl>0?-1:1)*((p-g)*T)/x}):(i=d=>{const f=Math.exp(-d*t),h=(d-n)*t+1;return-vl+f*h},o=d=>{const f=Math.exp(-d*t),h=(n-d)*(t*t);return f*h});const u=5/t,c=yE(i,o,u);if(t=It(t),isNaN(c))return{stiffness:fe.stiffness,damping:fe.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:s*2*Math.sqrt(r*d),duration:t}}}const gE=12;function yE(t,e,n){let r=n;for(let i=1;i<gE;i++)r=r-t(r)/e(r);return r}function Fu(t,e){return t*Math.sqrt(1-e*e)}const vE=["duration","bounce"],wE=["stiffness","damping","mass"];function Rh(t,e){return e.some(n=>t[n]!==void 0)}function TE(t){let e={velocity:fe.velocity,stiffness:fe.stiffness,damping:fe.damping,mass:fe.mass,isResolvedFromDuration:!1,...t};if(!Rh(t,wE)&&Rh(t,vE))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*qt(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:fe.mass,stiffness:i,damping:o}}else{const n=mE(t);e={...e,...n,mass:fe.mass},e.isResolvedFromDuration=!0}return e}function Qs(t=fe.visualDuration,e=fe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:d,mass:f,duration:h,velocity:p,isResolvedFromDuration:g}=TE({...n,velocity:-Mt(n.velocity||0)}),T=p||0,x=d/(2*Math.sqrt(c*f)),C=s-o,w=Mt(Math.sqrt(c/f)),y=Math.abs(C)<5;r||(r=y?fe.restSpeed.granular:fe.restSpeed.default),i||(i=y?fe.restDelta.granular:fe.restDelta.default);let v;if(x<1){const _=Fu(w,x);v=k=>{const A=Math.exp(-x*w*k);return s-A*((T+x*w*C)/_*Math.sin(_*k)+C*Math.cos(_*k))}}else if(x===1)v=_=>s-Math.exp(-w*_)*(C+(T+w*C)*_);else{const _=w*Math.sqrt(x*x-1);v=k=>{const A=Math.exp(-x*w*k),E=Math.min(_*k,300);return s-A*((T+x*w*C)*Math.sinh(E)+_*C*Math.cosh(E))/_}}const S={calculatedDuration:g&&h||null,next:_=>{const k=v(_);if(g)u.done=_>=h;else{let A=_===0?T:0;x<1&&(A=_===0?It(T):xv(v,_,k));const E=Math.abs(A)<=r,R=Math.abs(s-k)<=i;u.done=E&&R}return u.value=u.done?s:k,u},toString:()=>{const _=Math.min(Id(S),Xs),k=Tv(A=>S.next(_*A).value,_,30);return _+"ms "+k},toTransition:()=>{}};return S}Qs.applyToOptions=t=>{const e=hE(t,100,Qs);return t.ease=e.ease,t.duration=It(e.duration),t.type="keyframes",t};function Uu({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:u,max:c,restDelta:d=.5,restSpeed:f}){const h=t[0],p={done:!1,value:h},g=E=>u!==void 0&&E<u||c!==void 0&&E>c,T=E=>u===void 0?c:c===void 0||Math.abs(u-E)<Math.abs(c-E)?u:c;let x=n*e;const C=h+x,w=s===void 0?C:s(C);w!==C&&(x=w-h);const y=E=>-x*Math.exp(-E/r),v=E=>w+y(E),S=E=>{const R=y(E),L=v(E);p.done=Math.abs(R)<=d,p.value=p.done?w:L};let _,k;const A=E=>{g(p.value)&&(_=E,k=Qs({keyframes:[p.value,T(p.value)],velocity:xv(v,E,p.value),damping:i,stiffness:o,restDelta:d,restSpeed:f}))};return A(0),{calculatedDuration:null,next:E=>{let R=!1;return!k&&_===void 0&&(R=!0,S(E),A(E)),_!==void 0&&E>=_?k.next(E-_):(!R&&S(E),p)}}}function xE(t,e,n){const r=[],i=n||zt.mix||wv,o=t.length-1;for(let s=0;s<o;s++){let u=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||at:e;u=So(c,u)}r.push(u)}return r}function CE(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(wd(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=xE(e,r,i),c=u.length,d=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const p=ao(t[h],t[h+1],f);return u[h](p)};return n?f=>d(qt(t[0],t[o-1],f)):d}function SE(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ao(0,e,r);t.push(ue(n,1,i))}}function _E(t){const e=[0];return SE(e,t.length-1),e}function kE(t,e){return t.map(n=>n*e)}function EE(t,e){return t.map(()=>e||uv).splice(0,t.length-1)}function Vi({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Uk(r)?r.map(Eh):Eh(r),o={done:!1,value:e[0]},s=kE(n&&n.length===e.length?n:_E(e),t),u=CE(s,e,{ease:Array.isArray(i)?i:EE(e,i)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}const AE=t=>t!==null;function Md(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(AE),u=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const PE={decay:Uu,inertia:Uu,tween:Vi,keyframes:Vi,spring:Qs};function Cv(t){typeof t.type=="string"&&(t.type=PE[t.type])}class Rd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const IE=t=>t/100;class Nd extends Rd{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==He.now()&&this.tick(He.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Cv(e);const{type:n=Vi,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:s=0}=e;let{keyframes:u}=e;const c=n||Vi;c!==Vi&&typeof u[0]!="number"&&(this.mixKeyframes=So(IE,wv(u[0],u[1])),u=[0,100]);const d=c({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...u].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=Id(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:s,resolvedDuration:u,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:f,repeat:h,repeatType:p,repeatDelay:g,type:T,onUpdate:x,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-d*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let v=this.currentTime,S=r;if(h){const E=Math.min(this.currentTime,i)/u;let R=Math.floor(E),L=E%1;!L&&E>=1&&(L=1),L===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(p==="reverse"?(L=1-L,g&&(L-=g/u)):p==="mirror"&&(S=s)),v=qt(0,1,L)*u}const _=y?{done:!1,value:f[0]}:S.next(v);o&&(_.value=o(_.value));let{done:k}=_;!y&&c!==null&&(k=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return A&&T!==Uu&&(_.value=Md(f,this.options,C,this.speed)),x&&x(_.value),A&&this.finish(),_}then(e,n){return this.finished.then(e,n)}get duration(){return Mt(this.calculatedDuration)}get time(){return Mt(this.currentTime)}set time(e){var n;e=It(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(He.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Mt(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=fE,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(He.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function ME(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Vn=t=>t*180/Math.PI,Vu=t=>{const e=Vn(Math.atan2(t[1],t[0]));return $u(e)},RE={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Vu,rotateZ:Vu,skewX:t=>Vn(Math.atan(t[1])),skewY:t=>Vn(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},$u=t=>(t=t%360,t<0&&(t+=360),t),Nh=Vu,Dh=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Lh=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),NE={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Dh,scaleY:Lh,scale:t=>(Dh(t)+Lh(t))/2,rotateX:t=>$u(Vn(Math.atan2(t[6],t[5]))),rotateY:t=>$u(Vn(Math.atan2(-t[2],t[0]))),rotateZ:Nh,rotate:Nh,skewX:t=>Vn(Math.atan(t[4])),skewY:t=>Vn(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Bu(t){return t.includes("scale")?1:0}function Gu(t,e){if(!t||t==="none")return Bu(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=NE,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=RE,i=u}if(!i)return Bu(e);const o=r[e],s=i[1].split(",").map(LE);return typeof o=="function"?o(s):s[o]}const DE=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Gu(n,e)};function LE(t){return parseFloat(t.trim())}const ni=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ri=new Set(ni),bh=t=>t===ti||t===O,bE=new Set(["x","y","z"]),FE=ni.filter(t=>!bE.has(t));function UE(t){const e=[];return FE.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const On={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Gu(e,"x"),y:(t,{transform:e})=>Gu(e,"y")};On.translateX=On.x;On.translateY=On.y;const Hn=new Set;let Ou=!1,Hu=!1,qu=!1;function Sv(){if(Hu){const t=Array.from(Hn).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=UE(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,s])=>{var u;(u=r.getValue(o))==null||u.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Hu=!1,Ou=!1,Hn.forEach(t=>t.complete(qu)),Hn.clear()}function _v(){Hn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Hu=!0)})}function VE(){qu=!0,_v(),Sv(),qu=!1}class Dd{constructor(e,n,r,i,o,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Hn.add(this),Ou||(Ou=!0,ae.read(_v),ae.resolveKeyframes(Sv))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),s=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,s);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=s),i&&o===void 0&&i.set(e[0])}ME(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Hn.delete(this)}cancel(){this.state==="scheduled"&&(Hn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $E=t=>t.startsWith("--");function BE(t,e,n){$E(e)?t.style.setProperty(e,n):t.style[e]=n}const GE=Td(()=>window.ScrollTimeline!==void 0),OE={};function HE(t,e){const n=Td(t);return()=>OE[e]??n()}const kv=HE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_i=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Fh={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_i([0,.65,.55,1]),circOut:_i([.55,0,1,.45]),backIn:_i([.31,.01,.66,-.59]),backOut:_i([.33,1.53,.69,.99])};function Ev(t,e){if(t)return typeof t=="function"?kv()?Tv(t,e):"ease-out":cv(t)?_i(t):Array.isArray(t)?t.map(n=>Ev(n,e)||Fh.easeOut):Fh[t]}function qE(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:u="easeOut",times:c}={},d=void 0){const f={[e]:n};c&&(f.offset=c);const h=Ev(u,i);Array.isArray(h)&&(f.easing=h);const p={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"};return d&&(p.pseudoElement=d),t.animate(f,p)}function Av(t){return typeof t=="function"&&"applyToOptions"in t}function zE({type:t,...e}){return Av(t)&&kv()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class WE extends Rd{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:s=!1,finalKeyframe:u,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=s,this.options=e,wd(typeof e.type!="string");const d=zE(e);this.animation=qE(n,r,i,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const f=Md(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(f):BE(n,r,f),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Mt(Number(e))}get time(){return Mt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=It(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&GE()?(this.animation.timeline=e,at):n(this)}}const Pv={anticipate:sv,backInOut:ov,circInOut:lv};function KE(t){return t in Pv}function JE(t){typeof t.ease=="string"&&KE(t.ease)&&(t.ease=Pv[t.ease])}const Uh=10;class jE extends WE{constructor(e){JE(e),Cv(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new Nd({...s,autoplay:!1}),c=It(this.finishedTime??this.time);n.setWithVelocity(u.sample(c-Uh).value,u.sample(c).value,Uh),u.stop()}}const Vh=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yn.test(t)||t==="0")&&!t.startsWith("url("));function YE(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function XE(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],s=Vh(i,e),u=Vh(o,e);return!s||!u?!1:YE(t)||(n==="spring"||Av(n))&&r}function zu(t){t.duration=0,t.type}const QE=new Set(["opacity","clipPath","filter","transform"]),ZE=Td(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function eA(t){var f;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:s}=t;if(!(((f=e==null?void 0:e.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return ZE()&&n&&QE.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&o!==0&&s!=="inertia"}const tA=40;class nA extends Rd{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",keyframes:u,name:c,motionValue:d,element:f,...h}){var T;super(),this.stop=()=>{var x,C;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=He.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:s,name:c,motionValue:d,element:f,...h},g=(f==null?void 0:f.KeyframeResolver)||Dd;this.keyframeResolver=new g(u,(x,C,w)=>this.onKeyframesResolved(x,C,p,!w),c,d,f),(T=this.keyframeResolver)==null||T.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:o,type:s,velocity:u,delay:c,isHandoff:d,onUpdate:f}=r;this.resolvedAt=He.now(),XE(e,o,s,u)||((zt.instantAnimations||!c)&&(f==null||f(Md(e,r,n))),e[0]=e[e.length-1],zu(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>tA?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!d&&eA(p)?new jE({...p,element:p.motionValue.owner.current}):new Nd(p);g.finished.then(()=>this.notifyFinished()).catch(at),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),VE()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const rA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function iA(t){const e=rA.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Iv(t,e,n=1){const[r,i]=iA(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return X0(s)?parseFloat(s):s}return kd(i)?Iv(i,e,n+1):i}function Ld(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Mv=new Set(["width","height","top","left","right","bottom",...ni]),oA={test:t=>t==="auto",parse:t=>t},Rv=t=>e=>e.test(t),Nv=[ti,O,Rt,Xt,Yk,jk,oA],$h=t=>Nv.find(Rv(t));function sA(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Z0(t):!0}const aA=new Set(["brightness","contrast","saturate","opacity"]);function lA(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ed)||[];if(!r)return t;const i=n.replace(r,"");let o=aA.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const uA=/\b([a-z-]*)\(.*?\)/gu,Wu={...yn,getAnimatableNone:t=>{const e=t.match(uA);return e?e.map(lA).join(" "):t}},Bh={...ti,transform:Math.round},cA={rotate:Xt,rotateX:Xt,rotateY:Xt,rotateZ:Xt,scale:Qo,scaleX:Qo,scaleY:Qo,scaleZ:Qo,skew:Xt,skewX:Xt,skewY:Xt,distance:O,translateX:O,translateY:O,translateZ:O,x:O,y:O,z:O,perspective:O,transformPerspective:O,opacity:lo,originX:Ah,originY:Ah,originZ:O},bd={borderWidth:O,borderTopWidth:O,borderRightWidth:O,borderBottomWidth:O,borderLeftWidth:O,borderRadius:O,radius:O,borderTopLeftRadius:O,borderTopRightRadius:O,borderBottomRightRadius:O,borderBottomLeftRadius:O,width:O,maxWidth:O,height:O,maxHeight:O,top:O,right:O,bottom:O,left:O,padding:O,paddingTop:O,paddingRight:O,paddingBottom:O,paddingLeft:O,margin:O,marginTop:O,marginRight:O,marginBottom:O,marginLeft:O,backgroundPositionX:O,backgroundPositionY:O,...cA,zIndex:Bh,fillOpacity:lo,strokeOpacity:lo,numOctaves:Bh},dA={...bd,color:ge,backgroundColor:ge,outlineColor:ge,fill:ge,stroke:ge,borderColor:ge,borderTopColor:ge,borderRightColor:ge,borderBottomColor:ge,borderLeftColor:ge,filter:Wu,WebkitFilter:Wu},Dv=t=>dA[t];function Lv(t,e){let n=Dv(t);return n!==Wu&&(n=yn),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fA=new Set(["auto","none","0"]);function hA(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!fA.has(o)&&uo(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=Lv(n,i)}class pA extends Dd{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),kd(d))){const f=Iv(d,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Mv.has(r)||e.length!==2)return;const[i,o]=e,s=$h(i),u=$h(o);if(s!==u)if(bh(s)&&bh(u))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else On[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||sA(e[i]))&&r.push(i);r.length&&hA(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=On[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,s=r[o];r[o]=On[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function mA(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const bv=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function gA(t){return Q0(t)&&"offsetHeight"in t}const Gh=30,yA=t=>!isNaN(parseFloat(t));class vA{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=He.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=He.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=yA(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new xd);const r=this.events[e].add(n);return e==="change"?()=>{r(),ae.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=He.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Gh)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Gh);return ev(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jr(t,e){return new vA(t,e)}const{schedule:Fd}=dv(queueMicrotask,!1),pt={x:!1,y:!1};function Fv(){return pt.x||pt.y}function wA(t){return t==="x"||t==="y"?pt[t]?null:(pt[t]=!0,()=>{pt[t]=!1}):pt.x||pt.y?null:(pt.x=pt.y=!0,()=>{pt.x=pt.y=!1})}function Uv(t,e){const n=mA(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Oh(t){return!(t.pointerType==="touch"||Fv())}function TA(t,e,n={}){const[r,i,o]=Uv(t,n),s=u=>{if(!Oh(u))return;const{target:c}=u,d=e(c,u);if(typeof d!="function"||!c)return;const f=h=>{Oh(h)&&(d(h),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,i)};return r.forEach(u=>{u.addEventListener("pointerenter",s,i)}),o}const Vv=(t,e)=>e?t===e?!0:Vv(t,e.parentElement):!1,Ud=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,xA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CA(t){return xA.has(t.tagName)||t.tabIndex!==-1}const ys=new WeakSet;function Hh(t){return e=>{e.key==="Enter"&&t(e)}}function wl(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const SA=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Hh(()=>{if(ys.has(n))return;wl(n,"down");const i=Hh(()=>{wl(n,"up")}),o=()=>wl(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function qh(t){return Ud(t)&&!Fv()}function _A(t,e,n={}){const[r,i,o]=Uv(t,n),s=u=>{const c=u.currentTarget;if(!qh(u))return;ys.add(c);const d=e(c,u),f=(g,T)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),ys.has(c)&&ys.delete(c),qh(g)&&typeof d=="function"&&d(g,{success:T})},h=g=>{f(g,c===window||c===document||n.useGlobalTarget||Vv(c,g.target))},p=g=>{f(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",s,i),gA(u)&&(u.addEventListener("focus",d=>SA(d,i)),!CA(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function $v(t){return Q0(t)&&"ownerSVGElement"in t}function kA(t){return $v(t)&&t.tagName==="svg"}const Re=t=>!!(t&&t.getVelocity),EA=[...Nv,ge,yn],AA=t=>EA.find(Rv(t)),Bv=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function PA(t=!0){const e=P.useContext(gd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=P.useId();P.useEffect(()=>{if(t)return i(o)},[t]);const s=P.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,s]:[!0]}const Gv=P.createContext({strict:!1}),zh={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jr={};for(const t in zh)jr[t]={isEnabled:e=>zh[t].some(n=>!!e[n])};function IA(t){for(const e in t)jr[e]={...jr[e],...t[e]}}const MA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zs(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||MA.has(t)}let Ov=t=>!Zs(t);function RA(t){typeof t=="function"&&(Ov=e=>e.startsWith("on")?!Zs(e):t(e))}try{RA(require("@emotion/is-prop-valid").default)}catch{}function NA(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Ov(i)||n===!0&&Zs(i)||!e&&!Zs(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Ea=P.createContext({});function Aa(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function co(t){return typeof t=="string"||Array.isArray(t)}const Vd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$d=["initial",...Vd];function Pa(t){return Aa(t.animate)||$d.some(e=>co(t[e]))}function Hv(t){return!!(Pa(t)||t.variants)}function DA(t,e){if(Pa(t)){const{initial:n,animate:r}=t;return{initial:n===!1||co(n)?n:void 0,animate:co(r)?r:void 0}}return t.inherit!==!1?e:{}}function LA(t){const{initial:e,animate:n}=DA(t,P.useContext(Ea));return P.useMemo(()=>({initial:e,animate:n}),[Wh(e),Wh(n)])}function Wh(t){return Array.isArray(t)?t.join(" "):t}const fo={};function bA(t){for(const e in t)fo[e]=t[e],_d(e)&&(fo[e].isCSSVariable=!0)}function qv(t,{layout:e,layoutId:n}){return ri.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!fo[t]||t==="opacity")}const FA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},UA=ni.length;function VA(t,e,n){let r="",i=!0;for(let o=0;o<UA;o++){const s=ni[o],u=t[s];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(s.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const d=bv(u,bd[s]);if(!c){i=!1;const f=FA[s]||s;r+=`${f}(${d}) `}n&&(e[s]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Bd(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let s=!1,u=!1;for(const c in e){const d=e[c];if(ri.has(c)){s=!0;continue}else if(_d(c)){i[c]=d;continue}else{const f=bv(d,bd[c]);c.startsWith("origin")?(u=!0,o[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=VA(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:d="50%",originZ:f=0}=o;r.transformOrigin=`${c} ${d} ${f}`}}const Gd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zv(t,e,n){for(const r in e)!Re(e[r])&&!qv(r,n)&&(t[r]=e[r])}function $A({transformTemplate:t},e){return P.useMemo(()=>{const n=Gd();return Bd(n,e,t),Object.assign({},n.vars,n.style)},[e])}function BA(t,e){const n=t.style||{},r={};return zv(r,n,t),Object.assign(r,$A(t,e)),r}function GA(t,e){const n={},r=BA(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const OA={offset:"stroke-dashoffset",array:"stroke-dasharray"},HA={offset:"strokeDashoffset",array:"strokeDasharray"};function qA(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?OA:HA;t[o.offset]=O.transform(-r);const s=O.transform(e),u=O.transform(n);t[o.array]=`${s} ${u}`}function Wv(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:s=0,...u},c,d,f){if(Bd(t,u,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&qA(h,i,o,s,!1)}const Kv=()=>({...Gd(),attrs:{}}),Jv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function zA(t,e,n,r){const i=P.useMemo(()=>{const o=Kv();return Wv(o,e,Jv(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};zv(o,t.style,t),i.style={...o,...i.style}}return i}const WA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Od(t){return typeof t!="string"||t.includes("-")?!1:!!(WA.indexOf(t)>-1||/[A-Z]/u.test(t))}function KA(t,e,n,{latestValues:r},i,o=!1){const u=(Od(t)?zA:GA)(e,r,i,t),c=NA(e,typeof t=="string",o),d=t!==P.Fragment?{...c,...u,ref:n}:{},{children:f}=e,h=P.useMemo(()=>Re(f)?f.get():f,[f]);return P.createElement(t,{...d,children:h})}function Kh(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Hd(t,e,n,r){if(typeof e=="function"){const[i,o]=Kh(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=Kh(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function vs(t){return Re(t)?t.get():t}function JA({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:jA(n,r,i,t),renderState:e()}}function jA(t,e,n,r){const i={},o=r(t,{});for(const p in o)i[p]=vs(o[p]);let{initial:s,animate:u}=t;const c=Pa(t),d=Hv(t);e&&d&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),u===void 0&&(u=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?u:s;if(h&&typeof h!="boolean"&&!Aa(h)){const p=Array.isArray(h)?h:[h];for(let g=0;g<p.length;g++){const T=Hd(t,p[g]);if(T){const{transitionEnd:x,transition:C,...w}=T;for(const y in w){let v=w[y];if(Array.isArray(v)){const S=f?v.length-1:0;v=v[S]}v!==null&&(i[y]=v)}for(const y in x)i[y]=x[y]}}}return i}const jv=t=>(e,n)=>{const r=P.useContext(Ea),i=P.useContext(gd),o=()=>JA(t,e,r,i);return n?o():Ik(o)};function qd(t,e,n){var o;const{style:r}=t,i={};for(const s in r)(Re(r[s])||e.style&&Re(e.style[s])||qv(s,t)||((o=n==null?void 0:n.getValue(s))==null?void 0:o.liveStyle)!==void 0)&&(i[s]=r[s]);return i}const YA=jv({scrapeMotionValuesFromProps:qd,createRenderState:Gd});function Yv(t,e,n){const r=qd(t,e,n);for(const i in t)if(Re(t[i])||Re(e[i])){const o=ni.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const XA=jv({scrapeMotionValuesFromProps:Yv,createRenderState:Kv}),QA=Symbol.for("motionComponentSymbol");function _r(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ZA(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):_r(n)&&(n.current=r))},[e])}const zd=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),e1="framerAppearId",Xv="data-"+zd(e1),Qv=P.createContext({});function t1(t,e,n,r,i){var x,C;const{visualElement:o}=P.useContext(Ea),s=P.useContext(Gv),u=P.useContext(gd),c=P.useContext(Bv).reducedMotion,d=P.useRef(null);r=r||s.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,h=P.useContext(Qv);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&n1(d.current,n,i,h);const p=P.useRef(!1);P.useInsertionEffect(()=>{f&&p.current&&f.update(n,u)});const g=n[Xv],T=P.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,g)));return Mk(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),T.current&&f.animationState&&f.animationState.animateChanges())}),P.useEffect(()=>{f&&(!T.current&&f.animationState&&f.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),T.current=!1),f.enteringChildren=void 0)}),f}function n1(t,e,n,r){const{layoutId:i,layout:o,drag:s,dragConstraints:u,layoutScroll:c,layoutRoot:d,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Zv(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!s||u&&_r(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:d})}function Zv(t){if(t)return t.options.allowProjection!==!1?t.projection:Zv(t.parent)}function Tl(t,{forwardMotionProps:e=!1}={},n,r){n&&IA(n);const i=Od(t)?XA:YA;function o(u,c){let d;const f={...P.useContext(Bv),...u,layoutId:r1(u)},{isStatic:h}=f,p=LA(u),g=i(u,h);if(!h&&md){i1();const T=o1(f);d=T.MeasureLayout,p.visualElement=t1(t,g,f,r,T.ProjectionNode)}return m.jsxs(Ea.Provider,{value:p,children:[d&&p.visualElement?m.jsx(d,{visualElement:p.visualElement,...f}):null,KA(t,u,ZA(g,p.visualElement,c),g,h,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=P.forwardRef(o);return s[QA]=t,s}function r1({layoutId:t}){const e=P.useContext(Y0).id;return e&&t!==void 0?e+"-"+t:t}function i1(t,e){P.useContext(Gv).strict}function o1(t){const{drag:e,layout:n}=jr;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function s1(t,e){if(typeof Proxy>"u")return Tl;const n=new Map,r=(o,s)=>Tl(o,s,t,e),i=(o,s)=>r(o,s);return new Proxy(i,{get:(o,s)=>s==="create"?r:(n.has(s)||n.set(s,Tl(s,void 0,t,e)),n.get(s))})}function ew({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function a1({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function l1(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xl(t){return t===void 0||t===1}function Ku({scale:t,scaleX:e,scaleY:n}){return!xl(t)||!xl(e)||!xl(n)}function Nn(t){return Ku(t)||tw(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function tw(t){return Jh(t.x)||Jh(t.y)}function Jh(t){return t&&t!=="0%"}function ea(t,e,n){const r=t-n,i=e*r;return n+i}function jh(t,e,n,r,i){return i!==void 0&&(t=ea(t,i,r)),ea(t,n,r)+e}function Ju(t,e=0,n=1,r,i){t.min=jh(t.min,e,n,r,i),t.max=jh(t.max,e,n,r,i)}function nw(t,{x:e,y:n}){Ju(t.x,e.translate,e.scale,e.originPoint),Ju(t.y,n.translate,n.scale,n.originPoint)}const Yh=.999999999999,Xh=1.0000000000001;function u1(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,s;for(let u=0;u<i;u++){o=n[u],s=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Er(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,nw(t,s)),r&&Nn(o.latestValues)&&Er(t,o.latestValues))}e.x<Xh&&e.x>Yh&&(e.x=1),e.y<Xh&&e.y>Yh&&(e.y=1)}function kr(t,e){t.min=t.min+e,t.max=t.max+e}function Qh(t,e,n,r,i=.5){const o=ue(t.min,t.max,i);Ju(t,e,n,o,r)}function Er(t,e){Qh(t.x,e.x,e.scaleX,e.scale,e.originX),Qh(t.y,e.y,e.scaleY,e.scale,e.originY)}function rw(t,e){return ew(l1(t.getBoundingClientRect(),e))}function c1(t,e,n){const r=rw(t,n),{scroll:i}=e;return i&&(kr(r.x,i.offset.x),kr(r.y,i.offset.y)),r}const Zh=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ar=()=>({x:Zh(),y:Zh()}),ep=()=>({min:0,max:0}),pe=()=>({x:ep(),y:ep()}),ju={current:null},iw={current:!1};function d1(){if(iw.current=!0,!!md)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ju.current=t.matches;t.addEventListener("change",e),e()}else ju.current=!1}const f1=new WeakMap;function h1(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Re(i))t.addValue(r,i);else if(Re(o))t.addValue(r,Jr(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,Jr(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const tp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class p1{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=He.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,ae.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Pa(n),this.isVariantNode=Hv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const g=h[p];c[p]!==void 0&&Re(g)&&g.set(c[p])}}mount(e){var n;this.current=e,f1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),iw.current||d1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ju.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),gn(this.notifyUpdate),gn(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ri.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&ae.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jr){const n=jr[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<tp.length;r++){const i=tp[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,s=e[o];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=h1(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Jr(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(X0(r)||Z0(r))?r=parseFloat(r):!AA(r)&&yn.test(n)&&(r=Lv(e,n)),this.setBaseTarget(e,Re(r)?r.get():r)),Re(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=Hd(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Re(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new xd),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Fd.render(this.render)}}class ow extends p1{constructor(){super(...arguments),this.KeyframeResolver=pA}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Re(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function sw(t,{style:e,vars:n},r,i){const o=t.style;let s;for(s in e)o[s]=e[s];i==null||i.applyProjectionStyles(o,r);for(s in n)o.setProperty(s,n[s])}function m1(t){return window.getComputedStyle(t)}class g1 extends ow{constructor(){super(...arguments),this.type="html",this.renderInstance=sw}readValueFromInstance(e,n){var r;if(ri.has(n))return(r=this.projection)!=null&&r.isProjecting?Bu(n):DE(e,n);{const i=m1(e),o=(_d(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rw(e,n)}build(e,n,r){Bd(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return qd(e,n,r)}}const aw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function y1(t,e,n,r){sw(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(aw.has(i)?i:zd(i),e.attrs[i])}class v1 extends ow{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pe}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ri.has(n)){const r=Dv(n);return r&&r.default||0}return n=aw.has(n)?n:zd(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Yv(e,n,r)}build(e,n,r){Wv(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){y1(e,n,r,i)}mount(e){this.isSVGTag=Jv(e.tagName),super.mount(e)}}const w1=(t,e)=>Od(t)?new v1(e):new g1(e,{allowProjection:t!==P.Fragment});function br(t,e,n){const r=t.getProps();return Hd(r,e,n!==void 0?n:r.custom,t)}const Yu=t=>Array.isArray(t);function T1(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Jr(n))}function x1(t){return Yu(t)?t[t.length-1]||0:t}function C1(t,e){const n=br(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const s in o){const u=x1(o[s]);T1(t,s,u)}}function S1(t){return!!(Re(t)&&t.add)}function Xu(t,e){const n=t.getValue("willChange");if(S1(n))return n.add(e);if(!n&&zt.WillChange){const r=new zt.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function lw(t){return t.props[Xv]}const _1=t=>t!==null;function k1(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(_1),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const E1={type:"spring",stiffness:500,damping:25,restSpeed:10},A1=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),P1={type:"keyframes",duration:.8},I1={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},M1=(t,{keyframes:e})=>e.length>2?P1:ri.has(t)?t.startsWith("scale")?A1(e[1]):E1:I1;function R1({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:u,from:c,elapsed:d,...f}){return!!Object.keys(f).length}const Wd=(t,e,n,r={},i,o)=>s=>{const u=Ld(r,t)||{},c=u.delay||r.delay||0;let{elapsed:d=0}=r;d=d-It(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-d,onUpdate:p=>{e.set(p),u.onUpdate&&u.onUpdate(p)},onComplete:()=>{s(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:i};R1(u)||Object.assign(f,M1(t,f)),f.duration&&(f.duration=It(f.duration)),f.repeatDelay&&(f.repeatDelay=It(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(zu(f),f.delay===0&&(h=!0)),(zt.instantAnimations||zt.skipAnimations)&&(h=!0,zu(f),f.delay=0),f.allowFlatten=!u.type&&!u.ease,h&&!o&&e.get()!==void 0){const p=k1(f.keyframes,u);if(p!==void 0){ae.update(()=>{f.onUpdate(p),f.onComplete()});return}}return u.isSync?new Nd(f):new nA(f)};function N1({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function uw(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:s,...u}=e;r&&(o=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in u){const h=t.getValue(f,t.latestValues[f]??null),p=u[f];if(p===void 0||d&&N1(d,f))continue;const g={delay:n,...Ld(o||{},f)},T=h.get();if(T!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===T&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const w=lw(t);if(w){const y=window.MotionHandoffAnimation(w,f,ae);y!==null&&(g.startTime=y,x=!0)}}Xu(t,f),h.start(Wd(f,h,p,t.shouldReduceMotion&&Mv.has(f)?{type:!1}:g,t,x));const C=h.animation;C&&c.push(C)}return s&&Promise.all(c).then(()=>{ae.update(()=>{s&&C1(t,s)})}),c}function cw(t,e,n,r=0,i=1){const o=Array.from(t).sort((d,f)=>d.sortNodePosition(f)).indexOf(e),s=t.size,u=(s-1)*r;return typeof n=="function"?n(o,s):i===1?o*r:u-o*r}function Qu(t,e,n={}){var c;const r=br(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(uw(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:p}=i;return D1(t,e,d,f,h,p,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,f]=u==="beforeChildren"?[o,s]:[s,o];return d().then(()=>f())}else return Promise.all([o(),s(n.delay)])}function D1(t,e,n=0,r=0,i=0,o=1,s){const u=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),u.push(Qu(c,e,{...s,delay:n+(typeof r=="function"?0:r)+cw(t.variantChildren,c,r,i,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(u)}function L1(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Qu(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=Qu(t,e,n);else{const i=typeof e=="function"?br(t,e,n.custom):e;r=Promise.all(uw(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function dw(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const b1=$d.length;function fw(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fw(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<b1;n++){const r=$d[n],i=t.props[r];(co(i)||i===!1)&&(e[r]=i)}return e}const F1=[...Vd].reverse(),U1=Vd.length;function V1(t){return e=>Promise.all(e.map(({animation:n,options:r})=>L1(t,n,r)))}function $1(t){let e=V1(t),n=np(),r=!0;const i=c=>(d,f)=>{var p;const h=br(t,f,c==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:g,transitionEnd:T,...x}=h;d={...d,...x,...T}}return d};function o(c){e=c(t)}function s(c){const{props:d}=t,f=fw(t.parent)||{},h=[],p=new Set;let g={},T=1/0;for(let C=0;C<U1;C++){const w=F1[C],y=n[w],v=d[w]!==void 0?d[w]:f[w],S=co(v),_=w===c?y.isActive:null;_===!1&&(T=C);let k=v===f[w]&&v!==d[w]&&S;if(k&&r&&t.manuallyAnimateOnMount&&(k=!1),y.protectedKeys={...g},!y.isActive&&_===null||!v&&!y.prevProp||Aa(v)||typeof v=="boolean")continue;const A=B1(y.prevProp,v);let E=A||w===c&&y.isActive&&!k&&S||C>T&&S,R=!1;const L=Array.isArray(v)?v:[v];let I=L.reduce(i(w),{});_===!1&&(I={});const{prevResolvedValues:b={}}=y,N={...b,...I},$=H=>{E=!0,p.has(H)&&(R=!0,p.delete(H)),y.needsAnimating[H]=!0;const M=t.getValue(H);M&&(M.liveStyle=!1)};for(const H in N){const M=I[H],B=b[H];if(g.hasOwnProperty(H))continue;let G=!1;Yu(M)&&Yu(B)?G=!dw(M,B):G=M!==B,G?M!=null?$(H):p.add(H):M!==void 0&&p.has(H)?$(H):y.protectedKeys[H]=!0}y.prevProp=v,y.prevResolvedValues=I,y.isActive&&(g={...g,...I}),r&&t.blockInitialAnimation&&(E=!1);const z=k&&A;E&&(!z||R)&&h.push(...L.map(H=>{const M={type:w};if(typeof H=="string"&&r&&!z&&t.manuallyAnimateOnMount&&t.parent){const{parent:B}=t,G=br(B,H);if(B.enteringChildren&&G){const{delayChildren:X}=G.transition||{};M.delay=cw(B.enteringChildren,t,X)}}return{animation:H,options:M}}))}if(p.size){const C={};if(typeof d.initial!="boolean"){const w=br(t,Array.isArray(d.initial)?d.initial[0]:d.initial);w&&w.transition&&(C.transition=w.transition)}p.forEach(w=>{const y=t.getBaseTarget(w),v=t.getValue(w);v&&(v.liveStyle=!0),C[w]=y??null}),h.push({animation:C})}let x=!!h.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function u(c,d){var h;if(n[c].isActive===d)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(c,d)}),n[c].isActive=d;const f=s(c);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:s,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=np(),r=!0}}}function B1(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!dw(e,t):!1}function Pn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function np(){return{animate:Pn(!0),whileInView:Pn(),whileHover:Pn(),whileTap:Pn(),whileDrag:Pn(),whileFocus:Pn(),exit:Pn()}}class Sn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class G1 extends Sn{constructor(e){super(e),e.animationState||(e.animationState=$1(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Aa(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let O1=0;class H1 extends Sn{constructor(){super(...arguments),this.id=O1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const q1={animation:{Feature:G1},exit:{Feature:H1}};function ho(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Eo(t){return{point:{x:t.pageX,y:t.pageY}}}const z1=t=>e=>Ud(e)&&t(e,Eo(e));function $i(t,e,n,r){return ho(t,e,z1(n),r)}const hw=1e-4,W1=1-hw,K1=1+hw,pw=.01,J1=0-pw,j1=0+pw;function Fe(t){return t.max-t.min}function Y1(t,e,n){return Math.abs(t-e)<=n}function rp(t,e,n,r=.5){t.origin=r,t.originPoint=ue(e.min,e.max,t.origin),t.scale=Fe(n)/Fe(e),t.translate=ue(n.min,n.max,t.origin)-t.originPoint,(t.scale>=W1&&t.scale<=K1||isNaN(t.scale))&&(t.scale=1),(t.translate>=J1&&t.translate<=j1||isNaN(t.translate))&&(t.translate=0)}function Bi(t,e,n,r){rp(t.x,e.x,n.x,r?r.originX:void 0),rp(t.y,e.y,n.y,r?r.originY:void 0)}function ip(t,e,n){t.min=n.min+e.min,t.max=t.min+Fe(e)}function X1(t,e,n){ip(t.x,e.x,n.x),ip(t.y,e.y,n.y)}function op(t,e,n){t.min=e.min-n.min,t.max=t.min+Fe(e)}function Gi(t,e,n){op(t.x,e.x,n.x),op(t.y,e.y,n.y)}function nt(t){return[t("x"),t("y")]}const mw=({current:t})=>t?t.ownerDocument.defaultView:null,sp=(t,e)=>Math.abs(t-e);function Q1(t,e){const n=sp(t.x,e.x),r=sp(t.y,e.y);return Math.sqrt(n**2+r**2)}class gw{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Sl(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,T=Q1(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!T)return;const{point:x}=p,{timestamp:C}=ke;this.history.push({...x,timestamp:C});const{onStart:w,onMove:y}=this.handlers;g||(w&&w(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Cl(g,this.transformPagePoint),ae.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:T,onSessionEnd:x,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Sl(p.type==="pointercancel"?this.lastMoveEventInfo:Cl(g,this.transformPagePoint),this.history);this.startEvent&&T&&T(p,w),x&&x(p,w)},!Ud(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const u=Eo(e),c=Cl(u,this.transformPagePoint),{point:d}=c,{timestamp:f}=ke;this.history=[{...d,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,Sl(c,this.history)),this.removeListeners=So($i(this.contextWindow,"pointermove",this.handlePointerMove),$i(this.contextWindow,"pointerup",this.handlePointerUp),$i(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gn(this.updatePoint)}}function Cl(t,e){return e?{point:e(t.point)}:t}function ap(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sl({point:t},e){return{point:t,delta:ap(t,yw(e)),offset:ap(t,Z1(e)),velocity:eP(e,.1)}}function Z1(t){return t[0]}function yw(t){return t[t.length-1]}function eP(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=yw(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>It(e)));)n--;if(!r)return{x:0,y:0};const o=Mt(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function tP(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ue(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ue(n,t,r.max):Math.min(t,n)),t}function lp(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function nP(t,{top:e,left:n,bottom:r,right:i}){return{x:lp(t.x,n,i),y:lp(t.y,e,r)}}function up(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function rP(t,e){return{x:up(t.x,e.x),y:up(t.y,e.y)}}function iP(t,e){let n=.5;const r=Fe(t),i=Fe(e);return i>r?n=ao(e.min,e.max-r,t.min):r>i&&(n=ao(t.min,t.max-i,e.min)),qt(0,1,n)}function oP(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Zu=.35;function sP(t=Zu){return t===!1?t=0:t===!0&&(t=Zu),{x:cp(t,"left","right"),y:cp(t,"top","bottom")}}function cp(t,e,n){return{min:dp(t,e),max:dp(t,n)}}function dp(t,e){return typeof t=="number"?t:t[e]||0}const aP=new WeakMap;class lP{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Eo(h).point)},s=(h,p)=>{const{drag:g,dragPropagation:T,onDragStart:x}=this.getProps();if(g&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wA(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nt(w=>{let y=this.getAxisMotionValue(w).get()||0;if(Rt.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const S=v.layout.layoutBox[w];S&&(y=Fe(S)*(parseFloat(y)/100))}}this.originPoint[w]=y}),x&&ae.postRender(()=>x(h,p)),Xu(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:T,onDirectionLock:x,onDrag:C}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=p;if(T&&this.currentDirection===null){this.currentDirection=uP(w),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",p.point,w),this.updateAxis("y",p.point,w),this.visualElement.render(),C&&C(h,p)},c=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>nt(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new gw(e,{onSessionStart:o,onStart:s,onMove:u,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:mw(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:u}=this.getProps();u&&ae.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Zo(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=tP(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&_r(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=nP(r.layoutBox,e):this.constraints=!1,this.elastic=sP(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&nt(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=oP(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!_r(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=c1(r,i.root,this.visualElement.getTransformPagePoint());let s=rP(i.layout.layoutBox,o);if(n){const u=n(a1(s));this.hasMutatedConstraints=!!u,u&&(s=ew(u))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},d=nt(f=>{if(!Zo(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,T={type:"inertia",velocity:r?e[f]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(f,T)});return Promise.all(d).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Xu(this.visualElement,e),r.start(Wd(e,r,0,n,this.visualElement,!1))}stopAnimation(){nt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){nt(n=>{const{drag:r}=this.getProps();if(!Zo(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:u}=i.layout.layoutBox[n];o.set(e[n]-ue(s,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!_r(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};nt(s=>{const u=this.getAxisMotionValue(s);if(u&&this.constraints!==!1){const c=u.get();i[s]=iP({min:c,max:c},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nt(s=>{if(!Zo(s,e,null))return;const u=this.getAxisMotionValue(s),{min:c,max:d}=this.constraints[s];u.set(ue(c,d,i[s]))})}addListeners(){if(!this.visualElement.current)return;aP.set(this.visualElement,this);const e=this.visualElement.current,n=$i(e,"pointerdown",c=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();_r(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ae.read(r);const s=ho(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(nt(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=c[f].translate,h.set(h.get()+c[f].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=Zu,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:u}}}function Zo(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function uP(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class cP extends Sn{constructor(e){super(e),this.removeGroupControls=at,this.removeListeners=at,this.controls=new lP(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||at}unmount(){this.removeGroupControls(),this.removeListeners()}}const fp=t=>(e,n)=>{t&&ae.postRender(()=>t(e,n))};class dP extends Sn{constructor(){super(...arguments),this.removePointerDownListener=at}onPointerDown(e){this.session=new gw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mw(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:fp(e),onStart:fp(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&ae.postRender(()=>i(o,s))}}}mount(){this.removePointerDownListener=$i(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ws={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hp(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const yi={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(O.test(t))t=parseFloat(t);else return t;const n=hp(t,e.target.x),r=hp(t,e.target.y);return`${n}% ${r}%`}},fP={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=yn.parse(t);if(i.length>5)return r;const o=yn.createTransformer(t),s=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=u,i[1+s]/=c;const d=ue(u,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=d),typeof i[3+s]=="number"&&(i[3+s]/=d),o(i)}};let _l=!1;class hP extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;bA(pP),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),_l&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ws.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:s}=r;return s&&(s.isPresent=o,_l=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||ae.postRender(()=>{const u=s.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Fd.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;_l=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vw(t){const[e,n]=PA(),r=P.useContext(Y0);return m.jsx(hP,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(Qv),isPresent:e,safeToRemove:n})}const pP={borderRadius:{...yi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yi,borderTopRightRadius:yi,borderBottomLeftRadius:yi,borderBottomRightRadius:yi,boxShadow:fP};function mP(t,e,n){const r=Re(t)?t:Jr(t);return r.start(Wd("",r,e,n)),r.animation}const gP=(t,e)=>t.depth-e.depth;class yP{constructor(){this.children=[],this.isDirty=!1}add(e){yd(this.children,e),this.isDirty=!0}remove(e){vd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gP),this.isDirty=!1,this.children.forEach(e)}}function vP(t,e){const n=He.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(gn(r),t(o-e))};return ae.setup(r,!0),()=>gn(r)}const ww=["TopLeft","TopRight","BottomLeft","BottomRight"],wP=ww.length,pp=t=>typeof t=="string"?parseFloat(t):t,mp=t=>typeof t=="number"||O.test(t);function TP(t,e,n,r,i,o){i?(t.opacity=ue(0,n.opacity??1,xP(r)),t.opacityExit=ue(e.opacity??1,0,CP(r))):o&&(t.opacity=ue(e.opacity??1,n.opacity??1,r));for(let s=0;s<wP;s++){const u=`border${ww[s]}Radius`;let c=gp(e,u),d=gp(n,u);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||mp(c)===mp(d)?(t[u]=Math.max(ue(pp(c),pp(d),r),0),(Rt.test(d)||Rt.test(c))&&(t[u]+="%")):t[u]=d}(e.rotate||n.rotate)&&(t.rotate=ue(e.rotate||0,n.rotate||0,r))}function gp(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const xP=Tw(0,.5,av),CP=Tw(.5,.95,at);function Tw(t,e,n){return r=>r<t?0:r>e?1:n(ao(t,e,r))}function yp(t,e){t.min=e.min,t.max=e.max}function tt(t,e){yp(t.x,e.x),yp(t.y,e.y)}function vp(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function wp(t,e,n,r,i){return t-=e,t=ea(t,1/n,r),i!==void 0&&(t=ea(t,1/i,r)),t}function SP(t,e=0,n=1,r=.5,i,o=t,s=t){if(Rt.test(e)&&(e=parseFloat(e),e=ue(s.min,s.max,e/100)-s.min),typeof e!="number")return;let u=ue(o.min,o.max,r);t===o&&(u-=e),t.min=wp(t.min,e,n,u,i),t.max=wp(t.max,e,n,u,i)}function Tp(t,e,[n,r,i],o,s){SP(t,e[n],e[r],e[i],e.scale,o,s)}const _P=["x","scaleX","originX"],kP=["y","scaleY","originY"];function xp(t,e,n,r){Tp(t.x,e,_P,n?n.x:void 0,r?r.x:void 0),Tp(t.y,e,kP,n?n.y:void 0,r?r.y:void 0)}function Cp(t){return t.translate===0&&t.scale===1}function xw(t){return Cp(t.x)&&Cp(t.y)}function Sp(t,e){return t.min===e.min&&t.max===e.max}function EP(t,e){return Sp(t.x,e.x)&&Sp(t.y,e.y)}function _p(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Cw(t,e){return _p(t.x,e.x)&&_p(t.y,e.y)}function kp(t){return Fe(t.x)/Fe(t.y)}function Ep(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class AP{constructor(){this.members=[]}add(e){yd(this.members,e),e.scheduleRender()}remove(e){if(vd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function PP(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:h,rotateY:p,skewX:g,skewY:T}=n;d&&(r=`perspective(${d}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),T&&(r+=`skewY(${T}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const kl=["","X","Y","Z"],IP=1e3;let MP=0;function El(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Sw(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=lw(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ae,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Sw(r)}function _w({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},u=e==null?void 0:e()){this.id=MP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DP),this.nodes.forEach(UP),this.nodes.forEach(VP),this.nodes.forEach(LP)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new yP)}addEventListener(s,u){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new xd),this.eventHandlers.get(s).add(u)}notifyListeners(s,...u){const c=this.eventHandlers.get(s);c&&c.notify(...u)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=$v(s)&&!kA(s),this.instance=s;const{layoutId:u,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||u)&&(this.isLayoutDirty=!0),t){let f,h=0;const p=()=>this.root.updateBlockedByResize=!1;ae.read(()=>{h=window.innerWidth}),t(s,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,f&&f(),f=vP(p,250),ws.hasAnimatedSinceResize&&(ws.hasAnimatedSinceResize=!1,this.nodes.forEach(Ip)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||d.getDefaultTransition()||HP,{onLayoutAnimationStart:x,onLayoutAnimationComplete:C}=d.getProps(),w=!this.targetLayout||!Cw(this.targetLayout,g),y=!h&&p;if(this.options.layoutRoot||this.resumeFrom||y||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...Ld(T,"layout"),onPlay:x,onComplete:C};(d.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(f,y)}else h||Ip(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($P),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Sw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ap);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Pp);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(FP),this.nodes.forEach(RP),this.nodes.forEach(NP)):this.nodes.forEach(Pp),this.clearAllSnapshots();const u=He.now();ke.delta=qt(0,1e3/60,u-ke.timestamp),ke.timestamp=u,ke.isProcessing=!0,pl.update.process(ke),pl.preRender.process(ke),pl.render.process(ke),ke.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bP),this.sharedNodes.forEach(BP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fe(this.snapshot.measuredBox.x)&&!Fe(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(u=!1),u&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!xw(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;s&&this.instance&&(u||Nn(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return s&&(c=this.removeTransform(c)),qP(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:s}=this.options;if(!s)return pe();const u=s.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(zP))){const{scroll:f}=this.root;f&&(kr(u.x,f.offset.x),kr(u.y,f.offset.y))}return u}removeElementScroll(s){var c;const u=pe();if(tt(u,s),(c=this.scroll)!=null&&c.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:h,options:p}=f;f!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&tt(u,s),kr(u.x,h.offset.x),kr(u.y,h.offset.y))}return u}applyTransform(s,u=!1){const c=pe();tt(c,s);for(let d=0;d<this.path.length;d++){const f=this.path[d];!u&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Er(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Nn(f.latestValues)&&Er(c,f.latestValues)}return Nn(this.latestValues)&&Er(c,this.latestValues),c}removeTransform(s){const u=pe();tt(u,s);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Nn(d.latestValues))continue;Ku(d.latestValues)&&d.updateSnapshot();const f=pe(),h=d.measurePageBox();tt(f,h),xp(u,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return Nn(this.latestValues)&&xp(u,this.latestValues),u}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ke.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var p;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=ke.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pe(),this.relativeTargetOrigin=pe(),Gi(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),tt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=pe(),this.targetWithTransforms=pe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),X1(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tt(this.target,this.layout.layoutBox),nw(this.target,this.targetDelta)):tt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pe(),this.relativeTargetOrigin=pe(),Gi(this.relativeTargetOrigin,this.target,g.target),tt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ku(this.parent.latestValues)||tw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var T;const s=this.getLead(),u=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ke.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;tt(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;u1(this.layoutCorrected,this.treeScale,this.path,u),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=pe());const{target:g}=s;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vp(this.prevProjectionDelta.x,this.projectionDelta.x),vp(this.prevProjectionDelta.y,this.projectionDelta.y)),Bi(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!Ep(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ep(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ar(),this.projectionDelta=Ar(),this.projectionDeltaWithTransform=Ar()}setAnimationOrigin(s,u=!1){const c=this.snapshot,d=c?c.latestValues:{},f={...this.latestValues},h=Ar();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const p=pe(),g=c?c.source:void 0,T=this.layout?this.layout.source:void 0,x=g!==T,C=this.getStack(),w=!C||C.members.length<=1,y=!!(x&&!w&&this.options.crossfade===!0&&!this.path.some(OP));this.animationProgress=0;let v;this.mixTargetDelta=S=>{const _=S/1e3;Mp(h.x,s.x,_),Mp(h.y,s.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gi(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GP(this.relativeTarget,this.relativeTargetOrigin,p,_),v&&EP(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=pe()),tt(v,this.relativeTarget)),x&&(this.animationValues=f,TP(f,d,this.latestValues,_,y,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var u,c,d;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(gn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ae.update(()=>{ws.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Jr(0)),this.currentAnimation=mP(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),s.onUpdate&&s.onUpdate(f)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:u,target:c,layout:d,latestValues:f}=s;if(!(!u||!c||!d)){if(this!==s&&this.layout&&d&&kw(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||pe();const h=Fe(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const p=Fe(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+p}tt(u,c),Er(u,f),Bi(this.projectionDeltaWithTransform,this.layoutCorrected,u,f)}}registerSharedNode(s,u){this.sharedNodes.has(s)||this.sharedNodes.set(s,new AP),this.sharedNodes.get(s).add(u);const d=u.options.initialPromotionConfig;u.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(u):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var u;const{layoutId:s}=this.options;return s?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:s}=this.options;return s?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:u,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let u=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const d={};c.z&&El("z",s,d,this.animationValues);for(let f=0;f<kl.length;f++)El(`rotate${kl[f]}`,s,d,this.animationValues),El(`skew${kl[f]}`,s,d,this.animationValues);s.render();for(const f in d)s.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);s.scheduleRender()}applyProjectionStyles(s,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=vs(u==null?void 0:u.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=vs(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Nn(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=PP(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:p,y:g}=this.projectionDelta;s.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,d.animationValues?s.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const T in fo){if(f[T]===void 0)continue;const{correct:x,applyTo:C,isCSSVariable:w}=fo[T],y=h==="none"?f[T]:x(f[T],d);if(C){const v=C.length;for(let S=0;S<v;S++)s[C[S]]=y}else w?this.options.visualElement.renderState.vars[T]=y:s[T]=y}this.options.layoutId&&(s.pointerEvents=d===this?vs(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var u;return(u=s.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(Ap),this.root.sharedNodes.clear()}}}function RP(t){t.updateLayout()}function NP(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,s=e.source!==t.layout.source;o==="size"?nt(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],g=Fe(p);p.min=r[h].min,p.max=p.min+g}):kw(o,e.layoutBox,r)&&nt(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],g=Fe(r[h]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const u=Ar();Bi(u,r,e.layoutBox);const c=Ar();s?Bi(c,t.applyTransform(i,!0),e.measuredBox):Bi(c,r,e.layoutBox);const d=!xw(u);let f=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const T=pe();Gi(T,e.layoutBox,p.layoutBox);const x=pe();Gi(x,r,g.layoutBox),Cw(T,x)||(f=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=T,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function DP(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function LP(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bP(t){t.clearSnapshot()}function Ap(t){t.clearMeasurements()}function Pp(t){t.isLayoutDirty=!1}function FP(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ip(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function UP(t){t.resolveTargetDelta()}function VP(t){t.calcProjection()}function $P(t){t.resetSkewAndRotation()}function BP(t){t.removeLeadSnapshot()}function Mp(t,e,n){t.translate=ue(e.translate,0,n),t.scale=ue(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Rp(t,e,n,r){t.min=ue(e.min,n.min,r),t.max=ue(e.max,n.max,r)}function GP(t,e,n,r){Rp(t.x,e.x,n.x,r),Rp(t.y,e.y,n.y,r)}function OP(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const HP={duration:.45,ease:[.4,0,.1,1]},Np=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Dp=Np("applewebkit/")&&!Np("chrome/")?Math.round:at;function Lp(t){t.min=Dp(t.min),t.max=Dp(t.max)}function qP(t){Lp(t.x),Lp(t.y)}function kw(t,e,n){return t==="position"||t==="preserve-aspect"&&!Y1(kp(e),kp(n),.2)}function zP(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const WP=_w({attachResizeListener:(t,e)=>ho(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Al={current:void 0},Ew=_w({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Al.current){const t=new WP({});t.mount(window),t.setOptions({layoutScroll:!0}),Al.current=t}return Al.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),KP={pan:{Feature:dP},drag:{Feature:cP,ProjectionNode:Ew,MeasureLayout:vw}};function bp(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&ae.postRender(()=>o(e,Eo(e)))}class JP extends Sn{mount(){const{current:e}=this.node;e&&(this.unmount=TA(e,(n,r)=>(bp(this.node,r,"Start"),i=>bp(this.node,i,"End"))))}unmount(){}}class jP extends Sn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=So(ho(this.node.current,"focus",()=>this.onFocus()),ho(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Fp(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&ae.postRender(()=>o(e,Eo(e)))}class YP extends Sn{mount(){const{current:e}=this.node;e&&(this.unmount=_A(e,(n,r)=>(Fp(this.node,r,"Start"),(i,{success:o})=>Fp(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ec=new WeakMap,Pl=new WeakMap,XP=t=>{const e=ec.get(t.target);e&&e(t)},QP=t=>{t.forEach(XP)};function ZP({root:t,...e}){const n=t||document;Pl.has(n)||Pl.set(n,{});const r=Pl.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(QP,{root:t,...e})),r[i]}function eI(t,e,n){const r=ZP(e);return ec.set(t,n),r.observe(t),()=>{ec.delete(t),r.unobserve(t)}}const tI={some:0,all:1};class nI extends Sn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:tI[i]},u=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),p=d?f:h;p&&p(c)};return eI(this.node.current,s,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(rI(e,n))&&this.startObserver()}unmount(){}}function rI({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const iI={inView:{Feature:nI},tap:{Feature:YP},focus:{Feature:jP},hover:{Feature:JP}},oI={layout:{ProjectionNode:Ew,MeasureLayout:vw}},sI={...q1,...iI,...KP,...oI},jn=s1(sI,w1),aI=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v11.494m-9-5.747h18"})}),lI=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),Kd=({guide:t,onClick:e})=>m.jsxs(jn.div,{onClick:e,className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 shadow-md p-5 cursor-pointer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,y:-4,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},children:[m.jsxs("div",{className:"flex items-start mb-4 space-x-4",children:[m.jsx("img",{src:t.authorPfpUrl,alt:t.authorUsername,className:"w-11 h-11 rounded-full"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 line-clamp-1",children:t.title}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["by ",t.authorUsername]})]})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2 min-h-[40px]",children:t.description}),t.tags&&t.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.slice(0,3).map((n,r)=>m.jsx("span",{className:"bg-primary-100 text-primary-800 dark:bg-primary-900/50 dark:text-primary-300 text-xs font-medium px-2.5 py-1 rounded-full",children:n},r))}),m.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400 pt-3 border-t border-gray-100 dark:border-gray-700",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("span",{className:"flex items-center font-medium",children:[m.jsx(aI,{})," ",t.books.length," books"]}),m.jsxs("span",{className:"flex items-center font-medium",children:[m.jsx(lI,{})," ",t.likes]})]}),m.jsx("span",{className:"text-xs",children:new Date(t.createdAt).toLocaleDateString("en-GB")})]})]}),uI=({setPage:t,setSelectedGuideId:e})=>{const{myGuides:n,isLoading:r}=Co(),i=o=>{e(o),t(V.GuideDetail)};return m.jsx("div",{className:"animate-fadeIn",children:r?m.jsx("div",{className:"flex justify-center mt-20",children:m.jsx(Ke,{})}):n.length>0?m.jsx("div",{className:"space-y-4",children:n.map(o=>m.jsx(Kd,{guide:o,onClick:()=>i(o.id)},o.id))}):m.jsxs("div",{className:"text-center py-12 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"No guides yet!"}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Tap the 'Create' tab to build your first reading guide."})]})})},cI=()=>{const t=P.useRef(null),e=P.useRef({isDown:!1,startX:0,scrollLeft:0,hasDragged:!1});return P.useEffect(()=>{const n=t.current;if(!n)return;const r=c=>{if(!e.current.isDown)return;const f=("touches"in c?c.touches[0].pageX:c.pageX)-e.current.startX;Math.abs(f)>5&&(e.current.hasDragged=!0,c.type==="touchmove"&&c.preventDefault()),n.scrollLeft=e.current.scrollLeft-f},i=()=>{e.current.isDown&&(e.current.isDown=!1,n.style.scrollBehavior="smooth",document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i),setTimeout(()=>{e.current.hasDragged=!1},0))},o=c=>{c.stopPropagation(),c.type==="mousedown"&&c.preventDefault(),e.current.isDown=!0,e.current.hasDragged=!1,n.style.scrollBehavior="auto";const d="touches"in c?c.touches[0].pageX:c.pageX;e.current.startX=d,e.current.scrollLeft=n.scrollLeft,document.addEventListener("mousemove",r),document.addEventListener("mouseup",i),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i)},s=c=>{e.current.hasDragged&&c.stopPropagation()},u={passive:!1};return n.addEventListener("mousedown",o),n.addEventListener("touchstart",o,u),n.addEventListener("click",s,!0),()=>{n.removeEventListener("mousedown",o),n.removeEventListener("touchstart",o,!1),n.removeEventListener("click",s,!0),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i)}},[]),t},dI=({guide:t,onClick:e})=>m.jsxs(jn.div,{onClick:e,className:"flex-shrink-0 w-48 bg-white dark:bg-gray-700 rounded-2xl border border-gray-200/80 dark:border-gray-600/80 shadow-md p-4 cursor-pointer",whileHover:{scale:1.05,y:-2,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},children:[m.jsx("img",{src:t.authorPfpUrl,alt:t.authorUsername,className:"w-12 h-12 rounded-full mb-3 shadow-sm pointer-events-none"}),m.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-100 text-md line-clamp-2 mb-1 h-12",children:t.title}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-1",children:["by ",t.authorUsername]})]}),Up=({setPage:t,setSelectedGuideId:e,searchTerm:n})=>{const{allGuides:r,recommendedGuides:i,isLoading:o}=Co(),s=cI(),[u,c]=P.useState(0),[d,f]=P.useState(0);P.useEffect(()=>{const x=()=>{const w=s.current;if(w&&w.scrollWidth>w.clientWidth){const y=Math.ceil(w.scrollWidth/w.clientWidth);c(y)}else c(0)},C=setTimeout(x,100);return window.addEventListener("resize",x),()=>{clearTimeout(C),window.removeEventListener("resize",x)}},[o,i]);const h=x=>{e(x),t(V.GuideDetail)},p=r.filter(x=>{const C=n.toLowerCase();return x.title.toLowerCase().includes(C)||x.description.toLowerCase().includes(C)||x.authorUsername.toLowerCase().includes(C)||x.tags&&x.tags.some(w=>w.toLowerCase().includes(C))}),g=P.useCallback(()=>{const x=s.current;if(x){const C=Math.round(x.scrollLeft/x.clientWidth);f(C)}},[]),T=x=>{const C=s.current;C&&C.scrollTo({left:C.clientWidth*x,behavior:"smooth"})};return m.jsx("div",{className:"animate-fadeIn",children:o?m.jsx("div",{className:"flex justify-center mt-20",children:m.jsx(Ke,{})}):m.jsxs("div",{className:"space-y-8",children:[m.jsxs("section",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"Recommended for You"}),m.jsx("div",{ref:s,onScroll:g,className:"flex space-x-4 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide cursor-grab active:cursor-grabbing select-none",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:i.map(x=>m.jsx(dI,{guide:x,onClick:()=>h(x.id)},`rec-${x.id}`))}),u>1&&m.jsx("div",{className:"flex justify-center items-center space-x-2 mt-4",children:Array.from({length:u}).map((x,C)=>m.jsx("button",{onClick:()=>T(C),className:`h-2.5 rounded-full transition-all duration-300 ease-in-out ${d===C?"w-6 bg-primary-700":"w-2.5 bg-gray-300 dark:bg-gray-600"}`,"aria-label":`Go to page ${C+1}`},C))})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"All Guides"}),p.length>0?m.jsx(jn.div,{className:"space-y-4",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:p.map((x,C)=>m.jsx(jn.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{delay:C*.05},children:m.jsx(Kd,{guide:x,onClick:()=>h(x.id)})},x.id))}):m.jsxs("div",{className:"text-center py-12 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"No Results Found"}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Try adjusting your search term."})]})]})]})})},Jd=()=>({trigger:P.useCallback((e="light")=>{if(window.navigator&&window.navigator.vibrate)switch(e){case"light":window.navigator.vibrate(10);break;case"medium":window.navigator.vibrate([10,200,10]);break;case"heavy":window.navigator.vibrate(200);break;default:window.navigator.vibrate(10)}},[])}),se=({children:t,variant:e="primary",isLoading:n=!1,className:r="",...i})=>{const{trigger:o}=Jd(),s="w-full text-lg px-8 py-4 font-semibold rounded-xl focus:outline-none focus:ring-4 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"text-white bg-primary-700 hover:bg-primary-800 focus:ring-primary-300 shadow-lg shadow-primary-500/30",secondary:"text-gray-800 bg-gray-200 hover:bg-gray-300 focus:ring-gray-300 dark:text-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-600",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-red-300 shadow-lg shadow-red-500/30"},c=f=>{o("light"),i.onClick&&i.onClick(f)},d=m.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});return m.jsxs(jn.button,{className:`${s} ${u[e]} ${r}`,disabled:n||i.disabled,onClick:c,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:17},...i,children:[n&&d,t]})},Aw=({isOpen:t,onClose:e,title:n,children:r})=>{const i=P.useRef(null);return P.useEffect(()=>{const o=u=>{u.key==="Escape"&&e()},s=u=>{i.current&&!i.current.contains(u.target)&&e()};return t&&(document.addEventListener("keydown",o),document.addEventListener("mousedown",s)),()=>{document.removeEventListener("keydown",o),document.removeEventListener("mousedown",s)}},[t,e]),t?FC.createPortal(m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60 backdrop-blur-sm animate-fadeIn",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:m.jsxs("div",{ref:i,className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-md m-4 border border-gray-200/50 dark:border-gray-700/50",children:[m.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-gray-700",children:[m.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors rounded-full p-1 focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"Close modal",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsx("div",{className:"p-6",children:r})]})}),document.body):null};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fI,hI;function pI(){return{geminiUrl:fI,vertexUrl:hI}}function mI(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=pI();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class er{}function U(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function l(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];l(f,e.slice(o+1),n[d])}else for(const d of c)l(d,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];l(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function a(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>a(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tc(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vp;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Vp||(Vp={}));var $p;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})($p||($p={}));var je;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(je||(je={}));var Bp;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Bp||(Bp={}));var Gp;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Gp||(Gp={}));var Op;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Op||(Op={}));var Hp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Hp||(Hp={}));var qp;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(qp||(qp={}));var zp;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zp||(zp={}));var Wp;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wp||(Wp={}));var Kp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Kp||(Kp={}));var Jp;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Jp||(Jp={}));var jp;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(jp||(jp={}));var Yp;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Yp||(Yp={}));var Xp;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Xp||(Xp={}));var ta;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ta||(ta={}));var Qp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Qp||(Qp={}));var nc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(nc||(nc={}));var Zp;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Zp||(Zp={}));var em;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(em||(em={}));var tm;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(tm||(tm={}));var nm;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(nm||(nm={}));var rm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(rm||(rm={}));var im;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(im||(im={}));var om;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(om||(om={}));var sm;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(sm||(sm={}));var am;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(am||(am={}));var lm;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(lm||(lm={}));var um;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(um||(um={}));var cm;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(cm||(cm={}));var dm;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(dm||(dm={}));var fm;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(fm||(fm={}));var hm;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(hm||(hm={}));var pm;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(pm||(pm={}));var mm;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(mm||(mm={}));var gm;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gm||(gm={}));var ym;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(ym||(ym={}));var vm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(vm||(vm={}));var wm;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wm||(wm={}));var Tm;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Tm||(Tm={}));var xm;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xm||(xm={}));var Cm;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Cm||(Cm={}));var Sm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Sm||(Sm={}));var _m;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_m||(_m={}));var km;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(km||(km={}));var Pr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Pr||(Pr={}));class rc{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class vi{get text(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const h=[];for(const p of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,T]of Object.entries(p))g!=="text"&&g!=="thought"&&(T!==null||T!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const h of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,o,s,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,o,s,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class Em{}class Am{}class gI{}class yI{}class vI{}class wI{}class Pm{}class Im{}class Mm{}class TI{}class Rm{}class na{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new na;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new Rm,s=i.videos;o.generatedVideos=s==null?void 0:s.map(u=>({video:{uri:u.gcsUri,videoBytes:u.bytesBase64Encoded?tc(u.bytesBase64Encoded):void 0,mimeType:u.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new Rm,s=i.generateVideoResponse,u=s==null?void 0:s.generatedSamples;o.generatedVideos=u==null?void 0:u.map(c=>{const d=c.video;return{video:{uri:d==null?void 0:d.uri,videoBytes:d!=null&&d.encodedVideo?tc(d==null?void 0:d.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s==null?void 0:s.raiMediaFilteredCount,o.raiMediaFilteredReasons=s==null?void 0:s.raiMediaFilteredReasons,r.response=o}}return r}}class Nm{}class Dm{}class Lm{}class xI{}class CI{}class SI{}class bm{}class _I{get text(){var e,n,r;let i="",o=!1;const s=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,i+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&o.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class kI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Pw(t,e){const n=Y(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Iw(t){return Array.isArray(t)?t.map(e=>ra(e)):[ra(t)]}function ra(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Mw(t){const e=ra(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Rw(t){const e=ra(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Fm(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Nw(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Fm(e)):[Fm(t)]}function ic(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Um(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Vm(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ne(t){if(t==null)throw new Error("ContentUnion is required");return ic(t)?t:{role:"user",parts:Nw(t)}}function Dw(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ne(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ne(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ne(n)):[Ne(e)]}function lt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Um(t)||Vm(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ne(t)]}const e=[],n=[],r=ic(t[0]);for(const i of t){const o=ic(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Um(i)||Vm(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Nw(n)}),e}function EI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(je).includes(n[0].toUpperCase())?n[0].toUpperCase():je.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(je).includes(r.toUpperCase())?r.toUpperCase():je.TYPE_UNSPECIFIED})}}function Fr(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&EI(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(je).includes(u.toUpperCase())?u.toUpperCase():je.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Fr(u);else if(r.includes(s)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Fr(d))}e[s]=c}else if(i.includes(s)){const c={};for(const[d,f]of Object.entries(u))c[d]=Fr(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function jd(t){return Fr(t)}function Yd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Xd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ii(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Fr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Fr(e.response));return t}function oi(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function AI(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Kt(t,e){if(typeof e!="string")throw new Error("name must be a string");return AI(t,e,"cachedContents")}function Lw(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function tr(t){return tc(t)}function PI(t){return t!=null&&typeof t=="object"&&"name"in t}function II(t){return t!=null&&typeof t=="object"&&"video"in t}function MI(t){return t!=null&&typeof t=="object"&&"uri"in t}function bw(t){var e;let n;if(PI(t)&&(n=t.name),!(MI(t)&&(n=t.uri,n===void 0))&&!(II(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Fw(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Uw(t){for(const e of["models","tunedModels","publisherModels"])if(RI(t,e))return t[e];return[]}function RI(t,e){return t!==null&&typeof t=="object"&&e in t}function NI(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function DI(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=NI(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Vw(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function LI(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function si(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function $w(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bI(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function FI(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function UI(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function VI(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],bI(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],FI(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],UI(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function Bw(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>VI(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function $I(t){const e={},n=a(t,["anyOf"]);n!=null&&l(e,["anyOf"],n);const r=a(t,["default"]);r!=null&&l(e,["default"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["enum"]);o!=null&&l(e,["enum"],o);const s=a(t,["example"]);s!=null&&l(e,["example"],s);const u=a(t,["format"]);u!=null&&l(e,["format"],u);const c=a(t,["items"]);c!=null&&l(e,["items"],c);const d=a(t,["maxItems"]);d!=null&&l(e,["maxItems"],d);const f=a(t,["maxLength"]);f!=null&&l(e,["maxLength"],f);const h=a(t,["maxProperties"]);h!=null&&l(e,["maxProperties"],h);const p=a(t,["maximum"]);p!=null&&l(e,["maximum"],p);const g=a(t,["minItems"]);g!=null&&l(e,["minItems"],g);const T=a(t,["minLength"]);T!=null&&l(e,["minLength"],T);const x=a(t,["minProperties"]);x!=null&&l(e,["minProperties"],x);const C=a(t,["minimum"]);C!=null&&l(e,["minimum"],C);const w=a(t,["nullable"]);w!=null&&l(e,["nullable"],w);const y=a(t,["pattern"]);y!=null&&l(e,["pattern"],y);const v=a(t,["properties"]);v!=null&&l(e,["properties"],v);const S=a(t,["propertyOrdering"]);S!=null&&l(e,["propertyOrdering"],S);const _=a(t,["required"]);_!=null&&l(e,["required"],_);const k=a(t,["title"]);k!=null&&l(e,["title"],k);const A=a(t,["type"]);return A!=null&&l(e,["type"],A),e}function BI(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&l(e,["category"],n);const r=a(t,["threshold"]);return r!=null&&l(e,["threshold"],r),e}function GI(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function OI(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function HI(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],OI(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function qI(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function zI(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],qI(n)),e}function WI(){return{}}function KI(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function JI(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>GI(d))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],HI(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],zI(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],WI());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],KI(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function jI(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function YI(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function XI(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],YI(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function QI(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],jI(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],XI(r)),e}function ZI(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function Gw(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],ZI(n)),e}function eM(t){const e={},n=a(t,["speaker"]);n!=null&&l(e,["speaker"],n);const r=a(t,["voiceConfig"]);return r!=null&&l(e,["voiceConfig"],Gw(r)),e}function tM(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>eM(i))),l(e,["speakerVoiceConfigs"],r)}return e}function nM(t){const e={},n=a(t,["voiceConfig"]);n!=null&&l(e,["voiceConfig"],Gw(n));const r=a(t,["multiSpeakerVoiceConfig"]);r!=null&&l(e,["multiSpeakerVoiceConfig"],tM(r));const i=a(t,["languageCode"]);return i!=null&&l(e,["languageCode"],i),e}function rM(t){const e={},n=a(t,["includeThoughts"]);n!=null&&l(e,["includeThoughts"],n);const r=a(t,["thinkingBudget"]);return r!=null&&l(e,["thinkingBudget"],r),e}function iM(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],Bw(Ne(i)));const o=a(e,["temperature"]);o!=null&&l(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&l(r,["topP"],s);const u=a(e,["topK"]);u!=null&&l(r,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&l(r,["candidateCount"],c);const d=a(e,["maxOutputTokens"]);d!=null&&l(r,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&l(r,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&l(r,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&l(r,["logprobs"],p);const g=a(e,["presencePenalty"]);g!=null&&l(r,["presencePenalty"],g);const T=a(e,["frequencyPenalty"]);T!=null&&l(r,["frequencyPenalty"],T);const x=a(e,["seed"]);x!=null&&l(r,["seed"],x);const C=a(e,["responseMimeType"]);C!=null&&l(r,["responseMimeType"],C);const w=a(e,["responseSchema"]);w!=null&&l(r,["responseSchema"],$I(jd(w)));const y=a(e,["responseJsonSchema"]);if(y!=null&&l(r,["responseJsonSchema"],y),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=a(e,["safetySettings"]);if(n!==void 0&&v!=null){let I=v;Array.isArray(I)&&(I=I.map(b=>BI(b))),l(n,["safetySettings"],I)}const S=a(e,["tools"]);if(n!==void 0&&S!=null){let I=oi(S);Array.isArray(I)&&(I=I.map(b=>JI(ii(b)))),l(n,["tools"],I)}const _=a(e,["toolConfig"]);if(n!==void 0&&_!=null&&l(n,["toolConfig"],QI(_)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=a(e,["cachedContent"]);n!==void 0&&k!=null&&l(n,["cachedContent"],Kt(t,k));const A=a(e,["responseModalities"]);A!=null&&l(r,["responseModalities"],A);const E=a(e,["mediaResolution"]);E!=null&&l(r,["mediaResolution"],E);const R=a(e,["speechConfig"]);if(R!=null&&l(r,["speechConfig"],nM(Yd(R))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=a(e,["thinkingConfig"]);return L!=null&&l(r,["thinkingConfig"],rM(L)),r}function oM(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["request","model"],Y(t,r));const i=a(e,["contents"]);if(i!=null){let s=lt(i);Array.isArray(s)&&(s=s.map(u=>Bw(u))),l(n,["request","contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["request","generationConfig"],iM(t,o,n)),n}function sM(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&l(n,["fileName"],r);const i=a(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>oM(t,s))),l(n,["requests","requests"],o)}return n}function aM(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&l(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function $m(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["src"]);i!=null&&l(n,["batch","inputConfig"],sM(t,Vw(t,i)));const o=a(e,["config"]);return o!=null&&l(n,["config"],aM(o,n)),n}function lM(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],si(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function uM(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],si(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function cM(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);if(e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function dM(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],cM(n,e)),e}function fM(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],si(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function hM(t){const e={},n=a(t,["format"]);n!=null&&l(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&l(e,["gcsSource","uris"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&l(e,["bigquerySource","inputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function pM(t){const e={},n=a(t,["format"]);n!=null&&l(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&l(e,["gcsDestination","outputUriPrefix"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&l(e,["bigqueryDestination","outputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function mM(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const i=a(t,["dest"]);return e!==void 0&&i!=null&&l(e,["outputConfig"],pM(LI(i))),n}function gM(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["model"],Y(t,r));const i=a(e,["src"]);i!=null&&l(n,["inputConfig"],hM(Vw(t,i)));const o=a(e,["config"]);return o!=null&&l(n,["config"],mM(o,n)),n}function yM(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],si(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function vM(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],si(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function wM(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&l(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&l(e,["_query","filter"],o),n}function TM(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],wM(n,e)),e}function xM(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],si(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function CM(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function SM(t){const e={},n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function _M(t){const e={},n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function kM(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],CM(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],SM(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],_M(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function EM(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kM(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function AM(t){const e={},n=a(t,["citationSources"]);return n!=null&&l(e,["citations"],n),e}function PM(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&l(e,["retrievedUrl"],n);const r=a(t,["urlRetrievalStatus"]);return r!=null&&l(e,["urlRetrievalStatus"],r),e}function IM(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>PM(i))),l(e,["urlMetadata"],r)}return e}function MM(t){const e={},n=a(t,["content"]);n!=null&&l(e,["content"],EM(n));const r=a(t,["citationMetadata"]);r!=null&&l(e,["citationMetadata"],AM(r));const i=a(t,["tokenCount"]);i!=null&&l(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&l(e,["finishReason"],o);const s=a(t,["urlContextMetadata"]);s!=null&&l(e,["urlContextMetadata"],IM(s));const u=a(t,["avgLogprobs"]);u!=null&&l(e,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);c!=null&&l(e,["groundingMetadata"],c);const d=a(t,["index"]);d!=null&&l(e,["index"],d);const f=a(t,["logprobsResult"]);f!=null&&l(e,["logprobsResult"],f);const h=a(t,["safetyRatings"]);return h!=null&&l(e,["safetyRatings"],h),e}function RM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>MM(d))),l(e,["candidates"],c)}const i=a(t,["modelVersion"]);i!=null&&l(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&l(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&l(e,["responseId"],s);const u=a(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function Ow(t){const e={},n=a(t,["details"]);n!=null&&l(e,["details"],n);const r=a(t,["code"]);r!=null&&l(e,["code"],r);const i=a(t,["message"]);return i!=null&&l(e,["message"],i),e}function NM(t){const e={},n=a(t,["response"]);n!=null&&l(e,["response"],RM(n));const r=a(t,["error"]);return r!=null&&l(e,["error"],Ow(r)),e}function DM(t){const e={},n=a(t,["responsesFile"]);n!=null&&l(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>NM(o))),l(e,["inlinedResponses"],i)}return e}function Ts(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["metadata","state"]);i!=null&&l(e,["state"],$w(i));const o=a(t,["metadata","createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&l(e,["endTime"],s);const u=a(t,["metadata","updateTime"]);u!=null&&l(e,["updateTime"],u);const c=a(t,["metadata","model"]);c!=null&&l(e,["model"],c);const d=a(t,["metadata","output"]);return d!=null&&l(e,["dest"],DM(d)),e}function LM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ts(s))),l(e,["batchJobs"],o)}return e}function bM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);return o!=null&&l(e,["error"],Ow(o)),e}function Hw(t){const e={},n=a(t,["details"]);n!=null&&l(e,["details"],n);const r=a(t,["code"]);r!=null&&l(e,["code"],r);const i=a(t,["message"]);return i!=null&&l(e,["message"],i),e}function FM(t){const e={},n=a(t,["instancesFormat"]);n!=null&&l(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&l(e,["gcsUri"],r);const i=a(t,["bigquerySource","inputUri"]);return i!=null&&l(e,["bigqueryUri"],i),e}function UM(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&l(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&l(e,["gcsUri"],r);const i=a(t,["bigqueryDestination","outputUri"]);return i!=null&&l(e,["bigqueryUri"],i),e}function oc(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["state"]);i!=null&&l(e,["state"],$w(i));const o=a(t,["error"]);o!=null&&l(e,["error"],Hw(o));const s=a(t,["createTime"]);s!=null&&l(e,["createTime"],s);const u=a(t,["startTime"]);u!=null&&l(e,["startTime"],u);const c=a(t,["endTime"]);c!=null&&l(e,["endTime"],c);const d=a(t,["updateTime"]);d!=null&&l(e,["updateTime"],d);const f=a(t,["model"]);f!=null&&l(e,["model"],f);const h=a(t,["inputConfig"]);h!=null&&l(e,["src"],FM(h));const p=a(t,["outputConfig"]);return p!=null&&l(e,["dest"],UM(p)),e}function VM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>oc(s))),l(e,["batchJobs"],o)}return e}function $M(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);return o!=null&&l(e,["error"],Hw(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Yn||(Yn={}));class Ao{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BM extends er{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let o="",s={};const u=$m(this.apiClient,n);o=U("{model}:batchGenerateContent",u._url),s=u._query;const f=u.batch.inputConfig.requests,h=f.requests,p=[];for(const T of h){const x=T;if(x.systemInstruction){const C=x.systemInstruction;delete x.systemInstruction;const w=x.request;w.systemInstruction=C,x.request=w}p.push(x)}return f.requests=p,delete u.config,delete u._url,delete u._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()).then(T=>Ts(T))}return await this.createInternal(n)},this.list=async(n={})=>new Ao(Yn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=gM(this.apiClient,e);return u=U("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>oc(f))}else{const d=$m(this.apiClient,e);return u=U("{model}:batchGenerateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ts(f))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=yM(this.apiClient,e);return u=U("batchPredictionJobs/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>oc(f))}else{const d=lM(this.apiClient,e);return u=U("batches/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ts(f))}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=vM(this.apiClient,e);s=U("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=uM(this.apiClient,e);s=U("batches/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=TM(e);return u=U("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=VM(f),p=new bm;return Object.assign(p,h),p})}else{const d=dM(e);return u=U("batches",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=LM(f),p=new bm;return Object.assign(p,h),p})}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=xM(this.apiClient,e);return u=U("batchPredictionJobs/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>$M(f))}else{const d=fM(this.apiClient,e);return u=U("batches/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>bM(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GM(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function OM(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function HM(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function qM(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],GM(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],OM(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],HM(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function Bm(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>qM(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function zM(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function WM(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function KM(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],WM(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function JM(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function jM(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],JM(n)),e}function YM(){return{}}function XM(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function QM(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>zM(d))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],KM(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],jM(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],YM());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],XM(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function ZM(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function eR(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function tR(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],eR(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function nR(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],ZM(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],tR(r)),e}function rR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&l(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&l(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let f=lt(s);Array.isArray(f)&&(f=f.map(h=>Bm(h))),l(e,["contents"],f)}const u=a(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],Bm(Ne(u)));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>QM(h))),l(e,["tools"],f)}const d=a(t,["toolConfig"]);if(e!==void 0&&d!=null&&l(e,["toolConfig"],nR(d)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function iR(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["model"],Pw(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],rR(i,n)),n}function oR(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Kt(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function sR(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Kt(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function aR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&l(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&l(e,["expireTime"],i),n}function lR(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Kt(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],aR(i,n)),n}function uR(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),n}function cR(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],uR(n,e)),e}function dR(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function fR(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function hR(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function pR(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],dR(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],fR(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],hR(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function Gm(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pR(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function mR(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&l(e,["description"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["parameters"]);i!=null&&l(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&l(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&l(e,["response"],s);const u=a(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function gR(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function yR(t){const e={},n=a(t,["timeRangeFilter"]);n!=null&&l(e,["timeRangeFilter"],gR(n));const r=a(t,["excludeDomains"]);return r!=null&&l(e,["excludeDomains"],r),e}function vR(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function wR(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],vR(n)),e}function TR(t){const e={},n=a(t,["excludeDomains"]);return n!=null&&l(e,["excludeDomains"],n),e}function xR(t){const e={},n=a(t,["apiKeyString"]);return n!=null&&l(e,["apiKeyString"],n),e}function CR(t){const e={},n=a(t,["apiKeyConfig"]);n!=null&&l(e,["apiKeyConfig"],xR(n));const r=a(t,["authType"]);r!=null&&l(e,["authType"],r);const i=a(t,["googleServiceAccountConfig"]);i!=null&&l(e,["googleServiceAccountConfig"],i);const o=a(t,["httpBasicAuthConfig"]);o!=null&&l(e,["httpBasicAuthConfig"],o);const s=a(t,["oauthConfig"]);s!=null&&l(e,["oauthConfig"],s);const u=a(t,["oidcConfig"]);return u!=null&&l(e,["oidcConfig"],u),e}function SR(t){const e={},n=a(t,["authConfig"]);return n!=null&&l(e,["authConfig"],CR(n)),e}function _R(){return{}}function kR(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function ER(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>mR(p))),l(e,["functionDeclarations"],h)}const r=a(t,["retrieval"]);r!=null&&l(e,["retrieval"],r);const i=a(t,["googleSearch"]);i!=null&&l(e,["googleSearch"],yR(i));const o=a(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],wR(o));const s=a(t,["enterpriseWebSearch"]);s!=null&&l(e,["enterpriseWebSearch"],TR(s));const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],SR(u)),a(t,["urlContext"])!=null&&l(e,["urlContext"],_R());const d=a(t,["computerUse"]);d!=null&&l(e,["computerUse"],kR(d));const f=a(t,["codeExecution"]);return f!=null&&l(e,["codeExecution"],f),e}function AR(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function PR(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function IR(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],PR(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function MR(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],AR(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],IR(r)),e}function RR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&l(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&l(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=lt(s);Array.isArray(h)&&(h=h.map(p=>Gm(p))),l(e,["contents"],h)}const u=a(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],Gm(Ne(u)));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>ER(p))),l(e,["tools"],h)}const d=a(t,["toolConfig"]);e!==void 0&&d!=null&&l(e,["toolConfig"],MR(d));const f=a(t,["kmsKeyName"]);return e!==void 0&&f!=null&&l(e,["encryption_spec","kmsKeyName"],f),n}function NR(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["model"],Pw(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],RR(i,n)),n}function DR(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Kt(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function LR(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Kt(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function bR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&l(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&l(e,["expireTime"],i),n}function FR(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Kt(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],bR(i,n)),n}function UR(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),n}function VR(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],UR(n,e)),e}function xs(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["model"]);i!=null&&l(e,["model"],i);const o=a(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["updateTime"]);s!=null&&l(e,["updateTime"],s);const u=a(t,["expireTime"]);u!=null&&l(e,["expireTime"],u);const c=a(t,["usageMetadata"]);return c!=null&&l(e,["usageMetadata"],c),e}function $R(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function BR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>xs(s))),l(e,["cachedContents"],o)}return e}function Cs(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["model"]);i!=null&&l(e,["model"],i);const o=a(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["updateTime"]);s!=null&&l(e,["updateTime"],s);const u=a(t,["expireTime"]);u!=null&&l(e,["expireTime"],u);const c=a(t,["usageMetadata"]);return c!=null&&l(e,["usageMetadata"],c),e}function GR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function OR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Cs(s))),l(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HR extends er{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ao(Yn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=NR(this.apiClient,e);return u=U("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Cs(f))}else{const d=iR(this.apiClient,e);return u=U("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>xs(f))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=DR(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Cs(f))}else{const d=oR(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>xs(f))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=LR(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=GR(f),p=new Dm;return Object.assign(p,h),p})}else{const d=sR(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=$R(f),p=new Dm;return Object.assign(p,h),p})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=FR(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Cs(f))}else{const d=lR(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>xs(f))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=VR(e);return u=U("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=OR(f),p=new Lm;return Object.assign(p,h),p})}else{const d=cR(e);return u=U("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=BR(f),p=new Lm;return Object.assign(p,h),p})}}}function Om(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ne(t){return this instanceof ne?(this.v=t,this):new ne(t)}function Ur(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(T){return Promise.resolve(T).then(g,h)}}function u(g,T){r[g]&&(i[g]=function(x){return new Promise(function(C,w){o.push([g,x,C,w])>1||c(g,x)})},T&&(i[g]=T(i[g])))}function c(g,T){try{d(r[g](T))}catch(x){p(o[0][3],x)}}function d(g){g.value instanceof ne?Promise.resolve(g.value.v).then(f,h):p(o[0][2],g)}function f(g){c("next",g)}function h(g){c("throw",g)}function p(g,T){g(T),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Oi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Om=="function"?Om(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(u,c){s=t[o](s),i(u,c,s.done,s.value)})}}function i(o,s,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qR(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:qw(n)}function qw(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function zR(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hm(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!qw(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class WR{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new KR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class KR{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),zR(o)}async sendMessage(e){var n;await this.sendPromise;const r=Ne(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,u;const c=await i,d=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(h))!==null&&u!==void 0?u:[]);const g=d?[d]:[];this.recordHistory(r,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Ne(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Hm(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Ur(this,arguments,function*(){var s,u,c,d;const f=[];try{for(var h=!0,p=Oi(e),g;g=yield ne(p.next()),s=g.done,!s;h=!0){d=g.value,h=!1;const T=d;if(qR(T)){const x=(i=(r=T.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;x!==void 0&&f.push(x)}yield yield ne(T)}}catch(T){u={error:T}}finally{try{!h&&!s&&(c=p.return)&&(yield ne(c.call(p)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Hm(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ia extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ia.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JR(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),n}function jR(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],JR(n,e)),e}function YR(t){const e={},n=a(t,["details"]);n!=null&&l(e,["details"],n);const r=a(t,["message"]);r!=null&&l(e,["message"],r);const i=a(t,["code"]);return i!=null&&l(e,["code"],i),e}function XR(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["mimeType"]);i!=null&&l(e,["mimeType"],i);const o=a(t,["sizeBytes"]);o!=null&&l(e,["sizeBytes"],o);const s=a(t,["createTime"]);s!=null&&l(e,["createTime"],s);const u=a(t,["expirationTime"]);u!=null&&l(e,["expirationTime"],u);const c=a(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const d=a(t,["sha256Hash"]);d!=null&&l(e,["sha256Hash"],d);const f=a(t,["uri"]);f!=null&&l(e,["uri"],f);const h=a(t,["downloadUri"]);h!=null&&l(e,["downloadUri"],h);const p=a(t,["state"]);p!=null&&l(e,["state"],p);const g=a(t,["source"]);g!=null&&l(e,["source"],g);const T=a(t,["videoMetadata"]);T!=null&&l(e,["videoMetadata"],T);const x=a(t,["error"]);return x!=null&&l(e,["error"],YR(x)),e}function QR(t){const e={},n=a(t,["file"]);n!=null&&l(e,["file"],XR(n));const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function ZR(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","file"],bw(n));const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function eN(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","file"],bw(n));const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function tN(t){const e={},n=a(t,["details"]);n!=null&&l(e,["details"],n);const r=a(t,["message"]);r!=null&&l(e,["message"],r);const i=a(t,["code"]);return i!=null&&l(e,["code"],i),e}function sc(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["mimeType"]);i!=null&&l(e,["mimeType"],i);const o=a(t,["sizeBytes"]);o!=null&&l(e,["sizeBytes"],o);const s=a(t,["createTime"]);s!=null&&l(e,["createTime"],s);const u=a(t,["expirationTime"]);u!=null&&l(e,["expirationTime"],u);const c=a(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const d=a(t,["sha256Hash"]);d!=null&&l(e,["sha256Hash"],d);const f=a(t,["uri"]);f!=null&&l(e,["uri"],f);const h=a(t,["downloadUri"]);h!=null&&l(e,["downloadUri"],h);const p=a(t,["state"]);p!=null&&l(e,["state"],p);const g=a(t,["source"]);g!=null&&l(e,["source"],g);const T=a(t,["videoMetadata"]);T!=null&&l(e,["videoMetadata"],T);const x=a(t,["error"]);return x!=null&&l(e,["error"],tN(x)),e}function nN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>sc(s))),l(e,["files"],o)}return e}function rN(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function iN(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oN extends er{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ao(Yn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>sc(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jR(e);return o=U("files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=nN(c),f=new xI;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=QR(e);return o=U("upload/v1beta/files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=rN(c),f=new CI;return Object.assign(f,d),f})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ZR(e);return o=U("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>sc(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=eN(e);return o=U("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=iN(c),f=new SI;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sN(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function zw(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],sN(n)),e}function aN(t){const e={},n=a(t,["speaker"]);n!=null&&l(e,["speaker"],n);const r=a(t,["voiceConfig"]);return r!=null&&l(e,["voiceConfig"],zw(r)),e}function lN(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>aN(i))),l(e,["speakerVoiceConfigs"],r)}return e}function uN(t){const e={},n=a(t,["voiceConfig"]);n!=null&&l(e,["voiceConfig"],zw(n));const r=a(t,["multiSpeakerVoiceConfig"]);r!=null&&l(e,["multiSpeakerVoiceConfig"],lN(r));const i=a(t,["languageCode"]);return i!=null&&l(e,["languageCode"],i),e}function cN(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function dN(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function fN(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function hN(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],cN(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],dN(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],fN(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function pN(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>hN(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function mN(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function gN(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function yN(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],gN(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function vN(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function wN(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],vN(n)),e}function TN(){return{}}function xN(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function CN(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>mN(d))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],yN(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],wN(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],TN());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],xN(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function SN(t){const e={},n=a(t,["handle"]);if(n!=null&&l(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qm(){return{}}function _N(t){const e={},n=a(t,["disabled"]);n!=null&&l(e,["disabled"],n);const r=a(t,["startOfSpeechSensitivity"]);r!=null&&l(e,["startOfSpeechSensitivity"],r);const i=a(t,["endOfSpeechSensitivity"]);i!=null&&l(e,["endOfSpeechSensitivity"],i);const o=a(t,["prefixPaddingMs"]);o!=null&&l(e,["prefixPaddingMs"],o);const s=a(t,["silenceDurationMs"]);return s!=null&&l(e,["silenceDurationMs"],s),e}function kN(t){const e={},n=a(t,["automaticActivityDetection"]);n!=null&&l(e,["automaticActivityDetection"],_N(n));const r=a(t,["activityHandling"]);r!=null&&l(e,["activityHandling"],r);const i=a(t,["turnCoverage"]);return i!=null&&l(e,["turnCoverage"],i),e}function EN(t){const e={},n=a(t,["targetTokens"]);return n!=null&&l(e,["targetTokens"],n),e}function AN(t){const e={},n=a(t,["triggerTokens"]);n!=null&&l(e,["triggerTokens"],n);const r=a(t,["slidingWindow"]);return r!=null&&l(e,["slidingWindow"],EN(r)),e}function PN(t){const e={},n=a(t,["proactiveAudio"]);return n!=null&&l(e,["proactiveAudio"],n),e}function IN(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","topP"],s);const u=a(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const h=a(t,["speechConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","speechConfig"],uN(Xd(h)));const p=a(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=a(t,["systemInstruction"]);e!==void 0&&g!=null&&l(e,["setup","systemInstruction"],pN(Ne(g)));const T=a(t,["tools"]);if(e!==void 0&&T!=null){let _=oi(T);Array.isArray(_)&&(_=_.map(k=>CN(ii(k)))),l(e,["setup","tools"],_)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&l(e,["setup","sessionResumption"],SN(x));const C=a(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&l(e,["setup","inputAudioTranscription"],qm());const w=a(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&l(e,["setup","outputAudioTranscription"],qm());const y=a(t,["realtimeInputConfig"]);e!==void 0&&y!=null&&l(e,["setup","realtimeInputConfig"],kN(y));const v=a(t,["contextWindowCompression"]);e!==void 0&&v!=null&&l(e,["setup","contextWindowCompression"],AN(v));const S=a(t,["proactivity"]);return e!==void 0&&S!=null&&l(e,["setup","proactivity"],PN(S)),n}function MN(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["setup","model"],Y(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],IN(i,n)),n}function RN(){return{}}function NN(){return{}}function DN(t){const e={},n=a(t,["media"]);n!=null&&l(e,["mediaChunks"],Iw(n));const r=a(t,["audio"]);r!=null&&l(e,["audio"],Rw(r));const i=a(t,["audioStreamEnd"]);i!=null&&l(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&l(e,["video"],Mw(o));const s=a(t,["text"]);return s!=null&&l(e,["text"],s),a(t,["activityStart"])!=null&&l(e,["activityStart"],RN()),a(t,["activityEnd"])!=null&&l(e,["activityEnd"],NN()),e}function Ww(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["weight"]);return r!=null&&l(e,["weight"],r),e}function LN(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ww(i))),l(e,["weightedPrompts"],r)}return e}function Kw(t){const e={},n=a(t,["temperature"]);n!=null&&l(e,["temperature"],n);const r=a(t,["topK"]);r!=null&&l(e,["topK"],r);const i=a(t,["seed"]);i!=null&&l(e,["seed"],i);const o=a(t,["guidance"]);o!=null&&l(e,["guidance"],o);const s=a(t,["bpm"]);s!=null&&l(e,["bpm"],s);const u=a(t,["density"]);u!=null&&l(e,["density"],u);const c=a(t,["brightness"]);c!=null&&l(e,["brightness"],c);const d=a(t,["scale"]);d!=null&&l(e,["scale"],d);const f=a(t,["muteBass"]);f!=null&&l(e,["muteBass"],f);const h=a(t,["muteDrums"]);h!=null&&l(e,["muteDrums"],h);const p=a(t,["onlyBassAndDrums"]);p!=null&&l(e,["onlyBassAndDrums"],p);const g=a(t,["musicGenerationMode"]);return g!=null&&l(e,["musicGenerationMode"],g),e}function bN(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&l(e,["musicGenerationConfig"],Kw(n)),e}function Jw(t){const e={},n=a(t,["model"]);return n!=null&&l(e,["model"],n),e}function jw(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ww(i))),l(e,["weightedPrompts"],r)}return e}function ac(t){const e={},n=a(t,["setup"]);n!=null&&l(e,["setup"],Jw(n));const r=a(t,["clientContent"]);r!=null&&l(e,["clientContent"],jw(r));const i=a(t,["musicGenerationConfig"]);i!=null&&l(e,["musicGenerationConfig"],Kw(i));const o=a(t,["playbackControl"]);return o!=null&&l(e,["playbackControl"],o),e}function FN(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function UN(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],FN(n)),e}function VN(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&l(e,["voiceConfig"],UN(n)),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function $N(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function BN(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function GN(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function ON(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],$N(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],BN(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],GN(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function HN(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ON(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function qN(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&l(e,["description"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["parameters"]);i!=null&&l(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&l(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&l(e,["response"],s);const u=a(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function zN(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function WN(t){const e={},n=a(t,["timeRangeFilter"]);n!=null&&l(e,["timeRangeFilter"],zN(n));const r=a(t,["excludeDomains"]);return r!=null&&l(e,["excludeDomains"],r),e}function KN(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function JN(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],KN(n)),e}function jN(t){const e={},n=a(t,["excludeDomains"]);return n!=null&&l(e,["excludeDomains"],n),e}function YN(t){const e={},n=a(t,["apiKeyString"]);return n!=null&&l(e,["apiKeyString"],n),e}function XN(t){const e={},n=a(t,["apiKeyConfig"]);n!=null&&l(e,["apiKeyConfig"],YN(n));const r=a(t,["authType"]);r!=null&&l(e,["authType"],r);const i=a(t,["googleServiceAccountConfig"]);i!=null&&l(e,["googleServiceAccountConfig"],i);const o=a(t,["httpBasicAuthConfig"]);o!=null&&l(e,["httpBasicAuthConfig"],o);const s=a(t,["oauthConfig"]);s!=null&&l(e,["oauthConfig"],s);const u=a(t,["oidcConfig"]);return u!=null&&l(e,["oidcConfig"],u),e}function QN(t){const e={},n=a(t,["authConfig"]);return n!=null&&l(e,["authConfig"],XN(n)),e}function ZN(){return{}}function eD(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function tD(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>qN(p))),l(e,["functionDeclarations"],h)}const r=a(t,["retrieval"]);r!=null&&l(e,["retrieval"],r);const i=a(t,["googleSearch"]);i!=null&&l(e,["googleSearch"],WN(i));const o=a(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],JN(o));const s=a(t,["enterpriseWebSearch"]);s!=null&&l(e,["enterpriseWebSearch"],jN(s));const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],QN(u)),a(t,["urlContext"])!=null&&l(e,["urlContext"],ZN());const d=a(t,["computerUse"]);d!=null&&l(e,["computerUse"],eD(d));const f=a(t,["codeExecution"]);return f!=null&&l(e,["codeExecution"],f),e}function nD(t){const e={},n=a(t,["handle"]);n!=null&&l(e,["handle"],n);const r=a(t,["transparent"]);return r!=null&&l(e,["transparent"],r),e}function zm(){return{}}function rD(t){const e={},n=a(t,["disabled"]);n!=null&&l(e,["disabled"],n);const r=a(t,["startOfSpeechSensitivity"]);r!=null&&l(e,["startOfSpeechSensitivity"],r);const i=a(t,["endOfSpeechSensitivity"]);i!=null&&l(e,["endOfSpeechSensitivity"],i);const o=a(t,["prefixPaddingMs"]);o!=null&&l(e,["prefixPaddingMs"],o);const s=a(t,["silenceDurationMs"]);return s!=null&&l(e,["silenceDurationMs"],s),e}function iD(t){const e={},n=a(t,["automaticActivityDetection"]);n!=null&&l(e,["automaticActivityDetection"],rD(n));const r=a(t,["activityHandling"]);r!=null&&l(e,["activityHandling"],r);const i=a(t,["turnCoverage"]);return i!=null&&l(e,["turnCoverage"],i),e}function oD(t){const e={},n=a(t,["targetTokens"]);return n!=null&&l(e,["targetTokens"],n),e}function sD(t){const e={},n=a(t,["triggerTokens"]);n!=null&&l(e,["triggerTokens"],n);const r=a(t,["slidingWindow"]);return r!=null&&l(e,["slidingWindow"],oD(r)),e}function aD(t){const e={},n=a(t,["proactiveAudio"]);return n!=null&&l(e,["proactiveAudio"],n),e}function lD(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","topP"],s);const u=a(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const h=a(t,["speechConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","speechConfig"],VN(Xd(h)));const p=a(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=a(t,["systemInstruction"]);e!==void 0&&g!=null&&l(e,["setup","systemInstruction"],HN(Ne(g)));const T=a(t,["tools"]);if(e!==void 0&&T!=null){let _=oi(T);Array.isArray(_)&&(_=_.map(k=>tD(ii(k)))),l(e,["setup","tools"],_)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&l(e,["setup","sessionResumption"],nD(x));const C=a(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&l(e,["setup","inputAudioTranscription"],zm());const w=a(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&l(e,["setup","outputAudioTranscription"],zm());const y=a(t,["realtimeInputConfig"]);e!==void 0&&y!=null&&l(e,["setup","realtimeInputConfig"],iD(y));const v=a(t,["contextWindowCompression"]);e!==void 0&&v!=null&&l(e,["setup","contextWindowCompression"],sD(v));const S=a(t,["proactivity"]);return e!==void 0&&S!=null&&l(e,["setup","proactivity"],aD(S)),n}function uD(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["setup","model"],Y(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],lD(i,n)),n}function cD(){return{}}function dD(){return{}}function fD(t){const e={},n=a(t,["media"]);n!=null&&l(e,["mediaChunks"],Iw(n));const r=a(t,["audio"]);r!=null&&l(e,["audio"],Rw(r));const i=a(t,["audioStreamEnd"]);i!=null&&l(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&l(e,["video"],Mw(o));const s=a(t,["text"]);return s!=null&&l(e,["text"],s),a(t,["activityStart"])!=null&&l(e,["activityStart"],cD()),a(t,["activityEnd"])!=null&&l(e,["activityEnd"],dD()),e}function hD(){return{}}function pD(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function mD(t){const e={},n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function gD(t){const e={},n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function yD(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],pD(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],mD(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],gD(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function vD(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yD(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function Wm(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["finished"]);return r!=null&&l(e,["finished"],r),e}function wD(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&l(e,["retrievedUrl"],n);const r=a(t,["urlRetrievalStatus"]);return r!=null&&l(e,["urlRetrievalStatus"],r),e}function TD(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wD(i))),l(e,["urlMetadata"],r)}return e}function xD(t){const e={},n=a(t,["modelTurn"]);n!=null&&l(e,["modelTurn"],vD(n));const r=a(t,["turnComplete"]);r!=null&&l(e,["turnComplete"],r);const i=a(t,["interrupted"]);i!=null&&l(e,["interrupted"],i);const o=a(t,["groundingMetadata"]);o!=null&&l(e,["groundingMetadata"],o);const s=a(t,["generationComplete"]);s!=null&&l(e,["generationComplete"],s);const u=a(t,["inputTranscription"]);u!=null&&l(e,["inputTranscription"],Wm(u));const c=a(t,["outputTranscription"]);c!=null&&l(e,["outputTranscription"],Wm(c));const d=a(t,["urlContextMetadata"]);return d!=null&&l(e,["urlContextMetadata"],TD(d)),e}function CD(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function SD(t){const e={},n=a(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>CD(i))),l(e,["functionCalls"],r)}return e}function _D(t){const e={},n=a(t,["ids"]);return n!=null&&l(e,["ids"],n),e}function es(t){const e={},n=a(t,["modality"]);n!=null&&l(e,["modality"],n);const r=a(t,["tokenCount"]);return r!=null&&l(e,["tokenCount"],r),e}function kD(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&l(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&l(e,["cachedContentTokenCount"],r);const i=a(t,["responseTokenCount"]);i!=null&&l(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&l(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&l(e,["thoughtsTokenCount"],s);const u=a(t,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);const c=a(t,["promptTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>es(g))),l(e,["promptTokensDetails"],p)}const d=a(t,["cacheTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>es(g))),l(e,["cacheTokensDetails"],p)}const f=a(t,["responseTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>es(g))),l(e,["responseTokensDetails"],p)}const h=a(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>es(g))),l(e,["toolUsePromptTokensDetails"],p)}return e}function ED(t){const e={},n=a(t,["timeLeft"]);return n!=null&&l(e,["timeLeft"],n),e}function AD(t){const e={},n=a(t,["newHandle"]);n!=null&&l(e,["newHandle"],n);const r=a(t,["resumable"]);r!=null&&l(e,["resumable"],r);const i=a(t,["lastConsumedClientMessageIndex"]);return i!=null&&l(e,["lastConsumedClientMessageIndex"],i),e}function PD(t){const e={};a(t,["setupComplete"])!=null&&l(e,["setupComplete"],hD());const r=a(t,["serverContent"]);r!=null&&l(e,["serverContent"],xD(r));const i=a(t,["toolCall"]);i!=null&&l(e,["toolCall"],SD(i));const o=a(t,["toolCallCancellation"]);o!=null&&l(e,["toolCallCancellation"],_D(o));const s=a(t,["usageMetadata"]);s!=null&&l(e,["usageMetadata"],kD(s));const u=a(t,["goAway"]);u!=null&&l(e,["goAway"],ED(u));const c=a(t,["sessionResumptionUpdate"]);return c!=null&&l(e,["sessionResumptionUpdate"],AD(c)),e}function ID(){return{}}function MD(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["weight"]);return r!=null&&l(e,["weight"],r),e}function RD(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>MD(i))),l(e,["weightedPrompts"],r)}return e}function ND(t){const e={},n=a(t,["temperature"]);n!=null&&l(e,["temperature"],n);const r=a(t,["topK"]);r!=null&&l(e,["topK"],r);const i=a(t,["seed"]);i!=null&&l(e,["seed"],i);const o=a(t,["guidance"]);o!=null&&l(e,["guidance"],o);const s=a(t,["bpm"]);s!=null&&l(e,["bpm"],s);const u=a(t,["density"]);u!=null&&l(e,["density"],u);const c=a(t,["brightness"]);c!=null&&l(e,["brightness"],c);const d=a(t,["scale"]);d!=null&&l(e,["scale"],d);const f=a(t,["muteBass"]);f!=null&&l(e,["muteBass"],f);const h=a(t,["muteDrums"]);h!=null&&l(e,["muteDrums"],h);const p=a(t,["onlyBassAndDrums"]);p!=null&&l(e,["onlyBassAndDrums"],p);const g=a(t,["musicGenerationMode"]);return g!=null&&l(e,["musicGenerationMode"],g),e}function DD(t){const e={},n=a(t,["clientContent"]);n!=null&&l(e,["clientContent"],RD(n));const r=a(t,["musicGenerationConfig"]);return r!=null&&l(e,["musicGenerationConfig"],ND(r)),e}function LD(t){const e={},n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);r!=null&&l(e,["mimeType"],r);const i=a(t,["sourceMetadata"]);return i!=null&&l(e,["sourceMetadata"],DD(i)),e}function bD(t){const e={},n=a(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>LD(i))),l(e,["audioChunks"],r)}return e}function FD(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["filteredReason"]);return r!=null&&l(e,["filteredReason"],r),e}function UD(t){const e={};a(t,["setupComplete"])!=null&&l(e,["setupComplete"],ID());const r=a(t,["serverContent"]);r!=null&&l(e,["serverContent"],bD(r));const i=a(t,["filteredPrompt"]);return i!=null&&l(e,["filteredPrompt"],FD(i)),e}function VD(t){const e={},n=a(t,["sessionId"]);return n!=null&&l(e,["sessionId"],n),e}function $D(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function BD(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function GD(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function OD(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],$D(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],BD(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],GD(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function HD(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>OD(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function Km(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["finished"]);return r!=null&&l(e,["finished"],r),e}function qD(t){const e={},n=a(t,["modelTurn"]);n!=null&&l(e,["modelTurn"],HD(n));const r=a(t,["turnComplete"]);r!=null&&l(e,["turnComplete"],r);const i=a(t,["interrupted"]);i!=null&&l(e,["interrupted"],i);const o=a(t,["groundingMetadata"]);o!=null&&l(e,["groundingMetadata"],o);const s=a(t,["generationComplete"]);s!=null&&l(e,["generationComplete"],s);const u=a(t,["inputTranscription"]);u!=null&&l(e,["inputTranscription"],Km(u));const c=a(t,["outputTranscription"]);return c!=null&&l(e,["outputTranscription"],Km(c)),e}function zD(t){const e={},n=a(t,["args"]);n!=null&&l(e,["args"],n);const r=a(t,["name"]);return r!=null&&l(e,["name"],r),e}function WD(t){const e={},n=a(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>zD(i))),l(e,["functionCalls"],r)}return e}function KD(t){const e={},n=a(t,["ids"]);return n!=null&&l(e,["ids"],n),e}function ts(t){const e={},n=a(t,["modality"]);n!=null&&l(e,["modality"],n);const r=a(t,["tokenCount"]);return r!=null&&l(e,["tokenCount"],r),e}function JD(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&l(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&l(e,["cachedContentTokenCount"],r);const i=a(t,["candidatesTokenCount"]);i!=null&&l(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&l(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&l(e,["thoughtsTokenCount"],s);const u=a(t,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);const c=a(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(T=>ts(T))),l(e,["promptTokensDetails"],g)}const d=a(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(T=>ts(T))),l(e,["cacheTokensDetails"],g)}const f=a(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(T=>ts(T))),l(e,["responseTokensDetails"],g)}const h=a(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(T=>ts(T))),l(e,["toolUsePromptTokensDetails"],g)}const p=a(t,["trafficType"]);return p!=null&&l(e,["trafficType"],p),e}function jD(t){const e={},n=a(t,["timeLeft"]);return n!=null&&l(e,["timeLeft"],n),e}function YD(t){const e={},n=a(t,["newHandle"]);n!=null&&l(e,["newHandle"],n);const r=a(t,["resumable"]);r!=null&&l(e,["resumable"],r);const i=a(t,["lastConsumedClientMessageIndex"]);return i!=null&&l(e,["lastConsumedClientMessageIndex"],i),e}function XD(t){const e={},n=a(t,["setupComplete"]);n!=null&&l(e,["setupComplete"],VD(n));const r=a(t,["serverContent"]);r!=null&&l(e,["serverContent"],qD(r));const i=a(t,["toolCall"]);i!=null&&l(e,["toolCall"],WD(i));const o=a(t,["toolCallCancellation"]);o!=null&&l(e,["toolCallCancellation"],KD(o));const s=a(t,["usageMetadata"]);s!=null&&l(e,["usageMetadata"],JD(s));const u=a(t,["goAway"]);u!=null&&l(e,["goAway"],jD(u));const c=a(t,["sessionResumptionUpdate"]);return c!=null&&l(e,["sessionResumptionUpdate"],YD(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QD(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function ZD(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function e2(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function t2(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],QD(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],ZD(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],e2(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function Ma(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>t2(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function n2(t){const e={},n=a(t,["anyOf"]);n!=null&&l(e,["anyOf"],n);const r=a(t,["default"]);r!=null&&l(e,["default"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["enum"]);o!=null&&l(e,["enum"],o);const s=a(t,["example"]);s!=null&&l(e,["example"],s);const u=a(t,["format"]);u!=null&&l(e,["format"],u);const c=a(t,["items"]);c!=null&&l(e,["items"],c);const d=a(t,["maxItems"]);d!=null&&l(e,["maxItems"],d);const f=a(t,["maxLength"]);f!=null&&l(e,["maxLength"],f);const h=a(t,["maxProperties"]);h!=null&&l(e,["maxProperties"],h);const p=a(t,["maximum"]);p!=null&&l(e,["maximum"],p);const g=a(t,["minItems"]);g!=null&&l(e,["minItems"],g);const T=a(t,["minLength"]);T!=null&&l(e,["minLength"],T);const x=a(t,["minProperties"]);x!=null&&l(e,["minProperties"],x);const C=a(t,["minimum"]);C!=null&&l(e,["minimum"],C);const w=a(t,["nullable"]);w!=null&&l(e,["nullable"],w);const y=a(t,["pattern"]);y!=null&&l(e,["pattern"],y);const v=a(t,["properties"]);v!=null&&l(e,["properties"],v);const S=a(t,["propertyOrdering"]);S!=null&&l(e,["propertyOrdering"],S);const _=a(t,["required"]);_!=null&&l(e,["required"],_);const k=a(t,["title"]);k!=null&&l(e,["title"],k);const A=a(t,["type"]);return A!=null&&l(e,["type"],A),e}function r2(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&l(e,["category"],n);const r=a(t,["threshold"]);return r!=null&&l(e,["threshold"],r),e}function i2(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function o2(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function s2(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],o2(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function a2(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function l2(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],a2(n)),e}function u2(){return{}}function c2(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function d2(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>i2(d))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],s2(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],l2(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],u2());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],c2(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function f2(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function h2(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function p2(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],h2(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function m2(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],f2(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],p2(r)),e}function g2(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function Yw(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],g2(n)),e}function y2(t){const e={},n=a(t,["speaker"]);n!=null&&l(e,["speaker"],n);const r=a(t,["voiceConfig"]);return r!=null&&l(e,["voiceConfig"],Yw(r)),e}function v2(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>y2(i))),l(e,["speakerVoiceConfigs"],r)}return e}function w2(t){const e={},n=a(t,["voiceConfig"]);n!=null&&l(e,["voiceConfig"],Yw(n));const r=a(t,["multiSpeakerVoiceConfig"]);r!=null&&l(e,["multiSpeakerVoiceConfig"],v2(r));const i=a(t,["languageCode"]);return i!=null&&l(e,["languageCode"],i),e}function T2(t){const e={},n=a(t,["includeThoughts"]);n!=null&&l(e,["includeThoughts"],n);const r=a(t,["thinkingBudget"]);return r!=null&&l(e,["thinkingBudget"],r),e}function x2(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],Ma(Ne(i)));const o=a(e,["temperature"]);o!=null&&l(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&l(r,["topP"],s);const u=a(e,["topK"]);u!=null&&l(r,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&l(r,["candidateCount"],c);const d=a(e,["maxOutputTokens"]);d!=null&&l(r,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&l(r,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&l(r,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&l(r,["logprobs"],p);const g=a(e,["presencePenalty"]);g!=null&&l(r,["presencePenalty"],g);const T=a(e,["frequencyPenalty"]);T!=null&&l(r,["frequencyPenalty"],T);const x=a(e,["seed"]);x!=null&&l(r,["seed"],x);const C=a(e,["responseMimeType"]);C!=null&&l(r,["responseMimeType"],C);const w=a(e,["responseSchema"]);w!=null&&l(r,["responseSchema"],n2(jd(w)));const y=a(e,["responseJsonSchema"]);if(y!=null&&l(r,["responseJsonSchema"],y),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=a(e,["safetySettings"]);if(n!==void 0&&v!=null){let I=v;Array.isArray(I)&&(I=I.map(b=>r2(b))),l(n,["safetySettings"],I)}const S=a(e,["tools"]);if(n!==void 0&&S!=null){let I=oi(S);Array.isArray(I)&&(I=I.map(b=>d2(ii(b)))),l(n,["tools"],I)}const _=a(e,["toolConfig"]);if(n!==void 0&&_!=null&&l(n,["toolConfig"],m2(_)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=a(e,["cachedContent"]);n!==void 0&&k!=null&&l(n,["cachedContent"],Kt(t,k));const A=a(e,["responseModalities"]);A!=null&&l(r,["responseModalities"],A);const E=a(e,["mediaResolution"]);E!=null&&l(r,["mediaResolution"],E);const R=a(e,["speechConfig"]);if(R!=null&&l(r,["speechConfig"],w2(Yd(R))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=a(e,["thinkingConfig"]);return L!=null&&l(r,["thinkingConfig"],T2(L)),r}function Jm(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["contents"]);if(i!=null){let s=lt(i);Array.isArray(s)&&(s=s.map(u=>Ma(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["generationConfig"],x2(t,o,n)),n}function C2(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&l(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&l(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&l(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function S2(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["contents"]);i!=null&&l(n,["requests[]","content"],Dw(t,i));const o=a(e,["config"]);o!=null&&l(n,["config"],C2(o,n));const s=a(e,["model"]);return s!==void 0&&l(n,["requests[]","model"],Y(t,s)),n}function _2(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&l(e,["parameters","aspectRatio"],i);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&l(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&l(e,["parameters","safetySetting"],s);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u);const c=a(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&l(e,["parameters","includeSafetyAttributes"],c);const d=a(t,["includeRaiReason"]);e!==void 0&&d!=null&&l(e,["parameters","includeRaiReason"],d);const f=a(t,["language"]);e!==void 0&&f!=null&&l(e,["parameters","language"],f);const h=a(t,["outputMimeType"]);e!==void 0&&h!=null&&l(e,["parameters","outputOptions","mimeType"],h);const p=a(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&l(e,["parameters","outputOptions","compressionQuality"],p),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const g=a(t,["imageSize"]);if(e!==void 0&&g!=null&&l(e,["parameters","sampleImageSize"],g),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function k2(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&l(n,["config"],_2(o,n)),n}function E2(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],Y(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function A2(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&l(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&l(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&l(n,["_query","filter"],s);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],Fw(t,u)),r}function P2(t,e){const n={},r=a(e,["config"]);return r!=null&&l(n,["config"],A2(t,r,n)),n}function I2(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&l(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&l(e,["defaultCheckpointId"],o),n}function M2(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],Y(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],I2(i,n)),n}function R2(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],Y(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function N2(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function D2(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["contents"]);if(i!=null){let s=lt(i);Array.isArray(s)&&(s=s.map(u=>Ma(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["config"],N2(o)),n}function Xw(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&l(e,["bytesBase64Encoded"],tr(n));const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function L2(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&l(e,["instances[0]","prompt"],r);const i=a(t,["image"]);if(e!==void 0&&i!=null&&l(e,["instances[0]","image"],Xw(i)),a(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function b2(t,e){const n={},r=a(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=a(t,["durationSeconds"]);if(e!==void 0&&i!=null&&l(e,["parameters","durationSeconds"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&l(e,["parameters","aspectRatio"],o);const s=a(t,["resolution"]);e!==void 0&&s!=null&&l(e,["parameters","resolution"],s);const u=a(t,["personGeneration"]);if(e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=a(t,["negativePrompt"]);e!==void 0&&c!=null&&l(e,["parameters","negativePrompt"],c);const d=a(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&l(e,["parameters","enhancePrompt"],d),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(a(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(a(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function F2(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["image"]);if(o!=null&&l(n,["instances[0]","image"],Xw(o)),a(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=a(e,["source"]);s!=null&&l(n,["config"],L2(s,n));const u=a(e,["config"]);return u!=null&&l(n,["config"],b2(u,n)),n}function U2(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function V2(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function $2(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function B2(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],U2(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],V2(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],$2(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function ai(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>B2(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function G2(t){const e={},n=a(t,["anyOf"]);n!=null&&l(e,["anyOf"],n);const r=a(t,["default"]);r!=null&&l(e,["default"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["enum"]);o!=null&&l(e,["enum"],o);const s=a(t,["example"]);s!=null&&l(e,["example"],s);const u=a(t,["format"]);u!=null&&l(e,["format"],u);const c=a(t,["items"]);c!=null&&l(e,["items"],c);const d=a(t,["maxItems"]);d!=null&&l(e,["maxItems"],d);const f=a(t,["maxLength"]);f!=null&&l(e,["maxLength"],f);const h=a(t,["maxProperties"]);h!=null&&l(e,["maxProperties"],h);const p=a(t,["maximum"]);p!=null&&l(e,["maximum"],p);const g=a(t,["minItems"]);g!=null&&l(e,["minItems"],g);const T=a(t,["minLength"]);T!=null&&l(e,["minLength"],T);const x=a(t,["minProperties"]);x!=null&&l(e,["minProperties"],x);const C=a(t,["minimum"]);C!=null&&l(e,["minimum"],C);const w=a(t,["nullable"]);w!=null&&l(e,["nullable"],w);const y=a(t,["pattern"]);y!=null&&l(e,["pattern"],y);const v=a(t,["properties"]);v!=null&&l(e,["properties"],v);const S=a(t,["propertyOrdering"]);S!=null&&l(e,["propertyOrdering"],S);const _=a(t,["required"]);_!=null&&l(e,["required"],_);const k=a(t,["title"]);k!=null&&l(e,["title"],k);const A=a(t,["type"]);return A!=null&&l(e,["type"],A),e}function O2(t){const e={},n=a(t,["featureSelectionPreference"]);return n!=null&&l(e,["featureSelectionPreference"],n),e}function H2(t){const e={},n=a(t,["method"]);n!=null&&l(e,["method"],n);const r=a(t,["category"]);r!=null&&l(e,["category"],r);const i=a(t,["threshold"]);return i!=null&&l(e,["threshold"],i),e}function q2(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&l(e,["description"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["parameters"]);i!=null&&l(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&l(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&l(e,["response"],s);const u=a(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function z2(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function W2(t){const e={},n=a(t,["timeRangeFilter"]);n!=null&&l(e,["timeRangeFilter"],z2(n));const r=a(t,["excludeDomains"]);return r!=null&&l(e,["excludeDomains"],r),e}function K2(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function J2(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],K2(n)),e}function j2(t){const e={},n=a(t,["excludeDomains"]);return n!=null&&l(e,["excludeDomains"],n),e}function Y2(t){const e={},n=a(t,["apiKeyString"]);return n!=null&&l(e,["apiKeyString"],n),e}function X2(t){const e={},n=a(t,["apiKeyConfig"]);n!=null&&l(e,["apiKeyConfig"],Y2(n));const r=a(t,["authType"]);r!=null&&l(e,["authType"],r);const i=a(t,["googleServiceAccountConfig"]);i!=null&&l(e,["googleServiceAccountConfig"],i);const o=a(t,["httpBasicAuthConfig"]);o!=null&&l(e,["httpBasicAuthConfig"],o);const s=a(t,["oauthConfig"]);s!=null&&l(e,["oauthConfig"],s);const u=a(t,["oidcConfig"]);return u!=null&&l(e,["oidcConfig"],u),e}function Q2(t){const e={},n=a(t,["authConfig"]);return n!=null&&l(e,["authConfig"],X2(n)),e}function Z2(){return{}}function eL(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function Qw(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>q2(p))),l(e,["functionDeclarations"],h)}const r=a(t,["retrieval"]);r!=null&&l(e,["retrieval"],r);const i=a(t,["googleSearch"]);i!=null&&l(e,["googleSearch"],W2(i));const o=a(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],J2(o));const s=a(t,["enterpriseWebSearch"]);s!=null&&l(e,["enterpriseWebSearch"],j2(s));const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],Q2(u)),a(t,["urlContext"])!=null&&l(e,["urlContext"],Z2());const d=a(t,["computerUse"]);d!=null&&l(e,["computerUse"],eL(d));const f=a(t,["codeExecution"]);return f!=null&&l(e,["codeExecution"],f),e}function tL(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function nL(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function rL(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],nL(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function iL(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],tL(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],rL(r)),e}function oL(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function sL(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],oL(n)),e}function aL(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&l(e,["voiceConfig"],sL(n)),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function lL(t){const e={},n=a(t,["includeThoughts"]);n!=null&&l(e,["includeThoughts"],n);const r=a(t,["thinkingBudget"]);return r!=null&&l(e,["thinkingBudget"],r),e}function uL(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],ai(Ne(i)));const o=a(e,["temperature"]);o!=null&&l(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&l(r,["topP"],s);const u=a(e,["topK"]);u!=null&&l(r,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&l(r,["candidateCount"],c);const d=a(e,["maxOutputTokens"]);d!=null&&l(r,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&l(r,["stopSequences"],f);const h=a(e,["responseLogprobs"]);h!=null&&l(r,["responseLogprobs"],h);const p=a(e,["logprobs"]);p!=null&&l(r,["logprobs"],p);const g=a(e,["presencePenalty"]);g!=null&&l(r,["presencePenalty"],g);const T=a(e,["frequencyPenalty"]);T!=null&&l(r,["frequencyPenalty"],T);const x=a(e,["seed"]);x!=null&&l(r,["seed"],x);const C=a(e,["responseMimeType"]);C!=null&&l(r,["responseMimeType"],C);const w=a(e,["responseSchema"]);w!=null&&l(r,["responseSchema"],G2(jd(w)));const y=a(e,["responseJsonSchema"]);y!=null&&l(r,["responseJsonSchema"],y);const v=a(e,["routingConfig"]);v!=null&&l(r,["routingConfig"],v);const S=a(e,["modelSelectionConfig"]);S!=null&&l(r,["modelConfig"],O2(S));const _=a(e,["safetySettings"]);if(n!==void 0&&_!=null){let z=_;Array.isArray(z)&&(z=z.map(q=>H2(q))),l(n,["safetySettings"],z)}const k=a(e,["tools"]);if(n!==void 0&&k!=null){let z=oi(k);Array.isArray(z)&&(z=z.map(q=>Qw(ii(q)))),l(n,["tools"],z)}const A=a(e,["toolConfig"]);n!==void 0&&A!=null&&l(n,["toolConfig"],iL(A));const E=a(e,["labels"]);n!==void 0&&E!=null&&l(n,["labels"],E);const R=a(e,["cachedContent"]);n!==void 0&&R!=null&&l(n,["cachedContent"],Kt(t,R));const L=a(e,["responseModalities"]);L!=null&&l(r,["responseModalities"],L);const I=a(e,["mediaResolution"]);I!=null&&l(r,["mediaResolution"],I);const b=a(e,["speechConfig"]);b!=null&&l(r,["speechConfig"],aL(Yd(b)));const N=a(e,["audioTimestamp"]);N!=null&&l(r,["audioTimestamp"],N);const $=a(e,["thinkingConfig"]);return $!=null&&l(r,["thinkingConfig"],lL($)),r}function jm(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["contents"]);if(i!=null){let s=lt(i);Array.isArray(s)&&(s=s.map(u=>ai(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["generationConfig"],uL(t,o,n)),n}function cL(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&l(e,["instances[]","task_type"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&l(e,["instances[]","title"],i);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&l(e,["parameters","outputDimensionality"],o);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&l(e,["instances[]","mimeType"],s);const u=a(t,["autoTruncate"]);return e!==void 0&&u!=null&&l(e,["parameters","autoTruncate"],u),n}function dL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["contents"]);i!=null&&l(n,["instances[]","content"],Dw(t,i));const o=a(e,["config"]);return o!=null&&l(n,["config"],cL(o,n)),n}function fL(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&l(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const c=a(t,["seed"]);e!==void 0&&c!=null&&l(e,["parameters","seed"],c);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&l(e,["parameters","safetySetting"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const h=a(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&l(e,["parameters","includeSafetyAttributes"],h);const p=a(t,["includeRaiReason"]);e!==void 0&&p!=null&&l(e,["parameters","includeRaiReason"],p);const g=a(t,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);const T=a(t,["outputMimeType"]);e!==void 0&&T!=null&&l(e,["parameters","outputOptions","mimeType"],T);const x=a(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&l(e,["parameters","outputOptions","compressionQuality"],x);const C=a(t,["addWatermark"]);e!==void 0&&C!=null&&l(e,["parameters","addWatermark"],C);const w=a(t,["imageSize"]);e!==void 0&&w!=null&&l(e,["parameters","sampleImageSize"],w);const y=a(t,["enhancePrompt"]);return e!==void 0&&y!=null&&l(e,["parameters","enhancePrompt"],y),n}function hL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&l(n,["config"],fL(o,n)),n}function Nt(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const r=a(t,["imageBytes"]);r!=null&&l(e,["bytesBase64Encoded"],tr(r));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function pL(t){const e={},n=a(t,["maskMode"]);n!=null&&l(e,["maskMode"],n);const r=a(t,["segmentationClasses"]);r!=null&&l(e,["maskClasses"],r);const i=a(t,["maskDilation"]);return i!=null&&l(e,["dilation"],i),e}function mL(t){const e={},n=a(t,["controlType"]);n!=null&&l(e,["controlType"],n);const r=a(t,["enableControlImageComputation"]);return r!=null&&l(e,["computeControl"],r),e}function gL(t){const e={},n=a(t,["styleDescription"]);return n!=null&&l(e,["styleDescription"],n),e}function yL(t){const e={},n=a(t,["subjectType"]);n!=null&&l(e,["subjectType"],n);const r=a(t,["subjectDescription"]);return r!=null&&l(e,["subjectDescription"],r),e}function vL(t){const e={},n=a(t,["referenceImage"]);n!=null&&l(e,["referenceImage"],Nt(n));const r=a(t,["referenceId"]);r!=null&&l(e,["referenceId"],r);const i=a(t,["referenceType"]);i!=null&&l(e,["referenceType"],i);const o=a(t,["maskImageConfig"]);o!=null&&l(e,["maskImageConfig"],pL(o));const s=a(t,["controlImageConfig"]);s!=null&&l(e,["controlImageConfig"],mL(s));const u=a(t,["styleImageConfig"]);u!=null&&l(e,["styleImageConfig"],gL(u));const c=a(t,["subjectImageConfig"]);return c!=null&&l(e,["subjectImageConfig"],yL(c)),e}function wL(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&l(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const c=a(t,["seed"]);e!==void 0&&c!=null&&l(e,["parameters","seed"],c);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&l(e,["parameters","safetySetting"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const h=a(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&l(e,["parameters","includeSafetyAttributes"],h);const p=a(t,["includeRaiReason"]);e!==void 0&&p!=null&&l(e,["parameters","includeRaiReason"],p);const g=a(t,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);const T=a(t,["outputMimeType"]);e!==void 0&&T!=null&&l(e,["parameters","outputOptions","mimeType"],T);const x=a(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&l(e,["parameters","outputOptions","compressionQuality"],x);const C=a(t,["addWatermark"]);e!==void 0&&C!=null&&l(e,["parameters","addWatermark"],C);const w=a(t,["editMode"]);e!==void 0&&w!=null&&l(e,["parameters","editMode"],w);const y=a(t,["baseSteps"]);return e!==void 0&&y!=null&&l(e,["parameters","editConfig","baseSteps"],y),n}function TL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>vL(c))),l(n,["instances[0]","referenceImages"],u)}const s=a(e,["config"]);return s!=null&&l(n,["config"],wL(s,n)),n}function xL(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);const i=a(t,["includeRaiReason"]);e!==void 0&&i!=null&&l(e,["parameters","includeRaiReason"],i);const o=a(t,["outputMimeType"]);e!==void 0&&o!=null&&l(e,["parameters","outputOptions","mimeType"],o);const s=a(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&l(e,["parameters","outputOptions","compressionQuality"],s);const u=a(t,["enhanceInputImage"]);e!==void 0&&u!=null&&l(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=a(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&l(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=a(t,["numberOfImages"]);e!==void 0&&d!=null&&l(e,["parameters","sampleCount"],d);const f=a(t,["mode"]);return e!==void 0&&f!=null&&l(e,["parameters","mode"],f),n}function CL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["image"]);i!=null&&l(n,["instances[0]","image"],Nt(i));const o=a(e,["upscaleFactor"]);o!=null&&l(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&l(n,["config"],xL(s,n)),n}function SL(t){const e={},n=a(t,["productImage"]);return n!=null&&l(e,["image"],Nt(n)),e}function _L(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&l(e,["instances[0]","prompt"],r);const i=a(t,["personImage"]);e!==void 0&&i!=null&&l(e,["instances[0]","personImage","image"],Nt(i));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>SL(u))),l(e,["instances[0]","productImages"],s)}return n}function kL(t,e){const n={},r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const i=a(t,["baseSteps"]);e!==void 0&&i!=null&&l(e,["parameters","editConfig","baseSteps"],i);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=a(t,["seed"]);e!==void 0&&s!=null&&l(e,["parameters","seed"],s);const u=a(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&l(e,["parameters","safetySetting"],u);const c=a(t,["personGeneration"]);e!==void 0&&c!=null&&l(e,["parameters","personGeneration"],c);const d=a(t,["addWatermark"]);e!==void 0&&d!=null&&l(e,["parameters","addWatermark"],d);const f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&l(e,["parameters","outputOptions","mimeType"],f);const h=a(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&l(e,["parameters","outputOptions","compressionQuality"],h);const p=a(t,["enhancePrompt"]);return e!==void 0&&p!=null&&l(e,["parameters","enhancePrompt"],p),n}function EL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["source"]);i!=null&&l(n,["config"],_L(i,n));const o=a(e,["config"]);return o!=null&&l(n,["config"],kL(o,n)),n}function AL(t){const e={},n=a(t,["image"]);return n!=null&&l(e,["image"],Nt(n)),e}function PL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&l(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&l(e,["instances[0]","image"],Nt(i));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&l(e,["instances[0]","scribble"],AL(o)),n}function IL(t,e){const n={},r=a(t,["mode"]);e!==void 0&&r!=null&&l(e,["parameters","mode"],r);const i=a(t,["maxPredictions"]);e!==void 0&&i!=null&&l(e,["parameters","maxPredictions"],i);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&l(e,["parameters","confidenceThreshold"],o);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&l(e,["parameters","maskDilation"],s);const u=a(t,["binaryColorThreshold"]);return e!==void 0&&u!=null&&l(e,["parameters","binaryColorThreshold"],u),n}function ML(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["source"]);i!=null&&l(n,["config"],PL(i,n));const o=a(e,["config"]);return o!=null&&l(n,["config"],IL(o,n)),n}function RL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],Y(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function NL(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&l(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&l(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&l(n,["_query","filter"],s);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],Fw(t,u)),r}function DL(t,e){const n={},r=a(e,["config"]);return r!=null&&l(n,["config"],NL(t,r,n)),n}function LL(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&l(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&l(e,["defaultCheckpointId"],o),n}function bL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],LL(i,n)),n}function FL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],Y(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function UL(t,e){const n={},r=a(t,["systemInstruction"]);e!==void 0&&r!=null&&l(e,["systemInstruction"],ai(Ne(r)));const i=a(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>Qw(u))),l(e,["tools"],s)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&l(e,["generationConfig"],o),n}function VL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["contents"]);if(i!=null){let s=lt(i);Array.isArray(s)&&(s=s.map(u=>ai(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["config"],UL(o,n)),n}function $L(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["contents"]);if(i!=null){let s=lt(i);Array.isArray(s)&&(s=s.map(u=>ai(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["config"],o),n}function Zw(t){const e={},n=a(t,["uri"]);n!=null&&l(e,["gcsUri"],n);const r=a(t,["videoBytes"]);r!=null&&l(e,["bytesBase64Encoded"],tr(r));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function BL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&l(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&l(e,["instances[0]","image"],Nt(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&l(e,["instances[0]","video"],Zw(o)),n}function GL(t){const e={},n=a(t,["image"]);n!=null&&l(e,["image"],Nt(n));const r=a(t,["referenceType"]);return r!=null&&l(e,["referenceType"],r),e}function OL(t,e){const n={},r=a(t,["numberOfVideos"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);const o=a(t,["fps"]);e!==void 0&&o!=null&&l(e,["parameters","fps"],o);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&l(e,["parameters","durationSeconds"],s);const u=a(t,["seed"]);e!==void 0&&u!=null&&l(e,["parameters","seed"],u);const c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&l(e,["parameters","aspectRatio"],c);const d=a(t,["resolution"]);e!==void 0&&d!=null&&l(e,["parameters","resolution"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const h=a(t,["pubsubTopic"]);e!==void 0&&h!=null&&l(e,["parameters","pubsubTopic"],h);const p=a(t,["negativePrompt"]);e!==void 0&&p!=null&&l(e,["parameters","negativePrompt"],p);const g=a(t,["enhancePrompt"]);e!==void 0&&g!=null&&l(e,["parameters","enhancePrompt"],g);const T=a(t,["generateAudio"]);e!==void 0&&T!=null&&l(e,["parameters","generateAudio"],T);const x=a(t,["lastFrame"]);e!==void 0&&x!=null&&l(e,["instances[0]","lastFrame"],Nt(x));const C=a(t,["referenceImages"]);if(e!==void 0&&C!=null){let y=C;Array.isArray(y)&&(y=y.map(v=>GL(v))),l(e,["instances[0]","referenceImages"],y)}const w=a(t,["compressionQuality"]);return e!==void 0&&w!=null&&l(e,["parameters","compressionQuality"],w),n}function HL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],Y(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&l(n,["instances[0]","image"],Nt(o));const s=a(e,["video"]);s!=null&&l(n,["instances[0]","video"],Zw(s));const u=a(e,["source"]);u!=null&&l(n,["config"],BL(u,n));const c=a(e,["config"]);return c!=null&&l(n,["config"],OL(c,n)),n}function qL(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function zL(t){const e={},n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function WL(t){const e={},n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function KL(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],qL(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],zL(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],WL(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function JL(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>KL(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function jL(t){const e={},n=a(t,["citationSources"]);return n!=null&&l(e,["citations"],n),e}function YL(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&l(e,["retrievedUrl"],n);const r=a(t,["urlRetrievalStatus"]);return r!=null&&l(e,["urlRetrievalStatus"],r),e}function XL(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>YL(i))),l(e,["urlMetadata"],r)}return e}function QL(t){const e={},n=a(t,["content"]);n!=null&&l(e,["content"],JL(n));const r=a(t,["citationMetadata"]);r!=null&&l(e,["citationMetadata"],jL(r));const i=a(t,["tokenCount"]);i!=null&&l(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&l(e,["finishReason"],o);const s=a(t,["urlContextMetadata"]);s!=null&&l(e,["urlContextMetadata"],XL(s));const u=a(t,["avgLogprobs"]);u!=null&&l(e,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);c!=null&&l(e,["groundingMetadata"],c);const d=a(t,["index"]);d!=null&&l(e,["index"],d);const f=a(t,["logprobsResult"]);f!=null&&l(e,["logprobsResult"],f);const h=a(t,["safetyRatings"]);return h!=null&&l(e,["safetyRatings"],h),e}function Ym(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>QL(d))),l(e,["candidates"],c)}const i=a(t,["modelVersion"]);i!=null&&l(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&l(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&l(e,["responseId"],s);const u=a(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function ZL(t){const e={},n=a(t,["values"]);return n!=null&&l(e,["values"],n),e}function eb(){return{}}function tb(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ZL(s))),l(e,["embeddings"],o)}return a(t,["metadata"])!=null&&l(e,["metadata"],eb()),e}function nb(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&l(e,["imageBytes"],tr(n));const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function eT(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&l(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&l(e,["contentType"],i),e}function rb(t){const e={},n=a(t,["_self"]);n!=null&&l(e,["image"],nb(n));const r=a(t,["raiFilteredReason"]);r!=null&&l(e,["raiFilteredReason"],r);const i=a(t,["_self"]);return i!=null&&l(e,["safetyAttributes"],eT(i)),e}function ib(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>rb(s))),l(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&l(e,["positivePromptSafetyAttributes"],eT(i)),e}function ob(t){const e={},n=a(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&l(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&l(e,["updateTime"],i),e}function lc(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["version"]);o!=null&&l(e,["version"],o);const s=a(t,["_self"]);s!=null&&l(e,["tunedModelInfo"],ob(s));const u=a(t,["inputTokenLimit"]);u!=null&&l(e,["inputTokenLimit"],u);const c=a(t,["outputTokenLimit"]);c!=null&&l(e,["outputTokenLimit"],c);const d=a(t,["supportedGenerationMethods"]);return d!=null&&l(e,["supportedActions"],d),e}function sb(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=Uw(i);Array.isArray(o)&&(o=o.map(s=>lc(s))),l(e,["models"],o)}return e}function ab(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function lb(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);r!=null&&l(e,["totalTokens"],r);const i=a(t,["cachedContentTokenCount"]);return i!=null&&l(e,["cachedContentTokenCount"],i),e}function ub(t){const e={},n=a(t,["video","uri"]);n!=null&&l(e,["uri"],n);const r=a(t,["video","encodedVideo"]);r!=null&&l(e,["videoBytes"],tr(r));const i=a(t,["encoding"]);return i!=null&&l(e,["mimeType"],i),e}function cb(t){const e={},n=a(t,["_self"]);return n!=null&&l(e,["video"],ub(n)),e}function db(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>cb(s))),l(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&l(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function fb(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["metadata"]);r!=null&&l(e,["metadata"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&l(e,["response"],db(s)),e}function hb(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function pb(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function mb(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function gb(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],hb(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],pb(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],mb(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function yb(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gb(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function vb(t){const e={},n=a(t,["citations"]);return n!=null&&l(e,["citations"],n),e}function wb(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&l(e,["retrievedUrl"],n);const r=a(t,["urlRetrievalStatus"]);return r!=null&&l(e,["urlRetrievalStatus"],r),e}function Tb(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wb(i))),l(e,["urlMetadata"],r)}return e}function xb(t){const e={},n=a(t,["content"]);n!=null&&l(e,["content"],yb(n));const r=a(t,["citationMetadata"]);r!=null&&l(e,["citationMetadata"],vb(r));const i=a(t,["finishMessage"]);i!=null&&l(e,["finishMessage"],i);const o=a(t,["finishReason"]);o!=null&&l(e,["finishReason"],o);const s=a(t,["urlContextMetadata"]);s!=null&&l(e,["urlContextMetadata"],Tb(s));const u=a(t,["avgLogprobs"]);u!=null&&l(e,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);c!=null&&l(e,["groundingMetadata"],c);const d=a(t,["index"]);d!=null&&l(e,["index"],d);const f=a(t,["logprobsResult"]);f!=null&&l(e,["logprobsResult"],f);const h=a(t,["safetyRatings"]);return h!=null&&l(e,["safetyRatings"],h),e}function Xm(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>xb(f))),l(e,["candidates"],d)}const i=a(t,["createTime"]);i!=null&&l(e,["createTime"],i);const o=a(t,["modelVersion"]);o!=null&&l(e,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&l(e,["promptFeedback"],s);const u=a(t,["responseId"]);u!=null&&l(e,["responseId"],u);const c=a(t,["usageMetadata"]);return c!=null&&l(e,["usageMetadata"],c),e}function Cb(t){const e={},n=a(t,["truncated"]);n!=null&&l(e,["truncated"],n);const r=a(t,["token_count"]);return r!=null&&l(e,["tokenCount"],r),e}function Sb(t){const e={},n=a(t,["values"]);n!=null&&l(e,["values"],n);const r=a(t,["statistics"]);return r!=null&&l(e,["statistics"],Cb(r)),e}function _b(t){const e={},n=a(t,["billableCharacterCount"]);return n!=null&&l(e,["billableCharacterCount"],n),e}function kb(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Sb(s))),l(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&l(e,["metadata"],_b(i)),e}function tT(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&l(e,["imageBytes"],tr(r));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function nT(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&l(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&l(e,["contentType"],i),e}function Ra(t){const e={},n=a(t,["_self"]);n!=null&&l(e,["image"],tT(n));const r=a(t,["raiFilteredReason"]);r!=null&&l(e,["raiFilteredReason"],r);const i=a(t,["_self"]);i!=null&&l(e,["safetyAttributes"],nT(i));const o=a(t,["prompt"]);return o!=null&&l(e,["enhancedPrompt"],o),e}function Eb(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Ra(s))),l(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&l(e,["positivePromptSafetyAttributes"],nT(i)),e}function Ab(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Ra(o))),l(e,["generatedImages"],i)}return e}function Pb(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Ra(o))),l(e,["generatedImages"],i)}return e}function Ib(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ra(i))),l(e,["generatedImages"],r)}return e}function Mb(t){const e={},n=a(t,["label"]);n!=null&&l(e,["label"],n);const r=a(t,["score"]);return r!=null&&l(e,["score"],r),e}function Rb(t){const e={},n=a(t,["_self"]);n!=null&&l(e,["mask"],tT(n));const r=a(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Mb(o))),l(e,["labels"],i)}return e}function Nb(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Rb(i))),l(e,["generatedMasks"],r)}return e}function Db(t){const e={},n=a(t,["endpoint"]);n!=null&&l(e,["name"],n);const r=a(t,["deployedModelId"]);return r!=null&&l(e,["deployedModelId"],r),e}function Lb(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&l(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&l(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&l(e,["updateTime"],i),e}function bb(t){const e={},n=a(t,["checkpointId"]);n!=null&&l(e,["checkpointId"],n);const r=a(t,["epoch"]);r!=null&&l(e,["epoch"],r);const i=a(t,["step"]);return i!=null&&l(e,["step"],i),e}function uc(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["versionId"]);o!=null&&l(e,["version"],o);const s=a(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>Db(p))),l(e,["endpoints"],h)}const u=a(t,["labels"]);u!=null&&l(e,["labels"],u);const c=a(t,["_self"]);c!=null&&l(e,["tunedModelInfo"],Lb(c));const d=a(t,["defaultCheckpointId"]);d!=null&&l(e,["defaultCheckpointId"],d);const f=a(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>bb(p))),l(e,["checkpoints"],h)}return e}function Fb(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=Uw(i);Array.isArray(o)&&(o=o.map(s=>uc(s))),l(e,["models"],o)}return e}function Ub(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Vb(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);return r!=null&&l(e,["totalTokens"],r),e}function $b(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["tokensInfo"]);return r!=null&&l(e,["tokensInfo"],r),e}function Bb(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&l(e,["videoBytes"],tr(r));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Gb(t){const e={},n=a(t,["_self"]);return n!=null&&l(e,["video"],Bb(n)),e}function Ob(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Gb(s))),l(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&l(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function Hb(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["metadata"]);r!=null&&l(e,["metadata"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response"]);return s!=null&&l(e,["response"],Ob(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qb="Content-Type",zb="X-Server-Timeout",Wb="User-Agent",cc="x-goog-api-client",Kb="1.17.0",Jb=`google-genai-sdk/${Kb}`,jb="v1beta1",Yb="v1beta",Qm=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Xb{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:jb,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Yb,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))i.searchParams.append(s,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&Qb(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Zm(i),new rc(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Zm(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Ur(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield ne(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const h=JSON.parse(d);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),g=p.status,T=p.code,x=`got status: ${g}. ${JSON.stringify(h)}`;if(T>=400&&T<600)throw new Ia({message:x,status:T})}}catch(h){if(h.name==="ApiError")throw h}s+=d;let f=s.match(Qm);for(;f;){const h=f[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ne(new rc(p)),s=s.slice(f[0].length),f=s.match(Qm)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Jb+" "+this.clientOptions.userAgentExtra;return e[Wb]=n,e[cc]=n,e[qb]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(zb,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:U("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Zm(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Ia({message:i,status:n}):new Error(i)}}function Qb(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const u=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zb="mcp_used/unknown";let eF=!1;function rT(t){for(const e of t)if(tF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return eF}function iT(t){var e;const n=(e=t[cc])!==null&&e!==void 0?e:"";t[cc]=(n+` ${Zb}`).trimStart()}function tF(t){return t!==null&&typeof t=="object"&&t instanceof Qd}function nF(t,e=100){return Ur(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield ne(t.listTools({cursor:r}));for(const s of o.tools)yield yield ne(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class Qd{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Qd(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,Oi(nF(f))),d;d=await c.next(),e=d.done,!e;u=!0){i=d.value,u=!1;const h=i;s.push(h);const p=h.name;if(o[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);o[p]=f}}catch(h){n={error:h}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),DI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function rF(t,e,n){const r=new kI;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=UD(i);Object.assign(r,o),e(r)}class iF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=aF(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(v=>{d=v}),h=e.callbacks,p=function(){d({})},g=this.apiClient,T={onopen:p,onmessage:v=>{rF(g,h.onmessage,v)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(v){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(v){}},x=this.webSocketFactory.create(c,sF(s),T);x.connect(),await f;const C=Y(this.apiClient,e.model),w=Jw({model:C}),y=ac({setup:w});return x.send(JSON.stringify(y)),new oF(x,this.apiClient)}}class oF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=LN(e),r=jw(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=bN(e),r=ac(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=ac({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Pr.PLAY)}pause(){this.sendPlaybackControl(Pr.PAUSE)}stop(){this.sendPlaybackControl(Pr.STOP)}resetContext(){this.sendPlaybackControl(Pr.RESET_CONTEXT)}close(){this.conn.close()}}function sF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function aF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function uF(t,e,n){const r=new _I;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=XD(o);Object.assign(r,s)}else{const s=PD(o);Object.assign(r,s)}e(r)}class cF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new iF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&rT(e.config.tools)&&iT(h);const p=pF(h);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const R=this.apiClient.getApiKey();let L="BidiGenerateContent",I="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",I="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${L}?${I}=${R}`}let g=()=>{};const T=new Promise(R=>{g=R}),x=e.callbacks,C=function(){var R;(R=x==null?void 0:x.onopen)===null||R===void 0||R.call(x),g({})},w=this.apiClient,y={onopen:C,onmessage:R=>{uF(w,x.onmessage,R)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(R){}},v=this.webSocketFactory.create(f,hF(p),y);v.connect(),await T;let S=Y(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const R=this.apiClient.getProject(),L=this.apiClient.getLocation();S=`projects/${R}/locations/${L}/`+S}let _={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ta.AUDIO]}:e.config.responseModalities=[ta.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],A=[];for(const R of k)if(this.isCallableTool(R)){const L=R;A.push(await L.tool())}else A.push(R);A.length>0&&(e.config.tools=A);const E={model:S,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?_=uD(this.apiClient,E):_=MN(this.apiClient,E),delete _.config,v.send(JSON.stringify(_)),new fF(v,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const dF={turnComplete:!0};class fF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=lt(n.turns),e.isVertexAI()?r=r.map(i=>ai(i)):r=r.map(i=>Ma(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(lF)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},dF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:fD(e)}:n={realtimeInput:DN(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function hF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function pF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eg=10;function tg(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Vr(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Vr(t){return"callTool"in t&&typeof t.callTool=="function"}function mF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Vr(i)))!==null&&r!==void 0?r:!1}function gF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Vr(i)))!==null&&r!==void 0?r:!1}function ng(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yF extends er{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!mF(n)||tg(n.config))return await this.generateContentInternal(c);if(gF(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,f;const h=lt(c.contents),p=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:eg;let g=0;for(;g<p&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const T=d.candidates[0].content,x=[];for(const C of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(Vr(C)){const y=await C.callTool(d.functionCalls);x.push(...y)}g++,f={role:"user",parts:x},c.contents=lt(c.contents),c.contents.push(T),c.contents.push(f),ng(c.config)&&(h.push(T),h.push(f))}return ng(c.config)&&(d.automaticFunctionCallingHistory=h),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),tg(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let u;return o?u={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ao(Yn.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Vr(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&rT(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),iT(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Vr(s)){const u=s,c=await u.tool();for(const d of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,u)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:eg;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,f,h){var p,g;return Ur(this,arguments,function*(){for(var T,x,C,w;u<o;){s&&(u++,s=!1);const _=yield ne(d.processParamsMaybeAddMcpUsage(h)),k=yield ne(d.generateContentStreamInternal(_)),A=[],E=[];try{for(var y=!0,v=(x=void 0,Oi(k)),S;S=yield ne(v.next()),T=S.done,!T;y=!0){w=S.value,y=!1;const R=w;if(yield yield ne(R),R.candidates&&(!((p=R.candidates[0])===null||p===void 0)&&p.content)){E.push(R.candidates[0].content);for(const L of(g=R.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<o&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(L.functionCall.name)){const I=yield ne(f.get(L.functionCall.name).callTool([L.functionCall]));A.push(...I)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(R){x={error:R}}finally{try{!y&&!T&&(C=v.return)&&(yield ne(C.call(v)))}finally{if(x)throw x.error}}if(A.length>0){s=!0;const R=new vi;R.candidates=[{content:{role:"user",parts:A}}],yield yield ne(R);const L=[];L.push(...E),L.push({role:"user",parts:A});const I=lt(h.contents).concat(L);h.contents=I}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=jm(this.apiClient,e);return u=U("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Xm(f),p=new vi;return Object.assign(p,h),p})}else{const d=Jm(this.apiClient,e);return u=U("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Ym(f),p=new vi;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=jm(this.apiClient,e);return u=U("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return Ur(this,arguments,function*(){var p,g,T,x;try{for(var C=!0,w=Oi(h),y;y=yield ne(w.next()),p=y.done,!p;C=!0){x=y.value,C=!1;const v=x,S=Xm(yield ne(v.json()));S.sdkHttpResponse={headers:v.headers};const _=new vi;Object.assign(_,S),yield yield ne(_)}}catch(v){g={error:v}}finally{try{!C&&!p&&(T=w.return)&&(yield ne(T.call(w)))}finally{if(g)throw g.error}}})})}else{const d=Jm(this.apiClient,e);return u=U("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return Ur(this,arguments,function*(){var p,g,T,x;try{for(var C=!0,w=Oi(h),y;y=yield ne(w.next()),p=y.done,!p;C=!0){x=y.value,C=!1;const v=x,S=Ym(yield ne(v.json()));S.sdkHttpResponse={headers:v.headers};const _=new vi;Object.assign(_,S),yield yield ne(_)}}catch(v){g={error:v}}finally{try{!C&&!p&&(T=w.return)&&(yield ne(T.call(w)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=dL(this.apiClient,e);return u=U("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=kb(f),p=new Em;return Object.assign(p,h),p})}else{const d=S2(this.apiClient,e);return u=U("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=tb(f),p=new Em;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=hL(this.apiClient,e);return u=U("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Eb(f),p=new Am;return Object.assign(p,h),p})}else{const d=k2(this.apiClient,e);return u=U("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ib(f),p=new Am;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=TL(this.apiClient,e);return o=U("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=Ab(c),f=new gI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=CL(this.apiClient,e);return o=U("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=Pb(c),f=new yI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=EL(this.apiClient,e);return o=U("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=Ib(c),f=new vI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=ML(this.apiClient,e);return o=U("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=Nb(c),f=new wI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=RL(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>uc(f))}else{const d=E2(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>lc(f))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=DL(this.apiClient,e);return u=U("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Fb(f),p=new Pm;return Object.assign(p,h),p})}else{const d=P2(this.apiClient,e);return u=U("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=sb(f),p=new Pm;return Object.assign(p,h),p})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=bL(this.apiClient,e);return u=U("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>uc(f))}else{const d=M2(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>lc(f))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=FL(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Ub(f),p=new Im;return Object.assign(p,h),p})}else{const d=R2(this.apiClient,e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ab(f),p=new Im;return Object.assign(p,h),p})}}async countTokens(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=VL(this.apiClient,e);return u=U("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Vb(f),p=new Mm;return Object.assign(p,h),p})}else{const d=D2(this.apiClient,e);return u=U("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=lb(f),p=new Mm;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=$L(this.apiClient,e);return o=U("{model}:computeTokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=$b(c),f=new TI;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=HL(this.apiClient,e);return u=U("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Hb(f),p=new na;return Object.assign(p,h),p})}else{const d=F2(this.apiClient,e);return u=U("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=fb(f),p=new na;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vF(t){const e={},n=a(t,["operationName"]);n!=null&&l(e,["_url","operationName"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function wF(t){const e={},n=a(t,["operationName"]);n!=null&&l(e,["operationName"],n);const r=a(t,["resourceName"]);r!=null&&l(e,["_url","resourceName"],r);const i=a(t,["config"]);return i!=null&&l(e,["config"],i),e}function TF(t){const e={},n=a(t,["operationName"]);n!=null&&l(e,["_url","operationName"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xF extends er{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=TF(e);return u=U("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const d=vF(e);return u=U("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=wF(e);return o=U("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CF(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function oT(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],CF(n)),e}function SF(t){const e={},n=a(t,["speaker"]);n!=null&&l(e,["speaker"],n);const r=a(t,["voiceConfig"]);return r!=null&&l(e,["voiceConfig"],oT(r)),e}function _F(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>SF(i))),l(e,["speakerVoiceConfigs"],r)}return e}function kF(t){const e={},n=a(t,["voiceConfig"]);n!=null&&l(e,["voiceConfig"],oT(n));const r=a(t,["multiSpeakerVoiceConfig"]);r!=null&&l(e,["multiSpeakerVoiceConfig"],_F(r));const i=a(t,["languageCode"]);return i!=null&&l(e,["languageCode"],i),e}function EF(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function AF(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function PF(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function IF(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],EF(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],AF(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],PF(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["codeExecutionResult"]);u!=null&&l(e,["codeExecutionResult"],u);const c=a(t,["executableCode"]);c!=null&&l(e,["executableCode"],c);const d=a(t,["functionCall"]);d!=null&&l(e,["functionCall"],d);const f=a(t,["functionResponse"]);f!=null&&l(e,["functionResponse"],f);const h=a(t,["text"]);return h!=null&&l(e,["text"],h),e}function MF(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>IF(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function RF(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function NF(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function DF(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],NF(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function LF(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function bF(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],LF(n)),e}function FF(){return{}}function UF(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function VF(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>RF(d))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],DF(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],bF(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],FF());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],UF(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function $F(t){const e={},n=a(t,["handle"]);if(n!=null&&l(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rg(){return{}}function BF(t){const e={},n=a(t,["disabled"]);n!=null&&l(e,["disabled"],n);const r=a(t,["startOfSpeechSensitivity"]);r!=null&&l(e,["startOfSpeechSensitivity"],r);const i=a(t,["endOfSpeechSensitivity"]);i!=null&&l(e,["endOfSpeechSensitivity"],i);const o=a(t,["prefixPaddingMs"]);o!=null&&l(e,["prefixPaddingMs"],o);const s=a(t,["silenceDurationMs"]);return s!=null&&l(e,["silenceDurationMs"],s),e}function GF(t){const e={},n=a(t,["automaticActivityDetection"]);n!=null&&l(e,["automaticActivityDetection"],BF(n));const r=a(t,["activityHandling"]);r!=null&&l(e,["activityHandling"],r);const i=a(t,["turnCoverage"]);return i!=null&&l(e,["turnCoverage"],i),e}function OF(t){const e={},n=a(t,["targetTokens"]);return n!=null&&l(e,["targetTokens"],n),e}function HF(t){const e={},n=a(t,["triggerTokens"]);n!=null&&l(e,["triggerTokens"],n);const r=a(t,["slidingWindow"]);return r!=null&&l(e,["slidingWindow"],OF(r)),e}function qF(t){const e={},n=a(t,["proactiveAudio"]);return n!=null&&l(e,["proactiveAudio"],n),e}function zF(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","topP"],s);const u=a(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const h=a(t,["speechConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","speechConfig"],kF(Xd(h)));const p=a(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=a(t,["systemInstruction"]);e!==void 0&&g!=null&&l(e,["setup","systemInstruction"],MF(Ne(g)));const T=a(t,["tools"]);if(e!==void 0&&T!=null){let _=oi(T);Array.isArray(_)&&(_=_.map(k=>VF(ii(k)))),l(e,["setup","tools"],_)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&l(e,["setup","sessionResumption"],$F(x));const C=a(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&l(e,["setup","inputAudioTranscription"],rg());const w=a(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&l(e,["setup","outputAudioTranscription"],rg());const y=a(t,["realtimeInputConfig"]);e!==void 0&&y!=null&&l(e,["setup","realtimeInputConfig"],GF(y));const v=a(t,["contextWindowCompression"]);e!==void 0&&v!=null&&l(e,["setup","contextWindowCompression"],HF(v));const S=a(t,["proactivity"]);return e!==void 0&&S!=null&&l(e,["setup","proactivity"],qF(S)),n}function WF(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["setup","model"],Y(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],zF(i,n)),n}function KF(t,e,n){const r={},i=a(e,["expireTime"]);n!==void 0&&i!=null&&l(n,["expireTime"],i);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&l(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&l(n,["uses"],s);const u=a(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&l(n,["bidiGenerateContentSetup"],WF(t,u));const c=a(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&l(n,["fieldMask"],c),r}function JF(t,e){const n={},r=a(e,["config"]);return r!=null&&l(n,["config"],KF(t,r,n)),n}function jF(t){const e={},n=a(t,["name"]);return n!=null&&l(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function XF(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=YF(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class QF extends er{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=JF(this.apiClient,e);o=U("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=XF(u,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>jF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZF(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function eU(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&l(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&l(e,["_query","filter"],o),n}function tU(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],eU(n,e)),e}function nU(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function rU(t){const e={},n=a(t,["textInput"]);n!=null&&l(e,["textInput"],n);const r=a(t,["output"]);return r!=null&&l(e,["output"],r),e}function iU(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=a(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>rU(i))),l(e,["examples","examples"],r)}return e}function oU(t,e){const n={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&l(e,["displayName"],r),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(t,["epochCount"]);e!==void 0&&i!=null&&l(e,["tuningTask","hyperparameters","epochCount"],i);const o=a(t,["learningRateMultiplier"]);if(o!=null&&l(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=a(t,["batchSize"]);e!==void 0&&s!=null&&l(e,["tuningTask","hyperparameters","batchSize"],s);const u=a(t,["learningRate"]);return e!==void 0&&u!=null&&l(e,["tuningTask","hyperparameters","learningRate"],u),n}function sU(t){const e={},n=a(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const r=a(t,["preTunedModel"]);r!=null&&l(e,["preTunedModel"],r);const i=a(t,["trainingDataset"]);i!=null&&l(e,["tuningTask","trainingData"],iU(i));const o=a(t,["config"]);return o!=null&&l(e,["config"],oU(o,e)),e}function aU(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function lU(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&l(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&l(e,["_query","filter"],o),n}function uU(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],lU(n,e)),e}function cU(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function dU(t,e){const n={},r=a(t,["gcsUri"]);e!==void 0&&r!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],i),a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function fU(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&l(n,["validationDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function hU(t,e){const n={},r=a(t,["validationDataset"]);e!==void 0&&r!=null&&l(e,["supervisedTuningSpec"],fU(r,n));const i=a(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&l(e,["tunedModelDisplayName"],i);const o=a(t,["description"]);e!==void 0&&o!=null&&l(e,["description"],o);const s=a(t,["epochCount"]);e!==void 0&&s!=null&&l(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const u=a(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&l(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=a(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&l(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const d=a(t,["preTunedModelCheckpointId"]);d!=null&&l(n,["preTunedModel","checkpointId"],d);const f=a(t,["adapterSize"]);if(e!==void 0&&f!=null&&l(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function pU(t){const e={},n=a(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const r=a(t,["preTunedModel"]);r!=null&&l(e,["preTunedModel"],r);const i=a(t,["trainingDataset"]);i!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],dU(i,e));const o=a(t,["config"]);return o!=null&&l(e,["config"],hU(o,e)),e}function mU(t){const e={},n=a(t,["name"]);n!=null&&l(e,["model"],n);const r=a(t,["name"]);return r!=null&&l(e,["endpoint"],r),e}function sT(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["state"]);i!=null&&l(e,["state"],Lw(i));const o=a(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["tuningTask","startTime"]);s!=null&&l(e,["startTime"],s);const u=a(t,["tuningTask","completeTime"]);u!=null&&l(e,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const d=a(t,["description"]);d!=null&&l(e,["description"],d);const f=a(t,["baseModel"]);f!=null&&l(e,["baseModel"],f);const h=a(t,["_self"]);h!=null&&l(e,["tunedModel"],mU(h));const p=a(t,["customBaseModel"]);p!=null&&l(e,["customBaseModel"],p);const g=a(t,["experiment"]);g!=null&&l(e,["experiment"],g);const T=a(t,["labels"]);T!=null&&l(e,["labels"],T);const x=a(t,["outputUri"]);x!=null&&l(e,["outputUri"],x);const C=a(t,["pipelineJob"]);C!=null&&l(e,["pipelineJob"],C);const w=a(t,["serviceAccount"]);w!=null&&l(e,["serviceAccount"],w);const y=a(t,["tunedModelDisplayName"]);return y!=null&&l(e,["tunedModelDisplayName"],y),e}function gU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>sT(s))),l(e,["tuningJobs"],o)}return e}function yU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["metadata"]);i!=null&&l(e,["metadata"],i);const o=a(t,["done"]);o!=null&&l(e,["done"],o);const s=a(t,["error"]);return s!=null&&l(e,["error"],s),e}function vU(t){const e={},n=a(t,["checkpointId"]);n!=null&&l(e,["checkpointId"],n);const r=a(t,["epoch"]);r!=null&&l(e,["epoch"],r);const i=a(t,["step"]);i!=null&&l(e,["step"],i);const o=a(t,["endpoint"]);return o!=null&&l(e,["endpoint"],o),e}function wU(t){const e={},n=a(t,["model"]);n!=null&&l(e,["model"],n);const r=a(t,["endpoint"]);r!=null&&l(e,["endpoint"],r);const i=a(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>vU(s))),l(e,["checkpoints"],o)}return e}function dc(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["state"]);i!=null&&l(e,["state"],Lw(i));const o=a(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["startTime"]);s!=null&&l(e,["startTime"],s);const u=a(t,["endTime"]);u!=null&&l(e,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const d=a(t,["error"]);d!=null&&l(e,["error"],d);const f=a(t,["description"]);f!=null&&l(e,["description"],f);const h=a(t,["baseModel"]);h!=null&&l(e,["baseModel"],h);const p=a(t,["tunedModel"]);p!=null&&l(e,["tunedModel"],wU(p));const g=a(t,["preTunedModel"]);g!=null&&l(e,["preTunedModel"],g);const T=a(t,["supervisedTuningSpec"]);T!=null&&l(e,["supervisedTuningSpec"],T);const x=a(t,["tuningDataStats"]);x!=null&&l(e,["tuningDataStats"],x);const C=a(t,["encryptionSpec"]);C!=null&&l(e,["encryptionSpec"],C);const w=a(t,["partnerModelTuningSpec"]);w!=null&&l(e,["partnerModelTuningSpec"],w);const y=a(t,["customBaseModel"]);y!=null&&l(e,["customBaseModel"],y);const v=a(t,["experiment"]);v!=null&&l(e,["experiment"],v);const S=a(t,["labels"]);S!=null&&l(e,["labels"],S);const _=a(t,["outputUri"]);_!=null&&l(e,["outputUri"],_);const k=a(t,["pipelineJob"]);k!=null&&l(e,["pipelineJob"],k);const A=a(t,["serviceAccount"]);A!=null&&l(e,["serviceAccount"],A);const E=a(t,["tunedModelDisplayName"]);return E!=null&&l(e,["tunedModelDisplayName"],E),e}function TU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>dc(s))),l(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xU extends er{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ao(Yn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:nc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=aU(e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>dc(f))}else{const d=ZF(e);return u=U("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>sT(f))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=uU(e);return u=U("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=TU(f),p=new Nm;return Object.assign(p,h),p})}else{const d=tU(e);return u=U("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=gU(f),p=new Nm;return Object.assign(p,h),p})}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=cU(e);s=U("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=nU(e);s=U("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=pU(e);return o=U("tuningJobs",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>dc(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sU(e);return o=U("tunedModels",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>yU(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CU{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const SU=1024*1024*8,_U=3,kU=1e3,EU=2,Il="x-goog-upload-status";async function AU(t,e,n){var r,i,o;let s=0,u=0,c=new rc(new Response),d="upload";for(s=t.size;u<s;){const h=Math.min(SU,s-u),p=t.slice(u,u+h);u+h>=s&&(d+=", finalize");let g=0,T=kU;for(;g<_U&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[Il]));)g++,await IU(T),T=T*EU;if(u+=h,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[Il])!=="active")break;if(s<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[Il])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function PU(t){return{size:t.size,type:t.type}}function IU(t){return new Promise(e=>setTimeout(e,t))}class MU{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AU(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await PU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RU{create(e,n,r){return new NU(e,n,r)}}class NU{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ig="x-goog-api-key";class DU{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ig)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ig,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LU="gl-node/";class bU{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=mI(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new DU(this.apiKey);this.apiClient=new Xb({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:LU+"web",uploader:new MU,downloader:new CU}),this.models=new yF(this.apiClient),this.live=new cF(this.apiClient,i,new RU),this.batches=new BM(this.apiClient),this.chats=new WR(this.models,this.apiClient),this.caches=new HR(this.apiClient),this.files=new oN(this.apiClient),this.operations=new xF(this.apiClient),this.authTokens=new QF(this.apiClient),this.tunings=new xU(this.apiClient)}}var FU={};const UU=({onBookGenerated:t})=>{const[e,n]=P.useState(""),[r,i]=P.useState(!1),[o,s]=P.useState([]),[u,c]=P.useState(null),d=async()=>{var g;if(e){i(!0),c(null),s([]);try{const C=((g=(await new bU({apiKey:FU.API_KEY}).models.generateContent({model:"gemini-2.5-flash",contents:`Based on the following topic, suggest 5 book recommendations. For each book, provide a title, author, and a short note (one sentence) explaining why it fits the topic. Topic: "${e}"`,config:{responseMimeType:"application/json",responseSchema:{type:je.ARRAY,items:{type:je.OBJECT,properties:{title:{type:je.STRING},author:{type:je.STRING},notes:{type:je.STRING,description:"A short, one-sentence reason for recommending this book."}},required:["title","author","notes"]}}}})).text)==null?void 0:g.trim())||"[]",w=JSON.parse(C);s(w)}catch(T){console.error("Error generating book recommendations:",T),c("Sorry, something went wrong while generating ideas. Please try again.")}finally{i(!1)}}},f=g=>{t(g)};return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Describe the books you're looking for:"}),m.jsx("textarea",{id:"prompt",value:e,onChange:g=>n(g.target.value),className:"w-full bg-gray-100 dark:bg-gray-700 border-2 border-transparent rounded-xl p-3 text-gray-800 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:bg-white dark:focus:bg-gray-600 focus:border-primary-500 transition-all h-24",placeholder:"e.g., 'Classic sci-fi books about space exploration'","aria-label":"Book recommendation prompt"})]}),m.jsx(se,{onClick:d,isLoading:r,className:"w-full",children:"Generate Ideas"}),u&&m.jsx("p",{className:"text-red-500 text-sm text-center",children:u}),r&&m.jsx("div",{className:"pt-4",children:m.jsx(Ke,{text:"Generating..."})}),o.length>0&&m.jsxs("div",{className:"space-y-3 pt-4 max-h-64 overflow-y-auto pr-2",children:[m.jsx("h3",{className:"text-md font-semibold text-gray-800 dark:text-gray-100",children:"Suggestions:"}),o.map((g,T)=>m.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-100",children:g.title}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["by ",g.author]}),m.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1 italic",children:['"',g.notes,'"']})]}),m.jsx(se,{onClick:()=>f(g),variant:"secondary",className:"px-3 py-1.5 text-sm flex-shrink-0",children:"Add"})]},T))]})]})},aT=({user:t,onSave:e,onCancel:n,existingGuide:r})=>{var L;const[i,o]=P.useState((r==null?void 0:r.title)||""),[s,u]=P.useState((r==null?void 0:r.description)||""),[c,d]=P.useState(((L=r==null?void 0:r.tags)==null?void 0:L.join(", "))||""),[f,h]=P.useState(r!=null&&r.books&&r.books.length>0?r.books:[{id:Date.now(),title:"",author:"",likes:0,dislikes:0}]),[p,g]=P.useState((r==null?void 0:r.isPublic)??!0),[T,x]=P.useState(!1),[C,w]=P.useState(!1),{trigger:y}=Jd(),v=(I,b,N)=>{const $=[...f];$[I]={...$[I],[b]:N},h($)},S=()=>{y("light"),h([...f,{id:Date.now(),title:"",author:"",notes:"",coverUrl:"",purchaseLink:"",likes:0,dislikes:0}])},_=I=>{y("light");const b={id:Date.now(),title:I.title||"",author:I.author||"",notes:I.notes||"",coverUrl:"",purchaseLink:"",likes:0,dislikes:0};h(N=>N.length===1&&!N[0].title&&!N[0].author?[b]:[...N,b])},k=I=>{if(y("light"),f.length>1){const b=f.filter((N,$)=>$!==I);h(b)}},A=async I=>{I.preventDefault(),x(!0),y("medium");const b=c.split(",").map($=>$.trim()).filter(Boolean),N={title:i,description:s,books:f.filter($=>$.title&&$.author),isPublic:p,tags:b};try{if(r){const $=await lk(r.id,N);e($)}else{const $=await ak(N,t);e($)}}catch($){console.error("Failed to save guide",$)}finally{x(!1)}},E="w-full bg-gray-100 dark:bg-gray-700 border-2 border-transparent rounded-xl p-3 text-gray-800 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:bg-white dark:focus:bg-gray-600 focus:border-primary-500 transition-all",R="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2";return m.jsxs(m.Fragment,{children:[m.jsxs("form",{onSubmit:A,className:"space-y-6 animate-fadeIn",children:[m.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"title",className:R,children:"Title"}),m.jsx("input",{id:"title",type:"text",value:i,onChange:I=>o(I.target.value),className:E,placeholder:"e.g., Intro to Stoicism",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:R,children:"Description"}),m.jsx("textarea",{id:"description",value:s,onChange:I=>u(I.target.value),className:`${E} h-24`,placeholder:"A brief summary of this guide",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"tags",className:R,children:"Tags"}),m.jsx("input",{id:"tags",name:"tags",type:"text",value:c,onChange:I=>d(I.target.value),className:E,placeholder:"Add tags (separated by comma)"})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3 px-2",children:"Books"}),m.jsx("div",{className:"space-y-4",children:f.map((I,b)=>m.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 relative",children:[f.length>1&&m.jsx("button",{type:"button",onClick:()=>k(b),className:"absolute -top-2 -right-2 w-7 h-7 bg-red-500 rounded-full text-white font-bold text-lg flex items-center justify-center leading-none pb-0.5 shadow-md hover:bg-red-600 transition-colors",children:""}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{id:`book-title-${b}`,name:`book-title-${b}`,type:"text",value:I.title,onChange:N=>v(b,"title",N.target.value),className:E,placeholder:"Book Title",required:!0}),m.jsx("input",{id:`book-author-${b}`,name:`book-author-${b}`,type:"text",value:I.author,onChange:N=>v(b,"author",N.target.value),className:E,placeholder:"Author",required:!0}),m.jsx("textarea",{id:`book-notes-${b}`,name:`book-notes-${b}`,value:I.notes||"",onChange:N=>v(b,"notes",N.target.value),className:`${E} h-20 text-sm`,placeholder:"Optional notes..."}),m.jsx("input",{id:`book-cover-${b}`,name:`book-cover-${b}`,type:"url",value:I.coverUrl||"",onChange:N=>v(b,"coverUrl",N.target.value),className:E,placeholder:"Cover URL (optional)"}),m.jsx("input",{id:`book-purchase-${b}`,name:`book-purchase-${b}`,type:"url",value:I.purchaseLink||"",onChange:N=>v(b,"purchaseLink",N.target.value),className:E,placeholder:"Purchase Link (optional)"})]})]},I.id))}),m.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[m.jsx(se,{type:"button",onClick:()=>w(!0),variant:"secondary",className:"w-full",children:" Generate with AI"}),m.jsx(se,{type:"button",onClick:S,variant:"secondary",className:"w-full",children:"Add Another Book"})]})]}),m.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80",children:m.jsxs("label",{htmlFor:"isPublic",className:"flex items-center justify-between cursor-pointer",children:[m.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Make Guide Public?"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"isPublic",type:"checkbox",className:"sr-only",checked:p,onChange:()=>g(!p)}),m.jsx("div",{className:`block w-14 h-8 rounded-full transition-colors ${p?"bg-primary-700":"bg-gray-200 dark:bg-gray-600"}`}),m.jsx("div",{className:`dot absolute left-1 top-1 bg-white dark:bg-gray-300 w-6 h-6 rounded-full transition-transform ${p?"transform translate-x-6":""}`})]})]})}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[m.jsx(se,{type:"button",variant:"secondary",onClick:n,children:"Cancel"}),m.jsx(se,{type:"submit",variant:"primary",isLoading:T,children:r?"Update Guide":"Create Guide"})]})]}),m.jsx(Aw,{isOpen:C,onClose:()=>w(!1),title:"Generate Book Ideas",children:m.jsx(UU,{onBookGenerated:_})})]})},VU=({user:t,onSave:e,onCancel:n})=>m.jsx("div",{className:"animate-fadeIn",children:m.jsx(aT,{user:t,onSave:e,onCancel:n})}),$U=({guideId:t,user:e,setPage:n,onDelete:r})=>{const[i,o]=P.useState(null),[s,u]=P.useState(!0),[c,d]=P.useState(!1),[f,h]=P.useState(!1),[p,g]=P.useState(!1),[T,x]=P.useState(!1),[C,w]=P.useState({}),[y,v]=P.useState({});P.useEffect(()=>{(async()=>{u(!0);const $=await pd(t);if($){const[z,q,H,M]=await Promise.all([vk(t),wk(t),Tk($),xk($)]);o($),g(z),x(q),w(H),v(M)}else o(null);u(!1)})()},[t]);const S=(i==null?void 0:i.authorUsername)===e.username,_=()=>{i&&n(V.ShareOptions,i.id)},k=async()=>{i&&(h(!0),await uk(i.id),h(!1),d(!1),r())},A=async()=>{if(!i)return;const N={...i},$=p,z=T;o(q=>q?{...q,likes:$?q.likes-1:q.likes+1,dislikes:z?q.dislikes-1:q.dislikes}:null),g(!$),z&&x(!1);try{$?await dk(i.id):(await ck(i.id),await js("Liked",i.title))}catch(q){console.error("Failed to update like status:",q),o(N),g($),x(z)}},E=async()=>{if(!i)return;const N={...i},$=p,z=T;o(q=>q?{...q,dislikes:z?q.dislikes-1:q.dislikes+1,likes:$?q.likes-1:q.likes}:null),x(!z),$&&g(!1);try{z?await hk(i.id):(await fk(i.id),await js("Disliked",i.title))}catch(q){console.error("Failed to update dislike status:",q),o(N),g($),x(z)}},R=async N=>{if(!i)return;const $={...i},z=!!C[N],q=!!y[N];w(H=>({...H,[N]:!z})),!z&&q&&v(H=>({...H,[N]:!1})),o(H=>H?{...H,books:H.books.map(M=>M.id===N?{...M,likes:z?M.likes-1:M.likes+1,dislikes:!z&&q?M.dislikes-1:M.dislikes}:M)}:null);try{z?await mk(N):await pk(N)}catch(H){console.error("Failed to update book like status:",H),o($),w(M=>({...M,[N]:z})),!z&&q&&v(M=>({...M,[N]:!0}))}},L=async N=>{if(!i)return;const $={...i},z=!!C[N],q=!!y[N];v(H=>({...H,[N]:!q})),!q&&z&&w(H=>({...H,[N]:!1})),o(H=>H?{...H,books:H.books.map(M=>M.id===N?{...M,dislikes:q?M.dislikes-1:M.dislikes+1,likes:!q&&z?M.likes-1:M.likes}:M)}:null);try{q?await yk(N):await gk(N)}catch(H){console.error("Failed to update book dislike status:",H),o($),v(M=>({...M,[N]:q})),!q&&z&&w(M=>({...M,[N]:!0}))}};if(s)return m.jsx("div",{className:"flex justify-center mt-20",children:m.jsx(Ke,{})});if(!i)return m.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Guide not found."});const I=({filled:N,small:$=!1})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:$?"h-5 w-5":"h-6 w-6",viewBox:"0 0 24 24",fill:N?"currentColor":"none",stroke:"currentColor",strokeWidth:2,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),b=({filled:N,small:$=!1})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${$?"h-5 w-5":"h-6 w-6"} transform -scale-y-100`,viewBox:"0 0 24 24",fill:N?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})});return m.jsxs("div",{className:"animate-fadeIn",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4 text-center",children:i.title}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200/80 dark:border-gray-700/80 rounded-2xl p-5 mb-6",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx("img",{src:i.authorPfpUrl,alt:i.authorUsername,className:"w-11 h-11 rounded-full mr-3"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:i.authorUsername}),m.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created on ",new Date(i.createdAt).toLocaleDateString()]})]})]}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:i.description}),i.tags&&i.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-100 dark:border-gray-700",children:i.tags.map((N,$)=>m.jsx("span",{className:"bg-primary-100 text-primary-800 dark:bg-primary-900/50 dark:text-primary-300 text-xs font-semibold px-3 py-1.5 rounded-full",children:N},$))})]}),m.jsx("div",{className:"space-y-4 mb-8",children:i.books.map((N,$)=>m.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200/80 dark:border-gray-700/80 rounded-2xl p-4 flex flex-col sm:flex-row gap-4 transition-shadow hover:shadow-md",children:[N.coverUrl&&m.jsx("img",{src:N.coverUrl,alt:`Cover of ${N.title}`,className:"w-24 h-36 object-cover rounded-lg flex-shrink-0 self-center sm:self-start shadow-sm"}),m.jsxs("div",{className:"flex-grow flex flex-col",children:[m.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[$+1,". ",N.title]}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:["by ",N.author]}),N.notes&&m.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700/50 p-3 rounded-xl italic mb-3",children:['"',N.notes,'"']}),m.jsxs("div",{className:"mt-auto pt-2 flex items-center justify-between",children:[N.purchaseLink?m.jsxs("a",{href:N.purchaseLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-primary-700 bg-primary-100 hover:bg-primary-200 dark:text-primary-300 dark:bg-primary-900/50 dark:hover:bg-primary-900/80 rounded-lg transition-colors",children:["Buy Now",m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}):m.jsx("div",{}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("button",{onClick:()=>L(N.id),className:`flex items-center space-x-2 px-3 py-1.5 font-semibold rounded-full focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out transform active:scale-95 text-sm ${y[N.id]?"bg-blue-100 text-blue-600 focus:ring-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 focus:ring-gray-300"}`,children:[m.jsx(b,{filled:!!y[N.id],small:!0}),m.jsx("span",{children:N.dislikes})]}),m.jsxs("button",{onClick:()=>R(N.id),className:`flex items-center space-x-2 px-3 py-1.5 font-semibold rounded-full focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out transform active:scale-95 text-sm ${C[N.id]?"bg-red-100 text-red-600 focus:ring-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 focus:ring-gray-300"}`,children:[m.jsx(I,{filled:!!C[N.id],small:!0}),m.jsx("span",{children:N.likes})]})]})]})]})]},N.id))}),m.jsxs("div",{className:"flex flex-col space-y-3",children:[m.jsxs("div",{className:"flex items-stretch space-x-3",children:[m.jsxs("button",{onClick:E,className:`flex items-center justify-center space-x-2 px-4 py-3 font-semibold rounded-xl focus:outline-none focus:ring-4 transition-all duration-300 ease-in-out transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed ${T?"bg-blue-100 text-blue-600 focus:ring-blue-200":"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 focus:ring-gray-300"}`,children:[m.jsx(b,{filled:T}),m.jsx("span",{children:i.dislikes})]}),m.jsx(se,{onClick:_,variant:"primary",className:"flex-1",children:"Share to Farcaster"}),m.jsxs("button",{onClick:A,className:`flex items-center justify-center space-x-2 px-4 py-3 font-semibold rounded-xl focus:outline-none focus:ring-4 transition-all duration-300 ease-in-out transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed ${p?"bg-red-100 text-red-600 focus:ring-red-200":"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 focus:ring-gray-300"}`,children:[m.jsx(I,{filled:p}),m.jsx("span",{children:i.likes})]})]}),S&&m.jsxs("div",{className:"flex space-x-3",children:[m.jsx(se,{onClick:()=>n(V.EditGuide,i.id),variant:"secondary",className:"flex-1",children:"Edit"}),m.jsx(se,{onClick:()=>d(!0),variant:"danger",className:"flex-1",children:"Delete"})]})]}),m.jsxs(Aw,{isOpen:c,onClose:()=>d(!1),title:"Confirm Deletion",children:[m.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to permanently delete this guide? This action cannot be undone."}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx(se,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),m.jsx(se,{variant:"danger",onClick:k,isLoading:f,children:"Delete"})]})]})]})},BU=({user:t,guideId:e,onSave:n,onCancel:r})=>{const[i,o]=P.useState(null),[s,u]=P.useState(!0);return P.useEffect(()=>{(async()=>{u(!0);const d=await pd(e);d&&d.authorUsername===t.username&&o(d),u(!1)})()},[e,t.username]),s?m.jsx("div",{className:"flex justify-center mt-20",children:m.jsx(Ke,{})}):i?m.jsx("div",{className:"animate-fadeIn",children:m.jsx(aT,{user:t,onSave:n,onCancel:r,existingGuide:i})}):m.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Guide not found or you don't have permission to edit it."})},GU=["gradient","modern","classic"];function ns(t,e,n,r,i,o){const s=e.split(" ");let u="",c=r;for(let d=0;d<s.length;d++){const f=u+s[d]+" ";t.measureText(f).width>i&&d>0?(t.fillText(u,n,c),u=s[d]+" ",c+=o):u=f}return t.fillText(u,n,c),c+o}const OU=(t,e,n)=>new Promise((r,i)=>{const o=document.createElement("canvas"),s=o.getContext("2d");if(!s)return i(new Error("Could not get canvas context"));const u=1200,c=630;o.width=u,o.height=c;let d="#FFFFFF",f="#111827",h="#374151",p="#4B5563",g="#6B7280",T="bold 72px sans-serif",x="40px sans-serif",C="italic 32px sans-serif";switch(e){case"gradient":const y=s.createLinearGradient(0,0,u,c);y.addColorStop(0,"#F4E6FF"),y.addColorStop(1,"#E9D0FF"),d=y,f="#2E0F50",h="#6020A0",p="#4F1B82",g="#7828C8";break;case"modern":d="#111827",f="#F9FAFB",h="#D1D5DB",p="#9CA3AF",g="#E5E7EB";break;case"classic":d="#FFFFFF",f="#1F2937",h="#4B5563",p="#6B7280",g="#9CA3AF",T="bold 80px serif",x="42px serif",C="italic 34px serif";break}const w=y=>{if(s.fillStyle=d,s.fillRect(0,0,u,c),y){const S=u*.55,_=u-S-60,k=c-60*2,A=_/y.width,E=k/y.height,R=Math.min(A,E),L=y.width*R,I=y.height*R,b=S+(_-L)/2,N=60+(k-I)/2;s.shadowColor="rgba(0,0,0,0.15)",s.shadowBlur=20,s.shadowOffsetX=0,s.shadowOffsetY=8,s.drawImage(y,b,N,L,I),s.shadowColor="transparent";const $=60,z=u*.55-90;s.fillStyle=f,s.font=T,s.textAlign="left",s.textBaseline="top";const q=ns(s,t.title,$,80,z,85);s.fillStyle=h,s.font=x,ns(s,t.description,$,q+15,z,50)}else{s.fillStyle=f,s.font=T,s.textAlign="left",s.textBaseline="top";const S=ns(s,t.title,60,80,1080,85);s.fillStyle=h,s.font=x,ns(s,t.description,60,S+10,1080,50)}s.fillStyle=p,s.font=C,s.textBaseline="bottom",s.textAlign="left",s.fillText(`by @${t.authorUsername}`,60,c-60),s.fillStyle=g,s.font="24px sans-serif",s.textAlign="right",s.fillText("Shared from Castlist",u-60,c-60),r(o.toDataURL("image/png"))};if(n){let y=!1;const v=setTimeout(()=>{y||(y=!0,console.warn("Image load timed out after 10 seconds. Falling back to text-only card."),w(null))},1e4),S=new Image;S.crossOrigin="anonymous",S.onload=()=>{y||(y=!0,clearTimeout(v),w(S))},S.onerror=k=>{y||(y=!0,clearTimeout(v),console.error("Failed to load cover image, drawing text-only card.",k),w(null))};const _=`https://images.weserv.nl/?url=${encodeURIComponent(n)}`;S.src=_}else w(null)}),HU=({guideId:t,onBack:e})=>{const[n,r]=P.useState(null),[i,o]=P.useState(!0),[s,u]=P.useState("modern"),[c,d]=P.useState(null),[f,h]=P.useState(null),[p,g]=P.useState(!0);P.useEffect(()=>{(async()=>{var y;o(!0);const w=await pd(t);if(r(w||null),w){const v=(y=w.books.find(S=>S.coverUrl))==null?void 0:y.coverUrl;d(v||null)}o(!1)})()},[t]),P.useEffect(()=>{n&&(async()=>{g(!0),h(null);try{const w=await OU(n,s,c);h(w)}catch(w){console.error("Failed to generate share card:",w)}finally{g(!1)}})()},[n,s,c]);const T=async()=>{n&&(await js("Shared",n.title),alert("Sharing is simulated! In a real app, your card would be cast."),e())};if(i)return m.jsx("div",{className:"flex justify-center mt-20",children:m.jsx(Ke,{text:"Loading guide..."})});if(!n)return m.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Guide not found."});const x=n.books.filter(C=>C.coverUrl);return m.jsxs("div",{className:"animate-fadeIn",children:[m.jsx("div",{className:"mb-6 border border-gray-200/80 dark:border-gray-700/80 rounded-3xl overflow-hidden flex items-center justify-center bg-gray-100 dark:bg-gray-800 shadow-lg",children:p?m.jsx("div",{className:"w-full aspect-[1.91/1] flex flex-col items-center justify-center",children:m.jsx(Ke,{text:"Generating preview..."})}):f&&m.jsx("img",{src:f,alt:"Share card preview",className:"w-full h-auto block"})}),x.length>0&&m.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 mb-6",children:[m.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-3 text-center",children:"Select a Cover"}),m.jsxs("div",{className:"flex space-x-3 overflow-x-auto pb-2 -mx-2 px-2 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[m.jsx("div",{onClick:()=>d(null),className:`flex-shrink-0 w-20 h-28 rounded-lg flex items-center justify-center cursor-pointer transition-all border-4 bg-gray-50 dark:bg-gray-700 ${c?"border-transparent hover:border-gray-300 dark:hover:border-gray-500":"border-primary-500"}`,children:m.jsxs("div",{className:"w-full h-full rounded-md flex flex-col items-center justify-center text-center p-2",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400 dark:text-gray-500 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 14a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 14a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Text Only"})]})}),x.map(C=>m.jsx("div",{onClick:()=>d(C.coverUrl),className:`flex-shrink-0 w-20 h-28 rounded-lg cursor-pointer transition-all border-4 ${c===C.coverUrl?"border-primary-500":"border-transparent hover:border-gray-300 dark:hover:border-gray-500"}`,children:m.jsx("img",{src:C.coverUrl,alt:`Cover of ${C.title}`,className:"w-full h-full object-cover rounded-md shadow-sm"})},C.id))]})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80",children:[m.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-3 text-center",children:"Choose a Theme"}),m.jsx("div",{className:"grid grid-cols-3 gap-3",children:GU.map(C=>m.jsx(se,{variant:s===C?"primary":"secondary",onClick:()=>u(C),className:"capitalize w-full",children:C},C))})]}),m.jsx("div",{className:"mt-8",children:m.jsx(se,{onClick:T,className:"w-full",disabled:p,children:p?"Generating...":"Confirm Share"})})]})},qU=["gradient","modern","classic"],zU=(t,e,n,r)=>{let i;if(r===1)i="#FFD700";else if(r===2)i="#C0C0C0";else if(r===3)i="#CD7F32";else return;t.save(),t.beginPath(),t.arc(e,n,20,0,Math.PI*2,!1),t.fillStyle=i,t.fill(),t.strokeStyle="rgba(255,255,255,0.5)",t.lineWidth=2,t.stroke(),t.fillStyle=r===1?"#A36B00":r===2?"#6C757D":"#8C5A2D",t.font="bold 24px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(r.toString(),e,n+2),t.restore()},WU=(t,e)=>new Promise((n,r)=>{const i=document.createElement("canvas"),o=i.getContext("2d");if(!o)return r(new Error("Could not get canvas context"));const s=1200,u=630;i.width=s,i.height=u;let c="#FFFFFF",d="#111827",f="#374151",h="#6B7280",p="#6B7280",g="bold 72px sans-serif",T="48px sans-serif",x="italic 30px sans-serif";switch(e){case"gradient":const y=o.createLinearGradient(0,0,s,u);y.addColorStop(0,"#F4E6FF"),y.addColorStop(1,"#E9D0FF"),c=y,d="#2E0F50",f="#6020A0",h="#4F1B82",p="#7828C8";break;case"modern":c="#111827",d="#F9FAFB",f="#D1D5DB",h="#9CA3AF",p="#E5E7EB";break;case"classic":c="#FFFFFF",d="#1F2937",f="#4B5563",h="#6B7280",p="#9CA3AF",g="bold 80px serif",T="50px serif",x="italic 32px serif";break}o.fillStyle=c,o.fillRect(0,0,s,u),o.fillStyle=d,o.font=g,o.textAlign="center",o.fillText("Top 5 Reading Guides",s/2,90);let C=180;const w=85;t.slice(0,5).forEach((y,v)=>{const S=v+1,_=120;S<=3?zU(o,_-40,C,S):(o.fillStyle=f,o.font="bold 48px sans-serif",o.textAlign="center",o.fillText(`#${S}`,_-40,C+5)),o.fillStyle=f,o.font=T,o.textAlign="left",o.textBaseline="middle";const k=650;let A=y.title;if(o.measureText(A).width>k){for(;o.measureText(A+"...").width>k;)A=A.slice(0,-1);A+="..."}o.fillText(A,_+20,C-12),o.fillStyle=h,o.font=x,o.fillText(`by @${y.authorUsername}`,_+25,C+22),o.fillStyle="#E11D48",o.font="bold 40px sans-serif",o.textAlign="right",o.fillText(` ${y.likes}`,s-100,C),C+=w}),o.fillStyle=p,o.font="24px sans-serif",o.textAlign="right",o.textBaseline="bottom",o.fillText("Shared from Castlist",s-60,u-40),n(i.toDataURL("image/png"))}),KU=({onBack:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState(!0),[o,s]=P.useState("modern"),[u,c]=P.useState(null),[d,f]=P.useState(!0);P.useEffect(()=>{(async()=>{i(!0);const T=[...await W0()].sort((x,C)=>C.likes-x.likes);n(T),i(!1)})()},[]),P.useEffect(()=>{e&&(async()=>{f(!0),c(null);try{const g=await WU(e,o);c(g)}catch(g){console.error("Failed to generate share card:",g)}finally{f(!1)}})()},[e,o]);const h=()=>{e&&(js("Shared","the global ranking"),alert("Sharing is simulated! In a real app, your card would be cast."),t())};return r?m.jsx("div",{className:"flex justify-center mt-20",children:m.jsx(Ke,{text:"Loading rankings..."})}):e?m.jsxs("div",{className:"animate-fadeIn",children:[m.jsx("div",{className:"mb-6 border border-gray-200/80 dark:border-gray-700/80 rounded-3xl overflow-hidden flex items-center justify-center bg-gray-100 dark:bg-gray-800 shadow-lg",children:d?m.jsx("div",{className:"w-full aspect-[1.91/1] flex flex-col items-center justify-center",children:m.jsx(Ke,{text:"Generating preview..."})}):u&&m.jsx("img",{src:u,alt:"Share card preview",className:"w-full h-auto block"})}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200/80 dark:border-gray-700/80",children:[m.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-3 text-center",children:"Choose a Theme"}),m.jsx("div",{className:"grid grid-cols-3 gap-3",children:qU.map(p=>m.jsx(se,{variant:o===p?"primary":"secondary",onClick:()=>s(p),className:"capitalize w-full",children:p},p))})]}),m.jsx("div",{className:"mt-8",children:m.jsx(se,{onClick:h,className:"w-full",disabled:d,children:d?"Generating...":"Confirm Share"})})]}):m.jsx("div",{className:"text-center text-gray-500 mt-20",children:"No guides found."})};function JU({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 0 1 3.16 5.337a45.6 45.6 0 0 1 2.006-.343v.256Zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 0 1-2.863 3.207 6.72 6.72 0 0 0 .857-3.294Z",clipRule:"evenodd"}))}const lT=P.forwardRef(JU),jU=t=>{const e=new Date(t),r=Math.floor((new Date().getTime()-e.getTime())/1e3);if(r<60)return`${r}s ago`;const i=Math.floor(r/60);if(i<60)return`${i}m ago`;const o=Math.floor(i/60);if(o<24)return`${o}h ago`;const s=Math.floor(o/24);if(s<30)return`${s}d ago`;const u=Math.floor(s/30);return u<12?`${u}mo ago`:`${Math.floor(s/365)}y ago`},YU=({action:t})=>{const e="w-10 h-10 rounded-full flex items-center justify-center";return t.includes("Liked")?m.jsx("div",{className:`${e} bg-red-100 dark:bg-red-900/40`,children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})}):t.includes("Disliked")?m.jsx("div",{className:`${e} bg-blue-100 dark:bg-blue-900/40`,children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M10 3.5a1.5 1.5 0 01.954 2.805l-4.18 6.335A1.5 1.5 0 015.5 14H5V8.5a1.5 1.5 0 011.5-1.5h2.5V3.5zM8 5.5H6.5V14h.672a3.5 3.5 0 003.26-4.971l4.18-6.335A3.501 3.501 0 0010 0a3.5 3.5 0 00-2 6.5v-1z",transform:"translate(0 3)"})})}):t.includes("Shared")?m.jsx("div",{className:`${e} bg-primary-100 dark:bg-primary-900/40`,children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary-500",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})})}):null},XU=()=>{const{theme:t,toggleTheme:e}=kk();return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Dark Mode"}),m.jsxs("button",{onClick:e,className:"relative inline-flex items-center h-8 w-14 rounded-full transition-colors bg-gray-200 dark:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800","aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:[m.jsx("span",{className:`inline-block w-6 h-6 transform transition-transform rounded-full bg-white dark:bg-gray-300 ${t==="dark"?"translate-x-7":"translate-x-1"}`}),m.jsx("span",{className:`absolute left-1.5 top-1.5 transition-opacity ${t==="light"?"opacity-100":"opacity-0"}`,"aria-hidden":"true",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 14.464A1 1 0 106.465 13.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zm-1.414-2.12a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z"})})}),m.jsx("span",{className:`absolute right-1.5 top-1.5 transition-opacity ${t==="dark"?"opacity-100":"opacity-0"}`,"aria-hidden":"true",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})]})]})},QU=({setPage:t,setSelectedGuideId:e})=>{const{user:n,logout:r}=ka(),{myGuides:i,activities:o,profileStats:s,isLoading:u}=Co(),c=d=>{e(d),t(V.GuideDetail,d)};return u?m.jsx("div",{className:"flex justify-center mt-20",children:m.jsx(Ke,{})}):n?m.jsxs("div",{className:"animate-fadeIn space-y-8",children:[m.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 flex flex-col items-center text-center shadow-md border border-gray-200/80 dark:border-gray-700/80",children:[m.jsx("img",{src:n.pfp_url,alt:n.username,className:"w-24 h-24 rounded-full mb-4 ring-4 ring-primary-200 dark:ring-primary-900 shadow-lg"}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.username}),m.jsxs("div",{className:"flex justify-center items-center space-x-8 mt-6 pt-6 border-t border-gray-100 dark:border-gray-700 w-full",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-primary-700 dark:text-primary-400",children:i.length}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Guides"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-primary-700 dark:text-primary-400",children:s.totalLikes}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Likes"})]})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"Your Rank"}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-md border border-gray-200/80 dark:border-gray-700/80 flex items-center space-x-6",children:[m.jsx("div",{className:"bg-primary-100 dark:bg-primary-900/40 p-4 rounded-full flex-shrink-0",children:m.jsx(lT,{className:"h-8 w-8 text-primary-600 dark:text-primary-300"})}),m.jsx("div",{children:s.rank?m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Your Global Position"}),m.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:["#",s.rank]}),m.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["You're in the top ",Math.ceil(s.rank/s.totalRankedUsers*100),"% of creators!"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"You are not ranked yet"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Create public guides and get likes to join the leaderboard!"})]})})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"Activity History"}),o.length>0?m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-4 shadow-md border border-gray-200/80 dark:border-gray-700/80 space-y-2",children:o.slice(0,5).map((d,f)=>m.jsxs("div",{className:"flex items-center p-2 rounded-xl",children:[m.jsx("div",{className:"mr-4",children:m.jsx(YU,{action:d.action})}),m.jsx("div",{className:"flex-grow",children:m.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200 leading-tight",children:["You ",d.action.toLowerCase()," the guide: ",m.jsxs("span",{className:"font-semibold",children:['"',d.itemTitle,'"']})]})}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0",children:jU(d.timestamp)})]},f))}):m.jsxs("div",{className:"text-center py-10 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[m.jsx("h3",{className:"text-md font-semibold text-gray-800 dark:text-gray-100",children:"No recent activity."}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 text-sm",children:"Like or share a guide to see your activity here."})]})]}),m.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-md border border-gray-200/80 dark:border-gray-700/80",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Settings"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(XU,{}),m.jsx("div",{className:"pt-2",children:m.jsx(se,{onClick:()=>t(V.FarcasterTest),variant:"secondary",className:"w-full",children:" Test Farcaster API"})})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4 px-1",children:"My Guides"}),i.length>0?m.jsx("div",{className:"space-y-4",children:i.map(d=>m.jsx(Kd,{guide:d,onClick:()=>c(d.id)},d.id))}):m.jsxs("div",{className:"text-center py-12 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"No guides yet!"}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Tap the 'Create' tab to build your first reading guide."})]})]}),m.jsx("section",{className:"pt-4",children:m.jsx(se,{variant:"danger",onClick:r,className:"w-full",children:"Sign Out"})})]}):m.jsx("div",{className:"text-center text-gray-500 mt-20",children:"User not found."})},ZU=({rank:t})=>{const e=[{color:"text-yellow-400 dark:text-yellow-300",shadow:"drop-shadow-[0_2px_2px_rgba(250,204,21,0.4)]"},{color:"text-gray-400 dark:text-gray-300",shadow:"drop-shadow-[0_2px_2px_rgba(156,163,175,0.4)]"},{color:"text-orange-500 dark:text-orange-400",shadow:"drop-shadow-[0_2px_2px_rgba(249,115,22,0.4)]"}];if(t>3)return null;const{color:n,shadow:r}=e[t-1];return m.jsx("div",{className:`relative ${r}`,children:m.jsx(lT,{className:`h-6 w-6 ${n}`})})},eV=({setPage:t,setSelectedGuideId:e})=>{const{rankedGuides:n,isLoading:r}=Co(),i=s=>{e(s),t(V.GuideDetail,s)},o=()=>{t(V.ShareRanking)};return r?m.jsx("div",{className:"flex justify-center mt-20",children:m.jsx(Ke,{text:"Calculating rankings..."})}):m.jsxs("div",{className:"animate-fadeIn",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6 text-center",children:"Top 10 Guides"}),n.length>0?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"space-y-3",children:n.map((s,u)=>{const c=u+1;return m.jsxs("div",{onClick:()=>i(s.id),className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200/80 dark:border-gray-700/80 shadow-md p-4 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-primary-300 dark:hover:border-primary-700 hover:-translate-y-1 flex items-center space-x-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center w-12 text-center",children:[m.jsxs("span",{className:"text-2xl font-bold text-gray-500 dark:text-gray-400",children:["#",c]}),m.jsx(ZU,{rank:c})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 truncate",children:s.title}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["by ",s.authorUsername]})]}),m.jsxs("div",{className:"flex items-center space-x-2 text-red-500 flex-shrink-0",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),m.jsx("span",{className:"font-bold text-md",children:s.likes})]})]},s.id)})}),m.jsx("div",{className:"mt-8",children:m.jsx(se,{onClick:o,className:"w-full",children:"Share Ranking"})})]}):m.jsxs("div",{className:"text-center py-12 px-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"No guides available!"}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Check back later to see the top guides."})]})]})},tV=()=>{const[t,e]=P.useState(null),[n,r]=P.useState([]),[i,o]=P.useState([]),[s,u]=P.useState([]),[c,d]=P.useState(!1),[f,h]=P.useState(!1),[p,g]=P.useState(!1),[T,x]=P.useState(null),C=P.useCallback(()=>{x(null)},[]),w=P.useCallback(async k=>{d(!0),x(null);try{const[A,E]=await Promise.all([hd(k),H0(k,25)]);A?(e(A),r(E)):x("User not found")}catch(A){x(A instanceof Error?A.message:"Failed to fetch user")}finally{d(!1)}},[]),y=P.useCallback(async k=>{if(!k.trim()){o([]);return}h(!0),x(null);try{const A=await ek(k,10);o(A)}catch(A){x(A instanceof Error?A.message:"Failed to search users")}finally{h(!1)}},[]),v=P.useCallback(async()=>{d(!0),x(null);try{const k=await tk(25);u(k)}catch(k){x(k instanceof Error?k.message:"Failed to fetch trending casts")}finally{d(!1)}},[]),S=P.useCallback(async k=>{g(!0),x(null);try{const A=await rk(k);return A&&t&&await w(t.fid),A}catch(A){return x(A instanceof Error?A.message:"Failed to share guide"),null}finally{g(!1)}},[t,w]),_=P.useCallback(async(k,A)=>{g(!0),x(null);try{const E=await q0(k,A);return E&&t&&await w(t.fid),E}catch(E){return x(E instanceof Error?E.message:"Failed to create cast"),null}finally{g(!1)}},[t,w]);return{user:t,userCasts:n,searchResults:i,trendingCasts:s,isLoading:c,isSearching:f,isCreatingCast:p,fetchUser:w,searchUsers:y,fetchTrending:v,shareGuide:S,createNewCast:_,error:T,clearError:C}},nV=()=>{const{user:t,userCasts:e,searchResults:n,trendingCasts:r,isLoading:i,isSearching:o,isCreatingCast:s,fetchUser:u,searchUsers:c,fetchTrending:d,shareGuide:f,createNewCast:h,error:p,clearError:g}=tV(),[T,x]=P.useState(""),[C,w]=P.useState(""),[y,v]=P.useState("1"),S=async()=>{T.trim()&&await c(T)},_=async()=>{const E=parseInt(y);isNaN(E)||await u(E)},k=async()=>{C.trim()&&await h(C)&&(w(""),alert("Cast created successfully!"))},A=async()=>{await f({title:"Test Guide",description:"This is a test guide from Castlist",tags:["test","farcaster","books"]})&&alert("Guide shared as cast successfully!")};return m.jsx("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:" Farcaster API Test"}),p&&m.jsxs("div",{className:"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg p-4 mb-4",children:[m.jsx("p",{className:"text-red-700 dark:text-red-300",children:p}),m.jsx(se,{onClick:g,variant:"secondary",className:"mt-2",children:"Clear Error"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Test User Fetch"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{id:"test-fid",name:"test-fid",type:"number",value:y,onChange:E=>v(E.target.value),placeholder:"Enter FID (e.g., 1)",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),m.jsx(se,{onClick:_,isLoading:i,children:"Fetch User"})]}),t&&m.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[m.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"User Data:"}),m.jsxs("p",{children:[m.jsx("strong",{children:"FID:"})," ",t.fid]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Username:"})," ",t.username]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Display Name:"})," ",t.display_name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Followers:"})," ",t.follower_count]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Following:"})," ",t.following_count]}),m.jsx("img",{src:t.pfp_url,alt:"Profile",className:"w-16 h-16 rounded-full mt-2"})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Test User Search"}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-3 mb-4",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[m.jsx("strong",{children:"Note:"})," The Farcaster API doesn't have a search endpoint. This searches through popular users (FIDs 1-20) and filters by username match."]})}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{id:"search-query",name:"search-query",type:"text",value:T,onChange:E=>x(E.target.value),placeholder:"Search users (e.g., 'farcaster', 'dwr')",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),m.jsx(se,{onClick:S,isLoading:o,children:"Search"})]}),n.length>0&&m.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[m.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Search Results:"}),m.jsx("div",{className:"space-y-2",children:n.map(E=>m.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-600 rounded",children:[m.jsx("img",{src:E.pfp_url,alt:E.username,className:"w-8 h-8 rounded-full"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:E.username}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["FID: ",E.fid]})]})]},E.fid))})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Test Trending Casts"}),m.jsx(se,{onClick:d,isLoading:i,children:"Fetch Trending"}),r.length>0&&m.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[m.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Trending Casts:"}),m.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:r.slice(0,5).map(E=>m.jsxs("div",{className:"p-3 bg-white dark:bg-gray-600 rounded",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("img",{src:E.author.pfp_url,alt:E.author.username,className:"w-6 h-6 rounded-full"}),m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:E.author.username})]}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:E.text}),m.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[m.jsxs("span",{children:[" ",E.reactions.count]}),m.jsxs("span",{children:[" ",E.recasts.count]}),m.jsxs("span",{children:[" ",E.replies.count]})]})]},E.hash))})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Test Cast Creation"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("textarea",{value:C,onChange:E=>w(E.target.value),placeholder:"Enter your cast text...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white h-20"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(se,{onClick:k,isLoading:s,children:"Create Cast"}),m.jsx(se,{onClick:A,isLoading:s,variant:"secondary",children:"Share Test Guide"})]})]})]}),e.length>0&&m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"User's Recent Casts"}),m.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:m.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:e.slice(0,5).map(E=>m.jsxs("div",{className:"p-3 bg-white dark:bg-gray-600 rounded",children:[m.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:E.text}),m.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[m.jsxs("span",{children:[" ",E.reactions.count]}),m.jsxs("span",{children:[" ",E.recasts.count]}),m.jsxs("span",{children:[" ",E.replies.count]}),m.jsx("span",{children:new Date(E.timestamp).toLocaleDateString()})]})]},E.hash))})})]})]})})},rV=()=>m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:m.jsx(nV,{})});function iV({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"}))}const oV=P.forwardRef(iV);function sV({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const aV=P.forwardRef(sV);function lV({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const uV=P.forwardRef(lV);function cV({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const dV=P.forwardRef(cV);function fV({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const hV=P.forwardRef(fV),pV=[{page:V.Home,label:"Home",icon:aV},{page:V.MyGuides,label:"My Guides",icon:oV},{page:V.Create,label:"Create",icon:uV},{page:V.Ranking,label:"Ranking",icon:dV},{page:V.Profile,label:"Profile",icon:hV}],mV=({activePage:t,setPage:e})=>{const{trigger:n}=Jd(),r=i=>{n("light"),e(i)};return m.jsx("div",{className:"fixed bottom-4 left-0 right-0 z-50 px-4",children:m.jsx("nav",{className:"flex items-center justify-around h-16 bg-white/70 backdrop-blur-xl dark:bg-gray-900/70 rounded-3xl shadow-lg max-w-lg mx-auto ring-1 ring-black/5 dark:ring-white/5",children:pV.map(({page:i,label:o,icon:s})=>{const u=t===i,c="text-primary-700 dark:text-primary-400",d="text-gray-500 dark:text-gray-400 group-hover:text-primary-700 dark:group-hover:text-primary-400";return m.jsxs(jn.button,{onClick:()=>r(i),className:"flex flex-col items-center justify-center w-20 h-full rounded-2xl space-y-1 group focus:outline-none relative",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:[u&&m.jsx(jn.div,{className:"absolute inset-0 bg-primary-100 dark:bg-primary-900/40 rounded-2xl",layoutId:"activeTab",initial:!1,transition:{type:"spring",stiffness:400,damping:30}}),m.jsxs("div",{className:"relative z-10 flex flex-col items-center space-y-1",children:[gg.createElement(s,{className:`h-6 w-6 transition-colors duration-300 ${u?c:d}`}),m.jsx("span",{className:`text-xs font-bold transition-colors duration-300 ${u?c:d}`,children:o})]})]},i)})})})},gV=()=>m.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("rect",{width:"32",height:"32",rx:"8",fill:"url(#paint0_linear_1_2)"}),m.jsx("path",{d:"M10 9C10 8.44772 10.4477 8 11 8H22C22.5523 8 23 8.44772 23 9V22C23 23.1046 22.1046 24 21 24H11C10.4477 24 10 23.5523 10 23V9Z",fill:"white",fillOpacity:"0.8"}),m.jsx("path",{d:"M9 11C9 9.89543 9.89543 9 11 9H20C21.1046 9 22 9.89543 22 11V20C22 21.6569 20.6569 23 19 23H11C9.89543 23 9 22.1046 9 21V11Z",fill:"url(#paint1_linear_1_2)"}),m.jsxs("defs",{children:[m.jsxs("linearGradient",{id:"paint0_linear_1_2",x1:"0",y1:"0",x2:"32",y2:"32",gradientUnits:"userSpaceOnUse",children:[m.jsx("stop",{stopColor:"#A958EB"}),m.jsx("stop",{offset:"1",stopColor:"#6020A0"})]}),m.jsxs("linearGradient",{id:"paint1_linear_1_2",x1:"9",y1:"9",x2:"22",y2:"23",gradientUnits:"userSpaceOnUse",children:[m.jsx("stop",{stopColor:"#D9B0FF"}),m.jsx("stop",{offset:"1",stopColor:"#E9D0FF"})]})]})]}),yV=()=>m.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),vV=({onClick:t})=>m.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white p-2 -ml-2 rounded-full transition-colors",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),wV=({page:t,onBack:e,title:n,searchTerm:r,setSearchTerm:i,showSearch:o})=>{const s=[V.GuideDetail,V.Create,V.EditGuide,V.ShareOptions,V.ShareRanking].includes(t);return m.jsx("header",{className:"fixed top-0 left-0 right-0 z-40 animate-fadeIn",children:m.jsx("div",{className:"bg-white/70 backdrop-blur-xl border-b border-black/5 dark:bg-gray-900/70 dark:border-white/5",children:m.jsxs("div",{className:"container mx-auto max-w-lg p-4 flex flex-col gap-4",children:[m.jsx("div",{className:"relative flex items-center justify-center h-8",children:s?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"absolute left-0",children:m.jsx(vV,{onClick:e})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n})]}):m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx(gV,{}),m.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Castlist"})]})}),o&&m.jsxs("div",{className:"relative",children:[m.jsx(yV,{}),m.jsx("input",{id:"search-guides",name:"search-guides",type:"text",placeholder:"Search guides...",value:r,onChange:u=>i(u.target.value),className:"w-full bg-white/80 dark:bg-gray-800/80 border-2 border-transparent rounded-xl py-3 pl-11 pr-4 text-gray-800 dark:text-gray-200 focus:outline-none focus:bg-white dark:focus:bg-gray-700 focus:border-primary-500 transition-all"})]})]})})})},TV=(t=!1)=>{const[e,n]=P.useState({isLoaded:!1,isReady:!1,hasActions:!1});return P.useEffect(()=>{t&&!window.farcasterWaitStart&&(window.farcasterWaitStart=Date.now(),console.log(" Started waiting for real Farcaster SDK..."));const r=()=>{var g,T,x,C,w,y,v,S,_,k,A,E,R,L,I,b,N,$,z,q,H,M,B,G;console.log(" Checking Farcaster SDK..."),console.log("window.farcaster:",window.farcaster),console.log("window.location:",window.location.href),console.log("document.referrer:",document.referrer);const f=document.referrer.includes("farcaster.xyz")||window.location.href.includes("farcaster.xyz")||window.location.href.includes("ngrok");console.log("isInFarcasterPreview:",f);const h=!!window.farcaster,p=!!((g=window.farcaster)!=null&&g.actions);if(console.log("isLoaded:",h),console.log("hasActions:",p),console.log("actions:",(T=window.farcaster)==null?void 0:T.actions),n({isLoaded:h,isReady:!1,hasActions:p}),f&&!h&&!t)console.log(" Attempting to inject Mock Farcaster SDK..."),console.log("Debug - isInFarcasterPreview:",f),console.log("Debug - isLoaded:",h),console.log("Debug - useRealFarcaster:",t),i();else if(f&&!h&&t)console.log(" Real Farcaster mode - waiting for real SDK to load..."),console.log("Debug - isInFarcasterPreview:",f),console.log("Debug - isLoaded:",h),console.log("Debug - useRealFarcaster:",t),(Date.now()-window.farcasterWaitStart||0)>5e3&&(console.log(" Real Farcaster SDK not loading after 5s - checking if in production"),window.location.hostname.includes("localhost")||window.location.hostname.includes("ngrok")?(console.log(" Development environment - using enhanced mock for preview"),o()):console.log(" Production environment - not injecting mock SDK, waiting for real SDK"));else if(f&&h&&t){if(console.log(" Real Farcaster mode - SDK already loaded, checking if it's real..."),console.log("Debug - window.farcaster:",window.farcaster),console.log("Debug - signIn contains Mock:",(C=(x=window.farcaster)==null?void 0:x.signIn)==null?void 0:C.toString().includes("Mock")),console.log("Debug - signIn contains Enhanced mock:",(y=(w=window.farcaster)==null?void 0:w.signIn)==null?void 0:y.toString().includes("Enhanced mock")),console.log("Debug - getUser:",(v=window.farcaster)==null?void 0:v.getUser),console.log("Debug - actions:",(S=window.farcaster)==null?void 0:S.actions),(k=(_=window.farcaster)==null?void 0:_.signIn)!=null&&k.toString().includes("Mock")||(E=(A=window.farcaster)==null?void 0:A.signIn)!=null&&E.toString().includes("Enhanced mock")){console.log(" Mock SDK detected in Real Farcaster mode - REMOVING IT"),delete window.farcaster,n({isLoaded:!1,isReady:!1,hasActions:!1});return}window.farcaster&&!((L=(R=window.farcaster)==null?void 0:R.signIn)!=null&&L.toString().includes("Mock"))&&!((b=(I=window.farcaster)==null?void 0:I.signIn)!=null&&b.toString().includes("Enhanced mock"))&&console.log(" Real Farcaster SDK detected!")}if(h&&p&&(($=(N=window.farcaster)==null?void 0:N.actions)!=null&&$.ready))if(!((q=(z=window.farcaster)==null?void 0:z.signIn)!=null&&q.toString().includes("Mock"))&&!((M=(H=window.farcaster)==null?void 0:H.signIn)!=null&&M.toString().includes("Enhanced mock")))try{console.log(" Calling sdk.actions.ready() on REAL SDK..."),window.farcaster.actions.ready(),console.log(" Real Farcaster SDK ready() called successfully"),n(ie=>({...ie,isReady:!0}))}catch(ie){console.error(" Error calling Real Farcaster SDK ready():",ie)}else console.log(" Mock SDK detected - not calling ready() to avoid popup issues"),n(ie=>({...ie,isReady:!0}));else if(h&&p&&((G=(B=window.farcaster)==null?void 0:B.actions)!=null&&G.ready))try{console.log(" Calling sdk.actions.ready() (fallback)..."),window.farcaster.actions.ready(),console.log(" Farcaster SDK ready() called successfully (fallback)"),n(X=>({...X,isReady:!0}))}catch(X){console.error(" Error calling Farcaster SDK ready() (fallback):",X)}else console.log(t&&!h?" Real Farcaster mode - waiting for real SDK to load...":" SDK not ready yet or actions not available")},i=()=>{window.farcaster||(console.log(" Injecting mock Farcaster SDK for preview..."),window.farcaster={signIn:async()=>(console.log(" Mock signIn called"),{fid:12345,username:"preview_user",pfp_url:"https://via.placeholder.com/100x100/8A63D2/FFFFFF?text=P",message:"Mock message",signature:"mock_signature",nonce:"mock_nonce"}),getUser:async()=>(console.log(" Mock getUser called"),{fid:12345,username:"preview_user",pfp_url:"https://via.placeholder.com/100x100/8A63D2/FFFFFF?text=P"}),actions:{ready:()=>{console.log(" Mock sdk.actions.ready() called")}}},console.log(" Mock Farcaster SDK injected"))},o=()=>{window.farcaster||(console.log(" Injecting enhanced mock Farcaster SDK for preview..."),window.farcaster={signIn:async()=>(console.log(" Enhanced mock signIn called"),{fid:99999,username:"farcaster_preview_user",pfp_url:"https://via.placeholder.com/100x100/8A63D2/FFFFFF?text=FP",message:"Enhanced mock message",signature:"enhanced_mock_signature",nonce:"enhanced_mock_nonce"}),getUser:async()=>(console.log(" Enhanced mock getUser called"),{fid:99999,username:"farcaster_preview_user",pfp_url:"https://via.placeholder.com/100x100/8A63D2/FFFFFF?text=FP"}),actions:{ready:()=>{console.log(" Enhanced mock sdk.actions.ready() called")}}},console.log(" Enhanced mock Farcaster SDK injected"))};r();const s=[setTimeout(r,100),setTimeout(r,500),setTimeout(r,1e3),setTimeout(r,2e3),setTimeout(r,3e3),setTimeout(r,5e3),setTimeout(r,1e4),setTimeout(r,15e3),setTimeout(r,2e4)],u=()=>{setTimeout(r,100)},c=()=>{console.log(" SDK injection detected, checking..."),setTimeout(r,100)};return new MutationObserver(()=>{var f,h;window.farcaster&&!((h=(f=window.farcaster)==null?void 0:f.signIn)!=null&&h.toString().includes("Mock"))&&(console.log(" Real Farcaster SDK detected via mutation observer"),c())}).observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("load",u),()=>{window.removeEventListener("load",u),s.forEach(clearTimeout)}},[]),e},xV=()=>{var h,p,g,T,x;const[t,e]=P.useState(()=>localStorage.getItem("useRealFarcaster")==="true"),{isLoaded:n,isReady:r,hasActions:i}=TV(t),{user:o,isAuthenticated:s}=ka(),[u,c]=P.useState(!1),d=()=>{const C=!t;e(C),localStorage.setItem("useRealFarcaster",C.toString()),C?(console.log(" Switched to Real Farcaster mode - reload page to apply"),setTimeout(()=>window.location.reload(),1e3)):(console.log(" Switched to Mock Farcaster mode - reload page to apply"),setTimeout(()=>window.location.reload(),1e3))},f=document.referrer.includes("farcaster.xyz")||window.location.href.includes("farcaster.xyz")||window.location.href.includes("ngrok");return r?null:m.jsxs("div",{className:"fixed top-4 right-4 bg-black/80 text-white text-xs rounded-lg z-50 font-mono max-w-xs transition-all duration-300 ease-in-out",children:[m.jsxs("div",{className:"flex items-center justify-between p-2 cursor-pointer hover:bg-black/60 rounded-t-lg",onClick:()=>c(!u),children:[m.jsx("div",{className:"font-bold text-yellow-400",children:"SDK Debug Panel"}),m.jsx("div",{className:"text-gray-400 hover:text-white transition-colors",children:u?"":""})]}),m.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${u?"max-h-0 opacity-0":"max-h-96 opacity-100"}`,children:m.jsxs("div",{className:"p-2 pt-0 space-y-1",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{children:"Use Real Farcaster:"}),m.jsx("button",{onClick:d,className:`px-2 py-1 text-xs rounded ${t?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:t?"ON":"OFF"})]}),m.jsxs("div",{children:["SDK Loaded: ",n?"":t?"":""]}),m.jsxs("div",{children:["Has Actions: ",i?"":t?"":""]}),m.jsxs("div",{children:["SDK Ready: ",r?"":""]}),m.jsxs("div",{children:["Farcaster: ",window.farcaster?"":t?"":""]}),m.jsxs("div",{children:["Preview Mode: ",f?"":""]}),m.jsxs("div",{children:["Mode: ",t?" Real":" Mock"]}),t&&!n&&m.jsx("div",{className:"text-yellow-400 text-xs",children:" Waiting for real Farcaster SDK..."}),m.jsxs("div",{className:"border-t border-gray-600 pt-1 mt-1",children:[m.jsx("div",{className:"font-bold text-green-400",children:"User Info:"}),m.jsxs("div",{children:["Authenticated: ",s?"":""]}),o&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:["FID: ",o.fid]}),m.jsxs("div",{children:["Username: ",o.username]}),m.jsxs("div",{children:["ID: ",o.id]}),m.jsxs("div",{className:"text-xs text-gray-400",children:["User Type: ",o.fid===99999?" Enhanced Mock":o.id==="dev-user-1"||o.fid===12345||o.username==="preview_user"?" Mock":" Real"]}),m.jsxs("div",{className:"text-xs text-red-400",children:["SDK Source: ",(p=(h=window.farcaster)==null?void 0:h.signIn)!=null&&p.toString().includes("Enhanced mock")?" Enhanced Mock SDK":(T=(g=window.farcaster)==null?void 0:g.signIn)!=null&&T.toString().includes("Mock")?" Mock SDK":" Real SDK"]})]})]}),((x=window.farcaster)==null?void 0:x.actions)&&m.jsxs("div",{children:["Actions: ",Object.keys(window.farcaster.actions).join(", ")]}),m.jsxs("div",{className:"text-xs text-gray-400",children:["URL: ",window.location.href.substring(0,30),"..."]}),m.jsxs("div",{className:"text-xs text-gray-400",children:["Referrer: ",document.referrer.substring(0,30),"..."]})]})})]})},CV=()=>{const{isAuthenticated:t,user:e,isLoading:n}=ka(),{isLoading:r,refreshAllData:i}=Co(),{isLoaded:o,isReady:s,hasActions:u}=Sk(),c=window.farcaster&&window.farcaster.actions&&typeof window.farcaster.signIn=="function";console.log(" App.tsx - Environment detection:"),console.log(" window.farcaster:",window.farcaster),console.log(" isMiniApp:",c),console.log(" isAuthenticated:",t),console.log(" isAuthLoading:",n),console.log(" document.readyState:",document.readyState);const[d,f]=P.useState(V.Home),[h,p]=P.useState(V.Home),[g,T]=P.useState(null),[x,C]=P.useState([V.Home]),[w,y]=P.useState(""),v=(I,b)=>{b&&T(Number(b)),[V.Home,V.MyGuides,V.Create,V.Profile,V.Ranking].includes(I)&&(p(I),I!==V.Home&&y("")),I!==d&&C(N=>[...N,I]),f(I)},S=()=>{const I=[...x];I.pop();const b=I[I.length-1]||V.Home;if([V.GuideDetail,V.EditGuide,V.ShareOptions,V.ShareRanking].includes(d)){const N=x.find($=>[V.Home,V.MyGuides,V.Ranking].includes($))||V.Home;p(N)}else{const N=[V.Home,V.MyGuides,V.Profile,V.Ranking].find($=>$===b);N&&p(N)}C(I),f(b)},_=async I=>{await i(),T(I.id),f(V.GuideDetail)},k=async()=>{await i(),f(V.MyGuides)},A=d===V.Home,E=()=>{switch(d){case V.Create:return"Create New Guide";case V.EditGuide:return"Edit Guide";case V.GuideDetail:return"Details";case V.Profile:return"Profile";case V.ShareOptions:return"Customize Share Card";case V.ShareRanking:return"Customize Ranking Card";default:return""}},R=()=>{switch(d){case V.Home:return m.jsx(Up,{setPage:v,setSelectedGuideId:T,searchTerm:w});case V.MyGuides:return m.jsx(uI,{setPage:v,setSelectedGuideId:T});case V.Create:return m.jsx(VU,{user:e,onSave:_,onCancel:S});case V.Profile:return m.jsx(QU,{setPage:v,setSelectedGuideId:T});case V.Ranking:return m.jsx(eV,{setPage:v,setSelectedGuideId:T});case V.GuideDetail:return m.jsx($U,{guideId:g,user:e,setPage:v,onBack:S,onDelete:k});case V.EditGuide:return m.jsx(BU,{guideId:g,user:e,onSave:_,onCancel:()=>v(V.GuideDetail,g)});case V.ShareOptions:return m.jsx(HU,{guideId:g,setPage:v,onBack:S});case V.ShareRanking:return m.jsx(KU,{setPage:v,onBack:S});case V.FarcasterTest:return m.jsx(rV,{});default:return m.jsx(Up,{setPage:v,setSelectedGuideId:T,searchTerm:w})}};if(n)return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-purple-50 to-blue-100 dark:from-gray-900 dark:via-gray-900 dark:to-black",children:m.jsxs("div",{className:"text-center",children:[m.jsx(Ke,{text:"Authenticating..."}),o&&m.jsxs("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:[m.jsx("p",{children:"SDK Loaded: "}),m.jsxs("p",{children:["SDK Ready: ",s?"":""]}),m.jsxs("p",{children:["Has Actions: ",u?"":""]})]})]})});if(!t)return m.jsx(Pk,{});const L=A?"pt-36":"pt-24";return m.jsxs("div",{className:"text-gray-800 dark:text-gray-200 min-h-screen font-sans bg-gradient-to-br from-primary-50 via-purple-50 to-blue-100 bg-300% animate-gradient dark:from-gray-900 dark:via-gray-900 dark:to-black",children:[m.jsx(xV,{}),m.jsx(wV,{page:d,onBack:S,title:E(),searchTerm:w,setSearchTerm:y,showSearch:A}),m.jsx("main",{className:`container mx-auto max-w-lg p-4 pb-28 ${L}`,children:r&&d===V.Home?m.jsx("div",{className:"flex justify-center mt-20",children:m.jsx(Ke,{})}):R()}),m.jsx(mV,{activePage:h,setPage:v})]})},SV=()=>m.jsx(_k,{children:m.jsx(Ck,{children:m.jsx(Ak,{children:m.jsx(CV,{})})})}),uT=document.getElementById("root");if(!uT)throw new Error("Could not find root element to mount to");const _V=Ml.createRoot(uT);_V.render(m.jsx(gg.StrictMode,{children:m.jsx(SV,{})}));
