var Uu=Object.defineProperty;var Cu=(t,e,r)=>e in t?Uu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Gt=(t,e,r)=>Cu(t,typeof e!="symbol"?e+"":e,r);import{g as Hs,c as Xt,a as Gs}from"./index-CPZGsuqn.js";let bn=class extends Error{constructor(r,n={}){super(r,n.cause?{cause:n.cause}:void 0);Gt(this,"name","BaseError");Gt(this,"cause");this.cause=n.cause}};class Lu extends bn{constructor(){super("Invalid domain manifest");Gt(this,"name","AddMiniApp.InvalidDomainManifest")}}let Nu=class extends bn{constructor(){super("Add miniapp rejected by user");Gt(this,"name","AddMiniApp.RejectedByUser")}},Ba=class extends bn{constructor(){super("Sign in rejected by user");Gt(this,"name","SignIn.RejectedByUser")}};class Fu extends bn{constructor(){super("Sign manifest rejected by user");Gt(this,"name","SignManifest.RejectedByUser")}}class Pu extends bn{constructor(){super("Invalid domain provided");Gt(this,"name","SignManifest.InvalidDomain")}}class Du extends bn{constructor(r="Manifest signing failed"){super(r);Gt(this,"name","SignManifest.GenericError")}}var Se;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),a={};for(const c of i)a[c]=s[c];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Se||(Se={}));var jo;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(jo||(jo={}));const ee=Se.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sr=t=>{switch(typeof t){case"undefined":return ee.undefined;case"string":return ee.string;case"number":return Number.isNaN(t)?ee.nan:ee.number;case"boolean":return ee.boolean;case"function":return ee.function;case"bigint":return ee.bigint;case"symbol":return ee.symbol;case"object":return Array.isArray(t)?ee.array:t===null?ee.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ee.promise:typeof Map<"u"&&t instanceof Map?ee.map:typeof Set<"u"&&t instanceof Set?ee.set:typeof Date<"u"&&t instanceof Date?ee.date:ee.object;default:return ee.unknown}},$=Se.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class yr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,h=0;for(;h<a.path.length;){const v=a.path[h];h===a.path.length-1?(c[v]=c[v]||{_errors:[]},c[v]._errors.push(r(a))):c[v]=c[v]||{_errors:[]},c=c[v],h++}}};return s(this),n}static assert(e){if(!(e instanceof yr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Se.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];r[i]=r[i]||[],r[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}yr.create=t=>new yr(t);const Ts=(t,e)=>{let r;switch(t.code){case $.invalid_type:t.received===ee.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case $.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Se.jsonStringifyReplacer)}`;break;case $.unrecognized_keys:r=`Unrecognized key(s) in object: ${Se.joinValues(t.keys,", ")}`;break;case $.invalid_union:r="Invalid input";break;case $.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Se.joinValues(t.options)}`;break;case $.invalid_enum_value:r=`Invalid enum value. Expected ${Se.joinValues(t.options)}, received '${t.received}'`;break;case $.invalid_arguments:r="Invalid function arguments";break;case $.invalid_return_type:r="Invalid function return type";break;case $.invalid_date:r="Invalid date";break;case $.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Se.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case $.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case $.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case $.custom:r="Invalid input";break;case $.invalid_intersection_types:r="Intersection results could not be merged";break;case $.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case $.not_finite:r="Number must be finite";break;default:r=e.defaultError,Se.assertNever(t)}return{message:r}};let ju=Ts;function zu(){return ju}const $u=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let c="";const h=n.filter(v=>!!v).slice().reverse();for(const v of h)c=v(a,{data:e,defaultError:c}).message;return{...s,path:i,message:c}};function K(t,e){const r=zu(),n=$u({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ts?void 0:Ts].filter(s=>!!s)});t.common.issues.push(n)}class zt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return de;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const i=await s.key,a=await s.value;n.push({key:i,value:a})}return zt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return de;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}}const de=Object.freeze({status:"aborted"}),Bn=t=>({status:"dirty",value:t}),Wt=t=>({status:"valid",value:t}),zo=t=>t.status==="aborted",$o=t=>t.status==="dirty",dn=t=>t.status==="valid",ci=t=>typeof Promise<"u"&&t instanceof Promise;var re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(re||(re={}));class Mr{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Zo=(t,e)=>{if(dn(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new yr(t.common.issues);return this._error=r,this._error}}};function xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,c)=>{const{message:h}=t;return a.code==="invalid_enum_value"?{message:h??c.defaultError}:typeof c.data>"u"?{message:h??n??c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:h??r??c.defaultError}},description:s}}class Ee{get description(){return this._def.description}_getType(e){return Sr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Sr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new zt,ctx:{common:e.parent.common,data:e.data,parsedType:Sr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(ci(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sr(e)},s=this._parseSync({data:e,path:n.path,parent:n});return Zo(n,s)}"~validate"(e){var n,s;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sr(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:r});return dn(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(s=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(i=>dn(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sr(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(ci(s)?s:Promise.resolve(s));return Zo(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const a=e(s),c=()=>i.addIssue({code:$.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(h=>h?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new $r({schema:this,typeName:pe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return gr.create(this,this._def)}nullable(){return Zr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ir.create(this)}promise(){return hi.create(this,this._def)}or(e){return fi.create([this,e],this._def)}and(e){return li.create(this,e,this._def)}transform(e){return new $r({...xe(this._def),schema:this,typeName:pe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new pi({...xe(this._def),innerType:this,defaultValue:r,typeName:pe.ZodDefault})}brand(){return new Ra({typeName:pe.ZodBranded,type:this,...xe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new mi({...xe(this._def),innerType:this,catchValue:r,typeName:pe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ys.create(this,e)}readonly(){return gi.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Zu=/^c[^\s-]{8,}$/i,qu=/^[0-9a-z]+$/,Vu=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ku=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Wu=/^[a-z0-9_-]{21}$/i,Hu=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Gu=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ju=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Yu="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ps;const Xu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Qu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ef=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,tf=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rf=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nf=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ia="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sf=new RegExp(`^${Ia}$`);function ka(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function of(t){return new RegExp(`^${ka(t)}$`)}function af(t){let e=`${Ia}T${ka(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function cf(t,e){return!!((e==="v4"||!e)&&Xu.test(t)||(e==="v6"||!e)&&ef.test(t))}function uf(t,e){if(!Hu.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function ff(t,e){return!!((e==="v4"||!e)&&Qu.test(t)||(e==="v6"||!e)&&tf.test(t))}class Ar extends Ee{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ee.string){const i=this._getOrReturnCtx(e);return K(i,{code:$.invalid_type,expected:ee.string,received:i.parsedType}),de}const n=new zt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),K(s,{code:$.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),K(s,{code:$.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,c=e.data.length<i.value;(a||c)&&(s=this._getOrReturnCtx(e,s),a?K(s,{code:$.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&K(s,{code:$.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Ju.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"email",code:$.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")ps||(ps=new RegExp(Yu,"u")),ps.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"emoji",code:$.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Ku.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"uuid",code:$.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Wu.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"nanoid",code:$.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Zu.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"cuid",code:$.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")qu.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"cuid2",code:$.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Vu.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"ulid",code:$.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),K(s,{validation:"url",code:$.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"regex",code:$.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),K(s,{code:$.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),K(s,{code:$.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),K(s,{code:$.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?af(i).test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{code:$.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?sf.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{code:$.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?of(i).test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{code:$.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Gu.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"duration",code:$.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?cf(e.data,i.version)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"ip",code:$.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?uf(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"jwt",code:$.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?ff(e.data,i.version)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"cidr",code:$.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?rf.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"base64",code:$.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?nf.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"base64url",code:$.invalid_string,message:i.message}),n.dirty()):Se.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:$.invalid_string,...re.errToObj(n)})}_addCheck(e){return new Ar({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...re.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...re.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...re.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...re.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...re.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...re.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...re.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...re.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...re.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...re.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...re.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...re.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...re.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...re.errToObj(r)})}nonempty(e){return this.min(1,re.errToObj(e))}trim(){return new Ar({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ar({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ar({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ar.create=t=>new Ar({checks:[],typeName:pe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...xe(t)});function lf(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=Number.parseInt(t.toFixed(s).replace(".","")),a=Number.parseInt(e.toFixed(s).replace(".",""));return i%a/10**s}class hn extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ee.number){const i=this._getOrReturnCtx(e);return K(i,{code:$.invalid_type,expected:ee.number,received:i.parsedType}),de}let n;const s=new zt;for(const i of this._def.checks)i.kind==="int"?Se.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),K(n,{code:$.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),K(n,{code:$.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),K(n,{code:$.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?lf(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),K(n,{code:$.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),K(n,{code:$.not_finite,message:i.message}),s.dirty()):Se.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,re.toString(r))}gt(e,r){return this.setLimit("min",e,!1,re.toString(r))}lte(e,r){return this.setLimit("max",e,!0,re.toString(r))}lt(e,r){return this.setLimit("max",e,!1,re.toString(r))}setLimit(e,r,n,s){return new hn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:re.toString(s)}]})}_addCheck(e){return new hn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:re.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:re.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:re.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Se.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}hn.create=t=>new hn({checks:[],typeName:pe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class In extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ee.bigint)return this._getInvalidInput(e);let n;const s=new zt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),K(n,{code:$.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),K(n,{code:$.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),K(n,{code:$.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Se.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return K(r,{code:$.invalid_type,expected:ee.bigint,received:r.parsedType}),de}gte(e,r){return this.setLimit("min",e,!0,re.toString(r))}gt(e,r){return this.setLimit("min",e,!1,re.toString(r))}lte(e,r){return this.setLimit("max",e,!0,re.toString(r))}lt(e,r){return this.setLimit("max",e,!1,re.toString(r))}setLimit(e,r,n,s){return new In({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:re.toString(s)}]})}_addCheck(e){return new In({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:re.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:re.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}In.create=t=>new In({checks:[],typeName:pe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...xe(t)});class Os extends Ee{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ee.boolean){const n=this._getOrReturnCtx(e);return K(n,{code:$.invalid_type,expected:ee.boolean,received:n.parsedType}),de}return Wt(e.data)}}Os.create=t=>new Os({typeName:pe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class ui extends Ee{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ee.date){const i=this._getOrReturnCtx(e);return K(i,{code:$.invalid_type,expected:ee.date,received:i.parsedType}),de}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return K(i,{code:$.invalid_date}),de}const n=new zt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),K(s,{code:$.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),K(s,{code:$.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Se.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ui({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:re.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:re.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}ui.create=t=>new ui({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:pe.ZodDate,...xe(t)});class qo extends Ee{_parse(e){if(this._getType(e)!==ee.symbol){const n=this._getOrReturnCtx(e);return K(n,{code:$.invalid_type,expected:ee.symbol,received:n.parsedType}),de}return Wt(e.data)}}qo.create=t=>new qo({typeName:pe.ZodSymbol,...xe(t)});class Us extends Ee{_parse(e){if(this._getType(e)!==ee.undefined){const n=this._getOrReturnCtx(e);return K(n,{code:$.invalid_type,expected:ee.undefined,received:n.parsedType}),de}return Wt(e.data)}}Us.create=t=>new Us({typeName:pe.ZodUndefined,...xe(t)});class Cs extends Ee{_parse(e){if(this._getType(e)!==ee.null){const n=this._getOrReturnCtx(e);return K(n,{code:$.invalid_type,expected:ee.null,received:n.parsedType}),de}return Wt(e.data)}}Cs.create=t=>new Cs({typeName:pe.ZodNull,...xe(t)});class Vo extends Ee{constructor(){super(...arguments),this._any=!0}_parse(e){return Wt(e.data)}}Vo.create=t=>new Vo({typeName:pe.ZodAny,...xe(t)});class Ko extends Ee{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wt(e.data)}}Ko.create=t=>new Ko({typeName:pe.ZodUnknown,...xe(t)});class Rr extends Ee{_parse(e){const r=this._getOrReturnCtx(e);return K(r,{code:$.invalid_type,expected:ee.never,received:r.parsedType}),de}}Rr.create=t=>new Rr({typeName:pe.ZodNever,...xe(t)});class Wo extends Ee{_parse(e){if(this._getType(e)!==ee.undefined){const n=this._getOrReturnCtx(e);return K(n,{code:$.invalid_type,expected:ee.void,received:n.parsedType}),de}return Wt(e.data)}}Wo.create=t=>new Wo({typeName:pe.ZodVoid,...xe(t)});class ir extends Ee{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==ee.array)return K(r,{code:$.invalid_type,expected:ee.array,received:r.parsedType}),de;if(s.exactLength!==null){const a=r.data.length>s.exactLength.value,c=r.data.length<s.exactLength.value;(a||c)&&(K(r,{code:a?$.too_big:$.too_small,minimum:c?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(K(r,{code:$.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(K(r,{code:$.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>s.type._parseAsync(new Mr(r,a,r.path,c)))).then(a=>zt.mergeArray(n,a));const i=[...r.data].map((a,c)=>s.type._parseSync(new Mr(r,a,r.path,c)));return zt.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new ir({...this._def,minLength:{value:e,message:re.toString(r)}})}max(e,r){return new ir({...this._def,maxLength:{value:e,message:re.toString(r)}})}length(e,r){return new ir({...this._def,exactLength:{value:e,message:re.toString(r)}})}nonempty(e){return this.min(1,e)}}ir.create=(t,e)=>new ir({type:t,minLength:null,maxLength:null,exactLength:null,typeName:pe.ZodArray,...xe(e)});function nn(t){if(t instanceof lt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=gr.create(nn(n))}return new lt({...t._def,shape:()=>e})}else return t instanceof ir?new ir({...t._def,type:nn(t.element)}):t instanceof gr?gr.create(nn(t.unwrap())):t instanceof Zr?Zr.create(nn(t.unwrap())):t instanceof jr?jr.create(t.items.map(e=>nn(e))):t}class lt extends Ee{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Se.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==ee.object){const v=this._getOrReturnCtx(e);return K(v,{code:$.invalid_type,expected:ee.object,received:v.parsedType}),de}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof Rr&&this._def.unknownKeys==="strip"))for(const v in s.data)a.includes(v)||c.push(v);const h=[];for(const v of a){const S=i[v],k=s.data[v];h.push({key:{status:"valid",value:v},value:S._parse(new Mr(s,k,s.path,v)),alwaysSet:v in s.data})}if(this._def.catchall instanceof Rr){const v=this._def.unknownKeys;if(v==="passthrough")for(const S of c)h.push({key:{status:"valid",value:S},value:{status:"valid",value:s.data[S]}});else if(v==="strict")c.length>0&&(K(s,{code:$.unrecognized_keys,keys:c}),n.dirty());else if(v!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const v=this._def.catchall;for(const S of c){const k=s.data[S];h.push({key:{status:"valid",value:S},value:v._parse(new Mr(s,k,s.path,S)),alwaysSet:S in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const v=[];for(const S of h){const k=await S.key,A=await S.value;v.push({key:k,value:A,alwaysSet:S.alwaysSet})}return v}).then(v=>zt.mergeObjectSync(n,v)):zt.mergeObjectSync(n,h)}get shape(){return this._def.shape()}strict(e){return re.errToObj,new lt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a;const s=((a=(i=this._def).errorMap)==null?void 0:a.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:re.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new lt({...this._def,unknownKeys:"strip"})}passthrough(){return new lt({...this._def,unknownKeys:"passthrough"})}extend(e){return new lt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new lt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:pe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new lt({...this._def,catchall:e})}pick(e){const r={};for(const n of Se.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new lt({...this._def,shape:()=>r})}omit(e){const r={};for(const n of Se.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new lt({...this._def,shape:()=>r})}deepPartial(){return nn(this)}partial(e){const r={};for(const n of Se.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new lt({...this._def,shape:()=>r})}required(e){const r={};for(const n of Se.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof gr;)i=i._def.innerType;r[n]=i}return new lt({...this._def,shape:()=>r})}keyof(){return Ma(Se.objectKeys(this.shape))}}lt.create=(t,e)=>new lt({shape:()=>t,unknownKeys:"strip",catchall:Rr.create(),typeName:pe.ZodObject,...xe(e)});lt.strictCreate=(t,e)=>new lt({shape:()=>t,unknownKeys:"strict",catchall:Rr.create(),typeName:pe.ZodObject,...xe(e)});lt.lazycreate=(t,e)=>new lt({shape:t,unknownKeys:"strip",catchall:Rr.create(),typeName:pe.ZodObject,...xe(e)});class fi extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;const a=i.map(c=>new yr(c.ctx.common.issues));return K(r,{code:$.invalid_union,unionErrors:a}),de}if(r.common.async)return Promise.all(n.map(async i=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const h of n){const v={...r,common:{...r.common,issues:[]},parent:null},S=h._parseSync({data:r.data,path:r.path,parent:v});if(S.status==="valid")return S;S.status==="dirty"&&!i&&(i={result:S,ctx:v}),v.common.issues.length&&a.push(v.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const c=a.map(h=>new yr(h));return K(r,{code:$.invalid_union,unionErrors:c}),de}}get options(){return this._def.options}}fi.create=(t,e)=>new fi({options:t,typeName:pe.ZodUnion,...xe(e)});const lr=t=>t instanceof Ns?lr(t.schema):t instanceof $r?lr(t.innerType()):t instanceof di?[t.value]:t instanceof zr?t.options:t instanceof Fs?Se.objectValues(t.enum):t instanceof pi?lr(t._def.innerType):t instanceof Us?[void 0]:t instanceof Cs?[null]:t instanceof gr?[void 0,...lr(t.unwrap())]:t instanceof Zr?[null,...lr(t.unwrap())]:t instanceof Ra||t instanceof gi?lr(t.unwrap()):t instanceof mi?lr(t._def.innerType):[];class Js extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ee.object)return K(r,{code:$.invalid_type,expected:ee.object,received:r.parsedType}),de;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(K(r,{code:$.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),de)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const a=lr(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of a){if(s.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);s.set(c,i)}}return new Js({typeName:pe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...xe(n)})}}function Ls(t,e){const r=Sr(t),n=Sr(e);if(t===e)return{valid:!0,data:t};if(r===ee.object&&n===ee.object){const s=Se.objectKeys(e),i=Se.objectKeys(t).filter(c=>s.indexOf(c)!==-1),a={...t,...e};for(const c of i){const h=Ls(t[c],e[c]);if(!h.valid)return{valid:!1};a[c]=h.data}return{valid:!0,data:a}}else if(r===ee.array&&n===ee.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],c=e[i],h=Ls(a,c);if(!h.valid)return{valid:!1};s.push(h.data)}return{valid:!0,data:s}}else return r===ee.date&&n===ee.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class li extends Ee{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(zo(i)||zo(a))return de;const c=Ls(i.value,a.value);return c.valid?(($o(i)||$o(a))&&r.dirty(),{status:r.value,value:c.data}):(K(n,{code:$.invalid_intersection_types}),de)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}li.create=(t,e,r)=>new li({left:t,right:e,typeName:pe.ZodIntersection,...xe(r)});class jr extends Ee{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.array)return K(n,{code:$.invalid_type,expected:ee.array,received:n.parsedType}),de;if(n.data.length<this._def.items.length)return K(n,{code:$.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),de;!this._def.rest&&n.data.length>this._def.items.length&&(K(n,{code:$.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((a,c)=>{const h=this._def.items[c]||this._def.rest;return h?h._parse(new Mr(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>zt.mergeArray(r,a)):zt.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new jr({...this._def,rest:e})}}jr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new jr({items:t,typeName:pe.ZodTuple,rest:null,...xe(e)})};class Ho extends Ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.map)return K(n,{code:$.invalid_type,expected:ee.map,received:n.parsedType}),de;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([c,h],v)=>({key:s._parse(new Mr(n,c,n.path,[v,"key"])),value:i._parse(new Mr(n,h,n.path,[v,"value"]))}));if(n.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const h of a){const v=await h.key,S=await h.value;if(v.status==="aborted"||S.status==="aborted")return de;(v.status==="dirty"||S.status==="dirty")&&r.dirty(),c.set(v.value,S.value)}return{status:r.value,value:c}})}else{const c=new Map;for(const h of a){const v=h.key,S=h.value;if(v.status==="aborted"||S.status==="aborted")return de;(v.status==="dirty"||S.status==="dirty")&&r.dirty(),c.set(v.value,S.value)}return{status:r.value,value:c}}}}Ho.create=(t,e,r)=>new Ho({valueType:e,keyType:t,typeName:pe.ZodMap,...xe(r)});class kn extends Ee{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.set)return K(n,{code:$.invalid_type,expected:ee.set,received:n.parsedType}),de;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(K(n,{code:$.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(K(n,{code:$.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function a(h){const v=new Set;for(const S of h){if(S.status==="aborted")return de;S.status==="dirty"&&r.dirty(),v.add(S.value)}return{status:r.value,value:v}}const c=[...n.data.values()].map((h,v)=>i._parse(new Mr(n,h,n.path,v)));return n.common.async?Promise.all(c).then(h=>a(h)):a(c)}min(e,r){return new kn({...this._def,minSize:{value:e,message:re.toString(r)}})}max(e,r){return new kn({...this._def,maxSize:{value:e,message:re.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}kn.create=(t,e)=>new kn({valueType:t,minSize:null,maxSize:null,typeName:pe.ZodSet,...xe(e)});class Ns extends Ee{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Ns.create=(t,e)=>new Ns({getter:t,typeName:pe.ZodLazy,...xe(e)});class di extends Ee{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return K(r,{received:r.data,code:$.invalid_literal,expected:this._def.value}),de}return{status:"valid",value:e.data}}get value(){return this._def.value}}di.create=(t,e)=>new di({value:t,typeName:pe.ZodLiteral,...xe(e)});function Ma(t,e){return new zr({values:t,typeName:pe.ZodEnum,...xe(e)})}class zr extends Ee{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return K(r,{expected:Se.joinValues(n),received:r.parsedType,code:$.invalid_type}),de}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return K(r,{received:r.data,code:$.invalid_enum_value,options:n}),de}return Wt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return zr.create(e,{...this._def,...r})}exclude(e,r=this._def){return zr.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}zr.create=Ma;class Fs extends Ee{_parse(e){const r=Se.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ee.string&&n.parsedType!==ee.number){const s=Se.objectValues(r);return K(n,{expected:Se.joinValues(s),received:n.parsedType,code:$.invalid_type}),de}if(this._cache||(this._cache=new Set(Se.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Se.objectValues(r);return K(n,{received:n.data,code:$.invalid_enum_value,options:s}),de}return Wt(e.data)}get enum(){return this._def.values}}Fs.create=(t,e)=>new Fs({values:t,typeName:pe.ZodNativeEnum,...xe(e)});class hi extends Ee{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ee.promise&&r.common.async===!1)return K(r,{code:$.invalid_type,expected:ee.promise,received:r.parsedType}),de;const n=r.parsedType===ee.promise?r.data:Promise.resolve(r.data);return Wt(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}hi.create=(t,e)=>new hi({type:t,typeName:pe.ZodPromise,...xe(e)});class $r extends Ee{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{K(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return de;const h=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return h.status==="aborted"?de:h.status==="dirty"||r.value==="dirty"?Bn(h.value):h});{if(r.value==="aborted")return de;const c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?de:c.status==="dirty"||r.value==="dirty"?Bn(c.value):c}}if(s.type==="refinement"){const a=c=>{const h=s.refinement(c,i);if(n.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?de:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?de:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!dn(a))return de;const c=s.transform(a.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>dn(a)?Promise.resolve(s.transform(a.value,i)).then(c=>({status:r.value,value:c})):de);Se.assertNever(s)}}$r.create=(t,e,r)=>new $r({schema:t,typeName:pe.ZodEffects,effect:e,...xe(r)});$r.createWithPreprocess=(t,e,r)=>new $r({schema:e,effect:{type:"preprocess",transform:t},typeName:pe.ZodEffects,...xe(r)});class gr extends Ee{_parse(e){return this._getType(e)===ee.undefined?Wt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gr.create=(t,e)=>new gr({innerType:t,typeName:pe.ZodOptional,...xe(e)});class Zr extends Ee{_parse(e){return this._getType(e)===ee.null?Wt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zr.create=(t,e)=>new Zr({innerType:t,typeName:pe.ZodNullable,...xe(e)});class pi extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===ee.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}pi.create=(t,e)=>new pi({innerType:t,typeName:pe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xe(e)});class mi extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ci(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new yr(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new yr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}mi.create=(t,e)=>new mi({innerType:t,typeName:pe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xe(e)});class Go extends Ee{_parse(e){if(this._getType(e)!==ee.nan){const n=this._getOrReturnCtx(e);return K(n,{code:$.invalid_type,expected:ee.nan,received:n.parsedType}),de}return{status:"valid",value:e.data}}}Go.create=t=>new Go({typeName:pe.ZodNaN,...xe(t)});class Ra extends Ee{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ys extends Ee{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?de:i.status==="dirty"?(r.dirty(),Bn(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?de:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new Ys({in:e,out:r,typeName:pe.ZodPipeline})}}class gi extends Ee{_parse(e){const r=this._def.innerType._parse(e),n=s=>(dn(s)&&(s.value=Object.freeze(s.value)),s);return ci(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}gi.create=(t,e)=>new gi({innerType:t,typeName:pe.ZodReadonly,...xe(e)});var pe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(pe||(pe={}));const Ke=Ar.create,Ta=hn.create,df=Os.create;Rr.create;const Fr=ir.create,vt=lt.create,yi=fi.create,Oa=Js.create;li.create;jr.create;const Bt=di.create,Xs=zr.create;hi.create;gr.create;Zr.create;const hf=/[@#$%^&*+=/\\|~«»]/,pf=/(!{2,}|\?{2,}|-{2,})/,mf=/[\u{1F300}-\u{1F9FF}]|[\u{2702}-\u{27B0}]|[\u{2600}-\u{26FF}]|[\u{2B00}-\u{2BFF}]/u,xn=({max:t,noSpaces:e}={})=>(e?Ke().max(t??Number.POSITIVE_INFINITY).regex(/^\S*$/,"Spaces are not allowed"):Ke().max(t??Number.POSITIVE_INFINITY)).refine(n=>!mf.test(n),{message:"Emojis and symbols are not allowed"}).refine(n=>!hf.test(n),{message:"Special characters (@, #, $, %, ^, &, *, +, =, /, \\, |, ~, «, ») are not allowed"}).refine(n=>!pf.test(n),{message:"Repeated punctuations (!!, ??, --) are not allowed"}),It=Ke().url().startsWith("https://",{message:"Must be an https url"}).max(1024).refine(t=>!t.includes(" "),{message:"URL must not contain spaces"}).refine(t=>{try{const e=new URL(t).hostname;return!(e==="localhost"||e.endsWith(".localhost")||/^(\d{1,3}\.){3}\d{1,3}$/.test(e)||e.startsWith("[")&&e.endsWith("]"))}catch{return!1}},{message:"URL must not use IP addresses or localhost"}),Qs=Ke().max(32),Ua=Ke().max(32),gf=/^[-a-z0-9]{3,8}:[-_a-zA-Z0-9]{1,32}\/(?:[-a-z0-9]{3,8}:[-.%a-zA-Z0-9]{1,128}(?:\/[-.%a-zA-Z0-9]{1,78})?|native)$/,yf=Ke().regex(gf,{message:"Invalid CAIP-19 asset ID"}),eo=Ke().regex(/^#([0-9A-F]{3}|[0-9A-F]{6})$/i,{message:"Invalid hex color code. It should be in the format #RRGGBB or #RGB."}),wf=/^(?!.*\.\.)([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,vf=Ke().max(1024).regex(wf,{message:"Must be a valid domain name (e.g., example.com, sub.example.com)"}).refine(t=>!t.includes("://"),{message:"Domain must not include protocol (http://, https://, etc.)"}).refine(t=>!t.includes("/"),{message:"Domain must not include path separators"}).refine(t=>!t.includes("@"),{message:"Domain must not include @ symbol"}).refine(t=>!t.includes(":"),{message:"Domain must not include port numbers"}),bf=yi([Bt("1:1"),Bt("3:2")]),xf=vt({header:Ke(),payload:Ke(),signature:Ke()});vt({fid:Ta(),type:Bt("app_key"),key:Ke().startsWith("0x")});const _f=vt({type:Bt("launch_frame"),name:Qs,url:It.optional(),splashImageUrl:It.optional(),splashBackgroundColor:eo.optional()}),Ef=vt({type:Bt("launch_miniapp"),name:Qs,url:It.optional(),splashImageUrl:It.optional(),splashBackgroundColor:eo.optional()}),Sf=vt({type:Bt("view_token"),token:yf}),Af=Oa("type",[Ef,Sf,_f]),Bf=vt({title:Ua,action:Af});vt({version:yi([Ke(),Ta()]).transform(t=>String(t)).pipe(yi([Bt("next"),Bt("1")])),imageUrl:It,aspectRatio:bf.optional(),button:Bf});const Ca=vt({url:Ke(),token:Ke()});vt({notificationId:Ke().max(128),title:Ke().max(32),body:Ke().max(128),targetUrl:It,tokens:Ke().array().max(100)});vt({result:vt({successfulTokens:Fr(Ke()),invalidTokens:Fr(Ke()),rateLimitedTokens:Fr(Ke())})});const If=vt({event:Bt("miniapp_added"),notificationDetails:Ca.optional()}),kf=vt({event:Bt("miniapp_removed")}),Mf=vt({event:Bt("notifications_enabled"),notificationDetails:Ca.required()}),Rf=vt({event:Bt("notifications_disabled")});Oa("event",[If,kf,Mf,Rf]);const Tf=["wallet.getEthereumProvider","wallet.getSolanaProvider","actions.ready","actions.openUrl","actions.close","actions.setPrimaryButton","actions.addMiniApp","actions.signIn","actions.viewCast","actions.viewProfile","actions.composeCast","actions.viewToken","actions.sendToken","actions.swapToken","actions.openMiniApp","actions.requestCameraAndMicrophoneAccess","experimental.signManifest","haptics.impactOccurred","haptics.notificationOccurred","haptics.selectionChanged","back"],Of=["games","social","finance","utility","productivity","health-fitness","news-media","music","shopping","education","developer-tools","entertainment","art-creativity"],Uf=Xs(Of),Cf=yi([Bt("0.0.0"),Bt("0.0.1"),Bt("1"),Bt("next")]),Lf=xn({max:30}),Nf=xn({max:170}),Ff=Fr(It).max(3),Pf=Fr(xn({max:20,noSpaces:!0})).max(5),Df=xn({max:30}),jf=xn({max:30}),zf=xn({max:100}),$f=df(),Zf=["eip155:1","eip155:8453","eip155:42161","eip155:421614","eip155:84532","eip155:666666666","eip155:100","eip155:10","eip155:11155420","eip155:137","eip155:11155111","eip155:7777777","eip155:130","eip155:10143","eip155:42220","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"];function La(t){const e=new Set(t);return Array.from(e)}const qf=Fr(Xs(Zf)).transform(La),Vf=Fr(Xs(Tf)).transform(La),Jo=vt({version:Cf,name:Qs,iconUrl:It,homeUrl:It,imageUrl:It.optional(),buttonTitle:Ua.optional(),splashImageUrl:It.optional(),splashBackgroundColor:eo.optional(),webhookUrl:It.optional(),subtitle:Lf.optional(),description:Nf.optional(),screenshotUrls:Ff.optional(),primaryCategory:Uf.optional(),tags:Pf.optional(),heroImageUrl:It.optional(),tagline:Df.optional(),ogTitle:jf.optional(),ogDescription:zf.optional(),ogImageUrl:It.optional(),noindex:$f.optional(),requiredChains:qf.optional(),requiredCapabilities:Vf.optional(),castShareUrl:It.optional(),canonicalDomain:vf.optional()}).refine(t=>{if(t.castShareUrl===void 0)return!0;try{const e=new URL(t.homeUrl).hostname,r=new URL(t.castShareUrl).hostname;return e===r}catch{return!1}},{message:"castShareUrl must have the same domain as homeUrl",path:["castShareUrl"]});vt({accountAssociation:xf,miniapp:Jo.optional(),frame:Jo.optional()}).refine(t=>t.frame&&t.miniapp?JSON.stringify(t.frame)===JSON.stringify(t.miniapp):!0,{message:'If both "frame" and "miniapp" are provided, they must be identical',path:["frame","miniapp"]}).transform(t=>({...t,frame:t.frame??t.miniapp}));var ve={},Fi={};Fi.byteLength=Hf;Fi.toByteArray=Jf;Fi.fromByteArray=Qf;var rr=[],qt=[],Kf=typeof Uint8Array<"u"?Uint8Array:Array,ms="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xr=0,Wf=ms.length;Xr<Wf;++Xr)rr[Xr]=ms[Xr],qt[ms.charCodeAt(Xr)]=Xr;qt[45]=62;qt[95]=63;function Na(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Hf(t){var e=Na(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Gf(t,e,r){return(e+r)*3/4-r}function Jf(t){var e,r=Na(t),n=r[0],s=r[1],i=new Kf(Gf(t,n,s)),a=0,c=s>0?n-4:n,h;for(h=0;h<c;h+=4)e=qt[t.charCodeAt(h)]<<18|qt[t.charCodeAt(h+1)]<<12|qt[t.charCodeAt(h+2)]<<6|qt[t.charCodeAt(h+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=e&255;return s===2&&(e=qt[t.charCodeAt(h)]<<2|qt[t.charCodeAt(h+1)]>>4,i[a++]=e&255),s===1&&(e=qt[t.charCodeAt(h)]<<10|qt[t.charCodeAt(h+1)]<<4|qt[t.charCodeAt(h+2)]>>2,i[a++]=e>>8&255,i[a++]=e&255),i}function Yf(t){return rr[t>>18&63]+rr[t>>12&63]+rr[t>>6&63]+rr[t&63]}function Xf(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(Yf(n));return s.join("")}function Qf(t){for(var e,r=t.length,n=r%3,s=[],i=16383,a=0,c=r-n;a<c;a+=i)s.push(Xf(t,a,a+i>c?c:a+i));return n===1?(e=t[r-1],s.push(rr[e>>2]+rr[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(rr[e>>10]+rr[e>>4&63]+rr[e<<2&63]+"=")),s.join("")}var to={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */to.read=function(t,e,r,n,s){var i,a,c=s*8-n-1,h=(1<<c)-1,v=h>>1,S=-7,k=r?s-1:0,A=r?-1:1,I=t[e+k];for(k+=A,i=I&(1<<-S)-1,I>>=-S,S+=c;S>0;i=i*256+t[e+k],k+=A,S-=8);for(a=i&(1<<-S)-1,i>>=-S,S+=n;S>0;a=a*256+t[e+k],k+=A,S-=8);if(i===0)i=1-v;else{if(i===h)return a?NaN:(I?-1:1)*(1/0);a=a+Math.pow(2,n),i=i-v}return(I?-1:1)*a*Math.pow(2,i-n)};to.write=function(t,e,r,n,s,i){var a,c,h,v=i*8-s-1,S=(1<<v)-1,k=S>>1,A=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=n?0:i-1,R=n?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=S):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+k>=1?e+=A/h:e+=A*Math.pow(2,1-k),e*h>=2&&(a++,h/=2),a+k>=S?(c=0,a=S):a+k>=1?(c=(e*h-1)*Math.pow(2,s),a=a+k):(c=e*Math.pow(2,k-1)*Math.pow(2,s),a=0));s>=8;t[r+I]=c&255,I+=R,c/=256,s-=8);for(a=a<<s|c,v+=s;v>0;t[r+I]=a&255,I+=R,a/=256,v-=8);t[r+I-R]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Fi,r=to,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=z,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const m=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(m,u),m.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function a(m){if(m>s)throw new RangeError('The value "'+m+'" is invalid for option "size"');const u=new Uint8Array(m);return Object.setPrototypeOf(u,c.prototype),u}function c(m,u,l){if(typeof m=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return k(m)}return h(m,u,l)}c.poolSize=8192;function h(m,u,l){if(typeof m=="string")return A(m,u);if(ArrayBuffer.isView(m))return R(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(Nt(m,ArrayBuffer)||m&&Nt(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Nt(m,SharedArrayBuffer)||m&&Nt(m.buffer,SharedArrayBuffer)))return C(m,u,l);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const b=m.valueOf&&m.valueOf();if(b!=null&&b!==m)return c.from(b,u,l);const M=L(m);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return c.from(m[Symbol.toPrimitive]("string"),u,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}c.from=function(m,u,l){return h(m,u,l)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function v(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function S(m,u,l){return v(m),m<=0?a(m):u!==void 0?typeof l=="string"?a(m).fill(u,l):a(m).fill(u):a(m)}c.alloc=function(m,u,l){return S(m,u,l)};function k(m){return v(m),a(m<0?0:N(m)|0)}c.allocUnsafe=function(m){return k(m)},c.allocUnsafeSlow=function(m){return k(m)};function A(m,u){if((typeof u!="string"||u==="")&&(u="utf8"),!c.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const l=P(m,u)|0;let b=a(l);const M=b.write(m,u);return M!==l&&(b=b.slice(0,M)),b}function I(m){const u=m.length<0?0:N(m.length)|0,l=a(u);for(let b=0;b<u;b+=1)l[b]=m[b]&255;return l}function R(m){if(Nt(m,Uint8Array)){const u=new Uint8Array(m);return C(u.buffer,u.byteOffset,u.byteLength)}return I(m)}function C(m,u,l){if(u<0||m.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<u+(l||0))throw new RangeError('"length" is outside of buffer bounds');let b;return u===void 0&&l===void 0?b=new Uint8Array(m):l===void 0?b=new Uint8Array(m,u):b=new Uint8Array(m,u,l),Object.setPrototypeOf(b,c.prototype),b}function L(m){if(c.isBuffer(m)){const u=N(m.length)|0,l=a(u);return l.length===0||m.copy(l,0,0,u),l}if(m.length!==void 0)return typeof m.length!="number"||Ne(m.length)?a(0):I(m);if(m.type==="Buffer"&&Array.isArray(m.data))return I(m.data)}function N(m){if(m>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return m|0}function z(m){return+m!=m&&(m=0),c.alloc(+m)}c.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==c.prototype},c.compare=function(u,l){if(Nt(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),Nt(l,Uint8Array)&&(l=c.from(l,l.offset,l.byteLength)),!c.isBuffer(u)||!c.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let b=u.length,M=l.length;for(let T=0,F=Math.min(b,M);T<F;++T)if(u[T]!==l[T]){b=u[T],M=l[T];break}return b<M?-1:M<b?1:0},c.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return c.alloc(0);let b;if(l===void 0)for(l=0,b=0;b<u.length;++b)l+=u[b].length;const M=c.allocUnsafe(l);let T=0;for(b=0;b<u.length;++b){let F=u[b];if(Nt(F,Uint8Array))T+F.length>M.length?(c.isBuffer(F)||(F=c.from(F)),F.copy(M,T)):Uint8Array.prototype.set.call(M,F,T);else if(c.isBuffer(F))F.copy(M,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=F.length}return M};function P(m,u){if(c.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||Nt(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const l=m.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&l===0)return 0;let M=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return Le(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Fe(m).length;default:if(M)return b?-1:Le(m).length;u=(""+u).toLowerCase(),M=!0}}c.byteLength=P;function G(m,u,l){let b=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,u>>>=0,l<=u))return"";for(m||(m="utf8");;)switch(m){case"hex":return E(this,u,l);case"utf8":case"utf-8":return o(this,u,l);case"ascii":return w(this,u,l);case"latin1":case"binary":return x(this,u,l);case"base64":return g(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,u,l);default:if(b)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),b=!0}}c.prototype._isBuffer=!0;function Q(m,u,l){const b=m[u];m[u]=m[l],m[l]=b}c.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)Q(this,l,l+1);return this},c.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)Q(this,l,l+3),Q(this,l+1,l+2);return this},c.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)Q(this,l,l+7),Q(this,l+1,l+6),Q(this,l+2,l+5),Q(this,l+3,l+4);return this},c.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?o(this,0,u):G.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(u){if(!c.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:c.compare(this,u)===0},c.prototype.inspect=function(){let u="";const l=t.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(u,l,b,M,T){if(Nt(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),b===void 0&&(b=u?u.length:0),M===void 0&&(M=0),T===void 0&&(T=this.length),l<0||b>u.length||M<0||T>this.length)throw new RangeError("out of range index");if(M>=T&&l>=b)return 0;if(M>=T)return-1;if(l>=b)return 1;if(l>>>=0,b>>>=0,M>>>=0,T>>>=0,this===u)return 0;let F=T-M,we=b-l;const me=Math.min(F,we),he=this.slice(M,T),Ue=u.slice(l,b);for(let ue=0;ue<me;++ue)if(he[ue]!==Ue[ue]){F=he[ue],we=Ue[ue];break}return F<we?-1:we<F?1:0};function ie(m,u,l,b,M){if(m.length===0)return-1;if(typeof l=="string"?(b=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Ne(l)&&(l=M?0:m.length-1),l<0&&(l=m.length+l),l>=m.length){if(M)return-1;l=m.length-1}else if(l<0)if(M)l=0;else return-1;if(typeof u=="string"&&(u=c.from(u,b)),c.isBuffer(u))return u.length===0?-1:fe(m,u,l,b,M);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(m,u,l):Uint8Array.prototype.lastIndexOf.call(m,u,l):fe(m,[u],l,b,M);throw new TypeError("val must be string, number or Buffer")}function fe(m,u,l,b,M){let T=1,F=m.length,we=u.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(m.length<2||u.length<2)return-1;T=2,F/=2,we/=2,l/=2}function me(Ue,ue){return T===1?Ue[ue]:Ue.readUInt16BE(ue*T)}let he;if(M){let Ue=-1;for(he=l;he<F;he++)if(me(m,he)===me(u,Ue===-1?0:he-Ue)){if(Ue===-1&&(Ue=he),he-Ue+1===we)return Ue*T}else Ue!==-1&&(he-=he-Ue),Ue=-1}else for(l+we>F&&(l=F-we),he=l;he>=0;he--){let Ue=!0;for(let ue=0;ue<we;ue++)if(me(m,he+ue)!==me(u,ue)){Ue=!1;break}if(Ue)return he}return-1}c.prototype.includes=function(u,l,b){return this.indexOf(u,l,b)!==-1},c.prototype.indexOf=function(u,l,b){return ie(this,u,l,b,!0)},c.prototype.lastIndexOf=function(u,l,b){return ie(this,u,l,b,!1)};function ce(m,u,l,b){l=Number(l)||0;const M=m.length-l;b?(b=Number(b),b>M&&(b=M)):b=M;const T=u.length;b>T/2&&(b=T/2);let F;for(F=0;F<b;++F){const we=parseInt(u.substr(F*2,2),16);if(Ne(we))return F;m[l+F]=we}return F}function D(m,u,l,b){return Oe(Le(u,m.length-l),m,l,b)}function te(m,u,l,b){return Oe(ze(u),m,l,b)}function W(m,u,l,b){return Oe(Fe(u),m,l,b)}function X(m,u,l,b){return Oe(Yn(u,m.length-l),m,l,b)}c.prototype.write=function(u,l,b,M){if(l===void 0)M="utf8",b=this.length,l=0;else if(b===void 0&&typeof l=="string")M=l,b=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(b)?(b=b>>>0,M===void 0&&(M="utf8")):(M=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-l;if((b===void 0||b>T)&&(b=T),u.length>0&&(b<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let F=!1;for(;;)switch(M){case"hex":return ce(this,u,l,b);case"utf8":case"utf-8":return D(this,u,l,b);case"ascii":case"latin1":case"binary":return te(this,u,l,b);case"base64":return W(this,u,l,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,u,l,b);default:if(F)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),F=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function g(m,u,l){return u===0&&l===m.length?e.fromByteArray(m):e.fromByteArray(m.slice(u,l))}function o(m,u,l){l=Math.min(m.length,l);const b=[];let M=u;for(;M<l;){const T=m[M];let F=null,we=T>239?4:T>223?3:T>191?2:1;if(M+we<=l){let me,he,Ue,ue;switch(we){case 1:T<128&&(F=T);break;case 2:me=m[M+1],(me&192)===128&&(ue=(T&31)<<6|me&63,ue>127&&(F=ue));break;case 3:me=m[M+1],he=m[M+2],(me&192)===128&&(he&192)===128&&(ue=(T&15)<<12|(me&63)<<6|he&63,ue>2047&&(ue<55296||ue>57343)&&(F=ue));break;case 4:me=m[M+1],he=m[M+2],Ue=m[M+3],(me&192)===128&&(he&192)===128&&(Ue&192)===128&&(ue=(T&15)<<18|(me&63)<<12|(he&63)<<6|Ue&63,ue>65535&&ue<1114112&&(F=ue))}}F===null?(F=65533,we=1):F>65535&&(F-=65536,b.push(F>>>10&1023|55296),F=56320|F&1023),b.push(F),M+=we}return p(b)}const d=4096;function p(m){const u=m.length;if(u<=d)return String.fromCharCode.apply(String,m);let l="",b=0;for(;b<u;)l+=String.fromCharCode.apply(String,m.slice(b,b+=d));return l}function w(m,u,l){let b="";l=Math.min(m.length,l);for(let M=u;M<l;++M)b+=String.fromCharCode(m[M]&127);return b}function x(m,u,l){let b="";l=Math.min(m.length,l);for(let M=u;M<l;++M)b+=String.fromCharCode(m[M]);return b}function E(m,u,l){const b=m.length;(!u||u<0)&&(u=0),(!l||l<0||l>b)&&(l=b);let M="";for(let T=u;T<l;++T)M+=$e[m[T]];return M}function B(m,u,l){const b=m.slice(u,l);let M="";for(let T=0;T<b.length-1;T+=2)M+=String.fromCharCode(b[T]+b[T+1]*256);return M}c.prototype.slice=function(u,l){const b=this.length;u=~~u,l=l===void 0?b:~~l,u<0?(u+=b,u<0&&(u=0)):u>b&&(u=b),l<0?(l+=b,l<0&&(l=0)):l>b&&(l=b),l<u&&(l=u);const M=this.subarray(u,l);return Object.setPrototypeOf(M,c.prototype),M};function y(m,u,l){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+u>l)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(u,l,b){u=u>>>0,l=l>>>0,b||y(u,l,this.length);let M=this[u],T=1,F=0;for(;++F<l&&(T*=256);)M+=this[u+F]*T;return M},c.prototype.readUintBE=c.prototype.readUIntBE=function(u,l,b){u=u>>>0,l=l>>>0,b||y(u,l,this.length);let M=this[u+--l],T=1;for(;l>0&&(T*=256);)M+=this[u+--l]*T;return M},c.prototype.readUint8=c.prototype.readUInt8=function(u,l){return u=u>>>0,l||y(u,1,this.length),this[u]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(u,l){return u=u>>>0,l||y(u,2,this.length),this[u]|this[u+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(u,l){return u=u>>>0,l||y(u,2,this.length),this[u]<<8|this[u+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(u,l){return u=u>>>0,l||y(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(u,l){return u=u>>>0,l||y(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},c.prototype.readBigUInt64LE=Ht(function(u){u=u>>>0,Zt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&Re(u,this.length-8);const M=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,T=this[++u]+this[++u]*2**8+this[++u]*2**16+b*2**24;return BigInt(M)+(BigInt(T)<<BigInt(32))}),c.prototype.readBigUInt64BE=Ht(function(u){u=u>>>0,Zt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&Re(u,this.length-8);const M=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],T=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b;return(BigInt(M)<<BigInt(32))+BigInt(T)}),c.prototype.readIntLE=function(u,l,b){u=u>>>0,l=l>>>0,b||y(u,l,this.length);let M=this[u],T=1,F=0;for(;++F<l&&(T*=256);)M+=this[u+F]*T;return T*=128,M>=T&&(M-=Math.pow(2,8*l)),M},c.prototype.readIntBE=function(u,l,b){u=u>>>0,l=l>>>0,b||y(u,l,this.length);let M=l,T=1,F=this[u+--M];for(;M>0&&(T*=256);)F+=this[u+--M]*T;return T*=128,F>=T&&(F-=Math.pow(2,8*l)),F},c.prototype.readInt8=function(u,l){return u=u>>>0,l||y(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},c.prototype.readInt16LE=function(u,l){u=u>>>0,l||y(u,2,this.length);const b=this[u]|this[u+1]<<8;return b&32768?b|4294901760:b},c.prototype.readInt16BE=function(u,l){u=u>>>0,l||y(u,2,this.length);const b=this[u+1]|this[u]<<8;return b&32768?b|4294901760:b},c.prototype.readInt32LE=function(u,l){return u=u>>>0,l||y(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},c.prototype.readInt32BE=function(u,l){return u=u>>>0,l||y(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},c.prototype.readBigInt64LE=Ht(function(u){u=u>>>0,Zt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&Re(u,this.length-8);const M=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(b<<24);return(BigInt(M)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),c.prototype.readBigInt64BE=Ht(function(u){u=u>>>0,Zt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&Re(u,this.length-8);const M=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(M)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b)}),c.prototype.readFloatLE=function(u,l){return u=u>>>0,l||y(u,4,this.length),r.read(this,u,!0,23,4)},c.prototype.readFloatBE=function(u,l){return u=u>>>0,l||y(u,4,this.length),r.read(this,u,!1,23,4)},c.prototype.readDoubleLE=function(u,l){return u=u>>>0,l||y(u,8,this.length),r.read(this,u,!0,52,8)},c.prototype.readDoubleBE=function(u,l){return u=u>>>0,l||y(u,8,this.length),r.read(this,u,!1,52,8)};function f(m,u,l,b,M,T){if(!c.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>M||u<T)throw new RangeError('"value" argument is out of bounds');if(l+b>m.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(u,l,b,M){if(u=+u,l=l>>>0,b=b>>>0,!M){const we=Math.pow(2,8*b)-1;f(this,u,l,b,we,0)}let T=1,F=0;for(this[l]=u&255;++F<b&&(T*=256);)this[l+F]=u/T&255;return l+b},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(u,l,b,M){if(u=+u,l=l>>>0,b=b>>>0,!M){const we=Math.pow(2,8*b)-1;f(this,u,l,b,we,0)}let T=b-1,F=1;for(this[l+T]=u&255;--T>=0&&(F*=256);)this[l+T]=u/F&255;return l+b},c.prototype.writeUint8=c.prototype.writeUInt8=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,1,255,0),this[l]=u&255,l+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4};function _(m,u,l,b,M){Me(u,b,M,m,l,7);let T=Number(u&BigInt(4294967295));m[l++]=T,T=T>>8,m[l++]=T,T=T>>8,m[l++]=T,T=T>>8,m[l++]=T;let F=Number(u>>BigInt(32)&BigInt(4294967295));return m[l++]=F,F=F>>8,m[l++]=F,F=F>>8,m[l++]=F,F=F>>8,m[l++]=F,l}function V(m,u,l,b,M){Me(u,b,M,m,l,7);let T=Number(u&BigInt(4294967295));m[l+7]=T,T=T>>8,m[l+6]=T,T=T>>8,m[l+5]=T,T=T>>8,m[l+4]=T;let F=Number(u>>BigInt(32)&BigInt(4294967295));return m[l+3]=F,F=F>>8,m[l+2]=F,F=F>>8,m[l+1]=F,F=F>>8,m[l]=F,l+8}c.prototype.writeBigUInt64LE=Ht(function(u,l=0){return _(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Ht(function(u,l=0){return V(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(u,l,b,M){if(u=+u,l=l>>>0,!M){const me=Math.pow(2,8*b-1);f(this,u,l,b,me-1,-me)}let T=0,F=1,we=0;for(this[l]=u&255;++T<b&&(F*=256);)u<0&&we===0&&this[l+T-1]!==0&&(we=1),this[l+T]=(u/F>>0)-we&255;return l+b},c.prototype.writeIntBE=function(u,l,b,M){if(u=+u,l=l>>>0,!M){const me=Math.pow(2,8*b-1);f(this,u,l,b,me-1,-me)}let T=b-1,F=1,we=0;for(this[l+T]=u&255;--T>=0&&(F*=256);)u<0&&we===0&&this[l+T+1]!==0&&(we=1),this[l+T]=(u/F>>0)-we&255;return l+b},c.prototype.writeInt8=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},c.prototype.writeInt16LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeInt16BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeInt32LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},c.prototype.writeInt32BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},c.prototype.writeBigInt64LE=Ht(function(u,l=0){return _(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Ht(function(u,l=0){return V(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Z(m,u,l,b,M,T){if(l+b>m.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function H(m,u,l,b,M){return u=+u,l=l>>>0,M||Z(m,u,l,4),r.write(m,u,l,b,23,4),l+4}c.prototype.writeFloatLE=function(u,l,b){return H(this,u,l,!0,b)},c.prototype.writeFloatBE=function(u,l,b){return H(this,u,l,!1,b)};function be(m,u,l,b,M){return u=+u,l=l>>>0,M||Z(m,u,l,8),r.write(m,u,l,b,52,8),l+8}c.prototype.writeDoubleLE=function(u,l,b){return be(this,u,l,!0,b)},c.prototype.writeDoubleBE=function(u,l,b){return be(this,u,l,!1,b)},c.prototype.copy=function(u,l,b,M){if(!c.isBuffer(u))throw new TypeError("argument should be a Buffer");if(b||(b=0),!M&&M!==0&&(M=this.length),l>=u.length&&(l=u.length),l||(l=0),M>0&&M<b&&(M=b),M===b||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),u.length-l<M-b&&(M=u.length-l+b);const T=M-b;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,b,M):Uint8Array.prototype.set.call(u,this.subarray(b,M),l),T},c.prototype.fill=function(u,l,b,M){if(typeof u=="string"){if(typeof l=="string"?(M=l,l=0,b=this.length):typeof b=="string"&&(M=b,b=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!c.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(u.length===1){const F=u.charCodeAt(0);(M==="utf8"&&F<128||M==="latin1")&&(u=F)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<b)throw new RangeError("Out of range index");if(b<=l)return this;l=l>>>0,b=b===void 0?this.length:b>>>0,u||(u=0);let T;if(typeof u=="number")for(T=l;T<b;++T)this[T]=u;else{const F=c.isBuffer(u)?u:c.from(u,M),we=F.length;if(we===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(T=0;T<b-l;++T)this[T+l]=F[T%we]}return this};const le={};function ae(m,u,l){le[m]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(m,u){return`The "${m}" argument must be of type number. Received type ${typeof u}`},TypeError),ae("ERR_OUT_OF_RANGE",function(m,u,l){let b=`The value of "${m}" is out of range.`,M=l;return Number.isInteger(l)&&Math.abs(l)>2**32?M=De(String(l)):typeof l=="bigint"&&(M=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(M=De(M)),M+="n"),b+=` It must be ${u}. Received ${M}`,b},RangeError);function De(m){let u="",l=m.length;const b=m[0]==="-"?1:0;for(;l>=b+4;l-=3)u=`_${m.slice(l-3,l)}${u}`;return`${m.slice(0,l)}${u}`}function ke(m,u,l){Zt(u,"offset"),(m[u]===void 0||m[u+l]===void 0)&&Re(u,m.length-(l+1))}function Me(m,u,l,b,M,T){if(m>l||m<u){const F=typeof u=="bigint"?"n":"";let we;throw u===0||u===BigInt(0)?we=`>= 0${F} and < 2${F} ** ${(T+1)*8}${F}`:we=`>= -(2${F} ** ${(T+1)*8-1}${F}) and < 2 ** ${(T+1)*8-1}${F}`,new le.ERR_OUT_OF_RANGE("value",we,m)}ke(b,M,T)}function Zt(m,u){if(typeof m!="number")throw new le.ERR_INVALID_ARG_TYPE(u,"number",m)}function Re(m,u,l){throw Math.floor(m)!==m?(Zt(m,l),new le.ERR_OUT_OF_RANGE("offset","an integer",m)):u<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,m)}const je=/[^+/0-9A-Za-z-_]/g;function Jn(m){if(m=m.split("=")[0],m=m.trim().replace(je,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function Le(m,u){u=u||1/0;let l;const b=m.length;let M=null;const T=[];for(let F=0;F<b;++F){if(l=m.charCodeAt(F),l>55295&&l<57344){if(!M){if(l>56319){(u-=3)>-1&&T.push(239,191,189);continue}else if(F+1===b){(u-=3)>-1&&T.push(239,191,189);continue}M=l;continue}if(l<56320){(u-=3)>-1&&T.push(239,191,189),M=l;continue}l=(M-55296<<10|l-56320)+65536}else M&&(u-=3)>-1&&T.push(239,191,189);if(M=null,l<128){if((u-=1)<0)break;T.push(l)}else if(l<2048){if((u-=2)<0)break;T.push(l>>6|192,l&63|128)}else if(l<65536){if((u-=3)<0)break;T.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((u-=4)<0)break;T.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return T}function ze(m){const u=[];for(let l=0;l<m.length;++l)u.push(m.charCodeAt(l)&255);return u}function Yn(m,u){let l,b,M;const T=[];for(let F=0;F<m.length&&!((u-=2)<0);++F)l=m.charCodeAt(F),b=l>>8,M=l%256,T.push(M),T.push(b);return T}function Fe(m){return e.toByteArray(Jn(m))}function Oe(m,u,l,b){let M;for(M=0;M<b&&!(M+l>=u.length||M>=m.length);++M)u[M+l]=m[M];return M}function Nt(m,u){return m instanceof u||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===u.name}function Ne(m){return m!==m}const $e=function(){const m="0123456789abcdef",u=new Array(256);for(let l=0;l<16;++l){const b=l*16;for(let M=0;M<16;++M)u[b+M]=m[l]+m[M]}return u}();function Ht(m){return typeof BigInt>"u"?Ze:m}function Ze(){throw new Error("BigInt not supported")}})(ve);const Qr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ps(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Vr(t,...e){if(!Zn(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Fa(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ps(t.outputLen),Ps(t.blockLen)}function wi(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function el(t,e){Vr(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function pn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function gs(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function tr(t,e){return t<<32-e|t>>>e}const Pa=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",tl=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pr(t){if(Vr(t),Pa)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=tl[t[r]];return e}const ur={_0:48,_9:57,A:65,F:70,a:97,f:102};function Yo(t){if(t>=ur._0&&t<=ur._9)return t-ur._0;if(t>=ur.A&&t<=ur.F)return t-(ur.A-10);if(t>=ur.a&&t<=ur.f)return t-(ur.a-10)}function vi(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Pa)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const a=Yo(t.charCodeAt(i)),c=Yo(t.charCodeAt(i+1));if(a===void 0||c===void 0){const h=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+i)}n[s]=a*16+c}return n}function rl(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ro(t){return typeof t=="string"&&(t=rl(t)),Vr(t),t}function nr(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];Vr(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}class Da{}function ja(t){const e=n=>t().update(ro(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function no(t=32){if(Qr&&typeof Qr.getRandomValues=="function")return Qr.getRandomValues(new Uint8Array(t));if(Qr&&typeof Qr.randomBytes=="function")return Uint8Array.from(Qr.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function nl(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),c=Number(r&i),h=n?4:0,v=n?0:4;t.setUint32(e+h,a,n),t.setUint32(e+v,c,n)}function il(t,e,r){return t&e^~t&r}function sl(t,e,r){return t&e^t&r^e&r}class za extends Da{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=gs(this.buffer)}update(e){wi(this),e=ro(e),Vr(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let a=0;a<i;){const c=Math.min(s-this.pos,i-a);if(c===s){const h=gs(e);for(;s<=i-a;a+=s)this.process(h,a);continue}n.set(e.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wi(this),el(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;r[a++]=128,pn(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(n,0),a=0);for(let k=a;k<s;k++)r[k]=0;nl(n,s-8,BigInt(this.length*8),i),this.process(n,0);const c=gs(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const v=h/4,S=this.get();if(v>S.length)throw new Error("_sha2: outputLen bigger than state");for(let k=0;k<v;k++)c.setUint32(4*k,S[k],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:c}=this;return e.destroyed=a,e.finished=i,e.length=s,e.pos=c,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const wr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Xn=BigInt(2**32-1),Xo=BigInt(32);function ol(t,e=!1){return e?{h:Number(t&Xn),l:Number(t>>Xo&Xn)}:{h:Number(t>>Xo&Xn)|0,l:Number(t&Xn)|0}}function al(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:a,l:c}=ol(t[i],e);[n[i],s[i]]=[a,c]}return[n,s]}const Qo=(t,e,r)=>t>>>r,ea=(t,e,r)=>t<<32-r|e>>>r,en=(t,e,r)=>t>>>r|e<<32-r,tn=(t,e,r)=>t<<32-r|e>>>r,Qn=(t,e,r)=>t<<64-r|e>>>r-32,ei=(t,e,r)=>t>>>r-32|e<<64-r;function fr(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const cl=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),ul=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,fl=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),ll=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,dl=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),hl=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,pl=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vr=new Uint32Array(64);class ml extends za{constructor(e=32){super(64,e,8,!1),this.A=wr[0]|0,this.B=wr[1]|0,this.C=wr[2]|0,this.D=wr[3]|0,this.E=wr[4]|0,this.F=wr[5]|0,this.G=wr[6]|0,this.H=wr[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:a,G:c,H:h}=this;return[e,r,n,s,i,a,c,h]}set(e,r,n,s,i,a,c,h){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=c|0,this.H=h|0}process(e,r){for(let k=0;k<16;k++,r+=4)vr[k]=e.getUint32(r,!1);for(let k=16;k<64;k++){const A=vr[k-15],I=vr[k-2],R=tr(A,7)^tr(A,18)^A>>>3,C=tr(I,17)^tr(I,19)^I>>>10;vr[k]=C+vr[k-7]+R+vr[k-16]|0}let{A:n,B:s,C:i,D:a,E:c,F:h,G:v,H:S}=this;for(let k=0;k<64;k++){const A=tr(c,6)^tr(c,11)^tr(c,25),I=S+A+il(c,h,v)+pl[k]+vr[k]|0,C=(tr(n,2)^tr(n,13)^tr(n,22))+sl(n,s,i)|0;S=v,v=h,h=c,c=a+I|0,a=i,i=s,s=n,n=I+C|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,c=c+this.E|0,h=h+this.F|0,v=v+this.G|0,S=S+this.H|0,this.set(n,s,i,a,c,h,v,S)}roundClean(){pn(vr)}destroy(){this.set(0,0,0,0,0,0,0,0),pn(this.buffer)}}const $a=al(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),gl=$a[0],yl=$a[1],br=new Uint32Array(80),xr=new Uint32Array(80);class wl extends za{constructor(e=64){super(128,e,16,!1),this.Ah=bt[0]|0,this.Al=bt[1]|0,this.Bh=bt[2]|0,this.Bl=bt[3]|0,this.Ch=bt[4]|0,this.Cl=bt[5]|0,this.Dh=bt[6]|0,this.Dl=bt[7]|0,this.Eh=bt[8]|0,this.El=bt[9]|0,this.Fh=bt[10]|0,this.Fl=bt[11]|0,this.Gh=bt[12]|0,this.Gl=bt[13]|0,this.Hh=bt[14]|0,this.Hl=bt[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:a,Dh:c,Dl:h,Eh:v,El:S,Fh:k,Fl:A,Gh:I,Gl:R,Hh:C,Hl:L}=this;return[e,r,n,s,i,a,c,h,v,S,k,A,I,R,C,L]}set(e,r,n,s,i,a,c,h,v,S,k,A,I,R,C,L){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=c|0,this.Dl=h|0,this.Eh=v|0,this.El=S|0,this.Fh=k|0,this.Fl=A|0,this.Gh=I|0,this.Gl=R|0,this.Hh=C|0,this.Hl=L|0}process(e,r){for(let P=0;P<16;P++,r+=4)br[P]=e.getUint32(r),xr[P]=e.getUint32(r+=4);for(let P=16;P<80;P++){const G=br[P-15]|0,Q=xr[P-15]|0,ie=en(G,Q,1)^en(G,Q,8)^Qo(G,Q,7),fe=tn(G,Q,1)^tn(G,Q,8)^ea(G,Q,7),ce=br[P-2]|0,D=xr[P-2]|0,te=en(ce,D,19)^Qn(ce,D,61)^Qo(ce,D,6),W=tn(ce,D,19)^ei(ce,D,61)^ea(ce,D,6),X=fl(fe,W,xr[P-7],xr[P-16]),g=ll(X,ie,te,br[P-7],br[P-16]);br[P]=g|0,xr[P]=X|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:c,Cl:h,Dh:v,Dl:S,Eh:k,El:A,Fh:I,Fl:R,Gh:C,Gl:L,Hh:N,Hl:z}=this;for(let P=0;P<80;P++){const G=en(k,A,14)^en(k,A,18)^Qn(k,A,41),Q=tn(k,A,14)^tn(k,A,18)^ei(k,A,41),ie=k&I^~k&C,fe=A&R^~A&L,ce=dl(z,Q,fe,yl[P],xr[P]),D=hl(ce,N,G,ie,gl[P],br[P]),te=ce|0,W=en(n,s,28)^Qn(n,s,34)^Qn(n,s,39),X=tn(n,s,28)^ei(n,s,34)^ei(n,s,39),g=n&i^n&c^i&c,o=s&a^s&h^a&h;N=C|0,z=L|0,C=I|0,L=R|0,I=k|0,R=A|0,{h:k,l:A}=fr(v|0,S|0,D|0,te|0),v=c|0,S=h|0,c=i|0,h=a|0,i=n|0,a=s|0;const d=cl(te,X,o);n=ul(d,D,W,g),s=d|0}({h:n,l:s}=fr(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=fr(this.Bh|0,this.Bl|0,i|0,a|0),{h:c,l:h}=fr(this.Ch|0,this.Cl|0,c|0,h|0),{h:v,l:S}=fr(this.Dh|0,this.Dl|0,v|0,S|0),{h:k,l:A}=fr(this.Eh|0,this.El|0,k|0,A|0),{h:I,l:R}=fr(this.Fh|0,this.Fl|0,I|0,R|0),{h:C,l:L}=fr(this.Gh|0,this.Gl|0,C|0,L|0),{h:N,l:z}=fr(this.Hh|0,this.Hl|0,N|0,z|0),this.set(n,s,i,a,c,h,v,S,k,A,I,R,C,L,N,z)}roundClean(){pn(br,xr)}destroy(){pn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Za=ja(()=>new ml),vl=ja(()=>new wl);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const io=BigInt(0),Ds=BigInt(1);function qr(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function Jt(t,e,r=""){const n=Zn(t),s=t==null?void 0:t.length,i=e!==void 0;if(!n||i&&s!==e){const a=r&&`"${r}" `,c=i?` of length ${e}`:"",h=n?`length=${s}`:`type=${typeof t}`;throw new Error(a+"expected Uint8Array"+c+", got "+h)}return t}function ti(t){const e=t.toString(16);return e.length&1?"0"+e:e}function qa(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?io:BigInt("0x"+t)}function Pi(t){return qa(Pr(t))}function Mn(t){return Vr(t),qa(Pr(Uint8Array.from(t).reverse()))}function so(t,e){return vi(t.toString(16).padStart(e*2,"0"))}function Va(t,e){return so(t,e).reverse()}function Ve(t,e,r){let n;if(typeof e=="string")try{n=vi(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Zn(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function ta(t){return Uint8Array.from(t)}const ys=t=>typeof t=="bigint"&&io<=t;function bl(t,e,r){return ys(t)&&ys(e)&&ys(r)&&e<=t&&t<r}function js(t,e,r,n){if(!bl(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Ka(t){let e;for(e=0;t>io;t>>=Ds,e+=1);return e}const qn=t=>(Ds<<BigInt(t))-Ds;function xl(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=I=>new Uint8Array(I),s=I=>Uint8Array.of(I);let i=n(t),a=n(t),c=0;const h=()=>{i.fill(1),a.fill(0),c=0},v=(...I)=>r(a,i,...I),S=(I=n(0))=>{a=v(s(0),I),i=v(),I.length!==0&&(a=v(s(1),I),i=v())},k=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let I=0;const R=[];for(;I<e;){i=v();const C=i.slice();R.push(C),I+=i.length}return nr(...R)};return(I,R)=>{h(),S(I);let C;for(;!(C=R(k()));)S();return h(),C}}function Vn(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,a){const c=t[s];if(a&&c===void 0)return;const h=typeof c;if(h!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${h}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function bi(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ct=BigInt(0),wt=BigInt(1),Cr=BigInt(2),Wa=BigInt(3),Ha=BigInt(4),Ga=BigInt(5),_l=BigInt(7),Ja=BigInt(8),El=BigInt(9),Ya=BigInt(16);function dt(t,e){const r=t%e;return r>=Ct?r:e+r}function qe(t,e,r){let n=t;for(;e-- >Ct;)n*=n,n%=r;return n}function ra(t,e){if(t===Ct)throw new Error("invert: expected non-zero number");if(e<=Ct)throw new Error("invert: expected positive modulus, got "+e);let r=dt(t,e),n=e,s=Ct,i=wt;for(;r!==Ct;){const c=n/r,h=n%r,v=s-i*c;n=r,r=h,s=i,i=v}if(n!==wt)throw new Error("invert: does not exist");return dt(s,e)}function oo(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function Xa(t,e){const r=(t.ORDER+wt)/Ha,n=t.pow(e,r);return oo(t,n,e),n}function Sl(t,e){const r=(t.ORDER-Ga)/Ja,n=t.mul(e,Cr),s=t.pow(n,r),i=t.mul(e,s),a=t.mul(t.mul(i,Cr),s),c=t.mul(i,t.sub(a,t.ONE));return oo(t,c,e),c}function Al(t){const e=Kr(t),r=Qa(t),n=r(e,e.neg(e.ONE)),s=r(e,n),i=r(e,e.neg(n)),a=(t+_l)/Ya;return(c,h)=>{let v=c.pow(h,a),S=c.mul(v,n);const k=c.mul(v,s),A=c.mul(v,i),I=c.eql(c.sqr(S),h),R=c.eql(c.sqr(k),h);v=c.cmov(v,S,I),S=c.cmov(A,k,R);const C=c.eql(c.sqr(S),h),L=c.cmov(v,S,C);return oo(c,L,h),L}}function Qa(t){if(t<Wa)throw new Error("sqrt is not defined for small field");let e=t-wt,r=0;for(;e%Cr===Ct;)e/=Cr,r++;let n=Cr;const s=Kr(t);for(;na(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Xa;let i=s.pow(n,e);const a=(e+wt)/Cr;return function(h,v){if(h.is0(v))return v;if(na(h,v)!==1)throw new Error("Cannot find square root");let S=r,k=h.mul(h.ONE,i),A=h.pow(v,e),I=h.pow(v,a);for(;!h.eql(A,h.ONE);){if(h.is0(A))return h.ZERO;let R=1,C=h.sqr(A);for(;!h.eql(C,h.ONE);)if(R++,C=h.sqr(C),R===S)throw new Error("Cannot find square root");const L=wt<<BigInt(S-R-1),N=h.pow(k,L);S=R,k=h.sqr(N),A=h.mul(A,k),I=h.mul(I,N)}return I}}function Bl(t){return t%Ha===Wa?Xa:t%Ja===Ga?Sl:t%Ya===El?Al(t):Qa(t)}const Il=(t,e)=>(dt(t,e)&wt)===wt,kl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ml(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=kl.reduce((n,s)=>(n[s]="function",n),e);return Vn(t,r),t}function Rl(t,e,r){if(r<Ct)throw new Error("invalid exponent, negatives unsupported");if(r===Ct)return t.ONE;if(r===wt)return e;let n=t.ONE,s=e;for(;r>Ct;)r&wt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=wt;return n}function ec(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((a,c,h)=>t.is0(c)?a:(n[h]=a,t.mul(a,c)),t.ONE),i=t.inv(s);return e.reduceRight((a,c,h)=>t.is0(c)?a:(n[h]=t.mul(a,n[h]),t.mul(a,c)),i),n}function na(t,e){const r=(t.ORDER-wt)/Cr,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),a=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function tc(t,e){e!==void 0&&Ps(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Kr(t,e,r=!1,n={}){if(t<=Ct)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,a=!1,c;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const A=e;A.BITS&&(s=A.BITS),A.sqrt&&(i=A.sqrt),typeof A.isLE=="boolean"&&(r=A.isLE),typeof A.modFromBytes=="boolean"&&(a=A.modFromBytes),c=A.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:h,nByteLength:v}=tc(t,s);if(v>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let S;const k=Object.freeze({ORDER:t,isLE:r,BITS:h,BYTES:v,MASK:qn(h),ZERO:Ct,ONE:wt,allowedLengths:c,create:A=>dt(A,t),isValid:A=>{if(typeof A!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof A);return Ct<=A&&A<t},is0:A=>A===Ct,isValidNot0:A=>!k.is0(A)&&k.isValid(A),isOdd:A=>(A&wt)===wt,neg:A=>dt(-A,t),eql:(A,I)=>A===I,sqr:A=>dt(A*A,t),add:(A,I)=>dt(A+I,t),sub:(A,I)=>dt(A-I,t),mul:(A,I)=>dt(A*I,t),pow:(A,I)=>Rl(k,A,I),div:(A,I)=>dt(A*ra(I,t),t),sqrN:A=>A*A,addN:(A,I)=>A+I,subN:(A,I)=>A-I,mulN:(A,I)=>A*I,inv:A=>ra(A,t),sqrt:i||(A=>(S||(S=Bl(t)),S(k,A))),toBytes:A=>r?Va(A,v):so(A,v),fromBytes:(A,I=!0)=>{if(c){if(!c.includes(A.length)||A.length>v)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+A.length);const C=new Uint8Array(v);C.set(A,r?0:C.length-A.length),A=C}if(A.length!==v)throw new Error("Field.fromBytes: expected "+v+" bytes, got "+A.length);let R=r?Mn(A):Pi(A);if(a&&(R=dt(R,t)),!I&&!k.isValid(R))throw new Error("invalid field element: outside of range 0..ORDER");return R},invertBatch:A=>ec(k,A),cmov:(A,I,R)=>R?I:A});return Object.freeze(k)}function rc(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function nc(t){const e=rc(t);return e+Math.ceil(e/2)}function Tl(t,e,r=!1){const n=t.length,s=rc(e),i=nc(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const a=r?Mn(t):Pi(t),c=dt(a,e-wt)+wt;return r?Va(c,s):so(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mn=BigInt(0),Lr=BigInt(1);function xi(t,e){const r=e.negate();return t?r:e}function Nr(t,e){const r=ec(t.Fp,e.map(n=>n.Z));return e.map((n,s)=>t.fromAffine(n.toAffine(r[s])))}function ic(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ws(t,e){ic(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=qn(t),a=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:a}}function ia(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:a}=r;let c=Number(t&s),h=t>>a;c>n&&(c-=i,h+=Lr);const v=e*n,S=v+Math.abs(c)-1,k=c===0,A=c<0,I=e%2!==0;return{nextN:h,offset:S,isZero:k,isNeg:A,isNegF:I,offsetF:v}}function Ol(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Ul(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const vs=new WeakMap,sc=new WeakMap;function bs(t){return sc.get(t)||1}function sa(t){if(t!==mn)throw new Error("invalid wNAF")}class oc{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let s=e;for(;r>mn;)r&Lr&&(n=n.add(s)),s=s.double(),r>>=Lr;return n}precomputeWindow(e,r){const{windows:n,windowSize:s}=ws(r,this.bits),i=[];let a=e,c=a;for(let h=0;h<n;h++){c=a,i.push(c);for(let v=1;v<s;v++)c=c.add(a),i.push(c);a=c.double()}return i}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const a=ws(e,this.bits);for(let c=0;c<a.windows;c++){const{nextN:h,offset:v,isZero:S,isNeg:k,isNegF:A,offsetF:I}=ia(n,c,a);n=h,S?i=i.add(xi(A,r[I])):s=s.add(xi(k,r[v]))}return sa(n),{p:s,f:i}}wNAFUnsafe(e,r,n,s=this.ZERO){const i=ws(e,this.bits);for(let a=0;a<i.windows&&n!==mn;a++){const{nextN:c,offset:h,isZero:v,isNeg:S}=ia(n,a,i);if(n=c,!v){const k=r[h];s=s.add(S?k.negate():k)}}return sa(n),s}getPrecomputes(e,r,n){let s=vs.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(s=n(s)),vs.set(r,s))),s}cached(e,r,n){const s=bs(e);return this.wNAF(s,this.getPrecomputes(s,e,n),r)}unsafe(e,r,n,s){const i=bs(e);return i===1?this._unsafeLadder(e,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),r,s)}createCache(e,r){ic(r,this.bits),sc.set(e,r),vs.delete(e)}hasCache(e){return bs(e)!==1}}function Cl(t,e,r,n){let s=e,i=t.ZERO,a=t.ZERO;for(;r>mn||n>mn;)r&Lr&&(i=i.add(s)),n&Lr&&(a=a.add(s)),s=s.double(),r>>=Lr,n>>=Lr;return{p1:i,p2:a}}function ac(t,e,r,n){Ol(r,t),Ul(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,c=Ka(BigInt(s));let h=1;c>12?h=c-3:c>4?h=c-2:c>0&&(h=2);const v=qn(h),S=new Array(Number(v)+1).fill(a),k=Math.floor((e.BITS-1)/h)*h;let A=a;for(let I=k;I>=0;I-=h){S.fill(a);for(let C=0;C<i;C++){const L=n[C],N=Number(L>>BigInt(I)&v);S[N]=S[N].add(r[C])}let R=a;for(let C=S.length-1,L=a;C>0;C--)L=L.add(S[C]),R=R.add(L);if(A=A.add(R),I!==0)for(let C=0;C<h;C++)A=A.double()}return A}function oa(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ml(e),e}else return Kr(t,{isLE:r})}function cc(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const h of["p","n","h"]){const v=e[h];if(!(typeof v=="bigint"&&v>mn))throw new Error(`CURVE.${h} must be positive bigint`)}const s=oa(e.p,r.Fp,n),i=oa(e.n,r.Fn,n),c=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const h of c)if(!s.isValid(e[h]))throw new Error(`CURVE.${h} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _r=BigInt(0),pt=BigInt(1),xs=BigInt(2),Ll=BigInt(8);function Nl(t,e,r,n){const s=t.sqr(r),i=t.sqr(n),a=t.add(t.mul(e.a,s),i),c=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(a,c)}function Fl(t,e={}){const r=cc("edwards",t,e,e.FpFnLE),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:a}=i;Vn(e,{},{uvRatio:"function"});const c=xs<<BigInt(s.BYTES*8)-pt,h=L=>n.create(L),v=e.uvRatio||((L,N)=>{try{return{isValid:!0,value:n.sqrt(n.div(L,N))}}catch{return{isValid:!1,value:_r}}});if(!Nl(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function S(L,N,z=!1){const P=z?pt:_r;return js("coordinate "+L,N,P,c),N}function k(L){if(!(L instanceof R))throw new Error("ExtendedPoint expected")}const A=bi((L,N)=>{const{X:z,Y:P,Z:G}=L,Q=L.is0();N==null&&(N=Q?Ll:n.inv(G));const ie=h(z*N),fe=h(P*N),ce=n.mul(G,N);if(Q)return{x:_r,y:pt};if(ce!==pt)throw new Error("invZ was invalid");return{x:ie,y:fe}}),I=bi(L=>{const{a:N,d:z}=i;if(L.is0())throw new Error("bad point: ZERO");const{X:P,Y:G,Z:Q,T:ie}=L,fe=h(P*P),ce=h(G*G),D=h(Q*Q),te=h(D*D),W=h(fe*N),X=h(D*h(W+ce)),g=h(te+h(z*h(fe*ce)));if(X!==g)throw new Error("bad point: equation left != right (1)");const o=h(P*G),d=h(Q*ie);if(o!==d)throw new Error("bad point: equation left != right (2)");return!0});class R{constructor(N,z,P,G){this.X=S("x",N),this.Y=S("y",z),this.Z=S("z",P,!0),this.T=S("t",G),Object.freeze(this)}static CURVE(){return i}static fromAffine(N){if(N instanceof R)throw new Error("extended point not allowed");const{x:z,y:P}=N||{};return S("x",z),S("y",P),new R(z,P,pt,h(z*P))}static fromBytes(N,z=!1){const P=n.BYTES,{a:G,d:Q}=i;N=ta(Jt(N,P,"point")),qr(z,"zip215");const ie=ta(N),fe=N[P-1];ie[P-1]=fe&-129;const ce=Mn(ie),D=z?c:n.ORDER;js("point.y",ce,_r,D);const te=h(ce*ce),W=h(te-pt),X=h(Q*te-G);let{isValid:g,value:o}=v(W,X);if(!g)throw new Error("bad point: invalid y coordinate");const d=(o&pt)===pt,p=(fe&128)!==0;if(!z&&o===_r&&p)throw new Error("bad point: x=0 and x_0=1");return p!==d&&(o=h(-o)),R.fromAffine({x:o,y:ce})}static fromHex(N,z=!1){return R.fromBytes(Ve("point",N),z)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(N=8,z=!0){return C.createCache(this,N),z||this.multiply(xs),this}assertValidity(){I(this)}equals(N){k(N);const{X:z,Y:P,Z:G}=this,{X:Q,Y:ie,Z:fe}=N,ce=h(z*fe),D=h(Q*G),te=h(P*fe),W=h(ie*G);return ce===D&&te===W}is0(){return this.equals(R.ZERO)}negate(){return new R(h(-this.X),this.Y,this.Z,h(-this.T))}double(){const{a:N}=i,{X:z,Y:P,Z:G}=this,Q=h(z*z),ie=h(P*P),fe=h(xs*h(G*G)),ce=h(N*Q),D=z+P,te=h(h(D*D)-Q-ie),W=ce+ie,X=W-fe,g=ce-ie,o=h(te*X),d=h(W*g),p=h(te*g),w=h(X*W);return new R(o,d,w,p)}add(N){k(N);const{a:z,d:P}=i,{X:G,Y:Q,Z:ie,T:fe}=this,{X:ce,Y:D,Z:te,T:W}=N,X=h(G*ce),g=h(Q*D),o=h(fe*P*W),d=h(ie*te),p=h((G+Q)*(ce+D)-X-g),w=d-o,x=d+o,E=h(g-z*X),B=h(p*w),y=h(x*E),f=h(p*E),_=h(w*x);return new R(B,y,_,f)}subtract(N){return this.add(N.negate())}multiply(N){if(!s.isValidNot0(N))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:z,f:P}=C.cached(this,N,G=>Nr(R,G));return Nr(R,[z,P])[0]}multiplyUnsafe(N,z=R.ZERO){if(!s.isValid(N))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return N===_r?R.ZERO:this.is0()||N===pt?this:C.unsafe(this,N,P=>Nr(R,P),z)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return C.unsafe(this,i.n).is0()}toAffine(N){return A(this,N)}clearCofactor(){return a===pt?this:this.multiplyUnsafe(a)}toBytes(){const{x:N,y:z}=this.toAffine(),P=n.toBytes(z);return P[P.length-1]|=N&pt?128:0,P}toHex(){return Pr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(N){return Nr(R,N)}static msm(N,z){return ac(R,s,N,z)}_setWindowSize(N){this.precompute(N)}toRawBytes(){return this.toBytes()}}R.BASE=new R(i.Gx,i.Gy,pt,h(i.Gx*i.Gy)),R.ZERO=new R(_r,pt,pt,_r),R.Fp=n,R.Fn=s;const C=new oc(R,s.BITS);return R.BASE.precompute(8),R}function Pl(t,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');Vn(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:s,Fp:i,Fn:a}=t,c=r.randomBytes||no,h=r.adjustScalarBytes||(D=>D),v=r.domain||((D,te,W)=>{if(qr(W,"phflag"),te.length||W)throw new Error("Contexts/pre-hash are not supported");return D});function S(D){return a.create(Mn(D))}function k(D){const te=P.secretKey;D=Ve("private key",D,te);const W=Ve("hashed private key",e(D),2*te),X=h(W.slice(0,te)),g=W.slice(te,2*te),o=S(X);return{head:X,prefix:g,scalar:o}}function A(D){const{head:te,prefix:W,scalar:X}=k(D),g=s.multiply(X),o=g.toBytes();return{head:te,prefix:W,scalar:X,point:g,pointBytes:o}}function I(D){return A(D).pointBytes}function R(D=Uint8Array.of(),...te){const W=nr(...te);return S(e(v(W,Ve("context",D),!!n)))}function C(D,te,W={}){D=Ve("message",D),n&&(D=n(D));const{prefix:X,scalar:g,pointBytes:o}=A(te),d=R(W.context,X,D),p=s.multiply(d).toBytes(),w=R(W.context,p,o,D),x=a.create(d+w*g);if(!a.isValid(x))throw new Error("sign failed: invalid s");const E=nr(p,a.toBytes(x));return Jt(E,P.signature,"result")}const L={zip215:!0};function N(D,te,W,X=L){const{context:g,zip215:o}=X,d=P.signature;D=Ve("signature",D,d),te=Ve("message",te),W=Ve("publicKey",W,P.publicKey),o!==void 0&&qr(o,"zip215"),n&&(te=n(te));const p=d/2,w=D.subarray(0,p),x=Mn(D.subarray(p,d));let E,B,y;try{E=t.fromBytes(W,o),B=t.fromBytes(w,o),y=s.multiplyUnsafe(x)}catch{return!1}if(!o&&E.isSmallOrder())return!1;const f=R(g,B.toBytes(),E.toBytes(),te);return B.add(E.multiplyUnsafe(f)).subtract(y).clearCofactor().is0()}const z=i.BYTES,P={secretKey:z,publicKey:z,signature:2*z,seed:z};function G(D=c(P.seed)){return Jt(D,P.seed,"seed")}function Q(D){const te=ce.randomSecretKey(D);return{secretKey:te,publicKey:I(te)}}function ie(D){return Zn(D)&&D.length===a.BYTES}function fe(D,te){try{return!!t.fromBytes(D,te)}catch{return!1}}const ce={getExtendedPublicKey:A,randomSecretKey:G,isValidSecretKey:ie,isValidPublicKey:fe,toMontgomery(D){const{y:te}=t.fromBytes(D),W=P.publicKey,X=W===32;if(!X&&W!==57)throw new Error("only defined for 25519 and 448");const g=X?i.div(pt+te,pt-te):i.div(te-pt,te+pt);return i.toBytes(g)},toMontgomerySecret(D){const te=P.secretKey;Jt(D,te);const W=e(D.subarray(0,te));return h(W).subarray(0,te)},randomPrivateKey:G,precompute(D=8,te=t.BASE){return te.precompute(D,!1)}};return Object.freeze({keygen:Q,getPublicKey:I,sign:C,verify:N,utils:ce,Point:t,lengths:P})}function Dl(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Kr(e.n,t.nBitLength,!0),s={Fp:r,Fn:n,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function jl(t,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function zl(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:s}=Dl(t),i=Fl(e,r),a=Pl(i,n,s);return jl(t,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $l=BigInt(1),aa=BigInt(2);BigInt(3);const Zl=BigInt(5),ql=BigInt(8),ao=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),uc={p:ao,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ql,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Vl(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=ao,c=t*t%i*t%i,h=qe(c,aa,i)*c%i,v=qe(h,$l,i)*t%i,S=qe(v,Zl,i)*v%i,k=qe(S,e,i)*S%i,A=qe(k,r,i)*k%i,I=qe(A,n,i)*A%i,R=qe(I,s,i)*I%i,C=qe(R,s,i)*I%i,L=qe(C,e,i)*S%i;return{pow_p_5_8:qe(L,aa,i)*t%i,b2:c}}function Kl(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ca=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Wl(t,e){const r=ao,n=dt(e*e*e,r),s=dt(n*n*e,r),i=Vl(t*s).pow_p_5_8;let a=dt(t*n*i,r);const c=dt(e*a*a,r),h=a,v=dt(a*ca,r),S=c===t,k=c===dt(-t,r),A=c===dt(-t*ca,r);return S&&(a=h),(k||A)&&(a=v),Il(a,r)&&(a=dt(-a,r)),{isValid:S||k,value:a}}const Hl=Kr(uc.p,{isLE:!0}),Gl={...uc,Fp:Hl,hash:vl,adjustScalarBytes:Kl,uvRatio:Wl},Kn=zl(Gl);var co={exports:{}};const Jl={},Yl=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),Xl=Hs(Yl);co.exports;(function(t){(function(e,r){function n(g,o){if(!g)throw new Error(o||"Assertion failed")}function s(g,o){g.super_=o;var d=function(){};d.prototype=o.prototype,g.prototype=new d,g.prototype.constructor=g}function i(g,o,d){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((o==="le"||o==="be")&&(d=o,o=10),this._init(g||0,o||10,d||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Xl.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,d){return o.cmp(d)>0?o:d},i.min=function(o,d){return o.cmp(d)<0?o:d},i.prototype._init=function(o,d,p){if(typeof o=="number")return this._initNumber(o,d,p);if(typeof o=="object")return this._initArray(o,d,p);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),o=o.toString().replace(/\s+/g,"");var w=0;o[0]==="-"&&(w++,this.negative=1),w<o.length&&(d===16?this._parseHex(o,w,p):(this._parseBase(o,d,w),p==="le"&&this._initArray(this.toArray(),d,p)))},i.prototype._initNumber=function(o,d,p){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),d,p)},i.prototype._initArray=function(o,d,p){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x,E,B=0;if(p==="be")for(w=o.length-1,x=0;w>=0;w-=3)E=o[w]|o[w-1]<<8|o[w-2]<<16,this.words[x]|=E<<B&67108863,this.words[x+1]=E>>>26-B&67108863,B+=24,B>=26&&(B-=26,x++);else if(p==="le")for(w=0,x=0;w<o.length;w+=3)E=o[w]|o[w+1]<<8|o[w+2]<<16,this.words[x]|=E<<B&67108863,this.words[x+1]=E>>>26-B&67108863,B+=24,B>=26&&(B-=26,x++);return this._strip()};function c(g,o){var d=g.charCodeAt(o);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+g)}function h(g,o,d){var p=c(g,d);return d-1>=o&&(p|=c(g,d-1)<<4),p}i.prototype._parseHex=function(o,d,p){this.length=Math.ceil((o.length-d)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x=0,E=0,B;if(p==="be")for(w=o.length-1;w>=d;w-=2)B=h(o,d,w)<<x,this.words[E]|=B&67108863,x>=18?(x-=18,E+=1,this.words[E]|=B>>>26):x+=8;else{var y=o.length-d;for(w=y%2===0?d+1:d;w<o.length;w+=2)B=h(o,d,w)<<x,this.words[E]|=B&67108863,x>=18?(x-=18,E+=1,this.words[E]|=B>>>26):x+=8}this._strip()};function v(g,o,d,p){for(var w=0,x=0,E=Math.min(g.length,d),B=o;B<E;B++){var y=g.charCodeAt(B)-48;w*=p,y>=49?x=y-49+10:y>=17?x=y-17+10:x=y,n(y>=0&&x<p,"Invalid character"),w+=x}return w}i.prototype._parseBase=function(o,d,p){this.words=[0],this.length=1;for(var w=0,x=1;x<=67108863;x*=d)w++;w--,x=x/d|0;for(var E=o.length-p,B=E%w,y=Math.min(E,E-B)+p,f=0,_=p;_<y;_+=w)f=v(o,_,_+w,d),this.imuln(x),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(B!==0){var V=1;for(f=v(o,_,o.length,d),_=0;_<B;_++)V*=d;this.imuln(V),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var d=0;d<this.length;d++)o.words[d]=this.words[d];o.length=this.length,o.negative=this.negative,o.red=this.red};function S(g,o){g.words=o.words,g.length=o.length,g.negative=o.negative,g.red=o.red}if(i.prototype._move=function(o){S(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=k}catch{i.prototype.inspect=k}else i.prototype.inspect=k;function k(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,d){o=o||10,d=d|0||1;var p;if(o===16||o==="hex"){p="";for(var w=0,x=0,E=0;E<this.length;E++){var B=this.words[E],y=((B<<w|x)&16777215).toString(16);x=B>>>24-w&16777215,w+=2,w>=26&&(w-=26,E--),x!==0||E!==this.length-1?p=A[6-y.length]+y+p:p=y+p}for(x!==0&&(p=x.toString(16)+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(o===(o|0)&&o>=2&&o<=36){var f=I[o],_=R[o];p="";var V=this.clone();for(V.negative=0;!V.isZero();){var Z=V.modrn(_).toString(o);V=V.idivn(_),V.isZero()?p=Z+p:p=A[f-Z.length]+Z+p}for(this.isZero()&&(p="0"+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(o,d){return this.toArrayLike(a,o,d)}),i.prototype.toArray=function(o,d){return this.toArrayLike(Array,o,d)};var C=function(o,d){return o.allocUnsafe?o.allocUnsafe(d):new o(d)};i.prototype.toArrayLike=function(o,d,p){this._strip();var w=this.byteLength(),x=p||Math.max(1,w);n(w<=x,"byte array longer than desired length"),n(x>0,"Requested array length <= 0");var E=C(o,x),B=d==="le"?"LE":"BE";return this["_toArrayLike"+B](E,w),E},i.prototype._toArrayLikeLE=function(o,d){for(var p=0,w=0,x=0,E=0;x<this.length;x++){var B=this.words[x]<<E|w;o[p++]=B&255,p<o.length&&(o[p++]=B>>8&255),p<o.length&&(o[p++]=B>>16&255),E===6?(p<o.length&&(o[p++]=B>>24&255),w=0,E=0):(w=B>>>24,E+=2)}if(p<o.length)for(o[p++]=w;p<o.length;)o[p++]=0},i.prototype._toArrayLikeBE=function(o,d){for(var p=o.length-1,w=0,x=0,E=0;x<this.length;x++){var B=this.words[x]<<E|w;o[p--]=B&255,p>=0&&(o[p--]=B>>8&255),p>=0&&(o[p--]=B>>16&255),E===6?(p>=0&&(o[p--]=B>>24&255),w=0,E=0):(w=B>>>24,E+=2)}if(p>=0)for(o[p--]=w;p>=0;)o[p--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var d=o,p=0;return d>=4096&&(p+=13,d>>>=13),d>=64&&(p+=7,d>>>=7),d>=8&&(p+=4,d>>>=4),d>=2&&(p+=2,d>>>=2),p+d},i.prototype._zeroBits=function(o){if(o===0)return 26;var d=o,p=0;return d&8191||(p+=13,d>>>=13),d&127||(p+=7,d>>>=7),d&15||(p+=4,d>>>=4),d&3||(p+=2,d>>>=2),d&1||p++,p},i.prototype.bitLength=function(){var o=this.words[this.length-1],d=this._countBits(o);return(this.length-1)*26+d};function L(g){for(var o=new Array(g.bitLength()),d=0;d<o.length;d++){var p=d/26|0,w=d%26;o[d]=g.words[p]>>>w&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,d=0;d<this.length;d++){var p=this._zeroBits(this.words[d]);if(o+=p,p!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var d=0;d<o.length;d++)this.words[d]=this.words[d]|o.words[d];return this._strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var d;this.length>o.length?d=o:d=this;for(var p=0;p<d.length;p++)this.words[p]=this.words[p]&o.words[p];return this.length=d.length,this._strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var d,p;this.length>o.length?(d=this,p=o):(d=o,p=this);for(var w=0;w<p.length;w++)this.words[w]=d.words[w]^p.words[w];if(this!==d)for(;w<d.length;w++)this.words[w]=d.words[w];return this.length=d.length,this._strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var d=Math.ceil(o/26)|0,p=o%26;this._expand(d),p>0&&d--;for(var w=0;w<d;w++)this.words[w]=~this.words[w]&67108863;return p>0&&(this.words[w]=~this.words[w]&67108863>>26-p),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,d){n(typeof o=="number"&&o>=0);var p=o/26|0,w=o%26;return this._expand(p+1),d?this.words[p]=this.words[p]|1<<w:this.words[p]=this.words[p]&~(1<<w),this._strip()},i.prototype.iadd=function(o){var d;if(this.negative!==0&&o.negative===0)return this.negative=0,d=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,d=this.isub(o),o.negative=1,d._normSign();var p,w;this.length>o.length?(p=this,w=o):(p=o,w=this);for(var x=0,E=0;E<w.length;E++)d=(p.words[E]|0)+(w.words[E]|0)+x,this.words[E]=d&67108863,x=d>>>26;for(;x!==0&&E<p.length;E++)d=(p.words[E]|0)+x,this.words[E]=d&67108863,x=d>>>26;if(this.length=p.length,x!==0)this.words[this.length]=x,this.length++;else if(p!==this)for(;E<p.length;E++)this.words[E]=p.words[E];return this},i.prototype.add=function(o){var d;return o.negative!==0&&this.negative===0?(o.negative=0,d=this.sub(o),o.negative^=1,d):o.negative===0&&this.negative!==0?(this.negative=0,d=o.sub(this),this.negative=1,d):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var d=this.iadd(o);return o.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var p=this.cmp(o);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,x;p>0?(w=this,x=o):(w=o,x=this);for(var E=0,B=0;B<x.length;B++)d=(w.words[B]|0)-(x.words[B]|0)+E,E=d>>26,this.words[B]=d&67108863;for(;E!==0&&B<w.length;B++)d=(w.words[B]|0)+E,E=d>>26,this.words[B]=d&67108863;if(E===0&&B<w.length&&w!==this)for(;B<w.length;B++)this.words[B]=w.words[B];return this.length=Math.max(this.length,B),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function N(g,o,d){d.negative=o.negative^g.negative;var p=g.length+o.length|0;d.length=p,p=p-1|0;var w=g.words[0]|0,x=o.words[0]|0,E=w*x,B=E&67108863,y=E/67108864|0;d.words[0]=B;for(var f=1;f<p;f++){for(var _=y>>>26,V=y&67108863,Z=Math.min(f,o.length-1),H=Math.max(0,f-g.length+1);H<=Z;H++){var be=f-H|0;w=g.words[be]|0,x=o.words[H]|0,E=w*x+V,_+=E/67108864|0,V=E&67108863}d.words[f]=V|0,y=_|0}return y!==0?d.words[f]=y|0:d.length--,d._strip()}var z=function(o,d,p){var w=o.words,x=d.words,E=p.words,B=0,y,f,_,V=w[0]|0,Z=V&8191,H=V>>>13,be=w[1]|0,le=be&8191,ae=be>>>13,De=w[2]|0,ke=De&8191,Me=De>>>13,Zt=w[3]|0,Re=Zt&8191,je=Zt>>>13,Jn=w[4]|0,Le=Jn&8191,ze=Jn>>>13,Yn=w[5]|0,Fe=Yn&8191,Oe=Yn>>>13,Nt=w[6]|0,Ne=Nt&8191,$e=Nt>>>13,Ht=w[7]|0,Ze=Ht&8191,m=Ht>>>13,u=w[8]|0,l=u&8191,b=u>>>13,M=w[9]|0,T=M&8191,F=M>>>13,we=x[0]|0,me=we&8191,he=we>>>13,Ue=x[1]|0,ue=Ue&8191,He=Ue>>>13,Oo=x[2]|0,Ge=Oo&8191,Je=Oo>>>13,Uo=x[3]|0,Ye=Uo&8191,Xe=Uo>>>13,Co=x[4]|0,Qe=Co&8191,et=Co>>>13,Lo=x[5]|0,tt=Lo&8191,rt=Lo>>>13,No=x[6]|0,nt=No&8191,it=No>>>13,Fo=x[7]|0,st=Fo&8191,ot=Fo>>>13,Po=x[8]|0,at=Po&8191,ct=Po>>>13,Do=x[9]|0,ut=Do&8191,ft=Do>>>13;p.negative=o.negative^d.negative,p.length=19,y=Math.imul(Z,me),f=Math.imul(Z,he),f=f+Math.imul(H,me)|0,_=Math.imul(H,he);var Gi=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,y=Math.imul(le,me),f=Math.imul(le,he),f=f+Math.imul(ae,me)|0,_=Math.imul(ae,he),y=y+Math.imul(Z,ue)|0,f=f+Math.imul(Z,He)|0,f=f+Math.imul(H,ue)|0,_=_+Math.imul(H,He)|0;var Ji=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,y=Math.imul(ke,me),f=Math.imul(ke,he),f=f+Math.imul(Me,me)|0,_=Math.imul(Me,he),y=y+Math.imul(le,ue)|0,f=f+Math.imul(le,He)|0,f=f+Math.imul(ae,ue)|0,_=_+Math.imul(ae,He)|0,y=y+Math.imul(Z,Ge)|0,f=f+Math.imul(Z,Je)|0,f=f+Math.imul(H,Ge)|0,_=_+Math.imul(H,Je)|0;var Yi=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,y=Math.imul(Re,me),f=Math.imul(Re,he),f=f+Math.imul(je,me)|0,_=Math.imul(je,he),y=y+Math.imul(ke,ue)|0,f=f+Math.imul(ke,He)|0,f=f+Math.imul(Me,ue)|0,_=_+Math.imul(Me,He)|0,y=y+Math.imul(le,Ge)|0,f=f+Math.imul(le,Je)|0,f=f+Math.imul(ae,Ge)|0,_=_+Math.imul(ae,Je)|0,y=y+Math.imul(Z,Ye)|0,f=f+Math.imul(Z,Xe)|0,f=f+Math.imul(H,Ye)|0,_=_+Math.imul(H,Xe)|0;var Xi=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,y=Math.imul(Le,me),f=Math.imul(Le,he),f=f+Math.imul(ze,me)|0,_=Math.imul(ze,he),y=y+Math.imul(Re,ue)|0,f=f+Math.imul(Re,He)|0,f=f+Math.imul(je,ue)|0,_=_+Math.imul(je,He)|0,y=y+Math.imul(ke,Ge)|0,f=f+Math.imul(ke,Je)|0,f=f+Math.imul(Me,Ge)|0,_=_+Math.imul(Me,Je)|0,y=y+Math.imul(le,Ye)|0,f=f+Math.imul(le,Xe)|0,f=f+Math.imul(ae,Ye)|0,_=_+Math.imul(ae,Xe)|0,y=y+Math.imul(Z,Qe)|0,f=f+Math.imul(Z,et)|0,f=f+Math.imul(H,Qe)|0,_=_+Math.imul(H,et)|0;var Qi=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,y=Math.imul(Fe,me),f=Math.imul(Fe,he),f=f+Math.imul(Oe,me)|0,_=Math.imul(Oe,he),y=y+Math.imul(Le,ue)|0,f=f+Math.imul(Le,He)|0,f=f+Math.imul(ze,ue)|0,_=_+Math.imul(ze,He)|0,y=y+Math.imul(Re,Ge)|0,f=f+Math.imul(Re,Je)|0,f=f+Math.imul(je,Ge)|0,_=_+Math.imul(je,Je)|0,y=y+Math.imul(ke,Ye)|0,f=f+Math.imul(ke,Xe)|0,f=f+Math.imul(Me,Ye)|0,_=_+Math.imul(Me,Xe)|0,y=y+Math.imul(le,Qe)|0,f=f+Math.imul(le,et)|0,f=f+Math.imul(ae,Qe)|0,_=_+Math.imul(ae,et)|0,y=y+Math.imul(Z,tt)|0,f=f+Math.imul(Z,rt)|0,f=f+Math.imul(H,tt)|0,_=_+Math.imul(H,rt)|0;var es=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(es>>>26)|0,es&=67108863,y=Math.imul(Ne,me),f=Math.imul(Ne,he),f=f+Math.imul($e,me)|0,_=Math.imul($e,he),y=y+Math.imul(Fe,ue)|0,f=f+Math.imul(Fe,He)|0,f=f+Math.imul(Oe,ue)|0,_=_+Math.imul(Oe,He)|0,y=y+Math.imul(Le,Ge)|0,f=f+Math.imul(Le,Je)|0,f=f+Math.imul(ze,Ge)|0,_=_+Math.imul(ze,Je)|0,y=y+Math.imul(Re,Ye)|0,f=f+Math.imul(Re,Xe)|0,f=f+Math.imul(je,Ye)|0,_=_+Math.imul(je,Xe)|0,y=y+Math.imul(ke,Qe)|0,f=f+Math.imul(ke,et)|0,f=f+Math.imul(Me,Qe)|0,_=_+Math.imul(Me,et)|0,y=y+Math.imul(le,tt)|0,f=f+Math.imul(le,rt)|0,f=f+Math.imul(ae,tt)|0,_=_+Math.imul(ae,rt)|0,y=y+Math.imul(Z,nt)|0,f=f+Math.imul(Z,it)|0,f=f+Math.imul(H,nt)|0,_=_+Math.imul(H,it)|0;var ts=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(ts>>>26)|0,ts&=67108863,y=Math.imul(Ze,me),f=Math.imul(Ze,he),f=f+Math.imul(m,me)|0,_=Math.imul(m,he),y=y+Math.imul(Ne,ue)|0,f=f+Math.imul(Ne,He)|0,f=f+Math.imul($e,ue)|0,_=_+Math.imul($e,He)|0,y=y+Math.imul(Fe,Ge)|0,f=f+Math.imul(Fe,Je)|0,f=f+Math.imul(Oe,Ge)|0,_=_+Math.imul(Oe,Je)|0,y=y+Math.imul(Le,Ye)|0,f=f+Math.imul(Le,Xe)|0,f=f+Math.imul(ze,Ye)|0,_=_+Math.imul(ze,Xe)|0,y=y+Math.imul(Re,Qe)|0,f=f+Math.imul(Re,et)|0,f=f+Math.imul(je,Qe)|0,_=_+Math.imul(je,et)|0,y=y+Math.imul(ke,tt)|0,f=f+Math.imul(ke,rt)|0,f=f+Math.imul(Me,tt)|0,_=_+Math.imul(Me,rt)|0,y=y+Math.imul(le,nt)|0,f=f+Math.imul(le,it)|0,f=f+Math.imul(ae,nt)|0,_=_+Math.imul(ae,it)|0,y=y+Math.imul(Z,st)|0,f=f+Math.imul(Z,ot)|0,f=f+Math.imul(H,st)|0,_=_+Math.imul(H,ot)|0;var rs=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(rs>>>26)|0,rs&=67108863,y=Math.imul(l,me),f=Math.imul(l,he),f=f+Math.imul(b,me)|0,_=Math.imul(b,he),y=y+Math.imul(Ze,ue)|0,f=f+Math.imul(Ze,He)|0,f=f+Math.imul(m,ue)|0,_=_+Math.imul(m,He)|0,y=y+Math.imul(Ne,Ge)|0,f=f+Math.imul(Ne,Je)|0,f=f+Math.imul($e,Ge)|0,_=_+Math.imul($e,Je)|0,y=y+Math.imul(Fe,Ye)|0,f=f+Math.imul(Fe,Xe)|0,f=f+Math.imul(Oe,Ye)|0,_=_+Math.imul(Oe,Xe)|0,y=y+Math.imul(Le,Qe)|0,f=f+Math.imul(Le,et)|0,f=f+Math.imul(ze,Qe)|0,_=_+Math.imul(ze,et)|0,y=y+Math.imul(Re,tt)|0,f=f+Math.imul(Re,rt)|0,f=f+Math.imul(je,tt)|0,_=_+Math.imul(je,rt)|0,y=y+Math.imul(ke,nt)|0,f=f+Math.imul(ke,it)|0,f=f+Math.imul(Me,nt)|0,_=_+Math.imul(Me,it)|0,y=y+Math.imul(le,st)|0,f=f+Math.imul(le,ot)|0,f=f+Math.imul(ae,st)|0,_=_+Math.imul(ae,ot)|0,y=y+Math.imul(Z,at)|0,f=f+Math.imul(Z,ct)|0,f=f+Math.imul(H,at)|0,_=_+Math.imul(H,ct)|0;var ns=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(ns>>>26)|0,ns&=67108863,y=Math.imul(T,me),f=Math.imul(T,he),f=f+Math.imul(F,me)|0,_=Math.imul(F,he),y=y+Math.imul(l,ue)|0,f=f+Math.imul(l,He)|0,f=f+Math.imul(b,ue)|0,_=_+Math.imul(b,He)|0,y=y+Math.imul(Ze,Ge)|0,f=f+Math.imul(Ze,Je)|0,f=f+Math.imul(m,Ge)|0,_=_+Math.imul(m,Je)|0,y=y+Math.imul(Ne,Ye)|0,f=f+Math.imul(Ne,Xe)|0,f=f+Math.imul($e,Ye)|0,_=_+Math.imul($e,Xe)|0,y=y+Math.imul(Fe,Qe)|0,f=f+Math.imul(Fe,et)|0,f=f+Math.imul(Oe,Qe)|0,_=_+Math.imul(Oe,et)|0,y=y+Math.imul(Le,tt)|0,f=f+Math.imul(Le,rt)|0,f=f+Math.imul(ze,tt)|0,_=_+Math.imul(ze,rt)|0,y=y+Math.imul(Re,nt)|0,f=f+Math.imul(Re,it)|0,f=f+Math.imul(je,nt)|0,_=_+Math.imul(je,it)|0,y=y+Math.imul(ke,st)|0,f=f+Math.imul(ke,ot)|0,f=f+Math.imul(Me,st)|0,_=_+Math.imul(Me,ot)|0,y=y+Math.imul(le,at)|0,f=f+Math.imul(le,ct)|0,f=f+Math.imul(ae,at)|0,_=_+Math.imul(ae,ct)|0,y=y+Math.imul(Z,ut)|0,f=f+Math.imul(Z,ft)|0,f=f+Math.imul(H,ut)|0,_=_+Math.imul(H,ft)|0;var is=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(is>>>26)|0,is&=67108863,y=Math.imul(T,ue),f=Math.imul(T,He),f=f+Math.imul(F,ue)|0,_=Math.imul(F,He),y=y+Math.imul(l,Ge)|0,f=f+Math.imul(l,Je)|0,f=f+Math.imul(b,Ge)|0,_=_+Math.imul(b,Je)|0,y=y+Math.imul(Ze,Ye)|0,f=f+Math.imul(Ze,Xe)|0,f=f+Math.imul(m,Ye)|0,_=_+Math.imul(m,Xe)|0,y=y+Math.imul(Ne,Qe)|0,f=f+Math.imul(Ne,et)|0,f=f+Math.imul($e,Qe)|0,_=_+Math.imul($e,et)|0,y=y+Math.imul(Fe,tt)|0,f=f+Math.imul(Fe,rt)|0,f=f+Math.imul(Oe,tt)|0,_=_+Math.imul(Oe,rt)|0,y=y+Math.imul(Le,nt)|0,f=f+Math.imul(Le,it)|0,f=f+Math.imul(ze,nt)|0,_=_+Math.imul(ze,it)|0,y=y+Math.imul(Re,st)|0,f=f+Math.imul(Re,ot)|0,f=f+Math.imul(je,st)|0,_=_+Math.imul(je,ot)|0,y=y+Math.imul(ke,at)|0,f=f+Math.imul(ke,ct)|0,f=f+Math.imul(Me,at)|0,_=_+Math.imul(Me,ct)|0,y=y+Math.imul(le,ut)|0,f=f+Math.imul(le,ft)|0,f=f+Math.imul(ae,ut)|0,_=_+Math.imul(ae,ft)|0;var ss=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(ss>>>26)|0,ss&=67108863,y=Math.imul(T,Ge),f=Math.imul(T,Je),f=f+Math.imul(F,Ge)|0,_=Math.imul(F,Je),y=y+Math.imul(l,Ye)|0,f=f+Math.imul(l,Xe)|0,f=f+Math.imul(b,Ye)|0,_=_+Math.imul(b,Xe)|0,y=y+Math.imul(Ze,Qe)|0,f=f+Math.imul(Ze,et)|0,f=f+Math.imul(m,Qe)|0,_=_+Math.imul(m,et)|0,y=y+Math.imul(Ne,tt)|0,f=f+Math.imul(Ne,rt)|0,f=f+Math.imul($e,tt)|0,_=_+Math.imul($e,rt)|0,y=y+Math.imul(Fe,nt)|0,f=f+Math.imul(Fe,it)|0,f=f+Math.imul(Oe,nt)|0,_=_+Math.imul(Oe,it)|0,y=y+Math.imul(Le,st)|0,f=f+Math.imul(Le,ot)|0,f=f+Math.imul(ze,st)|0,_=_+Math.imul(ze,ot)|0,y=y+Math.imul(Re,at)|0,f=f+Math.imul(Re,ct)|0,f=f+Math.imul(je,at)|0,_=_+Math.imul(je,ct)|0,y=y+Math.imul(ke,ut)|0,f=f+Math.imul(ke,ft)|0,f=f+Math.imul(Me,ut)|0,_=_+Math.imul(Me,ft)|0;var os=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(os>>>26)|0,os&=67108863,y=Math.imul(T,Ye),f=Math.imul(T,Xe),f=f+Math.imul(F,Ye)|0,_=Math.imul(F,Xe),y=y+Math.imul(l,Qe)|0,f=f+Math.imul(l,et)|0,f=f+Math.imul(b,Qe)|0,_=_+Math.imul(b,et)|0,y=y+Math.imul(Ze,tt)|0,f=f+Math.imul(Ze,rt)|0,f=f+Math.imul(m,tt)|0,_=_+Math.imul(m,rt)|0,y=y+Math.imul(Ne,nt)|0,f=f+Math.imul(Ne,it)|0,f=f+Math.imul($e,nt)|0,_=_+Math.imul($e,it)|0,y=y+Math.imul(Fe,st)|0,f=f+Math.imul(Fe,ot)|0,f=f+Math.imul(Oe,st)|0,_=_+Math.imul(Oe,ot)|0,y=y+Math.imul(Le,at)|0,f=f+Math.imul(Le,ct)|0,f=f+Math.imul(ze,at)|0,_=_+Math.imul(ze,ct)|0,y=y+Math.imul(Re,ut)|0,f=f+Math.imul(Re,ft)|0,f=f+Math.imul(je,ut)|0,_=_+Math.imul(je,ft)|0;var as=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(as>>>26)|0,as&=67108863,y=Math.imul(T,Qe),f=Math.imul(T,et),f=f+Math.imul(F,Qe)|0,_=Math.imul(F,et),y=y+Math.imul(l,tt)|0,f=f+Math.imul(l,rt)|0,f=f+Math.imul(b,tt)|0,_=_+Math.imul(b,rt)|0,y=y+Math.imul(Ze,nt)|0,f=f+Math.imul(Ze,it)|0,f=f+Math.imul(m,nt)|0,_=_+Math.imul(m,it)|0,y=y+Math.imul(Ne,st)|0,f=f+Math.imul(Ne,ot)|0,f=f+Math.imul($e,st)|0,_=_+Math.imul($e,ot)|0,y=y+Math.imul(Fe,at)|0,f=f+Math.imul(Fe,ct)|0,f=f+Math.imul(Oe,at)|0,_=_+Math.imul(Oe,ct)|0,y=y+Math.imul(Le,ut)|0,f=f+Math.imul(Le,ft)|0,f=f+Math.imul(ze,ut)|0,_=_+Math.imul(ze,ft)|0;var cs=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(cs>>>26)|0,cs&=67108863,y=Math.imul(T,tt),f=Math.imul(T,rt),f=f+Math.imul(F,tt)|0,_=Math.imul(F,rt),y=y+Math.imul(l,nt)|0,f=f+Math.imul(l,it)|0,f=f+Math.imul(b,nt)|0,_=_+Math.imul(b,it)|0,y=y+Math.imul(Ze,st)|0,f=f+Math.imul(Ze,ot)|0,f=f+Math.imul(m,st)|0,_=_+Math.imul(m,ot)|0,y=y+Math.imul(Ne,at)|0,f=f+Math.imul(Ne,ct)|0,f=f+Math.imul($e,at)|0,_=_+Math.imul($e,ct)|0,y=y+Math.imul(Fe,ut)|0,f=f+Math.imul(Fe,ft)|0,f=f+Math.imul(Oe,ut)|0,_=_+Math.imul(Oe,ft)|0;var us=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(us>>>26)|0,us&=67108863,y=Math.imul(T,nt),f=Math.imul(T,it),f=f+Math.imul(F,nt)|0,_=Math.imul(F,it),y=y+Math.imul(l,st)|0,f=f+Math.imul(l,ot)|0,f=f+Math.imul(b,st)|0,_=_+Math.imul(b,ot)|0,y=y+Math.imul(Ze,at)|0,f=f+Math.imul(Ze,ct)|0,f=f+Math.imul(m,at)|0,_=_+Math.imul(m,ct)|0,y=y+Math.imul(Ne,ut)|0,f=f+Math.imul(Ne,ft)|0,f=f+Math.imul($e,ut)|0,_=_+Math.imul($e,ft)|0;var fs=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(fs>>>26)|0,fs&=67108863,y=Math.imul(T,st),f=Math.imul(T,ot),f=f+Math.imul(F,st)|0,_=Math.imul(F,ot),y=y+Math.imul(l,at)|0,f=f+Math.imul(l,ct)|0,f=f+Math.imul(b,at)|0,_=_+Math.imul(b,ct)|0,y=y+Math.imul(Ze,ut)|0,f=f+Math.imul(Ze,ft)|0,f=f+Math.imul(m,ut)|0,_=_+Math.imul(m,ft)|0;var ls=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(ls>>>26)|0,ls&=67108863,y=Math.imul(T,at),f=Math.imul(T,ct),f=f+Math.imul(F,at)|0,_=Math.imul(F,ct),y=y+Math.imul(l,ut)|0,f=f+Math.imul(l,ft)|0,f=f+Math.imul(b,ut)|0,_=_+Math.imul(b,ft)|0;var ds=(B+y|0)+((f&8191)<<13)|0;B=(_+(f>>>13)|0)+(ds>>>26)|0,ds&=67108863,y=Math.imul(T,ut),f=Math.imul(T,ft),f=f+Math.imul(F,ut)|0,_=Math.imul(F,ft);var hs=(B+y|0)+((f&8191)<<13)|0;return B=(_+(f>>>13)|0)+(hs>>>26)|0,hs&=67108863,E[0]=Gi,E[1]=Ji,E[2]=Yi,E[3]=Xi,E[4]=Qi,E[5]=es,E[6]=ts,E[7]=rs,E[8]=ns,E[9]=is,E[10]=ss,E[11]=os,E[12]=as,E[13]=cs,E[14]=us,E[15]=fs,E[16]=ls,E[17]=ds,E[18]=hs,B!==0&&(E[19]=B,p.length++),p};Math.imul||(z=N);function P(g,o,d){d.negative=o.negative^g.negative,d.length=g.length+o.length;for(var p=0,w=0,x=0;x<d.length-1;x++){var E=w;w=0;for(var B=p&67108863,y=Math.min(x,o.length-1),f=Math.max(0,x-g.length+1);f<=y;f++){var _=x-f,V=g.words[_]|0,Z=o.words[f]|0,H=V*Z,be=H&67108863;E=E+(H/67108864|0)|0,be=be+B|0,B=be&67108863,E=E+(be>>>26)|0,w+=E>>>26,E&=67108863}d.words[x]=B,p=E,E=w}return p!==0?d.words[x]=p:d.length--,d._strip()}function G(g,o,d){return P(g,o,d)}i.prototype.mulTo=function(o,d){var p,w=this.length+o.length;return this.length===10&&o.length===10?p=z(this,o,d):w<63?p=N(this,o,d):w<1024?p=P(this,o,d):p=G(this,o,d),p},i.prototype.mul=function(o){var d=new i(null);return d.words=new Array(this.length+o.length),this.mulTo(o,d)},i.prototype.mulf=function(o){var d=new i(null);return d.words=new Array(this.length+o.length),G(this,o,d)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var d=o<0;d&&(o=-o),n(typeof o=="number"),n(o<67108864);for(var p=0,w=0;w<this.length;w++){var x=(this.words[w]|0)*o,E=(x&67108863)+(p&67108863);p>>=26,p+=x/67108864|0,p+=E>>>26,this.words[w]=E&67108863}return p!==0&&(this.words[w]=p,this.length++),this.length=o===0?1:this.length,d?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var d=L(o);if(d.length===0)return new i(1);for(var p=this,w=0;w<d.length&&d[w]===0;w++,p=p.sqr());if(++w<d.length)for(var x=p.sqr();w<d.length;w++,x=x.sqr())d[w]!==0&&(p=p.mul(x));return p},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var d=o%26,p=(o-d)/26,w=67108863>>>26-d<<26-d,x;if(d!==0){var E=0;for(x=0;x<this.length;x++){var B=this.words[x]&w,y=(this.words[x]|0)-B<<d;this.words[x]=y|E,E=B>>>26-d}E&&(this.words[x]=E,this.length++)}if(p!==0){for(x=this.length-1;x>=0;x--)this.words[x+p]=this.words[x];for(x=0;x<p;x++)this.words[x]=0;this.length+=p}return this._strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,d,p){n(typeof o=="number"&&o>=0);var w;d?w=(d-d%26)/26:w=0;var x=o%26,E=Math.min((o-x)/26,this.length),B=67108863^67108863>>>x<<x,y=p;if(w-=E,w=Math.max(0,w),y){for(var f=0;f<E;f++)y.words[f]=this.words[f];y.length=E}if(E!==0)if(this.length>E)for(this.length-=E,f=0;f<this.length;f++)this.words[f]=this.words[f+E];else this.words[0]=0,this.length=1;var _=0;for(f=this.length-1;f>=0&&(_!==0||f>=w);f--){var V=this.words[f]|0;this.words[f]=_<<26-x|V>>>x,_=V&B}return y&&_!==0&&(y.words[y.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,d,p){return n(this.negative===0),this.iushrn(o,d,p)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var d=o%26,p=(o-d)/26,w=1<<d;if(this.length<=p)return!1;var x=this.words[p];return!!(x&w)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var d=o%26,p=(o-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(d!==0&&p++,this.length=Math.min(p,this.length),d!==0){var w=67108863^67108863>>>d<<d;this.words[this.length-1]&=w}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,d,p){var w=o.length+p,x;this._expand(w);var E,B=0;for(x=0;x<o.length;x++){E=(this.words[x+p]|0)+B;var y=(o.words[x]|0)*d;E-=y&67108863,B=(E>>26)-(y/67108864|0),this.words[x+p]=E&67108863}for(;x<this.length-p;x++)E=(this.words[x+p]|0)+B,B=E>>26,this.words[x+p]=E&67108863;if(B===0)return this._strip();for(n(B===-1),B=0,x=0;x<this.length;x++)E=-(this.words[x]|0)+B,B=E>>26,this.words[x]=E&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,d){var p=this.length-o.length,w=this.clone(),x=o,E=x.words[x.length-1]|0,B=this._countBits(E);p=26-B,p!==0&&(x=x.ushln(p),w.iushln(p),E=x.words[x.length-1]|0);var y=w.length-x.length,f;if(d!=="mod"){f=new i(null),f.length=y+1,f.words=new Array(f.length);for(var _=0;_<f.length;_++)f.words[_]=0}var V=w.clone()._ishlnsubmul(x,1,y);V.negative===0&&(w=V,f&&(f.words[y]=1));for(var Z=y-1;Z>=0;Z--){var H=(w.words[x.length+Z]|0)*67108864+(w.words[x.length+Z-1]|0);for(H=Math.min(H/E|0,67108863),w._ishlnsubmul(x,H,Z);w.negative!==0;)H--,w.negative=0,w._ishlnsubmul(x,1,Z),w.isZero()||(w.negative^=1);f&&(f.words[Z]=H)}return f&&f._strip(),w._strip(),d!=="div"&&p!==0&&w.iushrn(p),{div:f||null,mod:w}},i.prototype.divmod=function(o,d,p){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,x,E;return this.negative!==0&&o.negative===0?(E=this.neg().divmod(o,d),d!=="mod"&&(w=E.div.neg()),d!=="div"&&(x=E.mod.neg(),p&&x.negative!==0&&x.iadd(o)),{div:w,mod:x}):this.negative===0&&o.negative!==0?(E=this.divmod(o.neg(),d),d!=="mod"&&(w=E.div.neg()),{div:w,mod:E.mod}):this.negative&o.negative?(E=this.neg().divmod(o.neg(),d),d!=="div"&&(x=E.mod.neg(),p&&x.negative!==0&&x.isub(o)),{div:E.div,mod:x}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?d==="div"?{div:this.divn(o.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,d)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var d=this.divmod(o);if(d.mod.isZero())return d.div;var p=d.div.negative!==0?d.mod.isub(o):d.mod,w=o.ushrn(1),x=o.andln(1),E=p.cmp(w);return E<0||x===1&&E===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(o){var d=o<0;d&&(o=-o),n(o<=67108863);for(var p=(1<<26)%o,w=0,x=this.length-1;x>=0;x--)w=(p*w+(this.words[x]|0))%o;return d?-w:w},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var d=o<0;d&&(o=-o),n(o<=67108863);for(var p=0,w=this.length-1;w>=0;w--){var x=(this.words[w]|0)+p*67108864;this.words[w]=x/o|0,p=x%o}return this._strip(),d?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var d=this,p=o.clone();d.negative!==0?d=d.umod(o):d=d.clone();for(var w=new i(1),x=new i(0),E=new i(0),B=new i(1),y=0;d.isEven()&&p.isEven();)d.iushrn(1),p.iushrn(1),++y;for(var f=p.clone(),_=d.clone();!d.isZero();){for(var V=0,Z=1;!(d.words[0]&Z)&&V<26;++V,Z<<=1);if(V>0)for(d.iushrn(V);V-- >0;)(w.isOdd()||x.isOdd())&&(w.iadd(f),x.isub(_)),w.iushrn(1),x.iushrn(1);for(var H=0,be=1;!(p.words[0]&be)&&H<26;++H,be<<=1);if(H>0)for(p.iushrn(H);H-- >0;)(E.isOdd()||B.isOdd())&&(E.iadd(f),B.isub(_)),E.iushrn(1),B.iushrn(1);d.cmp(p)>=0?(d.isub(p),w.isub(E),x.isub(B)):(p.isub(d),E.isub(w),B.isub(x))}return{a:E,b:B,gcd:p.iushln(y)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var d=this,p=o.clone();d.negative!==0?d=d.umod(o):d=d.clone();for(var w=new i(1),x=new i(0),E=p.clone();d.cmpn(1)>0&&p.cmpn(1)>0;){for(var B=0,y=1;!(d.words[0]&y)&&B<26;++B,y<<=1);if(B>0)for(d.iushrn(B);B-- >0;)w.isOdd()&&w.iadd(E),w.iushrn(1);for(var f=0,_=1;!(p.words[0]&_)&&f<26;++f,_<<=1);if(f>0)for(p.iushrn(f);f-- >0;)x.isOdd()&&x.iadd(E),x.iushrn(1);d.cmp(p)>=0?(d.isub(p),w.isub(x)):(p.isub(d),x.isub(w))}var V;return d.cmpn(1)===0?V=w:V=x,V.cmpn(0)<0&&V.iadd(o),V},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var d=this.clone(),p=o.clone();d.negative=0,p.negative=0;for(var w=0;d.isEven()&&p.isEven();w++)d.iushrn(1),p.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;p.isEven();)p.iushrn(1);var x=d.cmp(p);if(x<0){var E=d;d=p,p=E}else if(x===0||p.cmpn(1)===0)break;d.isub(p)}while(!0);return p.iushln(w)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var d=o%26,p=(o-d)/26,w=1<<d;if(this.length<=p)return this._expand(p+1),this.words[p]|=w,this;for(var x=w,E=p;x!==0&&E<this.length;E++){var B=this.words[E]|0;B+=x,x=B>>>26,B&=67108863,this.words[E]=B}return x!==0&&(this.words[E]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var d=o<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var p;if(this.length>1)p=1;else{d&&(o=-o),n(o<=67108863,"Number is too big");var w=this.words[0]|0;p=w===o?0:w<o?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var d=this.ucmp(o);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var d=0,p=this.length-1;p>=0;p--){var w=this.words[p]|0,x=o.words[p]|0;if(w!==x){w<x?d=-1:w>x&&(d=1);break}}return d},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new W(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Q={k256:null,p224:null,p192:null,p25519:null};function ie(g,o){this.name=g,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ie.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},ie.prototype.ireduce=function(o){var d=o,p;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),p=d.bitLength();while(p>this.n);var w=p<this.n?-1:d.ucmp(this.p);return w===0?(d.words[0]=0,d.length=1):w>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},ie.prototype.split=function(o,d){o.iushrn(this.n,0,d)},ie.prototype.imulK=function(o){return o.imul(this.k)};function fe(){ie.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(fe,ie),fe.prototype.split=function(o,d){for(var p=4194303,w=Math.min(o.length,9),x=0;x<w;x++)d.words[x]=o.words[x];if(d.length=w,o.length<=9){o.words[0]=0,o.length=1;return}var E=o.words[9];for(d.words[d.length++]=E&p,x=10;x<o.length;x++){var B=o.words[x]|0;o.words[x-10]=(B&p)<<4|E>>>22,E=B}E>>>=22,o.words[x-10]=E,E===0&&o.length>10?o.length-=10:o.length-=9},fe.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var d=0,p=0;p<o.length;p++){var w=o.words[p]|0;d+=w*977,o.words[p]=d&67108863,d=w*64+(d/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function ce(){ie.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ce,ie);function D(){ie.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(D,ie);function te(){ie.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(te,ie),te.prototype.imulK=function(o){for(var d=0,p=0;p<o.length;p++){var w=(o.words[p]|0)*19+d,x=w&67108863;w>>>=26,o.words[p]=x,d=w}return d!==0&&(o.words[o.length++]=d),o},i._prime=function(o){if(Q[o])return Q[o];var d;if(o==="k256")d=new fe;else if(o==="p224")d=new ce;else if(o==="p192")d=new D;else if(o==="p25519")d=new te;else throw new Error("Unknown prime "+o);return Q[o]=d,d};function W(g){if(typeof g=="string"){var o=i._prime(g);this.m=o.p,this.prime=o}else n(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}W.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},W.prototype._verify2=function(o,d){n((o.negative|d.negative)===0,"red works only with positives"),n(o.red&&o.red===d.red,"red works only with red numbers")},W.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(S(o,o.umod(this.m)._forceRed(this)),o)},W.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},W.prototype.add=function(o,d){this._verify2(o,d);var p=o.add(d);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},W.prototype.iadd=function(o,d){this._verify2(o,d);var p=o.iadd(d);return p.cmp(this.m)>=0&&p.isub(this.m),p},W.prototype.sub=function(o,d){this._verify2(o,d);var p=o.sub(d);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},W.prototype.isub=function(o,d){this._verify2(o,d);var p=o.isub(d);return p.cmpn(0)<0&&p.iadd(this.m),p},W.prototype.shl=function(o,d){return this._verify1(o),this.imod(o.ushln(d))},W.prototype.imul=function(o,d){return this._verify2(o,d),this.imod(o.imul(d))},W.prototype.mul=function(o,d){return this._verify2(o,d),this.imod(o.mul(d))},W.prototype.isqr=function(o){return this.imul(o,o.clone())},W.prototype.sqr=function(o){return this.mul(o,o)},W.prototype.sqrt=function(o){if(o.isZero())return o.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(o,p)}for(var w=this.m.subn(1),x=0;!w.isZero()&&w.andln(1)===0;)x++,w.iushrn(1);n(!w.isZero());var E=new i(1).toRed(this),B=E.redNeg(),y=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,y).cmp(B)!==0;)f.redIAdd(B);for(var _=this.pow(f,w),V=this.pow(o,w.addn(1).iushrn(1)),Z=this.pow(o,w),H=x;Z.cmp(E)!==0;){for(var be=Z,le=0;be.cmp(E)!==0;le++)be=be.redSqr();n(le<H);var ae=this.pow(_,new i(1).iushln(H-le-1));V=V.redMul(ae),_=ae.redSqr(),Z=Z.redMul(_),H=le}return V},W.prototype.invm=function(o){var d=o._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},W.prototype.pow=function(o,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return o.clone();var p=4,w=new Array(1<<p);w[0]=new i(1).toRed(this),w[1]=o;for(var x=2;x<w.length;x++)w[x]=this.mul(w[x-1],o);var E=w[0],B=0,y=0,f=d.bitLength()%26;for(f===0&&(f=26),x=d.length-1;x>=0;x--){for(var _=d.words[x],V=f-1;V>=0;V--){var Z=_>>V&1;if(E!==w[0]&&(E=this.sqr(E)),Z===0&&B===0){y=0;continue}B<<=1,B|=Z,y++,!(y!==p&&(x!==0||V!==0))&&(E=this.mul(E,w[B]),y=0,B=0)}f=26}return E},W.prototype.convertTo=function(o){var d=o.umod(this.m);return d===o?d.clone():d},W.prototype.convertFrom=function(o){var d=o.clone();return d.red=null,d},i.mont=function(o){return new X(o)};function X(g){W.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(X,W),X.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},X.prototype.convertFrom=function(o){var d=this.imod(o.mul(this.rinv));return d.red=null,d},X.prototype.imul=function(o,d){if(o.isZero()||d.isZero())return o.words[0]=0,o.length=1,o;var p=o.imul(d),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(w).iushrn(this.shift),E=x;return x.cmp(this.m)>=0?E=x.isub(this.m):x.cmpn(0)<0&&(E=x.iadd(this.m)),E._forceRed(this)},X.prototype.mul=function(o,d){if(o.isZero()||d.isZero())return new i(0)._forceRed(this);var p=o.mul(d),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(w).iushrn(this.shift),E=x;return x.cmp(this.m)>=0?E=x.isub(this.m):x.cmpn(0)<0&&(E=x.iadd(this.m)),E._forceRed(this)},X.prototype.invm=function(o){var d=this.imod(o._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(t,Xt)})(co);var fc=co.exports;const ua=Gs(fc);var zs={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=ve,n=r.Buffer;function s(a,c){for(var h in a)c[h]=a[h]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(a,c,h){return n(a,c,h)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(a,c,h){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,c,h)},i.alloc=function(a,c,h){if(typeof a!="number")throw new TypeError("Argument must be a number");var v=n(a);return c!==void 0?typeof h=="string"?v.fill(c,h):v.fill(c):v.fill(0),v},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(zs,zs.exports);var Ql=zs.exports,ri=Ql.Buffer;function ed(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var a=t.length,c=t.charAt(0),h=Math.log(a)/Math.log(256),v=Math.log(256)/Math.log(a);function S(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=ri.from(I)),!ri.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var R=0,C=0,L=0,N=I.length;L!==N&&I[L]===0;)L++,R++;for(var z=(N-L)*v+1>>>0,P=new Uint8Array(z);L!==N;){for(var G=I[L],Q=0,ie=z-1;(G!==0||Q<C)&&ie!==-1;ie--,Q++)G+=256*P[ie]>>>0,P[ie]=G%a>>>0,G=G/a>>>0;if(G!==0)throw new Error("Non-zero carry");C=Q,L++}for(var fe=z-C;fe!==z&&P[fe]===0;)fe++;for(var ce=c.repeat(R);fe<z;++fe)ce+=t.charAt(P[fe]);return ce}function k(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return ri.alloc(0);for(var R=0,C=0,L=0;I[R]===c;)C++,R++;for(var N=(I.length-R)*h+1>>>0,z=new Uint8Array(N);R<I.length;){var P=I.charCodeAt(R);if(P>255)return;var G=e[P];if(G===255)return;for(var Q=0,ie=N-1;(G!==0||Q<L)&&ie!==-1;ie--,Q++)G+=a*z[ie]>>>0,z[ie]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");L=Q,R++}for(var fe=N-L;fe!==N&&z[fe]===0;)fe++;var ce=ri.allocUnsafe(C+(N-fe));ce.fill(0,0,C);for(var D=C;fe!==N;)ce[D++]=z[fe++];return ce}function A(I){var R=k(I);if(R)return R;throw new Error("Non-base"+a+" character")}return{encode:S,decodeUnsafe:k,decode:A}}var td=ed,rd=td,nd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",lc=rd(nd);const kt=Gs(lc),fa=Za;var yt={};function hr(t,e,r){return e<=t&&t<=r}function Di(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function id(t){for(var e=String(t),r=e.length,n=0,s=[];n<r;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===r-1)s.push(65533);else{var a=t.charCodeAt(n+1);if(56320<=a&&a<=57343){var c=i&1023,h=a&1023;s.push(65536+(c<<10)+h),n+=1}else s.push(65533)}n+=1}return s}function sd(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var _i=-1;function uo(t){this.tokens=[].slice.call(t)}uo.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():_i},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var gn=-1;function _s(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Ei="utf-8";function Si(t,e){if(!(this instanceof Si))return new Si(t,e);if(t=t!==void 0?String(t).toLowerCase():Ei,t!==Ei)throw new Error("Encoding not supported. Only utf-8 is supported");e=Di(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Si.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=Di(r),this._streaming||(this._decoder=new od({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var s=new uo(n),i=[],a;!s.endOfStream()&&(a=this._decoder.handler(s,s.read()),a!==gn);)a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));if(!this._streaming){do{if(a=this._decoder.handler(s,s.read()),a===gn)break;a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),sd(i)}};function Ai(t,e){if(!(this instanceof Ai))return new Ai(t,e);if(t=t!==void 0?String(t).toLowerCase():Ei,t!==Ei)throw new Error("Encoding not supported. Only utf-8 is supported");e=Di(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ai.prototype={encode:function(e,r){e=e?String(e):"",r=Di(r),this._streaming||(this._encoder=new ad(this._options)),this._streaming=!!r.stream;for(var n=[],s=new uo(id(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==gn);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==gn;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function od(t){var e=t.fatal,r=0,n=0,s=0,i=128,a=191;this.handler=function(c,h){if(h===_i&&s!==0)return s=0,_s(e);if(h===_i)return gn;if(s===0){if(hr(h,0,127))return h;if(hr(h,194,223))s=1,r=h-192;else if(hr(h,224,239))h===224&&(i=160),h===237&&(a=159),s=2,r=h-224;else if(hr(h,240,244))h===240&&(i=144),h===244&&(a=143),s=3,r=h-240;else return _s(e);return r=r<<6*s,null}if(!hr(h,i,a))return r=s=n=0,i=128,a=191,c.prepend(h),_s(e);if(i=128,a=191,n+=1,r+=h-128<<6*(s-n),n!==s)return null;var v=r;return r=s=n=0,v}}function ad(t){t.fatal,this.handler=function(e,r){if(r===_i)return gn;if(hr(r,0,127))return r;var n,s;hr(r,128,2047)?(n=1,s=192):hr(r,2048,65535)?(n=2,s=224):hr(r,65536,1114111)&&(n=3,s=240);for(var i=[(r>>6*n)+s];n>0;){var a=r>>6*(n-1);i.push(128|a&63),n-=1}return i}}const cd=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Si,TextEncoder:Ai},Symbol.toStringTag,{value:"Module"})),ud=Hs(cd);var fd=Xt&&Xt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ld=Xt&&Xt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),or=Xt&&Xt.__decorate||function(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(i=(s<3?a(i):s>3?a(e,r,i):a(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i},dd=Xt&&Xt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&fd(e,t,r);return ld(e,t),e},dc=Xt&&Xt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yt,"__esModule",{value:!0});var hc=yt.deserializeUnchecked=vc=yt.deserialize=wc=yt.serialize=yt.BinaryReader=yt.BinaryWriter=yt.BorshError=yt.baseDecode=yt.baseEncode=void 0;const Br=dc(fc),pc=dc(lc),hd=dd(ud),pd=typeof TextDecoder!="function"?hd.TextDecoder:TextDecoder,md=new pd("utf-8",{fatal:!0});function gd(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),pc.default.encode(Buffer.from(t))}yt.baseEncode=gd;function yd(t){return Buffer.from(pc.default.decode(t))}yt.baseDecode=yd;const Es=1024;class Mt extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}yt.BorshError=Mt;class mc{constructor(){this.buf=Buffer.alloc(Es),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Es)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Br.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Br.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Br.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Br.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(Es)]),this.length+=e.length}writeString(e){this.maybeResize();const r=Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}yt.BinaryWriter=mc;function ar(t,e,r){const n=r.value;r.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const a=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new Mt("Reached the end of buffer when deserializing")}throw i}}}class $t{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Br.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Br.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Br.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Br.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Mt(`Expected buffer length ${e} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){const e=this.readU32(),r=this.readBuffer(e);try{return md.decode(r)}catch(n){throw new Mt(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const r=this.readU32(),n=Array();for(let s=0;s<r;++s)n.push(e());return n}}or([ar],$t.prototype,"readU8",null);or([ar],$t.prototype,"readU16",null);or([ar],$t.prototype,"readU32",null);or([ar],$t.prototype,"readU64",null);or([ar],$t.prototype,"readU128",null);or([ar],$t.prototype,"readU256",null);or([ar],$t.prototype,"readU512",null);or([ar],$t.prototype,"readString",null);or([ar],$t.prototype,"readFixedArray",null);or([ar],$t.prototype,"readArray",null);yt.BinaryReader=$t;function gc(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Tr(t,e,r,n,s){try{if(typeof n=="string")s[`write${gc(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new Mt(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);s.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new Mt(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let i=0;i<n[1];i++)Tr(t,null,r[i],n[0],s)}else s.writeArray(r,i=>{Tr(t,e,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?s.writeU8(0):(s.writeU8(1),Tr(t,e,r,n.type,s));break}case"map":{s.writeU32(r.size),r.forEach((i,a)=>{Tr(t,e,a,n.key,s),Tr(t,e,i,n.value,s)});break}default:throw new Mt(`FieldType ${n} unrecognized`)}else yc(t,r,s)}catch(i){throw i instanceof Mt&&i.addToFieldPath(e),i}}function yc(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}const n=t.get(e.constructor);if(!n)throw new Mt(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{Tr(t,s,e[s],i,r)});else if(n.kind==="enum"){const s=e[n.field];for(let i=0;i<n.values.length;++i){const[a,c]=n.values[i];if(a===s){r.writeU8(i),Tr(t,a,e[a],c,r);break}}}else throw new Mt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function wd(t,e,r=mc){const n=new r;return yc(t,e,n),n.toArray()}var wc=yt.serialize=wd;function Or(t,e,r,n){try{if(typeof r=="string")return n[`read${gc(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const s=[];for(let i=0;i<r[1];i++)s.push(Or(t,null,r[0],n));return s}else return n.readArray(()=>Or(t,e,r[0],n))}if(r.kind==="option")return n.readU8()?Or(t,e,r.type,n):void 0;if(r.kind==="map"){let s=new Map;const i=n.readU32();for(let a=0;a<i;a++){const c=Or(t,e,r.key,n),h=Or(t,e,r.value,n);s.set(c,h)}return s}return fo(t,r,n)}catch(s){throw s instanceof Mt&&s.addToFieldPath(e),s}}function fo(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new Mt(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,a]of t.get(e).fields)s[i]=Or(t,i,a,r);return new e(s)}if(n.kind==="enum"){const s=r.readU8();if(s>=n.values.length)throw new Mt(`Enum index: ${s} is out of range`);const[i,a]=n.values[s],c=Or(t,i,a,r);return new e({[i]:c})}throw new Mt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function vd(t,e,r,n=$t){const s=new n(r),i=fo(t,e,s);if(s.offset<r.length)throw new Mt(`Unexpected ${r.length-s.offset} bytes after deserialized data`);return i}var vc=yt.deserialize=vd;function bd(t,e,r,n=$t){const s=new n(r);return fo(t,e,s)}hc=yt.deserializeUnchecked=bd;var U={};Object.defineProperty(U,"__esModule",{value:!0});U.s16=U.s8=U.nu64be=U.u48be=U.u40be=U.u32be=U.u24be=U.u16be=gt=U.nu64=U.u48=U.u40=oe=U.u32=U.u24=Vt=U.u16=Be=U.u8=Dr=U.offset=U.greedy=U.Constant=U.UTF8=U.CString=U.Blob=U.Boolean=U.BitField=U.BitStructure=U.VariantLayout=U.Union=U.UnionLayoutDiscriminator=U.UnionDiscriminator=U.Structure=U.Sequence=U.DoubleBE=U.Double=U.FloatBE=U.Float=U.NearInt64BE=U.NearInt64=U.NearUInt64BE=U.NearUInt64=U.IntBE=U.Int=U.UIntBE=U.UInt=U.OffsetLayout=U.GreedyCount=U.ExternalLayout=U.bindConstructorLayout=U.nameWithProperty=U.Layout=U.uint8ArrayToBuffer=U.checkUint8Array=void 0;U.constant=U.utf8=U.cstr=Ce=U.blob=U.unionLayoutDiscriminator=U.union=Rt=U.seq=U.bits=ne=U.struct=U.f64be=U.f64=U.f32be=U.f32=U.ns64be=U.s48be=U.s40be=U.s32be=U.s24be=U.s16be=Ft=U.ns64=U.s48=U.s40=U.s32=U.s24=void 0;const lo=ve;function _n(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}U.checkUint8Array=_n;function Ae(t){return _n(t),lo.Buffer.from(t.buffer,t.byteOffset,t.length)}U.uint8ArrayToBuffer=Ae;class Ie{constructor(e,r){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=r}makeDestinationObject(){return{}}getSpan(e,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=e,r}fromArray(e){}}U.Layout=Ie;function ho(t,e){return e.property?t+"["+e.property+"]":t}U.nameWithProperty=ho;function xd(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Ie))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(r,n){return e.encode(this,r,n)},writable:!0}),Object.defineProperty(t,"decode",{value(r,n){return e.decode(r,n)},writable:!0})}U.bindConstructorLayout=xd;class Ut extends Ie{isCount(){throw new Error("ExternalLayout is abstract")}}U.ExternalLayout=Ut;class bc extends Ut{constructor(e=1,r){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=e}isCount(){return!0}decode(e,r=0){_n(e);const n=e.length-r;return Math.floor(n/this.elementSpan)}encode(e,r,n){return 0}}U.GreedyCount=bc;class po extends Ut{constructor(e,r=0,n){if(!(e instanceof Ie))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=r}isCount(){return this.layout instanceof Kt||this.layout instanceof Yt}decode(e,r=0){return this.layout.decode(e,r+this.offset)}encode(e,r,n=0){return this.layout.encode(e,r,n+this.offset)}}U.OffsetLayout=po;class Kt extends Ie{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return Ae(e).readUIntLE(r,this.span)}encode(e,r,n=0){return Ae(r).writeUIntLE(e,n,this.span),this.span}}U.UInt=Kt;class Yt extends Ie{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return Ae(e).readUIntBE(r,this.span)}encode(e,r,n=0){return Ae(r).writeUIntBE(e,n,this.span),this.span}}U.UIntBE=Yt;class Wr extends Ie{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return Ae(e).readIntLE(r,this.span)}encode(e,r,n=0){return Ae(r).writeIntLE(e,n,this.span),this.span}}U.Int=Wr;class En extends Ie{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return Ae(e).readIntBE(r,this.span)}encode(e,r,n=0){return Ae(r).writeIntBE(e,n,this.span),this.span}}U.IntBE=En;const $s=Math.pow(2,32);function ji(t){const e=Math.floor(t/$s),r=t-e*$s;return{hi32:e,lo32:r}}function zi(t,e){return t*$s+e}class xc extends Ie{constructor(e){super(8,e)}decode(e,r=0){const n=Ae(e),s=n.readUInt32LE(r),i=n.readUInt32LE(r+4);return zi(i,s)}encode(e,r,n=0){const s=ji(e),i=Ae(r);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}U.NearUInt64=xc;class _c extends Ie{constructor(e){super(8,e)}decode(e,r=0){const n=Ae(e),s=n.readUInt32BE(r),i=n.readUInt32BE(r+4);return zi(s,i)}encode(e,r,n=0){const s=ji(e),i=Ae(r);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}U.NearUInt64BE=_c;class Ec extends Ie{constructor(e){super(8,e)}decode(e,r=0){const n=Ae(e),s=n.readUInt32LE(r),i=n.readInt32LE(r+4);return zi(i,s)}encode(e,r,n=0){const s=ji(e),i=Ae(r);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}U.NearInt64=Ec;class Sc extends Ie{constructor(e){super(8,e)}decode(e,r=0){const n=Ae(e),s=n.readInt32BE(r),i=n.readUInt32BE(r+4);return zi(s,i)}encode(e,r,n=0){const s=ji(e),i=Ae(r);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}U.NearInt64BE=Sc;class Ac extends Ie{constructor(e){super(4,e)}decode(e,r=0){return Ae(e).readFloatLE(r)}encode(e,r,n=0){return Ae(r).writeFloatLE(e,n),4}}U.Float=Ac;class Bc extends Ie{constructor(e){super(4,e)}decode(e,r=0){return Ae(e).readFloatBE(r)}encode(e,r,n=0){return Ae(r).writeFloatBE(e,n),4}}U.FloatBE=Bc;class Ic extends Ie{constructor(e){super(8,e)}decode(e,r=0){return Ae(e).readDoubleLE(r)}encode(e,r,n=0){return Ae(r).writeDoubleLE(e,n),8}}U.Double=Ic;class kc extends Ie{constructor(e){super(8,e)}decode(e,r=0){return Ae(e).readDoubleBE(r)}encode(e,r,n=0){return Ae(r).writeDoubleBE(e,n),8}}U.DoubleBE=kc;class Mc extends Ie{constructor(e,r,n){if(!(e instanceof Ie))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof Ut&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(r instanceof Ut)&&0<e.span&&(s=r*e.span),super(s,n),this.elementLayout=e,this.count=r}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof Ut&&(s=s.decode(e,r)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(e,r+n),++i}return n}decode(e,r=0){const n=[];let s=0,i=this.count;for(i instanceof Ut&&(i=i.decode(e,r));s<i;)n.push(this.elementLayout.decode(e,r)),r+=this.elementLayout.getSpan(e,r),s+=1;return n}encode(e,r,n=0){const s=this.elementLayout,i=e.reduce((a,c)=>a+s.encode(c,r,n+a),0);return this.count instanceof Ut&&this.count.encode(e.length,r,n),i}}U.Sequence=Mc;class Rc extends Ie{constructor(e,r,n){if(!(Array.isArray(e)&&e.reduce((i,a)=>i&&a instanceof Ie,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,a)=>i+a.getSpan(),0)}catch{}super(s,r),this.fields=e,this.decodePrefixes=!!n}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const a=i.getSpan(e,r);return r+=a,s+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,r=0){_n(e);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(e,r)),r+=s.getSpan(e,r),this.decodePrefixes&&e.length===r)break;return n}encode(e,r,n=0){const s=n;let i=0,a=0;for(const c of this.fields){let h=c.span;if(a=0<h?h:0,c.property!==void 0){const v=e[c.property];v!==void 0&&(a=c.encode(v,r,n),0>h&&(h=c.getSpan(r,n)))}i=n,n+=h}return i+a-s}fromArray(e){const r=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(r[n.property]=e.shift());return r}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const r of this.fields)if(r.property===e)return r}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let r=0;for(const n of this.fields){if(n.property===e)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}}U.Structure=Rc;class mo{constructor(e){this.property=e}decode(e,r){throw new Error("UnionDiscriminator is abstract")}encode(e,r,n){throw new Error("UnionDiscriminator is abstract")}}U.UnionDiscriminator=mo;class Bi extends mo{constructor(e,r){if(!(e instanceof Ut&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||e.property||"variant"),this.layout=e}decode(e,r){return this.layout.decode(e,r)}encode(e,r,n){return this.layout.encode(e,r,n)}}U.UnionLayoutDiscriminator=Bi;class go extends Ie{constructor(e,r,n){let s;if(e instanceof Kt||e instanceof Yt)s=new Bi(new po(e));else if(e instanceof Ut&&e.isCount())s=new Bi(e);else if(e instanceof mo)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof Ie))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let i=-1;r&&(i=r.span,0<=i&&(e instanceof Kt||e instanceof Yt)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof Kt||e instanceof Yt,this.defaultLayout=r,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return a(c)},this.configGetSourceVariant=function(c){a=c.bind(this)}}getSpan(e,r=0){if(0<=this.span)return this.span;const n=this.getVariant(e,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,r)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const r=this.registry[e[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(e,r.property)))return r}else for(const r in this.registry){const n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,r=0){let n;const s=this.discriminator,i=s.decode(e,r),a=this.registry[i];if(a===void 0){const c=this.defaultLayout;let h=0;this.usesPrefixDiscriminator&&(h=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[c.property]=c.decode(e,r+h)}else n=a.decode(e,r);return n}encode(e,r,n=0){const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,a=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(e[i.property],r,n),c+a.encode(e[a.property],r,n+c)}return s.encode(e,r,n)}addVariant(e,r,n){const s=new Tc(this,e,r,n);return this.registry[e]=s,s}getVariant(e,r=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,r):n=e,this.registry[n]}}U.Union=go;class Tc extends Ie{constructor(e,r,n,s){if(!(e instanceof go))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Ie))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=n?n.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=r,this.layout=n||null}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,r+n)),n+s}decode(e,r=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,r))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,r+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,r,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let i=s;if(this.layout&&(this.layout.encode(e[this.property],r,n+s),i+=this.layout.getSpan(r,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}U.VariantLayout=Tc;function sn(t){return 0>t&&(t+=4294967296),t}class yo extends Ie{constructor(e,r,n){if(!(e instanceof Kt||e instanceof Yt))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!r,this.fields=[];let s=0;this._packedSetValue=function(i){return s=sn(i),this},this._packedGetValue=function(){return s}}decode(e,r=0){const n=this.makeDestinationObject(),s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(e));return n}encode(e,r,n=0){const s=this.word.decode(r,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const a=e[i.property];a!==void 0&&i.encode(a)}return this.word.encode(this._packedGetValue(),r,n)}addField(e,r){const n=new wo(this,e,r);return this.fields.push(n),n}addBoolean(e){const r=new Oc(this,e);return this.fields.push(r),r}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const r of this.fields)if(r.property===e)return r}}U.BitStructure=yo;class wo{constructor(e,r,n){if(!(e instanceof yo))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");const s=8*e.span,i=e.fields.reduce((a,c)=>a+c.bits,0);if(r+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=e,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-r),this.wordMask=sn(this.valueMask<<this.start),this.property=n}decode(e,r){const n=this.container._packedGetValue();return sn(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==sn(e&this.valueMask))throw new TypeError(ho("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const r=this.container._packedGetValue(),n=sn(e<<this.start);this.container._packedSetValue(sn(r&~this.wordMask)|n)}}U.BitField=wo;let Oc=class extends wo{constructor(e,r){super(e,1,r)}decode(e,r){return!!super.decode(e,r)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};U.Boolean=Oc;class Uc extends Ie{constructor(e,r){if(!(e instanceof Ut&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Ut||(n=e),super(n,r),this.length=e}getSpan(e,r){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),n}decode(e,r=0){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),Ae(e).slice(r,r+n)}encode(e,r,n){let s=this.length;if(this.length instanceof Ut&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(ho("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>r.length)throw new RangeError("encoding overruns Uint8Array");const i=Ae(e);return Ae(r).write(i.toString("hex"),n,s,"hex"),this.length instanceof Ut&&this.length.encode(s,r,n),s}}U.Blob=Uc;class Cc extends Ie{constructor(e){super(-1,e)}getSpan(e,r=0){_n(e);let n=r;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-r}decode(e,r=0){const n=this.getSpan(e,r);return Ae(e).slice(r,r+n-1).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));const s=lo.Buffer.from(e,"utf8"),i=s.length;if(n+i>r.length)throw new RangeError("encoding overruns Buffer");const a=Ae(r);return s.copy(a,n),a[n+i]=0,i+1}}U.CString=Cc;class Lc extends Ie{constructor(e,r){if(typeof e=="string"&&r===void 0&&(r=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=e}getSpan(e,r=0){return _n(e),e.length-r}decode(e,r=0){const n=this.getSpan(e,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Ae(e).slice(r,r+n).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));const s=lo.Buffer.from(e,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>r.length)throw new RangeError("encoding overruns Buffer");return s.copy(Ae(r),n),i}}U.UTF8=Lc;class Nc extends Ie{constructor(e,r){super(0,r),this.value=e}decode(e,r){return this.value}encode(e,r,n){return 0}}U.Constant=Nc;U.greedy=(t,e)=>new bc(t,e);var Dr=U.offset=(t,e,r)=>new po(t,e,r),Be=U.u8=t=>new Kt(1,t),Vt=U.u16=t=>new Kt(2,t);U.u24=t=>new Kt(3,t);var oe=U.u32=t=>new Kt(4,t);U.u40=t=>new Kt(5,t);U.u48=t=>new Kt(6,t);var gt=U.nu64=t=>new xc(t);U.u16be=t=>new Yt(2,t);U.u24be=t=>new Yt(3,t);U.u32be=t=>new Yt(4,t);U.u40be=t=>new Yt(5,t);U.u48be=t=>new Yt(6,t);U.nu64be=t=>new _c(t);U.s8=t=>new Wr(1,t);U.s16=t=>new Wr(2,t);U.s24=t=>new Wr(3,t);U.s32=t=>new Wr(4,t);U.s40=t=>new Wr(5,t);U.s48=t=>new Wr(6,t);var Ft=U.ns64=t=>new Ec(t);U.s16be=t=>new En(2,t);U.s24be=t=>new En(3,t);U.s32be=t=>new En(4,t);U.s40be=t=>new En(5,t);U.s48be=t=>new En(6,t);U.ns64be=t=>new Sc(t);U.f32=t=>new Ac(t);U.f32be=t=>new Bc(t);U.f64=t=>new Ic(t);U.f64be=t=>new kc(t);var ne=U.struct=(t,e,r)=>new Rc(t,e,r);U.bits=(t,e,r)=>new yo(t,e,r);var Rt=U.seq=(t,e,r)=>new Mc(t,e,r);U.union=(t,e,r)=>new go(t,e,r);U.unionLayoutDiscriminator=(t,e)=>new Bi(t,e);var Ce=U.blob=(t,e)=>new Uc(t,e);U.cstr=t=>new Cc(t);U.utf8=(t,e)=>new Lc(t,e);U.constant=(t,e)=>new Nc(t,e);var _d=8078e3,Ed=8078001,Sd=8078004,Ad=8078005,Bd=8078006,Id=8078011;function Fc(t){return Array.isArray(t)?"%5B"+t.map(Fc).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function kd([t,e]){return`${t}=${Fc(e)}`}function Md(t){const e=Object.entries(t).map(kd).join("&");return btoa(e)}function Rd(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${Md(e)}'`),`${r}\``}}var un=class extends Error{constructor(...[e,r]){let n,s;if(r){const{cause:a,...c}=r;a&&(s={cause:a}),Object.keys(c).length>0&&(n=c)}const i=Rd(e,n);super(i,s);Gt(this,"cause",this.cause);Gt(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function Td(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Od(t){return Object.freeze({...t,encode:e=>{const r=new Uint8Array(Td(e,t));return t.write(e,r,0),r}})}function Ud(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function rn(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Cd(t,e){if(rn(t)!==rn(e))throw new un(Sd);if(rn(t)&&rn(e)&&t.fixedSize!==e.fixedSize)throw new un(Ad,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!rn(t)&&!rn(e)&&t.maxSize!==e.maxSize)throw new un(Bd,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Ld(t,e,r=0){if(e.length-r<=0)throw new un(_d,{codecDescription:t})}function Nd(t,e,r,n=0){const s=r.length-n;if(s<e)throw new un(Ed,{bytesLength:s,codecDescription:t,expected:e})}function Fd(t,e,r,n){if(n<e||n>r)throw new un(Id,{codecDescription:t,max:r,min:e,value:n})}function Pc(t){return(t==null?void 0:t.endian)!==1}function Pd(t){return Od({fixedSize:t.size,write(e,r,n){t.range&&Fd(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,Pc(t.config)),r.set(new Uint8Array(s),n),n+t.size}})}function Dd(t){return Ud({fixedSize:t.size,read(e,r=0){Ld(t.name,e,r),Nd(t.name,t.size,e,r);const n=new DataView(jd(e,r,t.size));return[t.get(n,Pc(t.config)),r+t.size]}})}function jd(t,e,r){const n=t.byteOffset+(e??0),s=r??t.byteLength;return t.buffer.slice(n,n+s)}var zd=(t={})=>Pd({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),$d=(t={})=>Dd({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),Zd=(t={})=>Cd(zd(t),$d(t));class qd extends TypeError{constructor(e,r){let n;const{message:s,explanation:i,...a}=e,{path:c}=e,h=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??h),i!=null&&(this.cause=h),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function Vd(t){return Wn(t)&&typeof t[Symbol.iterator]=="function"}function Wn(t){return typeof t=="object"&&t!=null}function Ii(t){return Wn(t)&&!Array.isArray(t)}function Qt(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Kd(t){const{done:e,value:r}=t.next();return e?void 0:r}function Wd(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:a}=r,{refinement:c,message:h=`Expected a value of type \`${a}\`${c?` with refinement \`${c}\``:""}, but received: \`${Qt(n)}\``}=t;return{value:n,type:a,refinement:c,key:s[s.length-1],path:s,branch:i,...t,message:h}}function*la(t,e,r,n){Vd(t)||(t=[t]);for(const s of t){const i=Wd(s,e,r,n);i&&(yield i)}}function*vo(t,e,r={}){const{path:n=[],branch:s=[t],coerce:i=!1,mask:a=!1}=r,c={path:n,branch:s,mask:a};i&&(t=e.coercer(t,c));let h="valid";for(const v of e.validator(t,c))v.explanation=r.message,h="not_valid",yield[v,void 0];for(let[v,S,k]of e.entries(t,c)){const A=vo(S,k,{path:v===void 0?n:[...n,v],branch:v===void 0?s:[...s,S],coerce:i,mask:a,message:r.message});for(const I of A)I[0]?(h=I[0].refinement!=null?"not_refined":"not_valid",yield[I[0],void 0]):i&&(S=I[1],v===void 0?t=S:t instanceof Map?t.set(v,S):t instanceof Set?t.add(S):Wn(t)&&(S!==void 0||v in t)&&(t[v]=S))}if(h!=="not_valid")for(const v of e.refiner(t,c))v.explanation=r.message,h="not_refined",yield[v,void 0];h==="valid"&&(yield[void 0,t])}let cr=class{constructor(e){const{type:r,schema:n,validator:s,refiner:i,coercer:a=h=>h,entries:c=function*(){}}=e;this.type=r,this.schema=n,this.entries=c,this.coercer=a,s?this.validator=(h,v)=>{const S=s(h,v);return la(S,v,this,h)}:this.validator=()=>[],i?this.refiner=(h,v)=>{const S=i(h,v);return la(S,v,this,h)}:this.refiner=()=>[]}assert(e,r){return Hd(e,this,r)}create(e,r){return Rn(e,this,r)}is(e){return Dc(e,this)}mask(e,r){return Gd(e,this,r)}validate(e,r={}){return Hn(e,this,r)}};function Hd(t,e,r){const n=Hn(t,e,{message:r});if(n[0])throw n[0]}function Rn(t,e,r){const n=Hn(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Gd(t,e,r){const n=Hn(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function Dc(t,e){return!Hn(t,e)[0]}function Hn(t,e,r={}){const n=vo(t,e,r),s=Kd(n);return s[0]?[new qd(s[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function Hr(t,e){return new cr({type:t,schema:null,validator:e})}function Jd(){return Hr("any",()=>!0)}function J(t){return new cr({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Qt(e)}`}})}function sr(){return Hr("boolean",t=>typeof t=="boolean")}function bo(t){return Hr("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Qt(e)}`)}function Pe(t){const e=Qt(t),r=typeof t;return new cr({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${Qt(n)}`}})}function Yd(){return Hr("never",()=>!1)}function Y(t){return new cr({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function O(){return Hr("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Qt(t)}`)}function se(t){return new cr({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function jc(t,e){return new cr({type:"record",schema:null,*entries(r){if(Wn(r))for(const n in r){const s=r[n];yield[n,n,t],yield[n,s,e]}},validator(r){return Ii(r)||`Expected an object, but received: ${Qt(r)}`},coercer(r){return Ii(r)?{...r}:r}})}function q(){return Hr("string",t=>typeof t=="string"||`Expected a string, but received: ${Qt(t)}`)}function xo(t){const e=Yd();return new cr({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],t[s]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${Qt(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function j(t){const e=Object.keys(t);return new cr({type:"type",schema:t,*entries(r){if(Wn(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return Ii(r)||`Expected an object, but received: ${Qt(r)}`},coercer(r){return Ii(r)?{...r}:r}})}function Tt(t){const e=t.map(r=>r.type).join(" | ");return new cr({type:"union",schema:null,coercer(r,n){for(const s of t){const[i,a]=s.validate(r,{coerce:!0,mask:n.mask});if(!i)return a}return r},validator(r,n){const s=[];for(const i of t){const[...a]=vo(r,i,n),[c]=a;if(c[0])for(const[h]of a)h&&s.push(h);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Qt(r)}`,...s]}})}function Sn(){return Hr("unknown",()=>!0)}function Gn(t,e,r){return new cr({...t,coercer:(n,s)=>Dc(n,e)?t.coercer(r(n,s),s):t.coercer(n,s)})}var ni,Xd=new Uint8Array(16);function zc(){if(!ni&&(ni=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ni))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ni(Xd)}const Qd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $i(t){return typeof t=="string"&&Qd.test(t)}var mt=[];for(var Ss=0;Ss<256;++Ss)mt.push((Ss+256).toString(16).substr(1));function Zi(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(mt[t[e+0]]+mt[t[e+1]]+mt[t[e+2]]+mt[t[e+3]]+"-"+mt[t[e+4]]+mt[t[e+5]]+"-"+mt[t[e+6]]+mt[t[e+7]]+"-"+mt[t[e+8]]+mt[t[e+9]]+"-"+mt[t[e+10]]+mt[t[e+11]]+mt[t[e+12]]+mt[t[e+13]]+mt[t[e+14]]+mt[t[e+15]]).toLowerCase();if(!$i(r))throw TypeError("Stringified UUID is invalid");return r}var da,As,Bs=0,Is=0;function eh(t,e,r){var n=e&&r||0,s=e||new Array(16);t=t||{};var i=t.node||da,a=t.clockseq!==void 0?t.clockseq:As;if(i==null||a==null){var c=t.random||(t.rng||zc)();i==null&&(i=da=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),a==null&&(a=As=(c[6]<<8|c[7])&16383)}var h=t.msecs!==void 0?t.msecs:Date.now(),v=t.nsecs!==void 0?t.nsecs:Is+1,S=h-Bs+(v-Is)/1e4;if(S<0&&t.clockseq===void 0&&(a=a+1&16383),(S<0||h>Bs)&&t.nsecs===void 0&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Bs=h,Is=v,As=a,h+=122192928e5;var k=((h&268435455)*1e4+v)%4294967296;s[n++]=k>>>24&255,s[n++]=k>>>16&255,s[n++]=k>>>8&255,s[n++]=k&255;var A=h/4294967296*1e4&268435455;s[n++]=A>>>8&255,s[n++]=A&255,s[n++]=A>>>24&15|16,s[n++]=A>>>16&255,s[n++]=a>>>8|128,s[n++]=a&255;for(var I=0;I<6;++I)s[n+I]=i[I];return e||Zi(s)}function $c(t){if(!$i(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function th(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var rh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",nh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Zc(t,e,r){function n(s,i,a,c){if(typeof s=="string"&&(s=th(s)),typeof i=="string"&&(i=$c(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+s.length);if(h.set(i),h.set(s,i.length),h=r(h),h[6]=h[6]&15|e,h[8]=h[8]&63|128,a){c=c||0;for(var v=0;v<16;++v)a[c+v]=h[v];return a}return Zi(h)}try{n.name=t}catch{}return n.DNS=rh,n.URL=nh,n}function ih(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return sh(oh(ah(t),t.length*8))}function sh(t){for(var e=[],r=t.length*32,n="0123456789abcdef",s=0;s<r;s+=8){var i=t[s>>5]>>>s%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(a)}return e}function qc(t){return(t+64>>>9<<4)+14+1}function oh(t,e){t[e>>5]|=128<<e%32,t[qc(e)-1]=e;for(var r=1732584193,n=-271733879,s=-1732584194,i=271733878,a=0;a<t.length;a+=16){var c=r,h=n,v=s,S=i;r=xt(r,n,s,i,t[a],7,-680876936),i=xt(i,r,n,s,t[a+1],12,-389564586),s=xt(s,i,r,n,t[a+2],17,606105819),n=xt(n,s,i,r,t[a+3],22,-1044525330),r=xt(r,n,s,i,t[a+4],7,-176418897),i=xt(i,r,n,s,t[a+5],12,1200080426),s=xt(s,i,r,n,t[a+6],17,-1473231341),n=xt(n,s,i,r,t[a+7],22,-45705983),r=xt(r,n,s,i,t[a+8],7,1770035416),i=xt(i,r,n,s,t[a+9],12,-1958414417),s=xt(s,i,r,n,t[a+10],17,-42063),n=xt(n,s,i,r,t[a+11],22,-1990404162),r=xt(r,n,s,i,t[a+12],7,1804603682),i=xt(i,r,n,s,t[a+13],12,-40341101),s=xt(s,i,r,n,t[a+14],17,-1502002290),n=xt(n,s,i,r,t[a+15],22,1236535329),r=_t(r,n,s,i,t[a+1],5,-165796510),i=_t(i,r,n,s,t[a+6],9,-1069501632),s=_t(s,i,r,n,t[a+11],14,643717713),n=_t(n,s,i,r,t[a],20,-373897302),r=_t(r,n,s,i,t[a+5],5,-701558691),i=_t(i,r,n,s,t[a+10],9,38016083),s=_t(s,i,r,n,t[a+15],14,-660478335),n=_t(n,s,i,r,t[a+4],20,-405537848),r=_t(r,n,s,i,t[a+9],5,568446438),i=_t(i,r,n,s,t[a+14],9,-1019803690),s=_t(s,i,r,n,t[a+3],14,-187363961),n=_t(n,s,i,r,t[a+8],20,1163531501),r=_t(r,n,s,i,t[a+13],5,-1444681467),i=_t(i,r,n,s,t[a+2],9,-51403784),s=_t(s,i,r,n,t[a+7],14,1735328473),n=_t(n,s,i,r,t[a+12],20,-1926607734),r=Et(r,n,s,i,t[a+5],4,-378558),i=Et(i,r,n,s,t[a+8],11,-2022574463),s=Et(s,i,r,n,t[a+11],16,1839030562),n=Et(n,s,i,r,t[a+14],23,-35309556),r=Et(r,n,s,i,t[a+1],4,-1530992060),i=Et(i,r,n,s,t[a+4],11,1272893353),s=Et(s,i,r,n,t[a+7],16,-155497632),n=Et(n,s,i,r,t[a+10],23,-1094730640),r=Et(r,n,s,i,t[a+13],4,681279174),i=Et(i,r,n,s,t[a],11,-358537222),s=Et(s,i,r,n,t[a+3],16,-722521979),n=Et(n,s,i,r,t[a+6],23,76029189),r=Et(r,n,s,i,t[a+9],4,-640364487),i=Et(i,r,n,s,t[a+12],11,-421815835),s=Et(s,i,r,n,t[a+15],16,530742520),n=Et(n,s,i,r,t[a+2],23,-995338651),r=St(r,n,s,i,t[a],6,-198630844),i=St(i,r,n,s,t[a+7],10,1126891415),s=St(s,i,r,n,t[a+14],15,-1416354905),n=St(n,s,i,r,t[a+5],21,-57434055),r=St(r,n,s,i,t[a+12],6,1700485571),i=St(i,r,n,s,t[a+3],10,-1894986606),s=St(s,i,r,n,t[a+10],15,-1051523),n=St(n,s,i,r,t[a+1],21,-2054922799),r=St(r,n,s,i,t[a+8],6,1873313359),i=St(i,r,n,s,t[a+15],10,-30611744),s=St(s,i,r,n,t[a+6],15,-1560198380),n=St(n,s,i,r,t[a+13],21,1309151649),r=St(r,n,s,i,t[a+4],6,-145523070),i=St(i,r,n,s,t[a+11],10,-1120210379),s=St(s,i,r,n,t[a+2],15,718787259),n=St(n,s,i,r,t[a+9],21,-343485551),r=Ir(r,c),n=Ir(n,h),s=Ir(s,v),i=Ir(i,S)}return[r,n,s,i]}function ah(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(qc(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function Ir(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function ch(t,e){return t<<e|t>>>32-e}function qi(t,e,r,n,s,i){return Ir(ch(Ir(Ir(e,t),Ir(n,i)),s),r)}function xt(t,e,r,n,s,i,a){return qi(e&r|~e&n,t,e,s,i,a)}function _t(t,e,r,n,s,i,a){return qi(e&n|r&~n,t,e,s,i,a)}function Et(t,e,r,n,s,i,a){return qi(e^r^n,t,e,s,i,a)}function St(t,e,r,n,s,i,a){return qi(r^(e|~n),t,e,s,i,a)}var uh=Zc("v3",48,ih);function fh(t,e,r){t=t||{};var n=t.random||(t.rng||zc)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return Zi(n)}function lh(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function ks(t,e){return t<<e|t>>>32-e}function dh(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var s=0;s<n.length;++s)t.push(n.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,a=Math.ceil(i/16),c=new Array(a),h=0;h<a;++h){for(var v=new Uint32Array(16),S=0;S<16;++S)v[S]=t[h*64+S*4]<<24|t[h*64+S*4+1]<<16|t[h*64+S*4+2]<<8|t[h*64+S*4+3];c[h]=v}c[a-1][14]=(t.length-1)*8/Math.pow(2,32),c[a-1][14]=Math.floor(c[a-1][14]),c[a-1][15]=(t.length-1)*8&4294967295;for(var k=0;k<a;++k){for(var A=new Uint32Array(80),I=0;I<16;++I)A[I]=c[k][I];for(var R=16;R<80;++R)A[R]=ks(A[R-3]^A[R-8]^A[R-14]^A[R-16],1);for(var C=r[0],L=r[1],N=r[2],z=r[3],P=r[4],G=0;G<80;++G){var Q=Math.floor(G/20),ie=ks(C,5)+lh(Q,L,N,z)+P+e[Q]+A[G]>>>0;P=z,z=N,N=ks(L,30)>>>0,L=C,C=ie}r[0]=r[0]+C>>>0,r[1]=r[1]+L>>>0,r[2]=r[2]+N>>>0,r[3]=r[3]+z>>>0,r[4]=r[4]+P>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var hh=Zc("v5",80,dh);const ph="00000000-0000-0000-0000-000000000000";function mh(t){if(!$i(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const gh=Object.freeze(Object.defineProperty({__proto__:null,NIL:ph,parse:$c,stringify:Zi,v1:eh,v3:uh,v4:fh,v5:hh,validate:$i,version:mh},Symbol.toStringTag,{value:"Module"})),Vc=Hs(gh),yh=Vc.v4,wh=function(t,e,r,n){if(typeof t!="string")throw new TypeError(t+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:t};if(s===2&&(i.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");i.params=e}if(typeof r>"u"){const a=typeof n.generator=="function"?n.generator:function(){return yh()};i.id=a(i,n)}else s===2&&r===null?n.notificationIdNull&&(i.id=null):i.id=r;return i};var vh=wh;const bh=Vc.v4,xh=vh,ki=function(t,e){if(!(this instanceof ki))return new ki(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return bh()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};ki.prototype.request=function(t,e,r,n){const s=this;let i=null;const a=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&t&&typeof t=="object"&&typeof e=="function")n=e,i=t;else{typeof r=="function"&&(n=r,r=void 0);const v=typeof n=="function";try{i=xh(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(v)return n(S);throw S}if(!v)return i}let h;try{h=JSON.stringify(i,this.options.replacer)}catch(v){return n(v)}return this.callServer(h,function(v,S){s._parseResponse(v,S,n)}),i};ki.prototype._parseResponse=function(t,e,r){if(t){r(t);return}if(!e)return r();let n;try{n=JSON.parse(e,this.options.reviver)}catch(s){return r(s)}if(r.length===3)if(Array.isArray(n)){const s=function(a){return typeof a.error<"u"},i=function(a){return!s(a)};return r(null,n.filter(s),n.filter(i))}else return r(null,n.error,n.result);r(null,n)};var Kc={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(h,v,S){this.fn=h,this.context=v,this.once=S||!1}function i(h,v,S,k,A){if(typeof S!="function")throw new TypeError("The listener must be a function");var I=new s(S,k||h,A),R=r?r+v:v;return h._events[R]?h._events[R].fn?h._events[R]=[h._events[R],I]:h._events[R].push(I):(h._events[R]=I,h._eventsCount++),h}function a(h,v){--h._eventsCount===0?h._events=new n:delete h._events[v]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var v=[],S,k;if(this._eventsCount===0)return v;for(k in S=this._events)e.call(S,k)&&v.push(r?k.slice(1):k);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(S)):v},c.prototype.listeners=function(v){var S=r?r+v:v,k=this._events[S];if(!k)return[];if(k.fn)return[k.fn];for(var A=0,I=k.length,R=new Array(I);A<I;A++)R[A]=k[A].fn;return R},c.prototype.listenerCount=function(v){var S=r?r+v:v,k=this._events[S];return k?k.fn?1:k.length:0},c.prototype.emit=function(v,S,k,A,I,R){var C=r?r+v:v;if(!this._events[C])return!1;var L=this._events[C],N=arguments.length,z,P;if(L.fn){switch(L.once&&this.removeListener(v,L.fn,void 0,!0),N){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,S),!0;case 3:return L.fn.call(L.context,S,k),!0;case 4:return L.fn.call(L.context,S,k,A),!0;case 5:return L.fn.call(L.context,S,k,A,I),!0;case 6:return L.fn.call(L.context,S,k,A,I,R),!0}for(P=1,z=new Array(N-1);P<N;P++)z[P-1]=arguments[P];L.fn.apply(L.context,z)}else{var G=L.length,Q;for(P=0;P<G;P++)switch(L[P].once&&this.removeListener(v,L[P].fn,void 0,!0),N){case 1:L[P].fn.call(L[P].context);break;case 2:L[P].fn.call(L[P].context,S);break;case 3:L[P].fn.call(L[P].context,S,k);break;case 4:L[P].fn.call(L[P].context,S,k,A);break;default:if(!z)for(Q=1,z=new Array(N-1);Q<N;Q++)z[Q-1]=arguments[Q];L[P].fn.apply(L[P].context,z)}}return!0},c.prototype.on=function(v,S,k){return i(this,v,S,k,!1)},c.prototype.once=function(v,S,k){return i(this,v,S,k,!0)},c.prototype.removeListener=function(v,S,k,A){var I=r?r+v:v;if(!this._events[I])return this;if(!S)return a(this,I),this;var R=this._events[I];if(R.fn)R.fn===S&&(!A||R.once)&&(!k||R.context===k)&&a(this,I);else{for(var C=0,L=[],N=R.length;C<N;C++)(R[C].fn!==S||A&&!R[C].once||k&&R[C].context!==k)&&L.push(R[C]);L.length?this._events[I]=L.length===1?L[0]:L:a(this,I)}return this},c.prototype.removeAllListeners=function(v){var S;return v?(S=r?r+v:v,this._events[S]&&a(this,S)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(Kc);var _h=Kc.exports;const Wc=Gs(_h);class Hc extends Da{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Fa(e);const n=ro(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),pn(i)}update(e){return wi(this),this.iHash.update(e),this}digestInto(e){wi(this),Vr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:a,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=c,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Gc=(t,e,r)=>new Hc(t,e).update(r).digest();Gc.create=(t,e)=>new Hc(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ha=(t,e)=>(t+(t>=0?e:-e)/Jc)/e;function Eh(t,e,r){const[[n,s],[i,a]]=e,c=ha(a*t,r),h=ha(-s*t,r);let v=t-c*n-h*i,S=-c*s-h*a;const k=v<mr,A=S<mr;k&&(v=-v),A&&(S=-S);const I=qn(Math.ceil(Ka(r)/2))+fn;if(v<mr||v>=I||S<mr||S>=I)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:k,k1:v,k2neg:A,k2:S}}function Zs(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Ms(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return qr(r.lowS,"lowS"),qr(r.prehash,"prehash"),r.format!==void 0&&Zs(r.format),r}class Sh extends Error{constructor(e=""){super(e)}}const dr={Err:Sh,_tlv:{encode:(t,e)=>{const{Err:r}=dr;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=ti(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?ti(s.length/2|128):"";return ti(t)+i+s+e},decode(t,e){const{Err:r}=dr;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let a=0;if(!i)a=s;else{const h=s&127;if(!h)throw new r("tlv.decode(long): indefinite length not supported");if(h>4)throw new r("tlv.decode(long): byte length is too big");const v=e.subarray(n,n+h);if(v.length!==h)throw new r("tlv.decode: length bytes not complete");if(v[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const S of v)a=a<<8|S;if(n+=h,a<128)throw new r("tlv.decode(long): not minimal encoding")}const c=e.subarray(n,n+a);if(c.length!==a)throw new r("tlv.decode: wrong value length");return{v:c,l:e.subarray(n+a)}}},_int:{encode(t){const{Err:e}=dr;if(t<mr)throw new e("integer: negative integers are not allowed");let r=ti(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=dr;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Pi(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=dr,s=Ve("signature",t),{v:i,l:a}=n.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:h}=n.decode(2,i),{v,l:S}=n.decode(2,h);if(S.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(c),s:r.decode(v)}},hexFromSig(t){const{_tlv:e,_int:r}=dr,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},mr=BigInt(0),fn=BigInt(1),Jc=BigInt(2),ii=BigInt(3),Ah=BigInt(4);function an(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let s=Ve("private key",e);try{n=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function Bh(t,e={}){const r=cc("weierstrass",t,e),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:a,n:c}=i;Vn(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:h}=e;if(h&&(!n.is0(i.a)||typeof h.beta!="bigint"||!Array.isArray(h.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const v=Xc(n,s);function S(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function k(X,g,o){const{x:d,y:p}=g.toAffine(),w=n.toBytes(d);if(qr(o,"isCompressed"),o){S();const x=!n.isOdd(p);return nr(Yc(x),w)}else return nr(Uint8Array.of(4),w,n.toBytes(p))}function A(X){Jt(X,void 0,"Point");const{publicKey:g,publicKeyUncompressed:o}=v,d=X.length,p=X[0],w=X.subarray(1);if(d===g&&(p===2||p===3)){const x=n.fromBytes(w);if(!n.isValid(x))throw new Error("bad point: is not on curve, wrong x");const E=C(x);let B;try{B=n.sqrt(E)}catch(_){const V=_ instanceof Error?": "+_.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}S();const y=n.isOdd(B);return(p&1)===1!==y&&(B=n.neg(B)),{x,y:B}}else if(d===o&&p===4){const x=n.BYTES,E=n.fromBytes(w.subarray(0,x)),B=n.fromBytes(w.subarray(x,x*2));if(!L(E,B))throw new Error("bad point: is not on curve");return{x:E,y:B}}else throw new Error(`bad point: got length ${d}, expected compressed=${g} or uncompressed=${o}`)}const I=e.toBytes||k,R=e.fromBytes||A;function C(X){const g=n.sqr(X),o=n.mul(g,X);return n.add(n.add(o,n.mul(X,i.a)),i.b)}function L(X,g){const o=n.sqr(g),d=C(X);return n.eql(o,d)}if(!L(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const N=n.mul(n.pow(i.a,ii),Ah),z=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(N,z)))throw new Error("bad curve params: a or b");function P(X,g,o=!1){if(!n.isValid(g)||o&&n.is0(g))throw new Error(`bad point coordinate ${X}`);return g}function G(X){if(!(X instanceof D))throw new Error("ProjectivePoint expected")}function Q(X){if(!h||!h.basises)throw new Error("no endo");return Eh(X,h.basises,s.ORDER)}const ie=bi((X,g)=>{const{X:o,Y:d,Z:p}=X;if(n.eql(p,n.ONE))return{x:o,y:d};const w=X.is0();g==null&&(g=w?n.ONE:n.inv(p));const x=n.mul(o,g),E=n.mul(d,g),B=n.mul(p,g);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x,y:E}}),fe=bi(X=>{if(X.is0()){if(e.allowInfinityPoint&&!n.is0(X.Y))return;throw new Error("bad point: ZERO")}const{x:g,y:o}=X.toAffine();if(!n.isValid(g)||!n.isValid(o))throw new Error("bad point: x or y not field elements");if(!L(g,o))throw new Error("bad point: equation left != right");if(!X.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ce(X,g,o,d,p){return o=new D(n.mul(o.X,X),o.Y,o.Z),g=xi(d,g),o=xi(p,o),g.add(o)}class D{constructor(g,o,d){this.X=P("x",g),this.Y=P("y",o,!0),this.Z=P("z",d),Object.freeze(this)}static CURVE(){return i}static fromAffine(g){const{x:o,y:d}=g||{};if(!g||!n.isValid(o)||!n.isValid(d))throw new Error("invalid affine point");if(g instanceof D)throw new Error("projective point not allowed");return n.is0(o)&&n.is0(d)?D.ZERO:new D(o,d,n.ONE)}static fromBytes(g){const o=D.fromAffine(R(Jt(g,void 0,"point")));return o.assertValidity(),o}static fromHex(g){return D.fromBytes(Ve("pointHex",g))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(g=8,o=!0){return W.createCache(this,g),o||this.multiply(ii),this}assertValidity(){fe(this)}hasEvenY(){const{y:g}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(g)}equals(g){G(g);const{X:o,Y:d,Z:p}=this,{X:w,Y:x,Z:E}=g,B=n.eql(n.mul(o,E),n.mul(w,p)),y=n.eql(n.mul(d,E),n.mul(x,p));return B&&y}negate(){return new D(this.X,n.neg(this.Y),this.Z)}double(){const{a:g,b:o}=i,d=n.mul(o,ii),{X:p,Y:w,Z:x}=this;let E=n.ZERO,B=n.ZERO,y=n.ZERO,f=n.mul(p,p),_=n.mul(w,w),V=n.mul(x,x),Z=n.mul(p,w);return Z=n.add(Z,Z),y=n.mul(p,x),y=n.add(y,y),E=n.mul(g,y),B=n.mul(d,V),B=n.add(E,B),E=n.sub(_,B),B=n.add(_,B),B=n.mul(E,B),E=n.mul(Z,E),y=n.mul(d,y),V=n.mul(g,V),Z=n.sub(f,V),Z=n.mul(g,Z),Z=n.add(Z,y),y=n.add(f,f),f=n.add(y,f),f=n.add(f,V),f=n.mul(f,Z),B=n.add(B,f),V=n.mul(w,x),V=n.add(V,V),f=n.mul(V,Z),E=n.sub(E,f),y=n.mul(V,_),y=n.add(y,y),y=n.add(y,y),new D(E,B,y)}add(g){G(g);const{X:o,Y:d,Z:p}=this,{X:w,Y:x,Z:E}=g;let B=n.ZERO,y=n.ZERO,f=n.ZERO;const _=i.a,V=n.mul(i.b,ii);let Z=n.mul(o,w),H=n.mul(d,x),be=n.mul(p,E),le=n.add(o,d),ae=n.add(w,x);le=n.mul(le,ae),ae=n.add(Z,H),le=n.sub(le,ae),ae=n.add(o,p);let De=n.add(w,E);return ae=n.mul(ae,De),De=n.add(Z,be),ae=n.sub(ae,De),De=n.add(d,p),B=n.add(x,E),De=n.mul(De,B),B=n.add(H,be),De=n.sub(De,B),f=n.mul(_,ae),B=n.mul(V,be),f=n.add(B,f),B=n.sub(H,f),f=n.add(H,f),y=n.mul(B,f),H=n.add(Z,Z),H=n.add(H,Z),be=n.mul(_,be),ae=n.mul(V,ae),H=n.add(H,be),be=n.sub(Z,be),be=n.mul(_,be),ae=n.add(ae,be),Z=n.mul(H,ae),y=n.add(y,Z),Z=n.mul(De,ae),B=n.mul(le,B),B=n.sub(B,Z),Z=n.mul(le,H),f=n.mul(De,f),f=n.add(f,Z),new D(B,y,f)}subtract(g){return this.add(g.negate())}is0(){return this.equals(D.ZERO)}multiply(g){const{endo:o}=e;if(!s.isValidNot0(g))throw new Error("invalid scalar: out of range");let d,p;const w=x=>W.cached(this,x,E=>Nr(D,E));if(o){const{k1neg:x,k1:E,k2neg:B,k2:y}=Q(g),{p:f,f:_}=w(E),{p:V,f:Z}=w(y);p=_.add(Z),d=ce(o.beta,f,V,x,B)}else{const{p:x,f:E}=w(g);d=x,p=E}return Nr(D,[d,p])[0]}multiplyUnsafe(g){const{endo:o}=e,d=this;if(!s.isValid(g))throw new Error("invalid scalar: out of range");if(g===mr||d.is0())return D.ZERO;if(g===fn)return d;if(W.hasCache(this))return this.multiply(g);if(o){const{k1neg:p,k1:w,k2neg:x,k2:E}=Q(g),{p1:B,p2:y}=Cl(D,d,w,E);return ce(o.beta,B,y,p,x)}else return W.unsafe(d,g)}multiplyAndAddUnsafe(g,o,d){const p=this.multiplyUnsafe(o).add(g.multiplyUnsafe(d));return p.is0()?void 0:p}toAffine(g){return ie(this,g)}isTorsionFree(){const{isTorsionFree:g}=e;return a===fn?!0:g?g(D,this):W.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:g}=e;return a===fn?this:g?g(D,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(g=!0){return qr(g,"isCompressed"),this.assertValidity(),I(D,this,g)}toHex(g=!0){return Pr(this.toBytes(g))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(g=!0){return this.toBytes(g)}_setWindowSize(g){this.precompute(g)}static normalizeZ(g){return Nr(D,g)}static msm(g,o){return ac(D,s,g,o)}static fromPrivateKey(g){return D.BASE.multiply(an(s,g))}}D.BASE=new D(i.Gx,i.Gy,n.ONE),D.ZERO=new D(n.ZERO,n.ONE,n.ZERO),D.Fp=n,D.Fn=s;const te=s.BITS,W=new oc(D,e.endo?Math.ceil(te/2):te);return D.BASE.precompute(8),D}function Yc(t){return Uint8Array.of(t?2:3)}function Xc(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Ih(t,e={}){const{Fn:r}=t,n=e.randomBytes||no,s=Object.assign(Xc(t.Fp,r),{seed:nc(r.ORDER)});function i(I){try{return!!an(r,I)}catch{return!1}}function a(I,R){const{publicKey:C,publicKeyUncompressed:L}=s;try{const N=I.length;return R===!0&&N!==C||R===!1&&N!==L?!1:!!t.fromBytes(I)}catch{return!1}}function c(I=n(s.seed)){return Tl(Jt(I,s.seed,"seed"),r.ORDER)}function h(I,R=!0){return t.BASE.multiply(an(r,I)).toBytes(R)}function v(I){const R=c(I);return{secretKey:R,publicKey:h(R)}}function S(I){if(typeof I=="bigint")return!1;if(I instanceof t)return!0;const{secretKey:R,publicKey:C,publicKeyUncompressed:L}=s;if(r.allowedLengths||R===C)return;const N=Ve("key",I).length;return N===C||N===L}function k(I,R,C=!0){if(S(I)===!0)throw new Error("first arg must be private key");if(S(R)===!1)throw new Error("second arg must be public key");const L=an(r,I);return t.fromHex(R).multiply(L).toBytes(C)}return Object.freeze({getPublicKey:h,getSharedSecret:k,keygen:v,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:a,randomSecretKey:c,isValidPrivateKey:i,randomPrivateKey:c,normPrivateKeyToScalar:I=>an(r,I),precompute(I=8,R=t.BASE){return R.precompute(I,!1)}},lengths:s})}function kh(t,e,r={}){Fa(e),Vn(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||no,s=r.hmac||((o,...d)=>Gc(e,o,nr(...d))),{Fp:i,Fn:a}=t,{ORDER:c,BITS:h}=a,{keygen:v,getPublicKey:S,getSharedSecret:k,utils:A,lengths:I}=Ih(t,r),R={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},C="compact";function L(o){const d=c>>fn;return o>d}function N(o,d){if(!a.isValidNot0(d))throw new Error(`invalid signature ${o}: out of range 1..Point.Fn.ORDER`);return d}function z(o,d){Zs(d);const p=I.signature,w=d==="compact"?p:d==="recovered"?p+1:void 0;return Jt(o,w,`${d} signature`)}class P{constructor(d,p,w){this.r=N("r",d),this.s=N("s",p),w!=null&&(this.recovery=w),Object.freeze(this)}static fromBytes(d,p=C){z(d,p);let w;if(p==="der"){const{r:y,s:f}=dr.toSig(Jt(d));return new P(y,f)}p==="recovered"&&(w=d[0],p="compact",d=d.subarray(1));const x=a.BYTES,E=d.subarray(0,x),B=d.subarray(x,x*2);return new P(a.fromBytes(E),a.fromBytes(B),w)}static fromHex(d,p){return this.fromBytes(vi(d),p)}addRecoveryBit(d){return new P(this.r,this.s,d)}recoverPublicKey(d){const p=i.ORDER,{r:w,s:x,recovery:E}=this;if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");if(c*Jc<p&&E>1)throw new Error("recovery id is ambiguous for h>1 curve");const y=E===2||E===3?w+c:w;if(!i.isValid(y))throw new Error("recovery id 2 or 3 invalid");const f=i.toBytes(y),_=t.fromBytes(nr(Yc((E&1)===0),f)),V=a.inv(y),Z=Q(Ve("msgHash",d)),H=a.create(-Z*V),be=a.create(x*V),le=t.BASE.multiplyUnsafe(H).add(_.multiplyUnsafe(be));if(le.is0())throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return L(this.s)}toBytes(d=C){if(Zs(d),d==="der")return vi(dr.hexFromSig(this));const p=a.toBytes(this.r),w=a.toBytes(this.s);if(d==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return nr(Uint8Array.of(this.recovery),p,w)}return nr(p,w)}toHex(d){return Pr(this.toBytes(d))}assertValidity(){}static fromCompact(d){return P.fromBytes(Ve("sig",d),"compact")}static fromDER(d){return P.fromBytes(Ve("sig",d),"der")}normalizeS(){return this.hasHighS()?new P(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Pr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Pr(this.toBytes("compact"))}}const G=r.bits2int||function(d){if(d.length>8192)throw new Error("input is too large");const p=Pi(d),w=d.length*8-h;return w>0?p>>BigInt(w):p},Q=r.bits2int_modN||function(d){return a.create(G(d))},ie=qn(h);function fe(o){return js("num < 2^"+h,o,mr,ie),a.toBytes(o)}function ce(o,d){return Jt(o,void 0,"message"),d?Jt(e(o),void 0,"prehashed message"):o}function D(o,d,p){if(["recovered","canonical"].some(H=>H in p))throw new Error("sign() legacy options not supported");const{lowS:w,prehash:x,extraEntropy:E}=Ms(p,R);o=ce(o,x);const B=Q(o),y=an(a,d),f=[fe(y),fe(B)];if(E!=null&&E!==!1){const H=E===!0?n(I.secretKey):E;f.push(Ve("extraEntropy",H))}const _=nr(...f),V=B;function Z(H){const be=G(H);if(!a.isValidNot0(be))return;const le=a.inv(be),ae=t.BASE.multiply(be).toAffine(),De=a.create(ae.x);if(De===mr)return;const ke=a.create(le*a.create(V+De*y));if(ke===mr)return;let Me=(ae.x===De?0:2)|Number(ae.y&fn),Zt=ke;return w&&L(ke)&&(Zt=a.neg(ke),Me^=1),new P(De,Zt,Me)}return{seed:_,k2sig:Z}}function te(o,d,p={}){o=Ve("message",o);const{seed:w,k2sig:x}=D(o,d,p);return xl(e.outputLen,a.BYTES,s)(w,x)}function W(o){let d;const p=typeof o=="string"||Zn(o),w=!p&&o!==null&&typeof o=="object"&&typeof o.r=="bigint"&&typeof o.s=="bigint";if(!p&&!w)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(w)d=new P(o.r,o.s);else if(p){try{d=P.fromBytes(Ve("sig",o),"der")}catch(x){if(!(x instanceof dr.Err))throw x}if(!d)try{d=P.fromBytes(Ve("sig",o),"compact")}catch{return!1}}return d||!1}function X(o,d,p,w={}){const{lowS:x,prehash:E,format:B}=Ms(w,R);if(p=Ve("publicKey",p),d=ce(Ve("message",d),E),"strict"in w)throw new Error("options.strict was renamed to lowS");const y=B===void 0?W(o):P.fromBytes(Ve("sig",o),B);if(y===!1)return!1;try{const f=t.fromBytes(p);if(x&&y.hasHighS())return!1;const{r:_,s:V}=y,Z=Q(d),H=a.inv(V),be=a.create(Z*H),le=a.create(_*H),ae=t.BASE.multiplyUnsafe(be).add(f.multiplyUnsafe(le));return ae.is0()?!1:a.create(ae.x)===_}catch{return!1}}function g(o,d,p={}){const{prehash:w}=Ms(p,R);return d=ce(d,w),P.fromBytes(o,"recovered").recoverPublicKey(d).toBytes()}return Object.freeze({keygen:v,getPublicKey:S,getSharedSecret:k,utils:A,lengths:I,Point:t,sign:te,verify:X,recoverPublicKey:g,Signature:P,hash:e})}function Mh(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const s=Kr(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),i={Fp:r,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function Rh(t){const{CURVE:e,curveOpts:r}=Mh(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function Th(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,tc(r.Fn.ORDER,r.Fn.BITS))})}function Oh(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:s}=Rh(t),i=Bh(e,r),a=kh(i,n,s);return Th(t,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Uh(t,e){const r=n=>Oh({...t,hash:n});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _o={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Ch={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},pa=BigInt(2);function Lh(t){const e=_o.p,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),c=BigInt(44),h=BigInt(88),v=t*t*t%e,S=v*v*t%e,k=qe(S,r,e)*S%e,A=qe(k,r,e)*S%e,I=qe(A,pa,e)*v%e,R=qe(I,s,e)*I%e,C=qe(R,i,e)*R%e,L=qe(C,c,e)*C%e,N=qe(L,h,e)*L%e,z=qe(N,c,e)*C%e,P=qe(z,r,e)*S%e,G=qe(P,a,e)*R%e,Q=qe(G,n,e)*v%e,ie=qe(Q,pa,e);if(!qs.eql(qs.sqr(ie),t))throw new Error("Cannot find square root");return ie}const qs=Kr(_o.p,{sqrt:Lh}),Nh=Uh({..._o,Fp:qs,lowS:!0,endo:Ch},Za);Kn.utils.randomPrivateKey;Kn.getPublicKey;function ma(t){try{return Kn.ExtendedPoint.fromHex(t),!0}catch{return!1}}const Qc=(t,e)=>Kn.sign(t,e.slice(0,32)),Fh=Kn.verify,Eo=t=>ve.Buffer.isBuffer(t)?t:t instanceof Uint8Array?ve.Buffer.from(t.buffer,t.byteOffset,t.byteLength):ve.Buffer.from(t);class Ph{constructor(e){Object.assign(this,e)}encode(){return ve.Buffer.from(wc(oi,this))}static decode(e){return vc(oi,this,e)}static decodeUnchecked(e){return hc(oi,this,e)}}const oi=new Map;var eu;const Dh=32,kr=32;function jh(t){return t._bn!==void 0}let ga=1;class ye extends Ph{constructor(e){if(super({}),this._bn=void 0,jh(e))this._bn=e._bn;else{if(typeof e=="string"){const r=kt.decode(e);if(r.length!=kr)throw new Error("Invalid public key input");this._bn=new ua(r)}else this._bn=new ua(e);if(this._bn.byteLength()>kr)throw new Error("Invalid public key input")}}static unique(){const e=new ye(ga);return ga+=1,new ye(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return kt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ve.Buffer);if(e.length===kr)return e;const r=ve.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){const s=ve.Buffer.concat([e.toBuffer(),ve.Buffer.from(r),n.toBuffer()]),i=fa(s);return new ye(i)}static createProgramAddressSync(e,r){let n=ve.Buffer.alloc(0);e.forEach(function(i){if(i.length>Dh)throw new TypeError("Max seed length exceeded");n=ve.Buffer.concat([n,Eo(i)])}),n=ve.Buffer.concat([n,r.toBuffer(),ve.Buffer.from("ProgramDerivedAddress")]);const s=fa(n);if(ma(s))throw new Error("Invalid seeds, address must fall off the curve");return new ye(s)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,s;for(;n!=0;){try{const i=e.concat(ve.Buffer.from([n]));s=this.createProgramAddressSync(i,r)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new ye(e);return ma(r.toBytes())}}eu=ye;ye.default=new eu("11111111111111111111111111111111");oi.set(ye,{kind:"struct",fields:[["_bn","u256"]]});new ye("BPFLoader1111111111111111111111111111111111");const ln=1232,So=127,Mi=64;class Ri{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,a)=>{n.set(i.toBase58(),a)});const s=i=>{const a=n.get(i.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(a=>s(a.pubkey)),data:i.data}))}}const _e=(t="publicKey")=>Ce(32,t),zh=(t="signature")=>Ce(64,t),cn=(t="string")=>{const e=ne([oe("length"),oe("lengthPadding"),Ce(Dr(oe(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,a)=>r(i,a).chars.toString(),s.encode=(i,a,c)=>{const h={chars:ve.Buffer.from(i,"utf8")};return n(h,a,c)},s.alloc=i=>oe().span+oe().span+ve.Buffer.from(i,"utf8").length,s},$h=(t="authorized")=>ne([_e("staker"),_e("withdrawer")],t),Zh=(t="lockup")=>ne([Ft("unixTimestamp"),Ft("epoch"),_e("custodian")],t),qh=(t="voteInit")=>ne([_e("nodePubkey"),_e("authorizedVoter"),_e("authorizedWithdrawer"),Be("commission")],t),Vh=(t="voteAuthorizeWithSeedArgs")=>ne([oe("voteAuthorizationType"),_e("currentAuthorityDerivedKeyOwnerPubkey"),cn("currentAuthorityDerivedKeySeed"),_e("newAuthorized")],t);function Pt(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,!(n&128))break}return e}function Dt(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function ht(t,e){if(!t)throw new Error(e||"Assertion failed")}class Vi{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const n=new Map,s=a=>{const c=a.toBase58();let h=n.get(c);return h===void 0&&(h={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(c,h)),h},i=s(r);i.isSigner=!0,i.isWritable=!0;for(const a of e){s(a.programId).isInvoked=!0;for(const c of a.keys){const h=s(c.pubkey);h.isSigner||(h.isSigner=c.isSigner),h.isWritable||(h.isWritable=c.isWritable)}}return new Vi(r,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];ht(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,h])=>h.isSigner&&h.isWritable),n=e.filter(([,h])=>h.isSigner&&!h.isWritable),s=e.filter(([,h])=>!h.isSigner&&h.isWritable),i=e.filter(([,h])=>!h.isSigner&&!h.isWritable),a={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{ht(r.length>0,"Expected at least one writable signer key");const[h]=r[0];ht(h===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...r.map(([h])=>new ye(h)),...n.map(([h])=>new ye(h)),...s.map(([h])=>new ye(h)),...i.map(([h])=>new ye(h))];return[a,c]}extractTableLookup(e){const[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(r.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,r){const n=new Array,s=new Array;for(const[i,a]of this.keyMetaMap.entries())if(r(a)){const c=new ye(i),h=e.findIndex(v=>v.equals(c));h>=0&&(ht(h<256,"Max lookup table index exceeded"),n.push(h),s.push(c),this.keyMetaMap.delete(i))}return[n,s]}}const tu="Reached end of buffer unexpectedly";function pr(t){if(t.length===0)throw new Error(tu);return t.shift()}function jt(t,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(tu);return t.splice(...e)}class yn{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new ye(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:kt.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ri(this.staticAccountKeys)}static compile(e){const r=Vi.compile(e.instructions,e.payerKey),[n,s]=r.getMessageComponents(),a=new Ri(s).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:kt.encode(c.data)}));return new yn({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-r,i=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];Dt(r,e);const n=this.instructions.map(k=>{const{accounts:A,programIdIndex:I}=k,R=Array.from(kt.decode(k.data));let C=[];Dt(C,A.length);let L=[];return Dt(L,R.length),{programIdIndex:I,keyIndicesCount:ve.Buffer.from(C),keyIndices:A,dataLength:ve.Buffer.from(L),data:R}});let s=[];Dt(s,n.length);let i=ve.Buffer.alloc(ln);ve.Buffer.from(s).copy(i);let a=s.length;n.forEach(k=>{const I=ne([Be("programIdIndex"),Ce(k.keyIndicesCount.length,"keyIndicesCount"),Rt(Be("keyIndex"),k.keyIndices.length,"keyIndices"),Ce(k.dataLength.length,"dataLength"),Rt(Be("userdatum"),k.data.length,"data")]).encode(k,i,a);a+=I}),i=i.slice(0,a);const c=ne([Ce(1,"numRequiredSignatures"),Ce(1,"numReadonlySignedAccounts"),Ce(1,"numReadonlyUnsignedAccounts"),Ce(r.length,"keyCount"),Rt(_e("key"),e,"keys"),_e("recentBlockhash")]),h={numRequiredSignatures:ve.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ve.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ve.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ve.Buffer.from(r),keys:this.accountKeys.map(k=>Eo(k.toBytes())),recentBlockhash:kt.decode(this.recentBlockhash)};let v=ve.Buffer.alloc(2048);const S=c.encode(h,v);return i.copy(v,S),v.slice(0,S+i.length)}static from(e){let r=[...e];const n=pr(r);if(n!==(n&So))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=pr(r),i=pr(r),a=Pt(r);let c=[];for(let A=0;A<a;A++){const I=jt(r,0,kr);c.push(new ye(ve.Buffer.from(I)))}const h=jt(r,0,kr),v=Pt(r);let S=[];for(let A=0;A<v;A++){const I=pr(r),R=Pt(r),C=jt(r,0,R),L=Pt(r),N=jt(r,0,L),z=kt.encode(ve.Buffer.from(N));S.push({programIdIndex:I,accounts:C,data:z})}const k={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:kt.encode(ve.Buffer.from(h)),accountKeys:c,instructions:S};return new yn(k)}}class Ti{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ri(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((a,c)=>a+c.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-r,a=n-r-this.header.numReadonlyUnsignedAccounts;return s<a}else{const s=r-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)r.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)r.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){const r=Vi.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const S of i){const k=r.extractTableLookup(S);if(k!==void 0){const[A,{writable:I,readonly:R}]=k;n.push(A),s.writable.push(...I),s.readonly.push(...R)}}const[a,c]=r.getMessageComponents(),v=new Ri(c,s).compileInstructions(e.instructions);return new Ti({header:a,staticAccountKeys:c,recentBlockhash:e.recentBlockhash,compiledInstructions:v,addressTableLookups:n})}serialize(){const e=Array();Dt(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();Dt(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Dt(i,this.addressTableLookups.length);const a=ne([Be("prefix"),ne([Be("numRequiredSignatures"),Be("numReadonlySignedAccounts"),Be("numReadonlyUnsignedAccounts")],"header"),Ce(e.length,"staticAccountKeysLength"),Rt(_e(),this.staticAccountKeys.length,"staticAccountKeys"),_e("recentBlockhash"),Ce(n.length,"instructionsLength"),Ce(r.length,"serializedInstructions"),Ce(i.length,"addressTableLookupsLength"),Ce(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(ln),v=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:kt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,v)}serializeInstructions(){let e=0;const r=new Uint8Array(ln);for(const n of this.compiledInstructions){const s=Array();Dt(s,n.accountKeyIndexes.length);const i=Array();Dt(i,n.data.length);const a=ne([Be("programIdIndex"),Ce(s.length,"encodedAccountKeyIndexesLength"),Rt(Be(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ce(i.length,"encodedDataLength"),Ce(n.data.length,"data")]);e+=a.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(ln);for(const n of this.addressTableLookups){const s=Array();Dt(s,n.writableIndexes.length);const i=Array();Dt(i,n.readonlyIndexes.length);const a=ne([_e("accountKey"),Ce(s.length,"encodedWritableIndexesLength"),Rt(Be(),n.writableIndexes.length,"writableIndexes"),Ce(i.length,"encodedReadonlyIndexesLength"),Rt(Be(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=a.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const n=pr(r),s=n&So;ht(n!==s,"Expected versioned message but received legacy message");const i=s;ht(i===0,`Expected versioned message with version 0 but found version ${i}`);const a={numRequiredSignatures:pr(r),numReadonlySignedAccounts:pr(r),numReadonlyUnsignedAccounts:pr(r)},c=[],h=Pt(r);for(let R=0;R<h;R++)c.push(new ye(jt(r,0,kr)));const v=kt.encode(jt(r,0,kr)),S=Pt(r),k=[];for(let R=0;R<S;R++){const C=pr(r),L=Pt(r),N=jt(r,0,L),z=Pt(r),P=new Uint8Array(jt(r,0,z));k.push({programIdIndex:C,accountKeyIndexes:N,data:P})}const A=Pt(r),I=[];for(let R=0;R<A;R++){const C=new ye(jt(r,0,kr)),L=Pt(r),N=jt(r,0,L),z=Pt(r),P=jt(r,0,z);I.push({accountKey:C,writableIndexes:N,readonlyIndexes:P})}return new Ti({header:a,staticAccountKeys:c,recentBlockhash:v,compiledInstructions:k,addressTableLookups:I})}}const Ao={deserializeMessageVersion(t){const e=t[0],r=e&So;return r===e?"legacy":r},deserialize:t=>{const e=Ao.deserializeMessageVersion(t);if(e==="legacy")return yn.from(t);if(e===0)return Ti.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}},Kh=ve.Buffer.alloc(Mi).fill(0);class ya{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ve.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Oi{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{const{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new ya(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let C=0;C<r.length;C++)if(r[C].programId===void 0)throw new Error(`Transaction instruction index ${C} has undefined program id`);const s=[],i=[];r.forEach(C=>{C.keys.forEach(N=>{i.push({...N})});const L=C.programId.toString();s.includes(L)||s.push(L)}),s.forEach(C=>{i.push({pubkey:new ye(C),isSigner:!1,isWritable:!1})});const a=[];i.forEach(C=>{const L=C.pubkey.toString(),N=a.findIndex(z=>z.pubkey.toString()===L);N>-1?(a[N].isWritable=a[N].isWritable||C.isWritable,a[N].isSigner=a[N].isSigner||C.isSigner):a.push(C)}),a.sort(function(C,L){if(C.isSigner!==L.isSigner)return C.isSigner?-1:1;if(C.isWritable!==L.isWritable)return C.isWritable?-1:1;const N={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return C.pubkey.toBase58().localeCompare(L.pubkey.toBase58(),"en",N)});const c=a.findIndex(C=>C.pubkey.equals(n));if(c>-1){const[C]=a.splice(c,1);C.isSigner=!0,C.isWritable=!0,a.unshift(C)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const C of this.signatures){const L=a.findIndex(N=>N.pubkey.equals(C.publicKey));if(L>-1)a[L].isSigner||(a[L].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${C.publicKey.toString()}`)}let h=0,v=0,S=0;const k=[],A=[];a.forEach(({pubkey:C,isSigner:L,isWritable:N})=>{L?(k.push(C.toString()),h+=1,N||(v+=1)):(A.push(C.toString()),N||(S+=1))});const I=k.concat(A),R=r.map(C=>{const{data:L,programId:N}=C;return{programIdIndex:I.indexOf(N.toString()),accounts:C.keys.map(z=>I.indexOf(z.pubkey.toString())),data:kt.encode(L)}});return R.forEach(C=>{ht(C.programIdIndex>=0),C.accounts.forEach(L=>ht(L>=0))}),new yn({header:{numRequiredSignatures:h,numReadonlySignedAccounts:v,numReadonlyUnsignedAccounts:S},accountKeys:I,recentBlockhash:e,instructions:R})}_compile(){const e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((s,i)=>r[i].equals(s.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const r=new Set;this.signatures=e.filter(n=>{const s=n.toString();return r.has(s)?!1:(r.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const a=i.publicKey.toString();r.has(a)||(r.add(a),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const a=i.publicKey.toString();r.has(a)||(r.add(a),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...r){const n=e.serialize();r.forEach(s=>{const i=Qc(n,s.secretKey);this._addSignature(s.publicKey,Eo(i))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){ht(r.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ve.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?r&&(n.missing||(n.missing=[])).push(i):Fh(s,e,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,r);if(i){let a="Signature verification failed.";throw i.invalid&&(a+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(a+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(s)}_serialize(e){const{signatures:r}=this,n=[];Dt(n,r.length);const s=n.length+r.length*64+e.length,i=ve.Buffer.alloc(s);return ht(r.length<256),ve.Buffer.from(n).copy(i,0),r.forEach(({signature:a},c)=>{a!==null&&(ht(a.length===64,"signature has invalid length"),ve.Buffer.from(a).copy(i,n.length+c*64))}),e.copy(i,n.length+r.length*64),ht(i.length<=ln,`Transaction too large: ${i.length} > ${ln}`),i}get keys(){return ht(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return ht(this.instructions.length===1),this.instructions[0].programId}get data(){return ht(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e];const n=Pt(r);let s=[];for(let i=0;i<n;i++){const a=jt(r,0,Mi);s.push(kt.encode(ve.Buffer.from(a)))}return Oi.populate(yn.from(r),s)}static populate(e,r=[]){const n=new Oi;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((s,i)=>{const a={signature:s==kt.encode(Kh)?null:kt.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(a)}),e.instructions.forEach(s=>{const i=s.accounts.map(a=>{const c=e.accountKeys[a];return{pubkey:c,isSigner:n.signatures.some(h=>h.publicKey.toString()===c.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new ya({keys:i,programId:e.accountKeys[s.programIdIndex],data:kt.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Bo{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)ht(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(Mi));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),r=Array();Dt(r,this.signatures.length);const n=ne([Ce(r.length,"encodedSignaturesLength"),Rt(zh(),this.signatures.length,"signatures"),Ce(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let r=[...e];const n=[],s=Pt(r);for(let a=0;a<s;a++)n.push(new Uint8Array(jt(r,0,Mi)));const i=Ao.deserialize(new Uint8Array(r));return new Bo(i,n)}sign(e){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(a=>a.equals(s.publicKey));ht(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Qc(r,s.secretKey)}}addSignature(e,r){ht(r.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));ht(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=r}}new ye("SysvarC1ock11111111111111111111111111111111");new ye("SysvarEpochSchedu1e111111111111111111111111");new ye("Sysvar1nstructions1111111111111111111111111");new ye("SysvarRecentB1ockHashes11111111111111111111");new ye("SysvarRent111111111111111111111111111111111");new ye("SysvarRewards111111111111111111111111111111");new ye("SysvarS1otHashes111111111111111111111111111");new ye("SysvarS1otHistory11111111111111111111111111");new ye("SysvarStakeHistory1111111111111111111111111");const Wh=gt("lamportsPerSignature"),Hh=ne([oe("version"),oe("state"),_e("authorizedPubkey"),_e("nonce"),ne([Wh],"feeCalculator")]);Hh.span;function wn(t){const e=Ce(8,t),r=e.decode.bind(e),n=e.encode.bind(e),s=e,i=Zd();return s.decode=(a,c)=>{const h=r(a,c);return i.decode(h)},s.encode=(a,c,h)=>{const v=i.encode(a);return n(v,c,h)},s}Object.freeze({Create:{index:0,layout:ne([oe("instruction"),Ft("lamports"),Ft("space"),_e("programId")])},Assign:{index:1,layout:ne([oe("instruction"),_e("programId")])},Transfer:{index:2,layout:ne([oe("instruction"),wn("lamports")])},CreateWithSeed:{index:3,layout:ne([oe("instruction"),_e("base"),cn("seed"),Ft("lamports"),Ft("space"),_e("programId")])},AdvanceNonceAccount:{index:4,layout:ne([oe("instruction")])},WithdrawNonceAccount:{index:5,layout:ne([oe("instruction"),Ft("lamports")])},InitializeNonceAccount:{index:6,layout:ne([oe("instruction"),_e("authorized")])},AuthorizeNonceAccount:{index:7,layout:ne([oe("instruction"),_e("authorized")])},Allocate:{index:8,layout:ne([oe("instruction"),Ft("space")])},AllocateWithSeed:{index:9,layout:ne([oe("instruction"),_e("base"),cn("seed"),Ft("space"),_e("programId")])},AssignWithSeed:{index:10,layout:ne([oe("instruction"),_e("base"),cn("seed"),_e("programId")])},TransferWithSeed:{index:11,layout:ne([oe("instruction"),wn("lamports"),cn("seed"),_e("programId")])},UpgradeNonceAccount:{index:12,layout:ne([oe("instruction")])}});new ye("11111111111111111111111111111111");new ye("BPFLoader2111111111111111111111111111111111");ne([oe("typeIndex"),wn("deactivationSlot"),gt("lastExtendedSlot"),Be("lastExtendedStartIndex"),Be(),Rt(_e(),Dr(Be(),-1),"authority")]);const We=Gn(bo(ye),q(),t=>new ye(t)),ru=xo([q(),Pe("base64")]),Io=Gn(bo(ve.Buffer),ru,t=>ve.Buffer.from(t[0],"base64"));function nu(t){return Tt([j({jsonrpc:Pe("2.0"),id:q(),result:t}),j({jsonrpc:Pe("2.0"),id:q(),error:j({code:Sn(),message:q(),data:se(Jd())})})])}const Gh=nu(Sn());function Te(t){return Gn(nu(t),Gh,e=>"error"in e?e:{...e,result:Rn(e.result,t)})}function er(t){return Te(j({context:j({slot:O()}),value:t}))}function Ki(t){return j({context:j({slot:O()}),value:t})}const Jh=j({foundation:O(),foundationTerm:O(),initial:O(),taper:O(),terminal:O()});Te(J(Y(j({epoch:O(),effectiveSlot:O(),amount:O(),postBalance:O(),commission:se(Y(O()))}))));const Yh=J(j({slot:O(),prioritizationFee:O()})),Xh=j({total:O(),validator:O(),foundation:O(),epoch:O()}),Qh=j({epoch:O(),slotIndex:O(),slotsInEpoch:O(),absoluteSlot:O(),blockHeight:se(O()),transactionCount:se(O())}),e0=j({slotsPerEpoch:O(),leaderScheduleSlotOffset:O(),warmup:sr(),firstNormalEpoch:O(),firstNormalSlot:O()}),t0=jc(q(),J(O())),Gr=Y(Tt([j({}),q()])),r0=j({err:Gr}),n0=Pe("receivedSignature");j({"solana-core":q(),"feature-set":se(O())});const i0=j({program:q(),programId:We,parsed:Sn()}),s0=j({programId:We,accounts:J(We),data:q()});er(j({err:Y(Tt([j({}),q()])),logs:Y(J(q())),accounts:se(Y(J(Y(j({executable:sr(),owner:q(),lamports:O(),data:J(q()),rentEpoch:se(O())}))))),unitsConsumed:se(O()),returnData:se(Y(j({programId:q(),data:xo([q(),Pe("base64")])}))),innerInstructions:se(Y(J(j({index:O(),instructions:J(Tt([i0,s0]))}))))}));er(j({byIdentity:jc(q(),J(O())),range:j({firstSlot:O(),lastSlot:O()})}));Te(Jh);Te(Xh);Te(Yh);Te(Qh);Te(e0);Te(t0);Te(O());er(j({total:O(),circulating:O(),nonCirculating:O(),nonCirculatingAccounts:J(We)}));const o0=j({amount:q(),uiAmount:Y(O()),decimals:O(),uiAmountString:se(q())});er(J(j({address:We,amount:q(),uiAmount:Y(O()),decimals:O(),uiAmountString:se(q())})));er(J(j({pubkey:We,account:j({executable:sr(),owner:We,lamports:O(),data:Io,rentEpoch:O()})})));const Vs=j({program:q(),parsed:Sn(),space:O()});er(J(j({pubkey:We,account:j({executable:sr(),owner:We,lamports:O(),data:Vs,rentEpoch:O()})})));er(J(j({lamports:O(),address:We})));const ko=j({executable:sr(),owner:We,lamports:O(),data:Io,rentEpoch:O()});j({pubkey:We,account:ko});const a0=Gn(Tt([bo(ve.Buffer),Vs]),Tt([ru,Vs]),t=>Array.isArray(t)?Rn(t,Io):t),c0=j({executable:sr(),owner:We,lamports:O(),data:a0,rentEpoch:O()});j({pubkey:We,account:c0});j({state:Tt([Pe("active"),Pe("inactive"),Pe("activating"),Pe("deactivating")]),active:O(),inactive:O()});Te(J(j({signature:q(),slot:O(),err:Gr,memo:Y(q()),blockTime:se(Y(O()))})));Te(J(j({signature:q(),slot:O(),err:Gr,memo:Y(q()),blockTime:se(Y(O()))})));j({subscription:O(),result:Ki(ko)});const u0=j({pubkey:We,account:ko});j({subscription:O(),result:Ki(u0)});const f0=j({parent:O(),slot:O(),root:O()});j({subscription:O(),result:f0});const l0=Tt([j({type:Tt([Pe("firstShredReceived"),Pe("completed"),Pe("optimisticConfirmation"),Pe("root")]),slot:O(),timestamp:O()}),j({type:Pe("createdBank"),parent:O(),slot:O(),timestamp:O()}),j({type:Pe("frozen"),slot:O(),timestamp:O(),stats:j({numTransactionEntries:O(),numSuccessfulTransactions:O(),numFailedTransactions:O(),maxTransactionsPerEntry:O()})}),j({type:Pe("dead"),slot:O(),timestamp:O(),err:q()})]);j({subscription:O(),result:l0});j({subscription:O(),result:Ki(Tt([r0,n0]))});j({subscription:O(),result:O()});j({pubkey:q(),gossip:Y(q()),tpu:Y(q()),rpc:Y(q()),version:Y(q())});const wa=j({votePubkey:q(),nodePubkey:q(),activatedStake:O(),epochVoteAccount:sr(),epochCredits:J(xo([O(),O(),O()])),commission:O(),lastVote:O(),rootSlot:Y(O())});Te(j({current:J(wa),delinquent:J(wa)}));const d0=Tt([Pe("processed"),Pe("confirmed"),Pe("finalized")]),h0=j({slot:O(),confirmations:Y(O()),err:Gr,confirmationStatus:se(d0)});er(J(Y(h0)));Te(O());const iu=j({accountKey:We,writableIndexes:J(O()),readonlyIndexes:J(O())}),Mo=j({signatures:J(q()),message:j({accountKeys:J(q()),header:j({numRequiredSignatures:O(),numReadonlySignedAccounts:O(),numReadonlyUnsignedAccounts:O()}),instructions:J(j({accounts:J(O()),data:q(),programIdIndex:O()})),recentBlockhash:q(),addressTableLookups:se(J(iu))})}),su=j({pubkey:We,signer:sr(),writable:sr(),source:se(Tt([Pe("transaction"),Pe("lookupTable")]))}),ou=j({accountKeys:J(su),signatures:J(q())}),au=j({parsed:Sn(),program:q(),programId:We}),cu=j({accounts:J(We),data:q(),programId:We}),p0=Tt([cu,au]),m0=Tt([j({parsed:Sn(),program:q(),programId:q()}),j({accounts:J(q()),data:q(),programId:q()})]),uu=Gn(p0,m0,t=>"accounts"in t?Rn(t,cu):Rn(t,au)),fu=j({signatures:J(q()),message:j({accountKeys:J(su),instructions:J(uu),recentBlockhash:q(),addressTableLookups:se(Y(J(iu)))})}),Ui=j({accountIndex:O(),mint:q(),owner:se(q()),programId:se(q()),uiTokenAmount:o0}),lu=j({writable:J(We),readonly:J(We)}),Wi=j({err:Gr,fee:O(),innerInstructions:se(Y(J(j({index:O(),instructions:J(j({accounts:J(O()),data:q(),programIdIndex:O()}))})))),preBalances:J(O()),postBalances:J(O()),logMessages:se(Y(J(q()))),preTokenBalances:se(Y(J(Ui))),postTokenBalances:se(Y(J(Ui))),loadedAddresses:se(lu),computeUnitsConsumed:se(O()),costUnits:se(O())}),Ro=j({err:Gr,fee:O(),innerInstructions:se(Y(J(j({index:O(),instructions:J(uu)})))),preBalances:J(O()),postBalances:J(O()),logMessages:se(Y(J(q()))),preTokenBalances:se(Y(J(Ui))),postTokenBalances:se(Y(J(Ui))),loadedAddresses:se(lu),computeUnitsConsumed:se(O()),costUnits:se(O())}),An=Tt([Pe(0),Pe("legacy")]),Jr=j({pubkey:q(),lamports:O(),postBalance:Y(O()),rewardType:Y(q()),commission:se(Y(O()))});Te(Y(j({blockhash:q(),previousBlockhash:q(),parentSlot:O(),transactions:J(j({transaction:Mo,meta:Y(Wi),version:se(An)})),rewards:se(J(Jr)),blockTime:Y(O()),blockHeight:Y(O())})));Te(Y(j({blockhash:q(),previousBlockhash:q(),parentSlot:O(),rewards:se(J(Jr)),blockTime:Y(O()),blockHeight:Y(O())})));Te(Y(j({blockhash:q(),previousBlockhash:q(),parentSlot:O(),transactions:J(j({transaction:ou,meta:Y(Wi),version:se(An)})),rewards:se(J(Jr)),blockTime:Y(O()),blockHeight:Y(O())})));Te(Y(j({blockhash:q(),previousBlockhash:q(),parentSlot:O(),transactions:J(j({transaction:fu,meta:Y(Ro),version:se(An)})),rewards:se(J(Jr)),blockTime:Y(O()),blockHeight:Y(O())})));Te(Y(j({blockhash:q(),previousBlockhash:q(),parentSlot:O(),transactions:J(j({transaction:ou,meta:Y(Ro),version:se(An)})),rewards:se(J(Jr)),blockTime:Y(O()),blockHeight:Y(O())})));Te(Y(j({blockhash:q(),previousBlockhash:q(),parentSlot:O(),rewards:se(J(Jr)),blockTime:Y(O()),blockHeight:Y(O())})));Te(Y(j({blockhash:q(),previousBlockhash:q(),parentSlot:O(),transactions:J(j({transaction:Mo,meta:Y(Wi)})),rewards:se(J(Jr)),blockTime:Y(O())})));Te(Y(j({blockhash:q(),previousBlockhash:q(),parentSlot:O(),signatures:J(q()),blockTime:Y(O())})));Te(Y(j({slot:O(),meta:Y(Wi),blockTime:se(Y(O())),transaction:Mo,version:se(An)})));Te(Y(j({slot:O(),transaction:fu,meta:Y(Ro),blockTime:se(Y(O())),version:se(An)})));er(j({blockhash:q(),lastValidBlockHeight:O()}));er(sr());const g0=j({slot:O(),numTransactions:O(),numSlots:O(),samplePeriodSecs:O()});Te(J(g0));er(Y(j({feeCalculator:j({lamportsPerSignature:O()})})));Te(q());Te(q());const y0=j({err:Gr,logs:J(q()),signature:q()});j({result:Ki(y0),subscription:O()});Object.freeze({CreateLookupTable:{index:0,layout:ne([oe("instruction"),wn("recentSlot"),Be("bumpSeed")])},FreezeLookupTable:{index:1,layout:ne([oe("instruction")])},ExtendLookupTable:{index:2,layout:ne([oe("instruction"),wn(),Rt(_e(),Dr(oe(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ne([oe("instruction")])},CloseLookupTable:{index:4,layout:ne([oe("instruction")])}});new ye("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ne([Be("instruction"),oe("units"),oe("additionalFee")])},RequestHeapFrame:{index:1,layout:ne([Be("instruction"),oe("bytes")])},SetComputeUnitLimit:{index:2,layout:ne([Be("instruction"),oe("units")])},SetComputeUnitPrice:{index:3,layout:ne([Be("instruction"),wn("microLamports")])}});new ye("ComputeBudget111111111111111111111111111111");ne([Be("numSignatures"),Be("padding"),Vt("signatureOffset"),Vt("signatureInstructionIndex"),Vt("publicKeyOffset"),Vt("publicKeyInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Vt("messageInstructionIndex")]);new ye("Ed25519SigVerify111111111111111111111111111");Nh.utils.isValidPrivateKey;ne([Be("numSignatures"),Vt("signatureOffset"),Be("signatureInstructionIndex"),Vt("ethAddressOffset"),Be("ethAddressInstructionIndex"),Vt("messageDataOffset"),Vt("messageDataSize"),Be("messageInstructionIndex"),Ce(20,"ethAddress"),Ce(64,"signature"),Be("recoveryId")]);new ye("KeccakSecp256k11111111111111111111111111111");var du;new ye("StakeConfig11111111111111111111111111111111");class hu{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}}du=hu;hu.default=new du(0,0,ye.default);Object.freeze({Initialize:{index:0,layout:ne([oe("instruction"),$h(),Zh()])},Authorize:{index:1,layout:ne([oe("instruction"),_e("newAuthorized"),oe("stakeAuthorizationType")])},Delegate:{index:2,layout:ne([oe("instruction")])},Split:{index:3,layout:ne([oe("instruction"),Ft("lamports")])},Withdraw:{index:4,layout:ne([oe("instruction"),Ft("lamports")])},Deactivate:{index:5,layout:ne([oe("instruction")])},Merge:{index:7,layout:ne([oe("instruction")])},AuthorizeWithSeed:{index:8,layout:ne([oe("instruction"),_e("newAuthorized"),oe("stakeAuthorizationType"),cn("authoritySeed"),_e("authorityOwner")])}});new ye("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ne([oe("instruction"),qh()])},Authorize:{index:1,layout:ne([oe("instruction"),_e("newAuthorized"),oe("voteAuthorizationType")])},Withdraw:{index:3,layout:ne([oe("instruction"),Ft("lamports")])},UpdateValidatorIdentity:{index:4,layout:ne([oe("instruction")])},AuthorizeWithSeed:{index:10,layout:ne([oe("instruction"),Vh()])}});new ye("Vote111111111111111111111111111111111111111");new ye("Va1idator1nfo111111111111111111111111111111");j({name:q(),website:se(q()),details:se(q()),iconUrl:se(q()),keybaseUsername:se(q())});new ye("Vote111111111111111111111111111111111111111");ne([_e("nodePubkey"),_e("authorizedWithdrawer"),Be("commission"),gt(),Rt(ne([gt("slot"),oe("confirmationCount")]),Dr(oe(),-8),"votes"),Be("rootSlotValid"),gt("rootSlot"),gt(),Rt(ne([gt("epoch"),_e("authorizedVoter")]),Dr(oe(),-8),"authorizedVoters"),ne([Rt(ne([_e("authorizedPubkey"),gt("epochOfLastAuthorizedSwitch"),gt("targetEpoch")]),32,"buf"),gt("idx"),Be("isEmpty")],"priorVoters"),gt(),Rt(ne([gt("epoch"),gt("credits"),gt("prevCredits")]),Dr(oe(),-8),"epochCredits"),ne([gt("slot"),gt("timestamp")],"lastTimestamp")]);const w0=t=>({request:t,signMessage:e=>t({method:"signMessage",params:{message:e}}),signTransaction:e=>t({method:"signTransaction",params:{transaction:e}}),signAndSendTransaction:e=>t({method:"signAndSendTransaction",params:e})});function va(t){return Buffer.from(t.serialize({verifySignatures:!1})).toString("base64")}function v0(t){const e=Buffer.from(t,"base64");return Ao.deserializeMessageVersion(e)==="legacy"?Bo.deserialize(e):Oi.from(e)}function b0(t){return async r=>{if(r.method==="connect")return await t(r);if(r.method==="signMessage")return await t(r);if(r.method==="signAndSendTransaction"){const{transaction:n}=r.params,s={transaction:va(n)};return await t({method:"signAndSendTransaction",params:s})}if(r.method==="signTransaction"){const{transaction:n}=r.params,s={transaction:va(n)},{signedTransaction:i}=await t({method:"signTransaction",params:s});return{signedTransaction:v0(i)}}}}const x0=({miniAppHost:t,emitter:e})=>{let r,n=null;return{visible:!1,get onback(){return n},set onback(s){n&&e.removeListener("backNavigationTriggered",n),n=s,s&&e.addListener("backNavigationTriggered",s)},async show(){await t.updateBackState({visible:!0}),this.visible=!0},async hide(){await t.updateBackState({visible:!1}),this.visible=!1},async enableWebNavigation(){r=_0({back:this,emitter:e})},async disableWebNavigation(){r==null||r(),r=void 0}}};function _0({emitter:t,back:e}){const r=E0();if(r)return S0({emitter:t,back:e,navigation:r});if(typeof window<"u")return A0({emitter:t,back:e,window})}function E0(){if(typeof window<"u"&&window.navigation!==void 0)return window.navigation}function S0({emitter:t,back:e,navigation:r}){function n(){r.canGoBack?e.show():e.hide()}function s(){e.visible&&r.canGoBack&&r.back()}return r.addEventListener("navigatesuccess",n),t.addListener("backNavigationTriggered",s),()=>{r.removeEventListener("navigatesuccess",n),t.removeListener("backNavigationTriggered",s)}}function A0({emitter:t,back:e,window:r}){e.show();function n(){e.visible&&r.history.back()}return t.addListener("backNavigationTriggered",n),()=>{t.removeListener("backNavigationTriggered",n)}}const B0="0.1.1";function I0(){return B0}let k0=class Ks extends Error{constructor(e,r={}){const n=(()=>{var h;if(r.cause instanceof Ks){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return(h=r.cause)!=null&&h.message?r.cause.message:r.details})(),s=r.cause instanceof Ks&&r.cause.docsPath||r.docsPath,a=`https://oxlib.sh${s??""}`,c=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||s?["",n?`Details: ${n}`:void 0,s?`See: ${a}`:void 0]:[]].filter(h=>typeof h=="string").join(`
`);super(c,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${I0()}`}),this.cause=r.cause,this.details=n,this.docs=a,this.docsPath=s,this.shortMessage=e}walk(e){return pu(this,e)}};function pu(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?pu(t.cause,e):e?null:t}function mu(t,e={}){const{raw:r=!1}=e,n=t;if(r)return t;if(n.error){const{code:s}=n.error,i=s===vn.code?vn:s===Tn.code?Tn:s===jn.code?jn:s===Pn.code?Pn:s===Nn.code?Nn:s===Dn.code?Dn:s===Ln.code?Ln:s===zn.code?zn:s===On.code?On:s===Un.code?Un:s===Cn.code?Cn:s===Fn.code?Fn:Lt;throw new i(n.error)}return n.result}let Lt=class extends Error{constructor(e){const{code:r,message:n,data:s}=e;super(n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.BaseError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r,this.data=s}};class Tn extends Lt{constructor(e={}){super({message:"Missing or invalid parameters.",...e,code:Tn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidInputError"})}}Object.defineProperty(Tn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class On extends Lt{constructor(e={}){super({message:"Requested resource not found.",...e,code:On.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceNotFoundError"})}}Object.defineProperty(On,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Un extends Lt{constructor(e={}){super({message:"Requested resource not available.",...e,code:Un.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceUnavailableError"})}}Object.defineProperty(Un,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Cn extends Lt{constructor(e={}){super({message:"Transaction creation failed.",...e,code:Cn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.TransactionRejectedError"})}}Object.defineProperty(Cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ln extends Lt{constructor(e={}){super({message:"Method is not implemented.",...e,code:Ln.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotSupportedError"})}}Object.defineProperty(Ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Nn extends Lt{constructor(e={}){super({message:"Rate limit exceeded.",...e,code:Nn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.LimitExceededError"})}}Object.defineProperty(Nn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Fn extends Lt{constructor(e={}){super({message:"JSON-RPC version not supported.",...e,code:Fn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.VersionNotSupportedError"})}}Object.defineProperty(Fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Pn extends Lt{constructor(e={}){super({message:"Input is not a valid JSON-RPC request.",...e,code:Pn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidRequestError"})}}Object.defineProperty(Pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Dn extends Lt{constructor(e={}){super({message:"Method does not exist.",...e,code:Dn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotFoundError"})}}Object.defineProperty(Dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class jn extends Lt{constructor(e={}){super({message:"Invalid method parameters.",...e,code:jn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidParamsError"})}}Object.defineProperty(jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class vn extends Lt{constructor(e={}){super({message:"Internal JSON-RPC error.",...e,code:vn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InternalErrorError"})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class zn extends Lt{constructor(e={}){super({message:"Failed to parse JSON-RPC response.",...e,code:zn.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ParseError"})}}Object.defineProperty(zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Yr extends Error{constructor(e,r){super(r),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e,this.details=r}}class gu extends Yr{constructor({message:e="The user rejected the request."}={}){super(4001,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UserRejectedRequestError"})}}Object.defineProperty(gu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class yu extends Yr{constructor({message:e="The requested method and/or account has not been authorized by the user."}={}){super(4100,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnauthorizedError"})}}Object.defineProperty(yu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class wu extends Yr{constructor({message:e="The provider does not support the requested method."}={}){super(4200,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedMethodError"})}}Object.defineProperty(wu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class vu extends Yr{constructor({message:e="The provider is disconnected from all chains."}={}){super(4900,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DisconnectedError"})}}Object.defineProperty(vu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class bu extends Yr{constructor({message:e="The provider is not connected to the requested chain."}={}){super(4901,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.ChainDisconnectedError"})}}Object.defineProperty(bu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});function M0(){const t=new Wc;return{get eventNames(){return t.eventNames.bind(t)},get listenerCount(){return t.listenerCount.bind(t)},get listeners(){return t.listeners.bind(t)},addListener:t.addListener.bind(t),emit:t.emit.bind(t),off:t.off.bind(t),on:t.on.bind(t),once:t.once.bind(t),removeAllListeners:t.removeAllListeners.bind(t),removeListener:t.removeListener.bind(t)}}function R0(t,e={}){var n,s;const{includeEvents:r=!0}=e;if(!t)throw new T0;return{...r?{on:(n=t.on)==null?void 0:n.bind(t),removeListener:(s=t.removeListener)==null?void 0:s.bind(t)}:{},async request(i){const a=await t.request(i);return a&&typeof a=="object"&&"jsonrpc"in a?mu(a):a}}}class T0 extends k0{constructor(){super("`provider` is undefined."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.IsUndefinedError"})}}function O0(t={}){let e=t.id??0;return{prepare(r){return U0({id:e++,...r})},get id(){return e}}}function U0(t){return{...t,jsonrpc:"2.0"}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xu=Symbol("Comlink.proxy"),C0=Symbol("Comlink.endpoint"),L0=Symbol("Comlink.releaseProxy"),Rs=Symbol("Comlink.finalizer"),ai=Symbol("Comlink.thrown"),_u=t=>typeof t=="object"&&t!==null||typeof t=="function",N0={canHandle:t=>_u(t)&&t[xu],serialize(t){const{port1:e,port2:r}=new MessageChannel;return Su(t,e),[r,[r]]},deserialize(t){return t.start(),Bu(t)}},F0={canHandle:t=>_u(t)&&ai in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},Eu=new Map([["proxy",N0],["throw",F0]]);function P0(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function Su(t,e=globalThis,r=["*"]){e.addEventListener("message",function n(s){if(!s||!s.data)return;if(!P0(r,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:i,type:a,path:c}=Object.assign({path:[]},s.data),h=(s.data.argumentList||[]).map(Ur);let v;try{const S=c.slice(0,-1).reduce((A,I)=>A[I],t),k=c.reduce((A,I)=>A[I],t);switch(a){case"GET":v=k;break;case"SET":S[c.slice(-1)[0]]=Ur(s.data.value),v=!0;break;case"APPLY":v=k.apply(S,h);break;case"CONSTRUCT":{const A=new k(...h);v=q0(A)}break;case"ENDPOINT":{const{port1:A,port2:I}=new MessageChannel;Su(t,I),v=Z0(A,[A])}break;case"RELEASE":v=void 0;break;default:return}}catch(S){v={value:S,[ai]:0}}Promise.resolve(v).catch(S=>({value:S,[ai]:0})).then(S=>{const[k,A]=Ni(S);e.postMessage(Object.assign(Object.assign({},k),{id:i}),A),a==="RELEASE"&&(e.removeEventListener("message",n),Au(e),Rs in t&&typeof t[Rs]=="function"&&t[Rs]())}).catch(S=>{const[k,A]=Ni({value:new TypeError("Unserializable return value"),[ai]:0});e.postMessage(Object.assign(Object.assign({},k),{id:i}),A)})}),e.start&&e.start()}function D0(t){return t.constructor.name==="MessagePort"}function Au(t){D0(t)&&t.close()}function Bu(t,e){const r=new Map;return t.addEventListener("message",function(s){const{data:i}=s;if(!i||!i.id)return;const a=r.get(i.id);if(a)try{a(i)}finally{r.delete(i.id)}}),Ws(t,r,[],e)}function si(t){if(t)throw new Error("Proxy has been released and is not useable")}function Iu(t){return on(t,new Map,{type:"RELEASE"}).then(()=>{Au(t)})}const Ci=new WeakMap,Li="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(Ci.get(t)||0)-1;Ci.set(t,e),e===0&&Iu(t)});function j0(t,e){const r=(Ci.get(e)||0)+1;Ci.set(e,r),Li&&Li.register(t,e,t)}function z0(t){Li&&Li.unregister(t)}function Ws(t,e,r=[],n=function(){}){let s=!1;const i=new Proxy(n,{get(a,c){if(si(s),c===L0)return()=>{z0(i),Iu(t),e.clear(),s=!0};if(c==="then"){if(r.length===0)return{then:()=>i};const h=on(t,e,{type:"GET",path:r.map(v=>v.toString())}).then(Ur);return h.then.bind(h)}return Ws(t,e,[...r,c])},set(a,c,h){si(s);const[v,S]=Ni(h);return on(t,e,{type:"SET",path:[...r,c].map(k=>k.toString()),value:v},S).then(Ur)},apply(a,c,h){si(s);const v=r[r.length-1];if(v===C0)return on(t,e,{type:"ENDPOINT"}).then(Ur);if(v==="bind")return Ws(t,e,r.slice(0,-1));const[S,k]=ba(h);return on(t,e,{type:"APPLY",path:r.map(A=>A.toString()),argumentList:S},k).then(Ur)},construct(a,c){si(s);const[h,v]=ba(c);return on(t,e,{type:"CONSTRUCT",path:r.map(S=>S.toString()),argumentList:h},v).then(Ur)}});return j0(i,t),i}function $0(t){return Array.prototype.concat.apply([],t)}function ba(t){const e=t.map(Ni);return[e.map(r=>r[0]),$0(e.map(r=>r[1]))]}const ku=new WeakMap;function Z0(t,e){return ku.set(t,e),t}function q0(t){return Object.assign(t,{[xu]:!0})}function V0(t,e=globalThis,r="*"){return{postMessage:(n,s)=>t.postMessage(n,r,s),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function Ni(t){for(const[e,r]of Eu)if(r.canHandle(t)){const[n,s]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},s]}return[{type:"RAW",value:t},ku.get(t)||[]]}function Ur(t){switch(t.type){case"HANDLER":return Eu.get(t.name).deserialize(t.value);case"RAW":return t.value}}function on(t,e,r,n){return new Promise(s=>{const i=K0();e.set(i,s),t.start&&t.start(),t.postMessage(Object.assign({id:i},r),n)})}function K0(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const W0={postMessage(){},addEventListener:()=>{},removeEventListener:()=>{}},H0={postMessage:t=>{window.ReactNativeWebView.postMessage(JSON.stringify(t))},addEventListener:(t,e,...r)=>{document.addEventListener("FarcasterFrameCallback",e,...r)},removeEventListener:(t,e)=>{document.removeEventListener("FarcasterFrameCallback",e)}},G0=typeof window>"u"?W0:window!=null&&window.ReactNativeWebView?H0:V0((window==null?void 0:window.parent)??window),ge=Bu(G0),To=M0(),J0=O0();function Y0({code:t,details:e}){switch(t){case 4001:return new gu;case 4100:return new yu;case 4200:return new wu;case 4900:return new vu;case 4901:return new bu;default:return new Yr(t,e??"Unknown provider RPC error")}}const $n=R0({...To,async request(t){const e=J0.prepare(t);try{const r=await ge.ethProviderRequestV2(e).then(n=>mu(n,{request:e,raw:!0}));if(r.error)throw Y0(r.error);return r.result}catch(r){if(r instanceof Error&&r.message.match(/cannot read property 'apply'/i))return await ge.ethProviderRequest(e);throw r instanceof Yr||r instanceof Lt?r:new vn({message:r instanceof Error?r.message:void 0})}}});async function X0(){try{const t=await ge.getCapabilities();return!t.includes("wallet.getEthereumProvider")&&!t.includes("wallet.getEvmProvider")?void 0:$n}catch{return $n}}function Mu(t){const e=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(t)});window.dispatchEvent(e);const r=()=>window.dispatchEvent(e);return window.addEventListener("eip6963:requestProvider",r),()=>window.removeEventListener("eip6963:requestProvider",r)}typeof document<"u"&&(document.addEventListener("eip6963:requestProvider",()=>{ge.eip6963RequestProvider()}),document.addEventListener("FarcasterFrameEthProviderEvent",t=>{if(t instanceof MessageEvent){const e=t.data;To.emit(e.event,...e.params)}}),document.addEventListener("FarcasterFrameEvent",t=>{if(t instanceof MessageEvent){const e=t.data;e.event==="eip6963:announceProvider"&&Mu({info:e.info,provider:$n})}}));typeof window<"u"&&(window.addEventListener("eip6963:requestProvider",()=>{ge.eip6963RequestProvider()}),window.addEventListener("message",t=>{if(t instanceof MessageEvent&&t.data.type==="frameEthProviderEvent"){const e=t.data;To.emit(e.event,...e.params)}}),window.addEventListener("message",t=>{if(t instanceof MessageEvent&&t.data.type==="frameEvent"){const e=t.data.event;e.event==="eip6963:announceProvider"&&Mu({info:e.info,provider:$n})}}));new TextEncoder;const Ru=new TextDecoder,Q0=t=>{const e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},ep=t=>{let e=t;e instanceof Uint8Array&&(e=Ru.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Q0(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},tp=ep;function rp(t){return typeof t=="object"&&t!==null}function np(t){if(!rp(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}class Ot extends Error{constructor(e,r){var n;super(e,r),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}Ot.code="ERR_JOSE_GENERIC";class ip extends Ot{constructor(e,r,n="unspecified",s="unspecified"){super(e,{cause:{claim:n,reason:s,payload:r}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=s,this.payload=r}}ip.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class sp extends Ot{constructor(e,r,n="unspecified",s="unspecified"){super(e,{cause:{claim:n,reason:s,payload:r}}),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=s,this.payload=r}}sp.code="ERR_JWT_EXPIRED";class op extends Ot{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}op.code="ERR_JOSE_ALG_NOT_ALLOWED";class ap extends Ot{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}ap.code="ERR_JOSE_NOT_SUPPORTED";class cp extends Ot{constructor(e="decryption operation failed",r){super(e,r),this.code="ERR_JWE_DECRYPTION_FAILED"}}cp.code="ERR_JWE_DECRYPTION_FAILED";class up extends Ot{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}up.code="ERR_JWE_INVALID";class fp extends Ot{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}fp.code="ERR_JWS_INVALID";class Er extends Ot{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}Er.code="ERR_JWT_INVALID";class lp extends Ot{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}lp.code="ERR_JWK_INVALID";class dp extends Ot{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}dp.code="ERR_JWKS_INVALID";class hp extends Ot{constructor(e="no applicable key found in the JSON Web Key Set",r){super(e,r),this.code="ERR_JWKS_NO_MATCHING_KEY"}}hp.code="ERR_JWKS_NO_MATCHING_KEY";class pp extends Ot{constructor(e="multiple matching keys found in the JSON Web Key Set",r){super(e,r),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}pp.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class mp extends Ot{constructor(e="request timed out",r){super(e,r),this.code="ERR_JWKS_TIMEOUT"}}mp.code="ERR_JWKS_TIMEOUT";class gp extends Ot{constructor(e="signature verification failed",r){super(e,r),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}gp.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";function yp(t){if(typeof t!="string")throw new Er("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:r}=t.split(".");if(r===5)throw new Er("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Er("Invalid JWT");if(!e)throw new Er("JWTs must contain a payload");let n;try{n=tp(e)}catch{throw new Er("Failed to base64url decode the payload")}let s;try{s=JSON.parse(Ru.decode(n))}catch{throw new Er("Failed to parse the decoded payload as JSON")}if(!np(s))throw new Er("Invalid JWT Claims Set");return s}function wp(t){return yp(t)}class Hi extends Error{constructor(e,r={}){const n=(()=>{var i;if(r.cause instanceof Hi){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:(i=r.cause)!=null&&i.message?r.cause.message:r.details})(),s=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n?["",n?`Details: ${n}`:void 0]:[]].filter(i=>typeof i=="string").join(`
`);super(s,r.cause?{cause:r.cause}:void 0),this.name="BaseError",this.cause=r.cause,this.details=n,this.shortMessage=e}}class Tu extends Hi{constructor({status:e}){super(`Request failed with status ${e}`),this.name="RequestFailedError"}}class vp extends Hi{constructor(e){super(e),this.name="InvalidToken"}}async function bp({origin:t}){const e=await fetch(`${t}/nonce`,{method:"POST"});if(!e.ok)throw new Tu({status:e.status});return await e.json()}async function xp({origin:t},e){const r=await fetch(`${t}/verify-siwf`,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!r.ok)throw new Tu({status:r.status});const n=await r.json();if(n.valid===!1)throw new vp(n.message??"unknown");return{token:n.token}}function _p(t={}){return{origin:t.origin??"https://auth.farcaster.xyz"}}function Ep(t={}){const e=_p(t);return{generateNonce:()=>bp(e),verifySiwf:r=>xp(e,r)}}const Sp=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Ap=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Bp(t){var k,A,I;const{scheme:e,statement:r,...n}=((k=t.match(Sp))==null?void 0:k.groups)??{},{chainId:s,expirationTime:i,issuedAt:a,notBefore:c,requestId:h,...v}=((A=t.match(Ap))==null?void 0:A.groups)??{},S=(I=t.split("Resources:")[1])==null?void 0:I.split(`
- `).slice(1);return{...n,...v,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...a?{issuedAt:new Date(a)}:{},...c?{notBefore:new Date(c)}:{},...h?{requestId:h}:{},...S?{resources:S}:{},...e?{scheme:e}:{},...r?{statement:r}:{}}}const xa=(()=>{let t,e;async function r(n){const s=Ep({origin:n.quickAuthServerOrigin}),{nonce:i}=await s.generateNonce(),a=await ge.signIn({nonce:i,acceptAuthAddress:!0});if(a.result){const c=Bp(a.result.message);if(!c.domain)throw new Error("Missing domain on SIWE message");const h=await s.verifySiwf({domain:c.domain,message:a.result.message,signature:a.result.signature});return t={token:h.token,payload:wp(h.token)},h}throw a.error.type==="rejected_by_user"?new Ba:new Error("Unreachable")}return{get token(){if(t&&new Date(t.payload.exp*1e3)>new Date(Date.now()+15e3))return t.token},async getToken(n={}){const s=n.force??!1;return t&&!s&&new Date(t.payload.exp*1e3)>new Date(Date.now()+15e3)?{token:t.token}:(e||(e=r(n)),e.finally(()=>{e=void 0}),e)},async fetch(n,s){const{token:i}=await this.getToken(),a=new Headers(s==null?void 0:s.headers);return a.set("Authorization",`Bearer ${i}`),fetch(n,{...s,headers:a})}}})();function Ip(){const t=new Wc;return{get eventNames(){return t.eventNames.bind(t)},get listenerCount(){return t.listenerCount.bind(t)},get listeners(){return t.listeners.bind(t)},addListener:t.addListener.bind(t),emit:t.emit.bind(t),off:t.off.bind(t),on:t.on.bind(t),once:t.once.bind(t),removeAllListeners:t.removeAllListeners.bind(t),removeListener:t.removeListener.bind(t)}}const At=Ip(),{solanaProviderRequest:_a}=ge;let Ou;_a&&(Ou=w0(b0(_a)));async function Ea(){let t;try{t=await ge.getCapabilities()}catch{}if(t!=null&&t.includes("wallet.getSolanaProvider"))return Ou}let Sa=null;async function kp(t=1e3){if(Sa===!0)return!0;if(typeof window>"u"||!window.ReactNativeWebView&&window===window.parent)return!1;const e=await Promise.race([ge.context.then(r=>!!r),new Promise(r=>{setTimeout(()=>r(!1),t)})]).catch(()=>!1);return e&&(Sa=!0),e}const Aa=async()=>{const t=await ge.addFrame();if(t.result)return t.result;throw t.error.type==="invalid_domain_manifest"?new Lu:t.error.type==="rejected_by_user"?new Nu:new Error("Unreachable")},Pp={...At,getCapabilities:ge.getCapabilities,getChains:ge.getChains,isInMiniApp:kp,context:ge.context,back:x0({miniAppHost:ge,emitter:At}),quickAuth:xa,actions:{setPrimaryButton:ge.setPrimaryButton.bind(ge),ready:async(t={})=>await ge.ready(t),close:ge.close.bind(ge),viewCast:ge.viewCast.bind(ge),viewProfile:ge.viewProfile.bind(ge),openMiniApp:ge.openMiniApp.bind(ge),signIn:async t=>{const e=await ge.signIn(t);if(e.result)return e.result;throw e.error.type==="rejected_by_user"?new Ba:new Error("Unreachable")},openUrl:t=>{const e=typeof t=="string"?t:t.url;return ge.openUrl(e.trim())},addFrame:Aa,addMiniApp:Aa,composeCast(t={}){return ge.composeCast(t)},viewToken:ge.viewToken.bind(ge),sendToken:ge.sendToken.bind(ge),swapToken:ge.swapToken.bind(ge),requestCameraAndMicrophoneAccess:ge.requestCameraAndMicrophoneAccess.bind(ge)},experimental:{getSolanaProvider:Ea,signManifest:async t=>{const e=await ge.signManifest(t);if(e.result)return e.result;throw e.error.type==="rejected_by_user"?new Fu:e.error.type==="invalid_domain"?new Pu:e.error.type==="generic_error"?new Du(e.error.message):new Error("Unreachable")},quickAuth(t){return xa.getToken(t)}},wallet:{ethProvider:$n,getEthereumProvider:X0,getSolanaProvider:Ea},haptics:{impactOccurred:ge.impactOccurred.bind(ge),notificationOccurred:ge.notificationOccurred.bind(ge),selectionChanged:ge.selectionChanged.bind(ge)}};typeof document<"u"&&document.addEventListener("FarcasterFrameEvent",t=>{if(t instanceof MessageEvent){const e=t.data;e.event==="primary_button_clicked"?At.emit("primaryButtonClicked"):e.event==="miniapp_added"?At.emit("miniAppAdded",{notificationDetails:e.notificationDetails}):e.event==="miniapp_add_rejected"?At.emit("miniAppAddRejected",{reason:e.reason}):e.event==="miniapp_removed"?At.emit("miniAppRemoved"):e.event==="notifications_enabled"?At.emit("notificationsEnabled",{notificationDetails:e.notificationDetails}):e.event==="notifications_disabled"?At.emit("notificationsDisabled"):e.event==="back_navigation_triggered"&&At.emit("backNavigationTriggered")}});typeof window<"u"&&window.addEventListener("message",t=>{if(t instanceof MessageEvent&&t.data.type==="frameEvent"){const e=t.data.event;e.event==="primary_button_clicked"?At.emit("primaryButtonClicked"):e.event==="miniapp_added"?At.emit("miniAppAdded",{notificationDetails:e.notificationDetails}):e.event==="miniapp_add_rejected"?At.emit("miniAppAddRejected",{reason:e.reason}):e.event==="miniapp_removed"?At.emit("miniAppRemoved"):e.event==="notifications_enabled"?At.emit("notificationsEnabled",{notificationDetails:e.notificationDetails}):e.event==="notifications_disabled"?At.emit("notificationsDisabled"):e.event==="back_navigation_triggered"&&At.emit("backNavigationTriggered")}});export{_f as actionLaunchFrameSchema,Ef as actionLaunchMiniAppSchema,Af as actionSchema,Sf as actionViewTokenSchema,bf as aspectRatioSchema,Bf as buttonSchema,Ua as buttonTitleSchema,yf as caip19TokenSchema,Zf as chains,xn as createSimpleStringSchema,w0 as createSolanaWalletProvider,Pp as default,Nf as descriptionSchema,Jo as domainMiniAppConfigSchema,vf as domainSchema,xf as encodedJsonFarcasterSignatureSchema,If as eventMiniAppAddedSchema,kf as eventMiniAppRemovedSchema,Mf as eventNotificationsEnabledSchema,eo as hexColorSchema,ge as miniAppHost,Tf as miniAppHostCapabilityList,Qs as miniAppNameSchema,$f as noindexSchema,Ca as notificationDetailsSchema,Rf as notificationsDisabledSchema,zf as ogDescriptionSchema,jf as ogTitleSchema,Of as primaryCategories,Uf as primaryCategorySchema,xa as quickAuth,Vf as requiredCapabilitiesSchema,qf as requiredChainsSchema,Ff as screenshotUrlsSchema,Pp as sdk,It as secureUrlSchema,Lf as subtitleSchema,Df as taglineSchema,Pf as tagsSchema,b0 as unwrapSolanaProviderRequest,Cf as versionSchema};
